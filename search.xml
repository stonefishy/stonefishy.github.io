<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Deploy User Friendly AI Interface Chatbot on Local by Using Ollama + Open-WebUI.</title>
      <link href="/2025/02/10/deploy-user-friendly-ai-interface-on-local-by-using-ollama-open-webui/"/>
      <url>/2025/02/10/deploy-user-friendly-ai-interface-on-local-by-using-ollama-open-webui/</url>
      
        <content type="html"><![CDATA[<p>In Previous blog, we talk about how to running <code>DeepSeek</code> large language model (LLM) on local machine by using Ollama. For installing Ollama, you can check the previous blog. We play it and chat on terminal. In this blog, we will talk about how to deploy user-friendly AI interface chatbot on local machine by using Ollama and Open-WebUI.</p><h2 id="What-is-Open-WebUI"><a href="#What-is-Open-WebUI" class="headerlink" title="What is Open-WebUI?"></a>What is Open-WebUI?</h2><p><code>Open WebUI</code> is an extensible, feature-rich, and user-friendly self-hosted AI platform designed to operate entirely offline. It supports various LLM runners like <code>Ollama</code> and <code>OpenAI-compatible APIs</code>, with built-in inference engine for RAG, making it a powerful AI deployment solution.</p><h2 id="Install-Ollama"><a href="#Install-Ollama" class="headerlink" title="Install Ollama"></a>Install Ollama</h2><p>To install the Ollama, you can download the <code>Ollama</code> from official website and follow the installation guide. Once installed, you can check the ollama version and commands using below commands in your terminal.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ollama --version</span><br><span class="line">ollama --<span class="built_in">help</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/ollama-version-commands.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/ollama-version-commands.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>For downloading the <code>LLM</code> model, using below command <code>ollama pull &lt;model_name&gt;</code>in your terminal.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama pull deepseek-r1:1.5b</span><br></pre></td></tr></table></figure><p>I already downloaded the <code>deepseek</code> and <code>gemma</code> models in my local machine. You can check the downloaded models using <code>ollama ls</code> command.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama <span class="built_in">ls</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/ollama-models-list.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/ollama-models-list.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="Set-up-Open-WebUI"><a href="#Set-up-Open-WebUI" class="headerlink" title="Set up Open-WebUI"></a>Set up Open-WebUI</h2><p>After you setup the Ollama, to set up Open-WebUI, there are multiple ways</p><h3 id="Docker-way"><a href="#Docker-way" class="headerlink" title="Docker way"></a>Docker way</h3><p>If you have installed <code>Docker</code> on your local, you can easily launch Open-WebUI using below command.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 3000:8080 --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main</span><br></pre></td></tr></table></figure><p>Once it done, access the Open-WebUI by using <code>http://localhost:3000</code> in your browser.</p><h3 id="Python-pip-way"><a href="#Python-pip-way" class="headerlink" title="Python pip way"></a>Python pip way</h3><p>The second way is to install Open-WebUI by using Python pip and launch it locally. It requires <code>Python 3.11</code> to avoid the compatibility issues.</p><p>Check Python version, ensure the version is 3.11 or above.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python --version</span><br></pre></td></tr></table></figure><p>Next, install Open-WebUI using pip.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install open-webui</span><br></pre></td></tr></table></figure><p>When you install Open-WebUI by using python pip command, if you local machine  Microsoft Visual C++ compiler version is lower than 14, you may encounter the below error.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Building wheels for collected packages: chroma-hnswlib</span><br><span class="line">  Building wheel for chroma-hnswlib (pyproject.toml) ... error</span><br><span class="line">  error: subprocess-exited-with-error</span><br><span class="line"></span><br><span class="line">  Ã— Building wheel for chroma-hnswlib (pyproject.toml) did not run successfully.</span><br><span class="line">  â”‚ exit code: 1</span><br><span class="line">  â•°â”€&gt; [5 lines of output]</span><br><span class="line">      running bdist_wheel</span><br><span class="line">      running build</span><br><span class="line">      running build_ext</span><br><span class="line">      building &#x27;hnswlib&#x27; extension</span><br><span class="line">      error: Microsoft Visual C++ 14.0 or greater is required. Get it with &quot;Microsoft C++ Build Tools&quot;: https://visualstudio.microsoft.com/visual-cpp-build-tools/</span><br><span class="line">      [end of output]</span><br><span class="line"></span><br><span class="line">  note: This error originates from a subprocess, and is likely not a problem with pip.</span><br><span class="line">  ERROR: Failed building wheel for chroma-hnswlib</span><br><span class="line">Failed to build chroma-hnswlib</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/open-webui-pip-install-error.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/open-webui-pip-install-error.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div>.<p>To fix this issue, you can install the latest version of C++ compiler and re-install the Open-WebUI. Download the Microsoft C++ Build Tools from the official website <a href="https://visualstudio.microsoft.com/visual-cpp-build-tools/">https://visualstudio.microsoft.com/visual-cpp-build-tools/</a>.</p><p>Install the <code>Desktop development with C++</code>.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/open-webui-pip-error-resolved.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/open-webui-pip-error-resolved.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>After the latest C++ compiler installed, re-install <code>Open-WebUI</code> again, once all completed, launch the Open-WebUI using below command.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open-webui serve</span><br></pre></td></tr></table></figure><p>This will start the Open WebUI server, which we can access at <a href="http://localhost:8080/">http://localhost:8080</a></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/open-webui-serve.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/open-webui-serve.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>Access the Open-WebUI by using <code>http://localhost:8080</code> in your browser. And create an admin account. Then you can start to use the <code>Open-WebUI</code>.<br>I have already installed some LLM models from <code>Ollama</code>, so we can see there are several models listed in the <code>Open-WebUI</code>.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/open-webui-models.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/open-webui-models.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="Have-Fun-with-Open-WebUI"><a href="#Have-Fun-with-Open-WebUI" class="headerlink" title="Have Fun with Open-WebUI"></a>Have Fun with Open-WebUI</h2><p>Letâ€™s try to use <code>Gemma</code> model and <code>DeepSeek</code> model to chat with Open-WebUI.</p><h3 id="Using-Gemma-model"><a href="#Using-Gemma-model" class="headerlink" title="Using Gemma model"></a>Using Gemma model</h3><p>To use the <code>Gemma</code> model, select the <code>Gemma</code> model from the <code>Models</code> dropdown list and start to chat with the chatbot. Letâ€™s use the <code>gemma:2b</code> model to chat.<br>If the model is not listed, using <code>Ollama</code> to download the model first.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/open-webui-gemma-model.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/open-webui-gemma-model.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="Using-DeepSeek-model"><a href="#Using-DeepSeek-model" class="headerlink" title="Using DeepSeek model"></a>Using DeepSeek model</h3><p>To use the <code>DeepSeek</code> model, select the <code>DeepSeek</code> model from the <code>Models</code> dropdown list and start to chat with the chatbot. Letâ€™s use the <code>deepseek-r1:1.5b</code> model to chat.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/open-webui-deepseek-model.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/open-webui-deepseek-model.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>We can see the results of the <code>gemma:2b</code> model and the <code>deepseek-r1:1.5b</code> model are different. The <code>gemma:2b</code> model is just decreased in quality, however, the <code>deepseek-r1:1.5b</code> model is more accurate. It takes some time to deep thinking, and answer it carefully.</p><p>In <code>DeepSeek</code> model, we can see the thinking process of the deepseek model. It is a good way to understand how the deepseek thinking.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/open-webui-deepseek-thinking.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/open-webui-deepseek-thinking.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In this blog, we have talked about how to deploy user-friendly AI interface chatbot on local machine by using Ollama and Open-WebUI. We have also used the <code>Gemma</code> and <code>DeepSeek</code> models to chat with the chatbot. We can see the results of the <code>gemma:2b</code> model and the <code>deepseek-r1:1.5b</code> model are different. The <code>gemma:2b</code> model is just decreased in quality, however, the <code>deepseek-r1:1.5b</code> model is more accurate. It takes some time to deep thinking, and answer it carefully.</p><p>Hope you like it. have fun to use <code>Open-WebUI</code>.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Chatbot </tag>
            
            <tag> Ollama </tag>
            
            <tag> DeepSeek </tag>
            
            <tag> Gemma </tag>
            
            <tag> Open-WebUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Running DeepSeek-R1 locally for free</title>
      <link href="/2025/02/07/running-deepseek-r1-locally-for-free/"/>
      <url>/2025/02/07/running-deepseek-r1-locally-for-free/</url>
      
        <content type="html"><![CDATA[<div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/deepseek-logo.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/deepseek-logo.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:800px;"/></div></div><p>The <code>DeepSeek</code> recently is very popular. The application download is on topest of the app store globally. The deepseek has several models, like <code>deepseek-r1</code>, <code>deepseek-coder</code> and <code>deepseek-v3</code> models etc. Itâ€™s all open source and free to use.</p><ul><li><code>deepseek-r1</code>: DeepSeekâ€™s first-generation of reasoning models with comparable performance to OpenAI-o1, including six dense models distilled from DeepSeek-R1 based on Llama and Qwen.</li><li><code>deepseek-coder</code>: It is a capable coding model trained on two trillion code and natural language tokens.</li><li><code>deepseek-v3</code>: A strong Mixture-of-Experts (MoE) language model with 671B total parameters with 37B activated for each token.</li></ul><p>Here we will run the <code>deepseek-r1</code> model locally. Itâ€™s very easy and setup it quickly. Letâ€™s get started.</p><h2 id="Ollama-download-and-installation"><a href="#Ollama-download-and-installation" class="headerlink" title="Ollama download and installation"></a>Ollama download and installation</h2><p>The first step is to download the <code>Ollama</code> and install it on your local machine. It supports Windows, Linux and MacOS. You can download the latest version from the official website. <a href="https://ollama.com/">https://ollama.com/</a></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/ollama.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/ollama.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Ollama" style="width:600px;"/></div><span class="image-caption">Ollama</span></div><p>After download and install it, you can check the version or commands from terminal or command-line.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Check the version of Ollama</span></span><br><span class="line">ollama --version</span><br><span class="line"></span><br><span class="line"><span class="comment">## Check the commands of Ollama</span></span><br><span class="line">ollama --<span class="built_in">help</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/ollama-version-commands.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/ollama-version-commands.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Ollama version and commands"/></div><span class="image-caption">Ollama version and commands</span></div><h2 id="Running-the-deepseek-r1-model"><a href="#Running-the-deepseek-r1-model" class="headerlink" title="Running the deepseek-r1 model"></a>Running the deepseek-r1 model</h2><p>Now, we can run the <code>deepseek-r1</code> model using Ollama. We need to download this model by using ollama. The <code>deepseek-r1</code> model contains serveral models, 1.5b, 7b, 8b, 14b, 32b, 70b and even 671b. For general computer performance, suggestion to use 1.5b model. I tried the 8b model on my local. It can run but the response is slowlly and memory is up to 90%. The 1.5b model running smoothly and response is fast. My local machine has 16GB RAM and i7 processor.</p><p>We can use the following command to download the <code>deepseek-r1</code> model.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama pull deepseek-r1:1.5b</span><br></pre></td></tr></table></figure><p>we also can run this model directly, if the model not exist, it will download automatically.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama run deepseek-r1:1.5b</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/ollama-run-deepseek-r1.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/ollama-run-deepseek-r1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Ollama run deepseek-r1"/></div><span class="image-caption">Ollama run deepseek-r1</span></div><h2 id="Ask-anything-in-deepseek"><a href="#Ask-anything-in-deepseek" class="headerlink" title="Ask anything in deepseek"></a>Ask anything in deepseek</h2><p>Now, we can ask anything in deepseek. Just type the question and press enter. The model will answer the question. See below screenshot</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/ollama-deepseek-answer-1.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/ollama-deepseek-answer-1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="DeepSeek-R1 Answer"/></div><span class="image-caption">DeepSeek-R1 Answer</span></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/ollama-deepseek-answer-2.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/ollama-deepseek-answer-2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="DeepSeek-R1 Answer"/></div><span class="image-caption">DeepSeek-R1 Answer</span></div><p>See, itâ€™s easy to run the <code>deepseek-r1</code> model locally. You can also run other models like <code>deepseek-coder</code> and <code>deepseek-v3</code> models, or <code>llama</code> model. The <code>Ollama</code> models contains many open source models, you can use it for free.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Ollama </tag>
            
            <tag> DeepSeek </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A RAG Chatbot base on Azure OpenAI</title>
      <link href="/2025/01/23/rag-chatbot-base-on-azure-openai/"/>
      <url>/2025/01/23/rag-chatbot-base-on-azure-openai/</url>
      
        <content type="html"><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>In this article, we will build a <code>RAG (Retrieval-Augmented Generation)</code> chatbot using Azure OpenAIâ€™s GPT-4 language model. We will use <code>Python</code>, <code>LangChain</code> and the <code>Streamlit</code> library to build the chatbot interface. Vector store will use <code>FAISS</code> library to store the text chunks and metadata.</p><h2 id="What-is-RAG"><a href="#What-is-RAG" class="headerlink" title="What is RAG?"></a>What is RAG?</h2><p><code>RAG</code> is a technique that combines retrieval-based methods with generative models to enhance the quality and relevance of the information produced by AI systems. Hereâ€™s a breakdown of the two components:</p><ol><li><p><strong>Retrieval</strong>: The model first retrieves relevant documents, text, or data from a knowledge base, database, or external source using information retrieval techniques. This allows the model to access specialized or domain-specific knowledge, which it might not have inherently learned during training.</p></li><li><p><strong>Generation</strong>: After retrieving relevant information, the model then uses a generative language model (like GPT-3 or GPT-4) to create a response that is coherent, contextually appropriate, and informed by the retrieved content. This allows the AI to answer questions, generate text, or assist in decision-making with enhanced accuracy and knowledge.</p></li></ol><h2 id="Technical-Stack"><a href="#Technical-Stack" class="headerlink" title="Technical Stack"></a>Technical Stack</h2><p>To build the chatbot, we will use the following techiniques:</p><ul><li><strong>Azure OpenAI GPT-4</strong>: We will use the GPT-4 language model from Azure OpenAI to generate responses. GPT-4 is a transformer-based language model that is capable of generating coherent and diverse text.</li><li><strong>LangChain</strong>: LangChain is a Python library that allows us to use the GPT-4 model from Azure OpenAI in our chatbot. LangChain provides a simple interface for building chatbots using GPT-4.</li><li><strong>Streamlit</strong>: We will use Streamlit to build the chatbot interface. Streamlit is a framework for building web applications in Python. It allows us to create a user-friendly interface for our chatbot.</li><li><strong>FAISS</strong>: FAISS (Facebook AI Similarity Search) is an open-source library developed by Facebook AI Research. Itâ€™s designed for efficient similarity search and clustering of high-dimensional data, such as vectors. The primary use case for FAISS is in applications where you need to search for the most similar items to a given query item in large datasets of vectors</li></ul><h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>Before we start, make sure you have the following prerequisites:</p><ul><li>An Azure account</li><li>Python 3.6 or higher</li><li>An IDE or text editor</li><li>A knowledge base or dataset of relevant information</li></ul><h2 id="Setting-up-the-Environment"><a href="#Setting-up-the-Environment" class="headerlink" title="Setting up the Environment"></a>Setting up the Environment</h2><p>To set up the environment, we will need to install the following important libraries:</p><ul><li>LangChain</li><li>Streamlit</li><li>Azure OpenAI GPT-4</li></ul><p>And also include the <code>FAISS</code> and <code>PyPDF2</code> libraries. The <code>FAISS</code> library is used for efficient similarity search, and the <code>PyPDF2</code> library is used to extract text from PDF files.</p><p>Below is the entire python libraries:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">streamlit==1.40.0</span><br><span class="line">PyPDF2==3.0.1</span><br><span class="line">faiss-cpu==1.9.0</span><br><span class="line">openai==1.59.6</span><br><span class="line">tiktoken==0.8.0</span><br><span class="line">langchain==0.3.14</span><br><span class="line">langchain-community==0.3.14</span><br><span class="line">langchain-core==0.3.29</span><br><span class="line">langchain-openai==0.3.0</span><br><span class="line">langchain-text-splitters==0.3.5</span><br></pre></td></tr></table></figure><h2 id="Process-PDFs"><a href="#Process-PDFs" class="headerlink" title="Process PDFs"></a>Process PDFs</h2><p>Here we will read the PDF files and extract the text from them. We will use the <code>PyPDF2</code> library to extract the text from the PDF files. And then save it into local vector store which can be used for similarity search by FAISS. The entire code is below:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">from</span> PyPDF2 <span class="keyword">import</span> PdfReader</span><br><span class="line"><span class="keyword">from</span> langchain.text_splitter <span class="keyword">import</span> RecursiveCharacterTextSplitter</span><br><span class="line"><span class="keyword">from</span> langchain_community.vectorstores <span class="keyword">import</span> FAISS</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> AzureOpenAIEmbeddings</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"><span class="keyword">import</span> config</span><br><span class="line"></span><br><span class="line">load_dotenv()</span><br><span class="line"></span><br><span class="line">azure_endpoint = os.getenv(<span class="string">&quot;AZURE_OPENAI_ENDPOINT&quot;</span>)</span><br><span class="line">api_version = os.getenv(<span class="string">&quot;AZURE_OPENAI_API_VERSION&quot;</span>)</span><br><span class="line">api_key = os.getenv(<span class="string">&quot;OPENAI_API_KEY&quot;</span>)</span><br><span class="line">embedding_deployment = os.getenv(<span class="string">&quot;AZURE_OPENAI_EMBEDDING_DEPLOYMENT&quot;</span>)</span><br><span class="line">chat_deployment = os.getenv(<span class="string">&quot;AZURE_OPENAI_CHAT_DEPLOYMENT&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">embeddings</span>():</span><br><span class="line">    <span class="comment"># generating embedding</span></span><br><span class="line">    <span class="keyword">return</span> AzureOpenAIEmbeddings(</span><br><span class="line">        azure_deployment=embedding_deployment,</span><br><span class="line">        api_version=api_version,</span><br><span class="line">        api_key=api_key,</span><br><span class="line">        azure_endpoint=azure_endpoint)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_all_files</span>(<span class="params">directory</span>):</span><br><span class="line">    path = Path(os.path.join(os.getcwd(), directory))</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> path.exists():</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">f&quot;Directory <span class="subst">&#123;path.absolute()&#125;</span> does not exist&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">str</span>(file) <span class="keyword">for</span> file <span class="keyword">in</span> path.rglob(<span class="string">&quot;*&quot;</span>) <span class="keyword">if</span> file.is_file()]</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process_pdfs</span>(<span class="params">pdfs_directory, vector_store_folder_path, vector_store_index_name</span>):</span><br><span class="line">    pdf_files = get_all_files(pdfs_directory)</span><br><span class="line">    text = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> pdf_file <span class="keyword">in</span> pdf_files:</span><br><span class="line">        <span class="comment"># Read pdf file</span></span><br><span class="line">        pdf_reader = PdfReader(pdf_file)</span><br><span class="line">        <span class="keyword">for</span> page <span class="keyword">in</span> pdf_reader.pages:</span><br><span class="line">            text += page.extract_text()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Break it into chunks</span></span><br><span class="line">    text_splitter = RecursiveCharacterTextSplitter(</span><br><span class="line">        separators=<span class="string">&quot;\n&quot;</span>,</span><br><span class="line">        chunk_size=<span class="number">1000</span>,</span><br><span class="line">        chunk_overlap=<span class="number">150</span>,</span><br><span class="line">        length_function=<span class="built_in">len</span></span><br><span class="line">    )</span><br><span class="line">    chunks = text_splitter.split_text(text)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Creating vector store - FAISS</span></span><br><span class="line">    vector_store = FAISS.from_texts(chunks, embeddings())</span><br><span class="line">    vector_store.save_local(vector_store_folder_path, vector_store_index_name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Processed PDF documents to vector store path `<span class="subst">&#123;vector_store_folder_path&#125;</span>`&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    process_pdfs(config.pdfs_directory, config.vector_store_folder_path, config.vector_store_index_name)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>In above code, we are reading the PDF files and extracting the text from them. We are using the <code>RecursiveCharacterTextSplitter</code> to break the text into chunks of 1000 characters with 150 characters overlap. And then using the <code>FAISS</code> library to create a vector store of the text chunks. The vector store is saved in the local file system. The vector store files contains two files (<code>*.faiss</code> and <code>*.pkl</code>) which can be used for similarity search.</p><p>The <code>*.faiss</code> file contains the vector representation of the text chunks. The <code>*.pkl</code> file contains the metadata of the text chunks.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/rag-chatbot-vector-store.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/rag-chatbot-vector-store.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="RAG Chatbot Vector Store"/></div><span class="image-caption">RAG Chatbot Vector Store</span></div><p>You may noticing that we are using the <code>dotenv</code> library to load the environment variables. You can create a <code>.env</code> file in the root directory of your project and add the following variables:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AZURE_OPENAI_ENDPOINT=&lt;your_endpoint_url&gt;</span><br><span class="line">AZURE_OPENAI_API_VERSION=&lt;your_api_version&gt;</span><br><span class="line">OPENAI_API_KEY=&lt;your_api_key?</span><br><span class="line">AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-4o # we are using gpt-4o model, you can use any other model which you deployed in your endpoint.</span><br><span class="line">AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002 # we are using text-embedding-ada-002 model.</span><br></pre></td></tr></table></figure><h2 id="Building-the-Chatbot"><a href="#Building-the-Chatbot" class="headerlink" title="Building the Chatbot"></a>Building the Chatbot</h2><p>After we have processed the PDF files and created the vector store, we can now build the chatbot using LangChain.</p><p>First, we will create a <code>LangChain</code> instance and load the vector store. Using <code>FAISS.load_local</code> method, we can load the vector store from the local file system with the same embeddings model.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">embeddings</span>():</span><br><span class="line">    <span class="comment"># generating embedding</span></span><br><span class="line">    <span class="keyword">return</span> AzureOpenAIEmbeddings(</span><br><span class="line">        azure_deployment=embedding_deployment,</span><br><span class="line">        api_version=api_version,</span><br><span class="line">        api_key=api_key,</span><br><span class="line">        azure_endpoint=azure_endpoint)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_vector_store</span>(<span class="params">vector_store_folder_path, vectore_store_name</span>):</span><br><span class="line">    vector_store = FAISS.load_local(</span><br><span class="line">        folder_path=vector_store_folder_path, </span><br><span class="line">        embeddings=embeddings(), </span><br><span class="line">        index_name=vectore_store_name,</span><br><span class="line">        allow_dangerous_deserialization=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> vector_store </span><br></pre></td></tr></table></figure><p>Then, we will create a <code>AzureChatOpenAI</code> instance and load the chatbot model. We will use the <code>AzureChatOpenAI</code> class to interact with the GPT-4 model from Azure OpenAI. Using <code>load_qa_chain</code> method which is provided by <code>LangChain</code>, we can load the chatbot model from the Azure OpenAI.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">generateChain</span>():</span><br><span class="line">    llm =  AzureChatOpenAI(</span><br><span class="line">        azure_endpoint=azure_endpoint,</span><br><span class="line">        api_key=api_key,</span><br><span class="line">        api_version=api_version,</span><br><span class="line">        azure_deployment=chat_deployment,</span><br><span class="line">        temperature=<span class="number">0</span>,</span><br><span class="line">        max_tokens=<span class="number">1000</span>,</span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># chain -&gt; take the question, get relevant document, pass it to the LLM, generate the output</span></span><br><span class="line">    chain = load_qa_chain(llm, chain_type=<span class="string">&quot;stuff&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> chain</span><br></pre></td></tr></table></figure><p>After the chain and the vector store are loaded, we can use FAISS vector store to similarity search the user input and retrieve the most relevant document. Passing the retrieved document to the LangChain chain which loads the AzureChatOpenAI to generate the response. Below is core code:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vector_store = load_vector_store(config.vector_store_folder_path, config.vector_store_index_name)</span><br><span class="line">chain = generateChain()</span><br><span class="line">match_documents = vector_store.similarity_search(prompt)</span><br><span class="line">response = chain.run(input_documents = match_documents, question = prompt)</span><br></pre></td></tr></table></figure><p>The <code>chain.run</code> method takes the input documents and the question as input and returns the generated response. The <code>match_documents</code> variable contains the most relevant documents retrieved from the vector store. The <code>response</code> variable contains the generated response from the chatbot.</p><p>Finally, we will create a Streamlit interface to interact with the chatbot. We will use the <code>streamlit</code> library to create a user-friendly interface for our chatbot. For the <code>streamlit</code> library usage, you can refer to the official documentation. <a href="https://docs.streamlit.io/">https://docs.streamlit.io/</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    st.set_page_config(</span><br><span class="line">        page_title=<span class="string">&quot;JBL Products Chatbot&quot;</span>,</span><br><span class="line">        page_icon=<span class="string">&quot;ðŸ§Š&quot;</span>,</span><br><span class="line">        layout=<span class="string">&quot;centered&quot;</span>,</span><br><span class="line">        initial_sidebar_state=<span class="string">&quot;expanded&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    st.header(<span class="string">&quot;JBL Products Chatbot&quot;</span>)</span><br><span class="line">    vector_store = load_vector_store(config.vector_store_folder_path, config.vector_store_index_name)</span><br><span class="line">    chain = generateChain()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> st.chat_message(<span class="string">&quot;assistant&quot;</span>):</span><br><span class="line">        st.markdown(<span class="string">&quot;Ask me anything about JBL devices (JBL Pulse 5, JBL Clip 5, JBL Bar 500)&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;messages&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> st.session_state:</span><br><span class="line">        st.session_state.messages = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> message <span class="keyword">in</span> st.session_state.messages:</span><br><span class="line">        <span class="keyword">with</span> st.chat_message(message[<span class="string">&quot;role&quot;</span>]):</span><br><span class="line">            st.markdown(message[<span class="string">&quot;content&quot;</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> prompt := st.chat_input(<span class="string">&quot;Ask me something&quot;</span>):</span><br><span class="line">        st.chat_message(<span class="string">&quot;user&quot;</span>).markdown(prompt)</span><br><span class="line">        st.session_state.messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: prompt&#125;)</span><br><span class="line"></span><br><span class="line">        response = <span class="string">&quot;I am thinking...&quot;</span></span><br><span class="line">        <span class="keyword">with</span> st.spinner(response):</span><br><span class="line">            match_documents = vector_store.similarity_search(prompt)</span><br><span class="line">            response = chain.run(input_documents = match_documents, question = prompt)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> st.chat_message(<span class="string">&quot;assistant&quot;</span>):</span><br><span class="line">            st.write_stream(generate_stream(response))</span><br><span class="line">        st.session_state.messages.append(&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;assistant&quot;</span>, <span class="string">&quot;content&quot;</span>: response&#125;)</span><br></pre></td></tr></table></figure><p>In above code, we are using the <code>st.chat_message</code> method to create a chat message with a specific role, using the <code>st.chat_input</code> method to get the user input. And using the <code>st.spinner</code> method to show a loading spinner while the chatbot is generating the response. Finally using the <code>st.write_stream</code> method to write the response to the chat message.</p><p>For the stream response, actually we mock it by using the <code>generate_stream</code> method. This method is used to generate the stream response. We can use the <code>st.write_stream</code> method to write the stream response to the chat message. This will let the chatbot to print word one by one in the chat message.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">generate_stream</span>(<span class="params">response</span>):</span><br><span class="line">    <span class="comment"># generate the stream of messages</span></span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> response.split(<span class="string">&quot; &quot;</span>):</span><br><span class="line">        <span class="keyword">yield</span> word + <span class="string">&quot; &quot;</span></span><br><span class="line">        time.sleep(<span class="number">0.05</span>)</span><br></pre></td></tr></table></figure><p>Below is chatbot conversational interface:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/rag-chatbot-streamlit-interface.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/rag-chatbot-streamlit-interface.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="RAG Chatbot Streamlit Interface"/></div><span class="image-caption">RAG Chatbot Streamlit Interface</span></div><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In this article, we have built a <code>RAG (Retrieval-Augmented Generation)</code> chatbot using Azure OpenAIâ€™s GPT-4 language model. We have used Python, LangChain and the Streamlit library to build the chatbot interface. We have also processed the PDF files and created the vector store using FAISS library. The pdf files is crawled from the website <a href="https://www.manua.ls/">https://www.manua.ls</a></p><p>For the entire code, you can refer to the Github repository: <a href="https://github.com/stonefishy/rag-chatbot">https://github.com/stonefishy/rag-chatbot</a>. Please donâ€™t forget to star the repository if you find it useful. Thank you for reading.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Python </tag>
            
            <tag> OpenAI </tag>
            
            <tag> LangChain </tag>
            
            <tag> Chatbot </tag>
            
            <tag> Streamlit </tag>
            
            <tag> FAISS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to use Paho MQTT Client Lib in Python3</title>
      <link href="/2025/01/06/how-to-use-paho-mqtt-client-lib-in-python3/"/>
      <url>/2025/01/06/how-to-use-paho-mqtt-client-lib-in-python3/</url>
      
        <content type="html"><![CDATA[<p>The <code>Paho MQTT client</code> library for Python is a popular choice for building MQTT applications in Python. Hereâ€™s how to use it in Python3. <code>Paho MQTT Client</code> provides a simple and easy-to-use API for publishing and subscribing to MQTT topics. It supports MQTT 5.0, 3.1.1, and 3.1 protocols.</p><h2 id="Install-Paho-MQTT-Client"><a href="#Install-Paho-MQTT-Client" class="headerlink" title="Install Paho MQTT Client"></a>Install Paho MQTT Client</h2><p>To install <code>Paho MQTT Client</code> library, you can use the following command:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install paho-mqtt</span><br></pre></td></tr></table></figure><h2 id="Prepare-the-MQTT-Broker"><a href="#Prepare-the-MQTT-Broker" class="headerlink" title="Prepare the MQTT Broker"></a>Prepare the MQTT Broker</h2><p>Before using the <code>Paho MQTT Client</code> library, we need to prepare the MQTT broker. We can use any MQTT broker that supports the MQTT 5.0, 3.1.1, or 3.1 protocols. Here we use the public free MQTT broker: <code>EMQX</code>, below is broker information.</p><blockquote><p>Serverï¼šbroker.emqx.io<br>TCP Portï¼š1883<br>WebSocket Portï¼š8083<br>SSL&#x2F;TLS Portï¼š8883<br>Secure WebSocket Portï¼š8084</p></blockquote><h2 id="Import-Paho-MQTT-Client"><a href="#Import-Paho-MQTT-Client" class="headerlink" title="Import Paho MQTT Client"></a>Import Paho MQTT Client</h2><p>To use the <code>Paho MQTT Client</code> library in the Python code, need to import it first.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> paho.mqtt <span class="keyword">import</span> client <span class="keyword">as</span> mqtt_client</span><br></pre></td></tr></table></figure><h2 id="Create-a-MQTT-Connection"><a href="#Create-a-MQTT-Connection" class="headerlink" title="Create a MQTT Connection"></a>Create a MQTT Connection</h2><p>Before create a MQTT connection, specify the MQTT client id, MQTT broker address, port and mesage topic. We can use the python <code>random.randint()</code> function to generate a random client id.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">broker = <span class="string">&quot;broker.emqx.io&quot;</span></span><br><span class="line">port = <span class="number">1883</span></span><br><span class="line">topic = <span class="string">&quot;paho/mqtt/test&quot;</span></span><br><span class="line">client_id = <span class="string">f&quot;client_<span class="subst">&#123;random.randint(<span class="number">0</span>, <span class="number">1000</span>)&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><p>Next, we need to write the <code>on_connect</code> callback function in order to connect to the proxy. This function is called after the client successfully connects, we can use the <code>rc</code> parameter to check the connection status. Typically, we also create a client object that is also connected to â€œbroker.emqx.ioâ€.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">connect_mqtt</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">on_connect</span>(<span class="params">client, userdata, flags, reason_code, properties</span>):</span><br><span class="line">        <span class="keyword">if</span> reason_code == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Connected to MQTT Broker!&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Failed to connect, return code %d\n&quot;</span>, reason_code)</span><br><span class="line">    client = mqtt_client.Client(client_id=client_id, callback_api_version=mqtt_client.CallbackAPIVersion.VERSION2)</span><br><span class="line"></span><br><span class="line">    client.on_connect = on_connect</span><br><span class="line">    client.connect(broker, port)</span><br><span class="line">    <span class="keyword">return</span> client</span><br></pre></td></tr></table></figure><p>When execute the <code>connect_mqtt()</code> function, it will return a <code>Client</code> instance that is connected to the MQTT broker, and printed the connection status.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/mqtt/mqtt-connected.png" class="lazyload placeholder" data-srcset="/assets/images/mqtt/mqtt-connected.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="MQTT Connected to Broker"/></div><span class="image-caption">MQTT Connected to Broker</span></div><h2 id="Publish-Messages-to-MQTT-Topics"><a href="#Publish-Messages-to-MQTT-Topics" class="headerlink" title="Publish Messages to MQTT Topics"></a>Publish Messages to MQTT Topics</h2><p>publish messages to MQTT topics, letâ€™s create a <code>publish()</code> function that will publish a message to the specified topic every second. Using <code>client.publish()</code> method, we can publish a message to the specified topic.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">publish</span>(<span class="params">client</span>):</span><br><span class="line">    msg_count = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        msg = <span class="string">f&quot;messages: test <span class="subst">&#123;msg_count&#125;</span>&quot;</span></span><br><span class="line">        result = client.publish(topic, msg)</span><br><span class="line">        status = result[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> status == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Send `<span class="subst">&#123;msg&#125;</span>` to topic `<span class="subst">&#123;topic&#125;</span>`&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Failed to send message to topic <span class="subst">&#123;topic&#125;</span>&quot;</span>)</span><br><span class="line">        msg_count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> msg_count &gt; <span class="number">5</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/mqtt/mqtt-publish.png" class="lazyload placeholder" data-srcset="/assets/images/mqtt/mqtt-publish.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="MQTT Publish Message"/></div><span class="image-caption">MQTT Publish Message</span></div><h2 id="Subscribe-to-MQTT-Topics"><a href="#Subscribe-to-MQTT-Topics" class="headerlink" title="Subscribe to MQTT Topics"></a>Subscribe to MQTT Topics</h2><p>To subscribe to MQTT topics, we can call the <code>subscribe()</code> method of the <code>Client</code> instance. We can define a callback function that will be called when a message is received on a subscribed topic. The callback function <code>on_message()</code> will be called when a message is received on the subscribed topic.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">subscribe</span>(<span class="params">client: mqtt_client</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">on_message</span>(<span class="params">client, userdata, msg</span>):</span><br><span class="line">        <span class="built_in">print</span>(msg)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Received `<span class="subst">&#123;msg.payload.decode()&#125;</span>` which sent by `<span class="subst">&#123;client._client_id&#125;</span>` from `<span class="subst">&#123;msg.topic&#125;</span>` topic&quot;</span>)</span><br><span class="line"></span><br><span class="line">    client.subscribe(topic)</span><br><span class="line">    client.on_message = on_message</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/mqtt/mqtt-subscribe.png" class="lazyload placeholder" data-srcset="/assets/images/mqtt/mqtt-subscribe.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="MQTT Subscribe Message"/></div><span class="image-caption">MQTT Subscribe Message</span></div><h2 id="Run-the-MQTT-Client"><a href="#Run-the-MQTT-Client" class="headerlink" title="Run the MQTT Client"></a>Run the MQTT Client</h2><p>To run the MQTT client, we can use <code>loop_start()</code> method to run the client in a separate thread, <code>loop_stop()</code> method to stop the client loop. We also can call the <code>loop_forever()</code> method of the <code>Client</code> instance. This method will block the current thread and run the client indefinitely. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">client.loop_start() <span class="comment"># start the client loop</span></span><br><span class="line">client.loop_stop() <span class="comment"># stop the client loop</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">client.loop_forever() <span class="comment"># block the current thread and run the client indefinitely</span></span><br></pre></td></tr></table></figure><h2 id="Full-Code"><a href="#Full-Code" class="headerlink" title="Full Code"></a>Full Code</h2><p>Hereâ€™s the full code that uses the <code>Paho MQTT Client</code> library to connect to the MQTT broker, publish messages to a topic, and subscribe to a topic.</p><h3 id="client1-py"><a href="#client1-py" class="headerlink" title="client1.py"></a>client1.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> paho.mqtt <span class="keyword">import</span> client <span class="keyword">as</span> mqtt_client</span><br><span class="line"></span><br><span class="line">broker = <span class="string">&quot;broker.emqx.io&quot;</span></span><br><span class="line">port = <span class="number">1883</span></span><br><span class="line">topic = <span class="string">&quot;paho/mqtt/test&quot;</span></span><br><span class="line">client_id = <span class="string">f&quot;client_<span class="subst">&#123;random.randint(<span class="number">0</span>, <span class="number">1000</span>)&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">connect_mqtt</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">on_connect</span>(<span class="params">client, userdata, flags, reason_code, properties</span>):</span><br><span class="line">        <span class="keyword">if</span> reason_code == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Connected to MQTT Broker!&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Failed to connect, return code %d\n&quot;</span>, reason_code)</span><br><span class="line">    client = mqtt_client.Client(client_id=client_id, callback_api_version=mqtt_client.CallbackAPIVersion.VERSION2)</span><br><span class="line"></span><br><span class="line">    client.on_connect = on_connect</span><br><span class="line">    client.connect(broker, port)</span><br><span class="line">    <span class="keyword">return</span> client</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">publish</span>(<span class="params">client</span>):</span><br><span class="line">    msg_count = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        msg = <span class="string">f&quot;messages: test <span class="subst">&#123;msg_count&#125;</span>&quot;</span></span><br><span class="line">        result = client.publish(topic, msg)</span><br><span class="line">        status = result[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> status == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Send `<span class="subst">&#123;msg&#125;</span>` to topic `<span class="subst">&#123;topic&#125;</span>`&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Failed to send message to topic <span class="subst">&#123;topic&#125;</span>&quot;</span>)</span><br><span class="line">        msg_count += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> msg_count &gt; <span class="number">5</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    client = connect_mqtt()</span><br><span class="line">    client.loop_start()</span><br><span class="line">    publish(client)</span><br><span class="line">    client.loop_stop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="client2-py"><a href="#client2-py" class="headerlink" title="client2.py"></a>client2.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> paho.mqtt <span class="keyword">import</span> client <span class="keyword">as</span> mqtt_client</span><br><span class="line"></span><br><span class="line">broker = <span class="string">&quot;broker.emqx.io&quot;</span></span><br><span class="line">port = <span class="number">1883</span></span><br><span class="line">topic = <span class="string">&quot;paho/mqtt/test&quot;</span></span><br><span class="line">client_id = <span class="string">f&quot;client_<span class="subst">&#123;random.randint(<span class="number">0</span>, <span class="number">1000</span>)&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">connect_mqtt</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">on_connect</span>(<span class="params">client, userdata, flags, reason_code, properties</span>):</span><br><span class="line">        <span class="keyword">if</span> reason_code == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Connected to MQTT Broker!&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Failed to connect, return code %d\n&quot;</span>, reason_code)</span><br><span class="line">    client = mqtt_client.Client(client_id=client_id, callback_api_version=mqtt_client.CallbackAPIVersion.VERSION2)</span><br><span class="line"></span><br><span class="line">    client.on_connect = on_connect</span><br><span class="line">    client.connect(broker, port)</span><br><span class="line">    <span class="keyword">return</span> client</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">subscribe</span>(<span class="params">client: mqtt_client</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">on_message</span>(<span class="params">client, userdata, msg</span>):</span><br><span class="line">        <span class="built_in">print</span>(msg)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Received `<span class="subst">&#123;msg.payload.decode()&#125;</span>` which sent by `<span class="subst">&#123;client._client_id&#125;</span>` from `<span class="subst">&#123;msg.topic&#125;</span>` topic&quot;</span>)</span><br><span class="line"></span><br><span class="line">    client.subscribe(topic)</span><br><span class="line">    client.on_message = on_message</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run</span>():</span><br><span class="line">    client = connect_mqtt()</span><br><span class="line">    subscribe(client)</span><br><span class="line">    client.loop_forever()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure><p>Thatâ€™s it! You can now use the <code>Paho MQTT Client</code> library to build MQTT applications in Python3.</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> MQTT </tag>
            
            <tag> IoT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Ultimate MQTT Client Tool - MQTTX</title>
      <link href="/2024/12/31/the-ultimate-mqtt-client-tool-mqttx/"/>
      <url>/2024/12/31/the-ultimate-mqtt-client-tool-mqttx/</url>
      
        <content type="html"><![CDATA[<p>In the world of <code>IoT (Internet of Things)</code>, <code>MQTT (Message Queuing Telemetry Transport)</code> is a popular lightweight messaging protocol that ensures efficient communication between devices, servers, and clients. MQTT is favored for its low-bandwidth requirements and its ability to work in low network environments. However, testing and debugging MQTT-based applications can be challenging without the right tools.</p><p>Today weâ€™re talking about one such tool called <code>MQTTX</code>. MQTTX is a cross platform, open-source MQTT client tool that provides a user-friendly interface for testing and debugging MQTT-based applications. It supports multiple MQTT brokers, including EMQX, Mosquitto, HiveMQ, and others, and provides a range of features such as message history, message filtering, and more. It is available for multiple platforms, including <code>Windows</code>, <code>macOS</code>, and <code>Linux</code>.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/mqttx-tool.png" class="lazyload placeholder" data-srcset="/assets/images/tools/mqttx-tool.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="MQTTX tool" style="width:800px;"/></div><span class="image-caption">MQTTX tool</span></div><p>MQTTX supports all versions of the MQTT protocol, from MQTT 3.1.1 to MQTT 5.0, which makes it suitable for a wide range of use cases, from simple applications to advanced IoT systems.</p><h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><p>Letâ€™s using MQTTX to test and debug an MQTT-based application. Weâ€™ll use the <code>EMQX</code> MQTT broker for this example. And here we using Web version of MQTTX. The web client is <a href="https://mqttx.app/web-client">https://mqttx.app/web-client</a>.</p><p>The public <code>EMQX</code> server information is as follows:</p><blockquote><p><strong>Server</strong>: broker.emqx.io</p><p><strong>TCP Port</strong>: 1883</p><p><strong>WebSocket Port</strong>: 8083</p><p><strong>SSL&#x2F;TLS Port</strong>: 8883</p><p><strong>Secure WebSocket Port</strong>: 8084</p></blockquote><h3 id="Create-a-New-Connection"><a href="#Create-a-New-Connection" class="headerlink" title="Create a New Connection"></a>Create a New Connection</h3><p>Open web client of MQTTX and click on the <code>+</code> button on the top-left corner to create a new connection.  Naming the connection as â€˜cloudserverâ€™, and keep to using <code>EMQX</code> as the broker.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/mqttx-create-connection.png" class="lazyload placeholder" data-srcset="/assets/images/tools/mqttx-create-connection.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Create a new connection" style="width:800px;"/></div><span class="image-caption">Create a new connection</span></div><h3 id="Subscribe-to-a-Topic"><a href="#Subscribe-to-a-Topic" class="headerlink" title="Subscribe to a Topic"></a>Subscribe to a Topic</h3><p>Once the connection is established, we can subscribe to a topic by clicking on the <code>New Subscription</code> button. Letâ€™s subscribe to the topic <code>test/temperature</code>. </p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/mqttx-subscribe-topic.png" class="lazyload placeholder" data-srcset="/assets/images/tools/mqttx-subscribe-topic.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Create a subscription to a topic" style="width:800px;"/></div><span class="image-caption">Create a subscription to a topic</span></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/mqttx-subscribe-topic2.png" class="lazyload placeholder" data-srcset="/assets/images/tools/mqttx-subscribe-topic2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Subscribe to a topic" style="width:800px;"/></div><span class="image-caption">Subscribe to a topic</span></div><h3 id="Create-two-new-clients"><a href="#Create-two-new-clients" class="headerlink" title="Create two new clients"></a>Create two new clients</h3><p>Now, letâ€™s create two new clients connection, naming as <code>sensor1</code> and <code>sensor2</code>. Both clients will subscribe to the same topic <code>test/resp</code>.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/mqttx-create-clients.png" class="lazyload placeholder" data-srcset="/assets/images/tools/mqttx-create-clients.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Create new clients" style="width:800px;"/></div><span class="image-caption">Create new clients</span></div><h3 id="Publish-a-Message"><a href="#Publish-a-Message" class="headerlink" title="Publish a Message"></a>Publish a Message</h3><p>Letâ€™s publish a message which using JSON format from <code>sensor1</code> to the topic <code>test/temperature</code>. And we can see the message is received by <code>sensor1</code>.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Topic: </span><br><span class="line">test/temperature</span><br><span class="line"></span><br><span class="line">Message:</span><br><span class="line">&#123;&quot;id&quot;: &quot;sensor1&quot;, &quot;value&quot;: &quot;2&quot;&#125;</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/mqttx-publish-message.png" class="lazyload placeholder" data-srcset="/assets/images/tools/mqttx-publish-message.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Publish a message" style="width:800px;"/></div><span class="image-caption">Publish a message</span></div><p>We can see the â€˜cloudserverâ€™ client which subscribed the topic <code>test/temperature</code> received the message.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/mqttx-message-received.png" class="lazyload placeholder" data-srcset="/assets/images/tools/mqttx-message-received.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Message received" style="width:800px;"/></div><span class="image-caption">Message received</span></div><p>In â€˜cloudserverâ€™ client, we also can send the message to the topic <code>test/resp</code>. Then both <code>sensor1</code> and <code>sensor2</code> will receive the message.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Topic:</span><br><span class="line">test/resp</span><br><span class="line"></span><br><span class="line">Message:</span><br><span class="line">&#123;&quot;id&quot;: &quot;cloudserver&quot;, &quot;value&quot;: &quot;100&quot;&#125;</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/mqttx-publish-message2.png" class="lazyload placeholder" data-srcset="/assets/images/tools/mqttx-publish-message2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Publish a message to a topic" style="width:800px;"/></div><span class="image-caption">Publish a message to a topic</span></div><h3 id="Topic-with-Wildcard"><a href="#Topic-with-Wildcard" class="headerlink" title="Topic with Wildcard"></a>Topic with Wildcard</h3><p>The MQTT protocol forwards messages based on the topic. Topics are hierarchical by <code>/</code>, similar to URL paths, for example:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chat/room/1</span><br><span class="line"></span><br><span class="line">sensor/10/temperature</span><br><span class="line"></span><br><span class="line">sensor/+/temperature</span><br></pre></td></tr></table></figure><p>MQTT topics support two wildcards: <code>+</code> and <code>#</code>.</p><p><strong>+</strong>: Represents a single-layer wildcard, such as A&#x2F;+ matching A&#x2F;X or A&#x2F;Y.<br><strong>#</strong>: Represents a multi-layered wildcard, e.g. A&#x2F;# matches A&#x2F;X, A&#x2F;B&#x2F;C&#x2F;D.</p><blockquote><p>Note: Wildcard topics can only be used for subscriptions, not for publishing.</p></blockquote><p>Letâ€™s update the subscription of <code>cloudserver</code> client to subscribe to the topic <code>test/+/temperature</code>. This will match all topics that start with <code>test/</code> and end with <code>temperature</code>. And using <code>sensor1</code> client to publish a message to the topic <code>test/1/temperature</code>, <code>sensor2</code> client to publish a message to the topic <code>test/2/temperature</code>.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/mqttx-subscribe-topic3.png" class="lazyload placeholder" data-srcset="/assets/images/tools/mqttx-subscribe-topic3.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Subscribe to a topic with wildcard" style="width:800px;"/></div><span class="image-caption">Subscribe to a topic with wildcard</span></div><p>As you can see the <code>cloudserver</code> client received both messages.</p><p>The MQTTX tool provides QoS, message retained and more features for testing and debugging MQTT-based applications. You can test and debug your MQTT-based applications using MQTTX.</p><h2 id="Client-Version"><a href="#Client-Version" class="headerlink" title="Client Version"></a>Client Version</h2><p>The MQTTX tool client version includes more features such as topic tree visualization.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/mqttx-topic-tree.png" class="lazyload placeholder" data-srcset="/assets/images/tools/mqttx-topic-tree.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Topic tree visualization" style="width:800px;"/></div><span class="image-caption">Topic tree visualization</span></div><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>MQTTX is a powerful and user-friendly MQTT client tool that provides a range of features for testing and debugging MQTT-based applications. It supports multiple MQTT brokers, including EMQX, Mosquitto, HiveMQ, and others, and provides a cross-platform client for Windows, macOS, and Linux.   </p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MQTT </tag>
            
            <tag> IoT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆç‰©è”ç½‘IoTä¸­å¸¸è§çš„æ¶ˆæ¯ä¼ è¾“åè®®MQTT</title>
      <link href="/2024/12/30/what-is-mqtt-and-how-it-works/"/>
      <url>/2024/12/30/what-is-mqtt-and-how-it-works/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯MQTTï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯MQTTï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯MQTTï¼Ÿ"></a>ä»€ä¹ˆæ˜¯MQTTï¼Ÿ</h2><p><code>MQTT ï¼ˆMessage Queuing Telemetry Transport, æ¶ˆæ¯é˜Ÿåˆ—é¥æµ‹ä¼ è¾“åè®®ï¼‰</code>æ˜¯ä¸€ç§åŸºäºŽ<code>å‘å¸ƒ/è®¢é˜…ï¼ˆPublish/Subscribeï¼‰</code>æ¨¡å¼çš„è½»é‡çº§æ¶ˆæ¯ä¼ è¾“åè®®ï¼Œæœ€åˆç”±IBMåœ¨1999å¹´å¼€å‘ï¼Œä¸»è¦ç”¨äºŽ<code>ä½Žå¸¦å®½</code>ã€<code>ä¸ç¨³å®šç½‘ç»œçŽ¯å¢ƒ</code>ä¸‹çš„è®¾å¤‡é€šä¿¡ã€‚MQTTåè®®è®¾è®¡ç®€å•ï¼Œå ç”¨èµ„æºå°‘ï¼Œé€‚åˆåœ¨èµ„æºå—é™çš„åµŒå…¥å¼è®¾å¤‡ä¸Šè¿è¡Œã€‚</p><p>MQTTçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†æ¶ˆæ¯çš„å‘é€è€…ï¼ˆå‘å¸ƒè€…ï¼‰å’ŒæŽ¥æ”¶è€…ï¼ˆè®¢é˜…è€…ï¼‰è§£è€¦ï¼Œé€šè¿‡ä¸€ä¸ªä¸­é—´ä»£ç†ï¼ˆBrokerï¼‰æ¥ä¼ é€’æ¶ˆæ¯ã€‚å‘å¸ƒè€…å°†æ¶ˆæ¯å‘é€åˆ°ç‰¹å®šçš„ä¸»é¢˜ï¼ˆTopicï¼‰ï¼Œè®¢é˜…è€…åˆ™è®¢é˜…æ„Ÿå…´è¶£çš„ä¸»é¢˜ï¼Œä»Žè€ŒæŽ¥æ”¶ç›¸å…³æ¶ˆæ¯ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/mqtt/mqtt-diagram.png" class="lazyload placeholder" data-srcset="/assets/images/mqtt/mqtt-diagram.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="MQTT (Message Queuing Telemetry Transport)"/></div><span class="image-caption">MQTT (Message Queuing Telemetry Transport)</span></div><h2 id="MQTTçš„åº”ç”¨åœºæ™¯"><a href="#MQTTçš„åº”ç”¨åœºæ™¯" class="headerlink" title="MQTTçš„åº”ç”¨åœºæ™¯"></a>MQTTçš„åº”ç”¨åœºæ™¯</h2><p><code>MQTT</code>å¹¿æ³›åº”ç”¨äºŽIoT(Internet of Things, ç‰©è”ç½‘)é¢†åŸŸï¼Œä¸»è¦ç”¨äºŽç‰©è”ç½‘ã€ç§»åŠ¨äº’è”ç½‘ã€æ™ºèƒ½å®¶å±…ã€å·¥ä¸šè‡ªåŠ¨åŒ–ç­‰é¢†åŸŸã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…¸åž‹çš„åº”ç”¨åœºæ™¯ï¼š</p><ol><li><p>ç‰©è”ç½‘ï¼ˆIoTï¼‰<br>åœ¨ç‰©è”ç½‘ä¸­ï¼Œè®¾å¤‡é€šå¸¸åˆ†å¸ƒåœ¨ä¸åŒçš„åœ°ç†ä½ç½®ï¼Œä¸”ç½‘ç»œæ¡ä»¶å¯èƒ½ä¸ç¨³å®šã€‚MQTTçš„ä½Žå¸¦å®½æ¶ˆè€—å’Œå¯é æ€§ä½¿å…¶æˆä¸ºè¿žæŽ¥è¿™äº›è®¾å¤‡çš„ç†æƒ³é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œä¼ æ„Ÿå™¨å¯ä»¥é€šè¿‡MQTTå°†æ•°æ®å‘é€åˆ°äº‘ç«¯ï¼Œä¾›å…¶ä»–è®¾å¤‡æˆ–åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚</p></li><li><p>æ™ºèƒ½å®¶å±…<br>åœ¨æ™ºèƒ½å®¶å±…ç³»ç»Ÿä¸­ï¼Œå„ç§è®¾å¤‡ï¼ˆå¦‚ç¯å…‰ã€æ¸©æŽ§å™¨ã€å®‰é˜²ç³»ç»Ÿç­‰ï¼‰éœ€è¦ç›¸äº’é€šä¿¡ã€‚MQTTå¯ä»¥å¸®åŠ©è¿™äº›è®¾å¤‡é«˜æ•ˆåœ°äº¤æ¢ä¿¡æ¯ï¼Œå®žçŽ°è‡ªåŠ¨åŒ–æŽ§åˆ¶ã€‚</p></li><li><p>å·¥ä¸šè‡ªåŠ¨åŒ–<br>åœ¨å·¥ä¸šè‡ªåŠ¨åŒ–é¢†åŸŸï¼ŒMQTTå¯ä»¥ç”¨äºŽç›‘æŽ§å’ŒæŽ§åˆ¶ç”Ÿäº§çº¿ä¸Šçš„è®¾å¤‡ã€‚é€šè¿‡MQTTï¼Œå·¥åŽ‚å¯ä»¥å®žæ—¶èŽ·å–è®¾å¤‡çŠ¶æ€ï¼Œè¿›è¡Œè¿œç¨‹æŽ§åˆ¶å’Œæ•…éšœè¯Šæ–­ã€‚</p></li><li><p>ç§»åŠ¨åº”ç”¨<br>åœ¨ç§»åŠ¨åº”ç”¨ä¸­ï¼ŒMQTTå¯ä»¥ç”¨äºŽæŽ¨é€é€šçŸ¥ã€å®žæ—¶æ¶ˆæ¯ä¼ é€’ç­‰åœºæ™¯ã€‚ç”±äºŽMQTTåè®®è½»é‡ä¸”é«˜æ•ˆï¼Œéžå¸¸é€‚åˆåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šä½¿ç”¨ã€‚</p></li></ol><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/mqtt/mqtt-example.png" class="lazyload placeholder" data-srcset="/assets/images/mqtt/mqtt-example.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="MQTT Example"/></div><span class="image-caption">MQTT Example</span></div><h2 id="MQTTçš„å·¥ä½œåŽŸç†"><a href="#MQTTçš„å·¥ä½œåŽŸç†" class="headerlink" title="MQTTçš„å·¥ä½œåŽŸç†"></a>MQTTçš„å·¥ä½œåŽŸç†</h2><p>MQTTåè®®åŸºäºŽå‘å¸ƒ&#x2F;è®¢é˜…æ¨¡å¼ï¼Œå…¶æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªï¼š</p><p><strong>å‘å¸ƒè€…ï¼ˆPublisherï¼‰</strong>ï¼šè´Ÿè´£å°†æ¶ˆæ¯å‘é€åˆ°ç‰¹å®šçš„ä¸»é¢˜Topicã€‚<br><strong>è®¢é˜…è€…ï¼ˆSubscriberï¼‰</strong>ï¼šè®¢é˜…æ„Ÿå…´è¶£çš„ä¸»é¢˜ï¼ŒæŽ¥æ”¶ç›¸å…³æ¶ˆæ¯ã€‚<br><strong>ä»£ç†ï¼ˆBrokerï¼‰</strong>ï¼šè´Ÿè´£æŽ¥æ”¶å‘å¸ƒè€…çš„æ¶ˆæ¯ï¼Œå¹¶å°†å…¶è½¬å‘ç»™è®¢é˜…è€…ã€‚</p><h4 id="ä¸»é¢˜ï¼ˆTopicï¼‰"><a href="#ä¸»é¢˜ï¼ˆTopicï¼‰" class="headerlink" title="ä¸»é¢˜ï¼ˆTopicï¼‰"></a>ä¸»é¢˜ï¼ˆTopicï¼‰</h4><p>ä¸»é¢˜æ˜¯MQTTä¸­æ¶ˆæ¯çš„åˆ†ç±»æ ‡è¯†ç¬¦ï¼Œé‡‡ç”¨<code>åˆ†å±‚ç»“æž„</code>ã€‚ä¾‹å¦‚ï¼Œhome&#x2F;livingroom&#x2F;temperature è¡¨ç¤ºâ€œå®¢åŽ…æ¸©åº¦â€ä¸»é¢˜ã€‚å‘å¸ƒè€…å°†æ¶ˆæ¯å‘é€åˆ°ç‰¹å®šä¸»é¢˜ï¼Œè®¢é˜…è€…åˆ™é€šè¿‡è®¢é˜…ä¸»é¢˜æ¥æŽ¥æ”¶æ¶ˆæ¯ã€‚</p><h4 id="æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰"><a href="#æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰" class="headerlink" title="æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰"></a>æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰</h4><p>MQTTæ”¯æŒä¸‰ç§æœåŠ¡è´¨é‡çº§åˆ«ï¼Œç”¨äºŽæŽ§åˆ¶æ¶ˆæ¯ä¼ é€’çš„å¯é æ€§ï¼š</p><p><strong>QoS 0</strong>ï¼šæœ€å¤šä¸€æ¬¡ä¼ é€’ã€‚æ¶ˆæ¯å¯èƒ½ä¼šä¸¢å¤±ï¼Œä½†ä¸ä¼šé‡å¤ã€‚<br><strong>QoS 1</strong>ï¼šè‡³å°‘ä¸€æ¬¡ä¼ é€’ã€‚æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ï¼Œä½†å¯èƒ½ä¼šé‡å¤ã€‚<br><strong>QoS 2</strong>ï¼šæ°å¥½ä¸€æ¬¡ä¼ é€’ã€‚æ¶ˆæ¯æ—¢ä¸ä¼šä¸¢å¤±ï¼Œä¹Ÿä¸ä¼šé‡å¤ã€‚</p><h4 id="æŒä¹…ä¼šè¯ï¼ˆPersistent-Sessionï¼‰"><a href="#æŒä¹…ä¼šè¯ï¼ˆPersistent-Sessionï¼‰" class="headerlink" title="æŒä¹…ä¼šè¯ï¼ˆPersistent Sessionï¼‰"></a>æŒä¹…ä¼šè¯ï¼ˆPersistent Sessionï¼‰</h4><p>MQTTæ”¯æŒæŒä¹…ä¼šè¯ï¼Œå…è®¸å®¢æˆ·ç«¯åœ¨æ–­å¼€è¿žæŽ¥åŽé‡æ–°è¿žæŽ¥æ—¶ï¼Œç»§ç»­æŽ¥æ”¶æœªå¤„ç†çš„æ¶ˆæ¯ã€‚è¿™å¯¹äºŽä¸ç¨³å®šçš„ç½‘ç»œçŽ¯å¢ƒéžå¸¸æœ‰ç”¨ã€‚</p><h2 id="MQTTçš„å·¥ä½œæµç¨‹"><a href="#MQTTçš„å·¥ä½œæµç¨‹" class="headerlink" title="MQTTçš„å·¥ä½œæµç¨‹"></a>MQTTçš„å·¥ä½œæµç¨‹</h2><p>MQTTçš„å·¥ä½œæµç¨‹å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><p>è¿žæŽ¥ä»£ç†<br>å®¢æˆ·ç«¯(Client)ï¼ˆå‘å¸ƒè€…æˆ–è®¢é˜…è€…ï¼‰é¦–å…ˆä¸ŽMQTTä»£ç†(Broker)å»ºç«‹è¿žæŽ¥ã€‚è¿žæŽ¥æ—¶ï¼Œå®¢æˆ·ç«¯éœ€è¦æä¾›å®¢æˆ·ç«¯IDã€ç”¨æˆ·åã€å¯†ç ç­‰ä¿¡æ¯ã€‚</p></li><li><p>è®¢é˜…ä¸»é¢˜<br>è®¢é˜…è€…å‘ä»£ç†å‘é€è®¢é˜…è¯·æ±‚ï¼ŒæŒ‡å®šæ„Ÿå…´è¶£çš„ä¸»é¢˜ã€‚ä»£ç†ä¼šè®°å½•è®¢é˜…è€…çš„è®¢é˜…ä¿¡æ¯ã€‚</p></li><li><p>å‘å¸ƒæ¶ˆæ¯<br>å‘å¸ƒè€…å°†æ¶ˆæ¯å‘é€åˆ°ç‰¹å®šä¸»é¢˜ã€‚ä»£ç†æŽ¥æ”¶åˆ°æ¶ˆæ¯åŽï¼Œä¼šæ ¹æ®ä¸»é¢˜å°†æ¶ˆæ¯è½¬å‘ç»™æ‰€æœ‰è®¢é˜…è¯¥ä¸»é¢˜çš„è®¢é˜…è€…ã€‚</p></li><li><p>æŽ¥æ”¶æ¶ˆæ¯<br>è®¢é˜…è€…ä»Žä»£ç†æŽ¥æ”¶æ¶ˆæ¯ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡Œå¤„ç†ã€‚</p></li><li><p>æ–­å¼€è¿žæŽ¥<br>å®¢æˆ·ç«¯å¯ä»¥ä¸»åŠ¨æ–­å¼€ä¸Žä»£ç†çš„è¿žæŽ¥ï¼Œæˆ–è€…ç”±äºŽç½‘ç»œé—®é¢˜å¯¼è‡´è¿žæŽ¥æ–­å¼€ã€‚å¦‚æžœå¯ç”¨äº†æŒä¹…ä¼šè¯ï¼Œå®¢æˆ·ç«¯é‡æ–°è¿žæŽ¥åŽå¯ä»¥ç»§ç»­æŽ¥æ”¶æœªå¤„ç†çš„æ¶ˆæ¯ã€‚</p></li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>MQTT</code>ä½œä¸ºä¸€ç§è½»é‡çº§ã€é«˜æ•ˆçš„é€šä¿¡åè®®ï¼Œåœ¨ç‰©è”ç½‘ã€æ™ºèƒ½å®¶å±…ã€å·¥ä¸šè‡ªåŠ¨åŒ–ç­‰é¢†åŸŸæœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚å…¶åŸºäºŽå‘å¸ƒ&#x2F;è®¢é˜…æ¨¡å¼çš„è®¾è®¡ï¼Œä½¿å¾—è®¾å¤‡ä¹‹é—´çš„é€šä¿¡æ›´åŠ çµæ´»å’Œé«˜æ•ˆã€‚é€šè¿‡ç†è§£MQTTçš„å·¥ä½œåŽŸç†å’Œå·¥ä½œæµç¨‹ï¼Œå¼€å‘è€…å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨è¿™ä¸€åè®®ï¼Œæž„å»ºç¨³å®šã€å¯é çš„ç‰©è”ç½‘ç³»ç»Ÿã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MQTT </tag>
            
            <tag> IoT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sentry: The Developerâ€™s Best Friend for Error Tracking and Performance Monitoring</title>
      <link href="/2024/12/19/sentry-the-developer-s-best-friend-for-error-tracking-and-performance-monitoring/"/>
      <url>/2024/12/19/sentry-the-developer-s-best-friend-for-error-tracking-and-performance-monitoring/</url>
      
        <content type="html"><![CDATA[<div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/sentry.png" class="lazyload placeholder" data-srcset="/assets/images/tools/sentry.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Sentry"/></div><span class="image-caption">Sentry</span></div><p>As developers, we know how frustrating it can be to track down bugs and performance issues, especially when they slip through the cracks and impact end-users. Fortunately, <code>Sentry</code> is here to help you take control of your applicationâ€™s stability and performance, offering a comprehensive solution for error tracking and performance monitoring.</p><p>In this post, weâ€™ll dive into what Sentry is, how it works, and why it should be a key part of your development workflow.</p><h2 id="What-is-Sentry"><a href="#What-is-Sentry" class="headerlink" title="What is Sentry?"></a>What is Sentry?</h2><p><code>Sentry</code> is an <code>open-source</code> <code>error tracking</code> and <code>performance monitoring</code> tool that helps you find and fix issues in your applicationsâ€”whether theyâ€™re web-based, mobile, or server-side. It captures errors in real-time, giving you deep insights into what went wrong, where it happened, and what might be causing it. Whether youâ€™re building an app with React, Django, or even a mobile app, Sentry works across a wide variety of languages and platforms.</p><h2 id="Why-Should-Developers-Use-Sentry"><a href="#Why-Should-Developers-Use-Sentry" class="headerlink" title="Why Should Developers Use Sentry?"></a>Why Should Developers Use Sentry?</h2><ol><li><p>Track Errors in Real-Time<br>No one likes finding out about an issue after a user complains. Sentry sends real-time error alerts straight to your teamâ€”whether itâ€™s through email, Slack, or other channelsâ€”so you can address problems as they arise. And with detailed stack traces and contextual information, youâ€™re not left guessing about where or why the issue happened.</p></li><li><p>Monitor Performance Issues<br>Sentry isnâ€™t just for catching errors; it also provides powerful performance monitoring. From slow page loads to database bottlenecks, Sentry helps you track performance metrics and diagnose why your app might be lagging, allowing you to optimize performance proactively.</p></li><li><p>Understand Context Around Errors<br>When an error happens, Sentry doesnâ€™t just provide a stack trace. It enriches the error data with contextual information like user actions, environment (production vs. staging), browser version, and the specific code version that caused the issue. This context allows you to fix issues faster because you get a better sense of what happened right before the error occurred.</p></li><li><p>Release Tracking<br>Have you ever deployed a new release, only to realize later that it introduced a bug? Sentry connects errors to specific releases, so you can quickly figure out which version of your app caused the problem. Plus, you can monitor the health of each release, so you know when itâ€™s time to roll back or fix issues.</p></li></ol><h2 id="Core-Features-Youâ€™ll-Love"><a href="#Core-Features-Youâ€™ll-Love" class="headerlink" title="Core Features Youâ€™ll Love"></a>Core Features Youâ€™ll Love</h2><ol><li><p>Error Aggregation<br>Sentry aggregates errors that are similar or identical, helping you prioritize the most critical issues without being overwhelmed by duplicates. This makes it easier to focus on the errors that matter.</p></li><li><p>Customizable Alerts &amp; Notifications<br>You can set custom thresholds for error severity or the frequency of an error before triggering an alert. This ensures youâ€™re not flooded with notifications for every minor issue but are still on top of critical bugs.</p></li><li><p>Issue Resolution Workflow<br>With issue tracking integration (e.g., JIRA, GitHub), you can automatically assign issues to team members and track their resolution status without leaving your existing tools. This helps streamline your workflow and ensures bugs donâ€™t fall through the cracks.</p></li><li><p>Contextual Information<br>The error reports include all the context you need to solve a bug, like the userâ€™s device info, the environment it happened in, stack traces, request URLs, and even relevant logs. This reduces the time it takes to identify and fix problems.</p></li><li><p>Performance Monitoring<br>With Sentryâ€™s performance monitoring, you can trace the performance of specific transactions across your app. This helps pinpoint slow database queries, inefficient API calls, and anything else that might be affecting performance.</p></li><li><p>Wide Integration Support<br>Sentry integrates with many of the tools you already use, such as <code>GitHub</code>, <code>GitLab</code>, <code>Slack</code>, <code>JIRA</code>, <code>Trello</code>, and more. This makes it simple to plug Sentry into your existing workflow and ensure your development process is smooth.</p></li></ol><h2 id="How-Does-Sentry-Work"><a href="#How-Does-Sentry-Work" class="headerlink" title="How Does Sentry Work?"></a>How Does Sentry Work?</h2><p>Integrating Sentry is simple and quick, and once you set it up, it works seamlessly behind the scenes. Hereâ€™s a high-level look at how it works:</p><ol><li><p>Error Detection:<br>Sentry works by using SDKs specific to your tech stack. Once integrated, it automatically detects unhandled errors in your application.</p></li><li><p>Context Collection:</p><span class='pbg danger'>When an error is captured</span></li><li><p>Error Aggregation &amp; Notifications:<br>The error is aggregated and displayed on your Sentry dashboard. If youâ€™ve set up notifications, your team will be alerted in real-time via Slack, email, or any other supported channel.</p></li><li><p>Resolution &amp; Feedback:<br>Once a developer resolves an issue, Sentry marks it as resolved. If the issue reoccurs, Sentry notifies you again, keeping you in the loop.</p></li></ol><h2 id="How-to-Get-Started-with-Sentry"><a href="#How-to-Get-Started-with-Sentry" class="headerlink" title="How to Get Started with Sentry"></a>How to Get Started with Sentry</h2><ol><li><p>Create an Account<br>Go to Sentryâ€™s website and sign up for a free account. Youâ€™ll be guided through the setup process, and you can create a new project for your app. Accessing <a href="https://sentry.io/">https://sentry.io</a> to create your own account.</p></li><li><p>Install the SDK<br>Depending on the tech stack youâ€™re using, youâ€™ll need to install the appropriate SDK. For example:</p></li></ol><p>In React Application:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @sentry/react</span><br></pre></td></tr></table></figure><p>Then, initialize Sentry in your app:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">Sentry</span> <span class="keyword">from</span> <span class="string">&quot;@sentry/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Sentry</span>.<span class="title function_">init</span>(&#123;</span><br><span class="line">  <span class="attr">dsn</span>: <span class="string">&quot;https://&lt;key&gt;@sentry.io/&lt;project&gt;&quot;</span>,</span><br><span class="line">  <span class="comment">// This enables automatic instrumentation (highly recommended)</span></span><br><span class="line">  <span class="comment">// If you only want to use custom instrumentation:</span></span><br><span class="line">  <span class="comment">// * Remove the BrowserTracing integration</span></span><br><span class="line">  <span class="comment">// * add Sentry.addTracingExtensions() above your Sentry.init() call</span></span><br><span class="line">  <span class="attr">integrations</span>: [</span><br><span class="line">    <span class="title class_">Sentry</span>.<span class="title function_">browserTracingIntegration</span>(),</span><br><span class="line">    <span class="comment">// Or, if you are using react router, use the appropriate integration</span></span><br><span class="line">    <span class="comment">// See docs for support for different versions of react router</span></span><br><span class="line">    <span class="comment">// https://docs.sentry.io/platforms/javascript/guides/react/configuration/integrations/react-router/</span></span><br><span class="line">    <span class="title class_">Sentry</span>.<span class="title function_">reactRouterV6BrowserTracingIntegration</span>(&#123;</span><br><span class="line">      <span class="attr">useEffect</span>: <span class="title class_">React</span>.<span class="property">useEffect</span>,</span><br><span class="line">      useLocation,</span><br><span class="line">      useNavigationType,</span><br><span class="line">      createRoutesFromChildren,</span><br><span class="line">      matchRoutes,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// For finer control of sent transactions you can adjust this value, or</span></span><br><span class="line">  <span class="comment">// use tracesSampler</span></span><br><span class="line">  <span class="attr">tracesSampleRate</span>: <span class="number">1.0</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Set tracePropagationTargets to control for which URLs distributed tracing should be enabled</span></span><br><span class="line">  <span class="attr">tracePropagationTargets</span>: [<span class="string">&#x27;localhost&#x27;</span>, <span class="regexp">/^https:/</span><span class="regexp">/yourserver.io/</span>api/],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure><p>Sentry SDK supports multiple languages and frameworks, including React, Angular, Vue, .NET, Go, Python, SpringBoot, Next.js and more.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/tools/sentry-sdks.png" class="lazyload placeholder" data-srcset="/assets/images/tools/sentry-sdks.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Sentry SDK Integrations"/></div><span class="image-caption">Sentry SDK Integrations</span></div><ol start="3"><li><p>Integrate Error &amp; Performance Monitoring<br>Sentry works out of the box for most errors, but you can also use it to track performance. You can instrument specific parts of your code to track performance issues, like database queries or API calls.</p></li><li><p>Configure Notifications<br>Set up notification channels (e.g., <code>Slack</code>, <code>email</code>) so your team is alerted whenever a critical error occurs. Customize the rules to avoid spamming you with minor issues.</p></li><li><p>Monitor in the Dashboard<br>Once the integration is complete, youâ€™ll start seeing error logs, performance metrics, and more on your Sentry dashboard. You can drill down into individual issues, see affected users, and get all the data you need to fix the bug fast.</p></li></ol><h2 id="Benefits-of-Using-Sentry-for-Developers"><a href="#Benefits-of-Using-Sentry-for-Developers" class="headerlink" title="Benefits of Using Sentry for Developers"></a>Benefits of Using Sentry for Developers</h2><ol><li><p>Faster Debugging:<br>With all the contextual data Sentry provides, debugging becomes faster. No more chasing elusive bugsâ€”get right to the root cause.</p></li><li><p>Proactive Monitoring:<br>Monitor both errors and performance, which helps you prevent issues before they affect users. Sentry gives you the insights to optimize performance and fix bugs early.</p></li><li><p>Increased Collaboration:<br>Integrated workflows with tools like GitHub, JIRA, and Slack mean you and your team can stay on the same page, and bugs can be tracked, assigned, and resolved efficiently.</p></li><li><p>Free Tier Available:<br>Sentry offers a free plan with generous limits, so you can get started without any upfront costs. As your project grows, you can scale to a paid plan with more features.</p></li></ol><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Sentry is an invaluable tool for developers, offering real-time error tracking and powerful performance monitoring. By integrating Sentry into your workflow, you can catch and resolve errors faster, improve your appâ€™s performance, and provide a better experience for your users.</p><p>So if youâ€™re looking to streamline your debugging process, improve performance monitoring, and keep your app healthy, you can try sentry in your application!</p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
            <tag> Sentry </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Introduction to LangChain: Make AI Smarter and Easier to use</title>
      <link href="/2024/11/12/introduction-to-langchain-make-ai-smarter-and-easy-to-use/"/>
      <url>/2024/11/12/introduction-to-langchain-make-ai-smarter-and-easy-to-use/</url>
      
        <content type="html"><![CDATA[<div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/langchain-image.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/langchain-image.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:600px;"/></div></div><p>Have you ever wondered how some apps and websites can have conversations with you, answer your questions? Many of these apps use <code>artificial intelligence (AI)</code>, like the chatbot you might use to ask questions or get advice. But creating these smart systems can be tricky. This is where a tool called <code>LangChain</code> comes in to help!</p><p><code>LangChain</code> is a framework that makes it easier for developers to build applications that use <code>AI models</code>, like chatbots or smart helpers. In this blog, weâ€™re going to explain what LangChain is, how it works, and why itâ€™s useful for making AI apps.</p><h2 id="What-is-LangChain"><a href="#What-is-LangChain" class="headerlink" title="What is LangChain?"></a>What is LangChain?</h2><p>LangChain is a tool for developers that helps them build applications using <code>large language models (LLMs)</code>â€”the same kind of AI that powers chatbots, writing assistants, and more. LLMs can understand and generate text in a way that sounds like a real person. However, using these models to make powerful apps can be complicated. LangChain makes it easier by offering ready-made building blocks to connect these models to other tools, data, and even databases.</p><p>Think of LangChain like a set of Lego blocks that you can use to build cool things with AI. It saves developers time by giving them ready-made pieces to use, rather than having to create everything from scratch.</p><h2 id="Features-of-LangChain"><a href="#Features-of-LangChain" class="headerlink" title="Features of LangChain"></a>Features of LangChain</h2><p>Letâ€™s break down some of the cool features LangChain offers and how they help developers make smarter apps.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/langchain-features.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/langchain-features.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="LangChain Features"/></div><span class="image-caption">LangChain Features</span></div><ol><li><p><strong>Chains</strong>: Putting Multiple Steps Together<br>Imagine you have a robot that can help with math homework. The robot might need to do multiple things to solve a problem. First, it could look up the math formula, then solve the problem, and finally explain the answer. In LangChain, these steps are called chains.</p><blockquote><p>A chain is a sequence of actions where each step depends on the previous one. For example, you could create a chain where:</p><p>First, the app asks the AI to pull data from a website.<br>Then, it uses that data to answer a question.<br>Finally, it summarizes the answer for the user.</p></blockquote></li><li><p><strong>Prompt Management</strong>: Talking to AI the Right Way<br>When you talk to an AI, how you ask your question or give your instruction is really important. Thatâ€™s called a prompt. LangChain helps developers make the best prompts by letting them create templates. These templates let developers easily change certain parts of the prompt without having to rewrite it every time.</p><blockquote><p>For example, if you wanted to ask the AI to summarize a story, you could have a prompt like this:</p><p>â€œPlease summarize the following story: {story}â€</p><p>In this template, {story} is a placeholder that can be replaced with any story you want the AI to summarize.</p></blockquote></li><li><p><strong>Agents</strong>: Letting AI Decide What to Do Next<br>Sometimes, a smart system needs to decide what to do next based on the information it gets. For example, if you ask an AI about the weather, it might decide to pull the latest weather data from the internet. This decision-making is done by agents.</p><blockquote><p>An agent is like a helper that looks at the information it gets and chooses the best action. LangChain helps developers build agents that can make these decisions automatically.</p></blockquote></li><li><p><strong>Memory</strong>: Remembering What Happened Before<br>Have you ever talked to a chatbot and then later felt like it forgot what you said earlier? That can make a conversation feel weird. <code>LangChain helps solve this problem by letting the AI remember what was said earlier in the conversation</code>. This feature is called memory.</p><blockquote><p>or example, if you ask a chatbot for homework help and then ask a follow-up question, LangChain can help the AI remember the first question and give a more useful answer based on that memory.</p></blockquote></li><li><p><strong>Integrations</strong>: Connecting to Other Tools and Websites<br>Sometimes, an AI app needs to talk to other systems to get more information. <span class='pbg success'>LangChain makes this easy by letting developers connect their AI app to other tools</span> This is like having a personal assistant that not only talks to you but also has access to tons of information online.</p><blockquote><p>For example, an AI app could pull up the latest sports scores, or check the weather for you, using real-time data from the internet.</p></blockquote></li><li><p><strong>Retrieval-Augmented Generation (RAG)</strong>: Getting Smarter Answers<br>LangChain also lets AI search for information in real-time. This is called retrieval-augmented generation (RAG). It allows the AI to look up the latest data, like news stories or facts, and use that information to create smarter answers.</p><blockquote><p>For example, if you ask about the latest trends in video games, the AI can search the web for the most up-to-date information and then explain it to you.</p></blockquote></li></ol><h2 id="Why-Do-Developers-Use-LangChain"><a href="#Why-Do-Developers-Use-LangChain" class="headerlink" title="Why Do Developers Use LangChain?"></a>Why Do Developers Use LangChain?</h2><p>There are several reasons why developers might want to use LangChain:</p><ol><li><p>Makes It Easier to Build AI Apps<br>Instead of starting from scratch, LangChain gives developers tools that speed up the process of creating AI apps. Developers can use LangChainâ€™s building blocks to create powerful applications without needing to write everything by hand.</p></li><li><p>Itâ€™s Flexible<br>LangChain can be used for a wide variety of apps. Whether you want to build a chatbot, a smart search engine, or an app that helps you study, LangChain has tools that make it easier to put everything together.</p></li><li><p>Saves Time<br>Developers donâ€™t have to spend a lot of time figuring out how to make an AI model work with a database or how to chain steps together. LangChain does much of the heavy lifting, so developers can focus on the fun and creative parts of building their apps.</p></li><li><p>Itâ€™s <code>Open-Source</code><br>LangChain is free for anyone to use and improve. Itâ€™s open-source, which means developers from all over the world can contribute to making it better. If youâ€™re learning to code or want to help improve the tool, you can!</p></li></ol><h2 id="Real-World-Examples-of-LangChain"><a href="#Real-World-Examples-of-LangChain" class="headerlink" title="Real-World Examples of LangChain"></a>Real-World Examples of LangChain</h2><p>LangChain is already being used in many cool ways. Here are a few examples:</p><ol><li><p>Chatbots<br>Developers can use LangChain to build chatbots that remember previous conversations and can talk to you like a real person. For example, you could create a chatbot to help you study for a test, and it would remember what youâ€™ve learned so far.</p></li><li><p>Smart Assistants<br>LangChain can help build systems that pull information from the internet and use AI to explain things in simple terms. For example, if youâ€™re stuck on a science problem, an AI could look up the topic online and explain it to you in a way you understand.</p></li><li><p>Automated Content Creation<br>Some apps use LangChain to automatically write articles or summaries. For example, a news website could use LangChain to summarize long articles or pull out the key points from reports, saving readers time.</p></li><li><p>Personalized Search Engines<br>LangChain can be used to build search engines that donâ€™t just give you a list of links but also summarize the best results for you. This could help you find the exact answer you need faster.</p></li></ol><h2 id="How-to-Get-Started-with-LangChain"><a href="#How-to-Get-Started-with-LangChain" class="headerlink" title="How to Get Started with LangChain"></a>How to Get Started with LangChain</h2><p>If youâ€™re excited to try out LangChain, hereâ€™s how you can get started:</p><ol><li>Install Python: LangChain works with Python, a programming language thatâ€™s great for beginners.</li><li>Install LangChain: You can install LangChain by running the command <code>pip install langchain</code> in Python.</li><li>Start Building: Once LangChain is installed, you can start building your own AI-powered applications! LangChain has tutorials and guides to help you learn how to use it.</li></ol><p>For more information, check out the LangChain documentation at <a href="https://python.langchain.com/docs/introduction/">https://python.langchain.com/docs/introduction/</a></p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>LangChain is a super helpful tool for developers who want to build cool apps powered by AI. It makes it easier to connect different parts of an app, like databases or the web, with a language model that can understand and generate text. Whether itâ€™s helping with homework, answering questions, or building a chatbot, LangChain is a great way to build smarter, more interactive applications.</p>]]></content>
      
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> LangChain </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>What is Prompt Engineering? Best Practices and Examples</title>
      <link href="/2024/11/05/what-is-prompt-engineer/"/>
      <url>/2024/11/05/what-is-prompt-engineer/</url>
      
        <content type="html"><![CDATA[<p>As artificial intelligence (AI) models, especially large language models (LLMs) like OpenAIâ€™s GPT series, have become increasingly sophisticated, a new role has emerged in the AI ecosystem: <code>the Prompt Engineer</code>. The term might sound technical or niche, but itâ€™s actually pivotal to leveraging AI models effectively. Whether youâ€™re interacting with AI in your personal or professional life, the quality of the interaction largely depends on how well the prompt is designed. This article will explore what a prompt engineer does, the best practices for writing effective prompts, and provide examples comparing outputs with and without a prompt engineerâ€™s expertise.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/prompt-engineering.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/prompt-engineering.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:800px;"/></div></div><h2 id="What-is-a-Prompt-Engineer"><a href="#What-is-a-Prompt-Engineer" class="headerlink" title="What is a Prompt Engineer?"></a>What is a Prompt Engineer?</h2><p><em>A Prompt Engineer is someone who specializes in crafting, refining, and optimizing prompts to ensure that AI models respond with the most relevant,accurate,and actionable information.</em> The role requires a blend of creativity, technical understanding, and knowledge of the AIâ€™s underlying model architecture.</p><p>In essence, the prompt engineerâ€™s job is to â€œspeakâ€ the language of the AI model. Since AI models like <code>GPT-3</code> or <code>GPT-4</code> donâ€™t â€œthinkâ€ like humans, their responses depend heavily on how the question or task is framed. A prompt engineer ensures that the right context, constraints, and phrasing are in place to guide the model toward producing the most useful responses.</p><h2 id="Why-is-Prompt-Engineering-Important"><a href="#Why-is-Prompt-Engineering-Important" class="headerlink" title="Why is Prompt Engineering Important?"></a>Why is Prompt Engineering Important?</h2><p>While AI models are capable of generating human-like text and performing complex tasks, their outputs are highly sensitive to the structure of the prompt. The same AI model could provide vastly different answers depending on the way a question is asked. Prompt engineers understand this sensitivity and use it to maximize the effectiveness of the interaction with AI.</p><p>Here are some reasons why prompt engineering is important:</p><p><strong>Maximizing output quality</strong>: Well-designed prompts improve the accuracy, relevance, and clarity of responses.<br><strong>Reducing errors</strong>: By properly framing a prompt, prompt engineers can help reduce misunderstandings or irrelevant responses.<br><strong>Efficiency</strong>: Instead of relying on trial and error to get useful responses, prompt engineers streamline the interaction process, saving time and resources.<br><strong>Contextuality</strong>: A good prompt will provide the necessary context for the model, ensuring that the response is in line with the userâ€™s expectations.</p><h2 id="The-Path-of-a-Prompt-Engineer"><a href="#The-Path-of-a-Prompt-Engineer" class="headerlink" title="The Path of a Prompt Engineer"></a>The Path of a Prompt Engineer</h2><p>The process that a prompt engineer follows to ensure optimal results involves several stages. Each stage builds upon the last, leading to an iterative cycle that refines both the prompt and the AIâ€™s output. Hereâ€™s a breakdown of the typical path of a prompt engineer:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/prompt-engineer-path.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/prompt-engineer-path.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="The Path of a Prompt Engineer" style="width:800px;"/></div><span class="image-caption">The Path of a Prompt Engineer</span></div><h3 id="1-Task-Understanding"><a href="#1-Task-Understanding" class="headerlink" title="1.Task Understanding:"></a>1.Task Understanding:</h3><p>Before crafting any prompt, the first step is to fully understand the task at hand. This involves clarifying the userâ€™s goal, determining the desired output format, and understanding the nuances of the request. A deep understanding of the problem ensures that the prompt engineer can craft a question or instruction that addresses all necessary aspects.</p><blockquote><p>Example: If the task is to generate a poem, the prompt engineer will need to understand the tone, style, and subject matter required.</p></blockquote><h3 id="2-Crafting-Prompts"><a href="#2-Crafting-Prompts" class="headerlink" title="2.Crafting Prompts:"></a>2.Crafting Prompts:</h3><p>The next step is to craft the prompt. This involves framing the task clearly, with enough specificity to guide the AI toward the desired output. Crafting an effective prompt is not about asking a single question, but about <em>providing the model with the right context, constraints, and direction</em>.</p><blockquote><p>Example: Instead of asking, â€œWrite a poem,â€ a more specific prompt might be, â€œWrite a rhyming poem about the beauty of autumn, focusing on imagery and feelings of nostalgia.â€</p></blockquote><h3 id="3-Prompt-Alignment"><a href="#3-Prompt-Alignment" class="headerlink" title="3.Prompt Alignment:"></a>3.Prompt Alignment:</h3><p>At this stage, the prompt must be aligned with the intended outcome. This means considering the AI modelâ€™s strengths and limitations and ensuring that the prompt leads the AI to produce a response that fits the desired format, tone, and depth. The prompt should ensure the model understands the context of the task, as well as any constraints or preferences that need to be respected.</p><blockquote><p>Example: For a technical article, aligning the prompt would involve ensuring the language model knows to prioritize clarity, accuracy, and technical precision.</p></blockquote><h3 id="4-Optimizing-Prompt"><a href="#4-Optimizing-Prompt" class="headerlink" title="4.Optimizing Prompt:"></a>4.Optimizing Prompt:</h3><p>After alignment, the prompt may need further refinement. This step involves fine-tuning the wording, simplifying complex instructions, or narrowing down the scope to ensure that the prompt is as effective as possible. <em>Optimization often involves making the prompt more specific and reducing ambiguity.</em></p><blockquote><p>Example: â€œWrite a 300-word summary of the research paper on AI ethics, emphasizing the ethical dilemmas and implications for technology companies.â€ This version is more optimized than a broad, vague instruction.</p></blockquote><h3 id="5-AI-Model-Processing"><a href="#5-AI-Model-Processing" class="headerlink" title="5.AI Model Processing:"></a>5.AI Model Processing:</h3><p>Once the optimized prompt is provided, the AI model processes it and generates a response. This is where the model applies its underlying machine learning architecture, leveraging its training data to formulate a response.</p><blockquote><p>Example: The AI will analyze the prompt, consider patterns in its training data, and produce a response based on its understanding of the language and context.</p></blockquote><h3 id="6-Generating-Output"><a href="#6-Generating-Output" class="headerlink" title="6.Generating Output:"></a>6.Generating Output:</h3><p>The AI model generates the initial output based on the prompt. Depending on the AI modelâ€™s capabilities, this output may vary in length, style, accuracy, or even relevance to the task.</p><blockquote><p>Example: If the task was to summarize a paper, the output might include key findings, conclusions, and references to methodology.</p></blockquote><h3 id="7-Output-Refinement"><a href="#7-Output-Refinement" class="headerlink" title="7.Output Refinement:"></a>7.Output Refinement:</h3><p>Once the output is generated, prompt engineers review and refine it. This may involve removing irrelevant information, adjusting tone, adding details, or improving clarity. In some cases, the output might need to be restructured to fit the desired format.</p><blockquote><p>Example: If the AIâ€™s response contains tangential information or lacks clarity, the prompt engineer would reword it or fine-tune the output to better align with the userâ€™s expectations.</p></blockquote><h3 id="8-Iterative-Improvement"><a href="#8-Iterative-Improvement" class="headerlink" title="8.Iterative Improvement:"></a>8.Iterative Improvement:</h3><p>Finally, the process of prompt engineering is iterative. After refining the output, prompt engineers analyze the effectiveness of the response and assess how the prompt can be improved for future tasks. This leads to continuous improvement, ensuring that future prompts are even more optimized, concise, and aligned with user needs.</p><blockquote><p>Example: The engineer might adjust the prompt for the next interaction to ensure more relevant details or a more focused response.</p></blockquote><h2 id="Key-Skills-and-Tools-of-a-Prompt-Engineer"><a href="#Key-Skills-and-Tools-of-a-Prompt-Engineer" class="headerlink" title="Key Skills and Tools of a Prompt Engineer"></a>Key Skills and Tools of a Prompt Engineer</h2><p>Prompt engineering requires a variety of skills:</p><p><strong>Understanding of Language Models</strong>:<br>A prompt engineer should have a deep understanding of how LLMs like GPT process language. Knowing their strengths and weaknesses allows for better prompt design.</p><p><strong>Communication Skills</strong>:<br>Effective communication is critical, as prompt engineers must be able to convey complex instructions in a way that the model can interpret clearly.</p><p><strong>Creativity and Experimentation</strong>:<br>Crafting effective prompts often requires trial and error, testing different phrasings and structures to see what works best.</p><p><strong>Analytical Thinking</strong>:<br>Understanding how different types of inputs influence the modelâ€™s outputs and iterating to improve results.</p><p>In addition to these skills, prompt engineers also use tools to test and refine their prompts. For instance, platforms like OpenAIâ€™s Playground allow users to experiment with various prompts in real-time, while more advanced professionals might leverage APIs to automate or scale their prompt engineering work.</p><h2 id="Best-Practices-for-Prompt-Engineering"><a href="#Best-Practices-for-Prompt-Engineering" class="headerlink" title="Best Practices for Prompt Engineering"></a>Best Practices for Prompt Engineering</h2><p>There are several strategies that a prompt engineer can employ to get the most out of a language model. Below are some of the best practices:</p><ol><li><p><strong>Be Specific and Clear</strong>: Ambiguous prompts can confuse AI models, leading to vague or incorrect responses. Make sure the prompt is clear and as specific as possible.</p><blockquote><p>Example: Instead of asking, â€œTell me about AI,â€ a more specific prompt would be, â€œCan you explain the difference between supervised and unsupervised learning in AI?â€</p></blockquote></li><li><p><strong>Use Context Effectively</strong>: Providing context can guide the model to better understand the desired output.</p><blockquote><p>Example: Instead of saying, â€œWrite a poem,â€ say, â€œWrite a rhyming poem about the beauty of autumn with a melancholic tone.â€</p></blockquote></li><li><p><strong>Limit the Scope</strong>: Sometimes, less is more. Limit the scope of the prompt to avoid overwhelming the model with too much information or too many instructions.</p><blockquote><p>Example: Instead of â€œWrite an article about the importance of artificial intelligence in modern business, covering all aspects of AI from machine learning to natural language processing,â€ you could say, â€œWrite a short article explaining the importance of AI in customer service.â€</p></blockquote></li><li><p><strong>Test and Iterate</strong>: A prompt engineer should test various iterations of a prompt to identify the most effective structure.</p></li><li><p><strong>Give Examples</strong>: For tasks requiring specific output formats, include an example to guide the model.</p><blockquote><p>Example: If you want a bulleted list, you could say, â€œList the steps in a process to build a website. For example: Step 1: Plan the layout.â€</p></blockquote></li><li><p><strong>Use Temperature and Max Tokens</strong>: Some models allow you to adjust the <code>temperature (which controls randomness)</code> and the <code>max tokens (which sets a character limit)</code> to control the output. These can be adjusted to fine-tune the modelâ€™s output.</p></li></ol><h2 id="Comparing-with-and-without-Prompt-Engineering"><a href="#Comparing-with-and-without-Prompt-Engineering" class="headerlink" title="Comparing with and without Prompt Engineering"></a>Comparing with and without Prompt Engineering</h2><p>Now letâ€™s look at some concrete examples of how a well-crafted prompt versus a poorly constructed one can affect the outcome.</p><h3 id="Example-1-Writing-a-Research-Summary"><a href="#Example-1-Writing-a-Research-Summary" class="headerlink" title="Example 1: Writing a Research Summary"></a>Example 1: Writing a Research Summary</h3><ul><li>Without a Prompt Engineer:</li></ul><p><strong>Prompt</strong>: â€œSummarize this research paper.â€</p><p>The AI may generate a generic or overly simplistic summary, without capturing the key aspects of the paper, such as methodology, results, and conclusions.</p><ul><li>With a Prompt Engineer:</li></ul><p><strong>Prompt</strong>: â€œSummarize the research paper titled â€˜Exploring AI Ethics in Autonomous Vehicles.â€™ Focus on the methodology, key findings, and implications for policy. Keep the summary under 200 words.â€</p><p>The AIâ€™s response will be more targeted, concise, and aligned with the userâ€™s expectations, providing a detailed summary that addresses the core aspects of the paper.</p><h3 id="Example-2-Writing-a-Creative-Story"><a href="#Example-2-Writing-a-Creative-Story" class="headerlink" title="Example 2: Writing a Creative Story"></a>Example 2: Writing a Creative Story</h3><ul><li>Without a Prompt Engineer:</li></ul><p><strong>Prompt</strong>: â€œWrite a story.â€</p><p>The story might lack direction, coherence, or creativity, leading to a generic or even nonsensical narrative.</p><ul><li>With a Prompt Engineer:</li></ul><p><strong>Prompt</strong>: â€œWrite a short story set in a post-apocalyptic world where humans are living on Mars. The protagonist is a scientist struggling with the ethical implications of using artificial intelligence to terraform the planet. Make the tone introspective and thought-provoking.â€</p><p>The story produced will be richer, more engaging, and aligned with the specific context and themes the user wanted.</p><h3 id="Example-3-Asking-for-Code"><a href="#Example-3-Asking-for-Code" class="headerlink" title="Example 3: Asking for Code"></a>Example 3: Asking for Code</h3><ul><li>Without a Prompt Engineer:</li></ul><p><strong>Prompt</strong>: â€œWrite a Python function.â€</p><p>The AI may generate a simple function, but it may not meet the userâ€™s needs or lack important features such as error handling or optimization.</p><ul><li>With a Prompt Engineer:</li></ul><p><strong>Prompt</strong>: â€œWrite a Python function to validate an email address using regular expressions. The function should return True if the email is valid and False if it is invalid. It should also handle common edge cases such as missing domain names or incorrect characters.â€</p><p>The AIâ€™s response will be much more precise, including the correct implementation, error handling, and edge case considerations.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In the world of AI, a <code>Prompt Engineer</code> plays a critical role in ensuring that AI models deliver optimal results. The expertise of prompt engineers can dramatically influence the quality, relevance, and accuracy of responses from language models like <code>GPT-4</code>. By following best practicesâ€”such as being specific, providing context, testing different iterations, and using examplesâ€”they can significantly improve the interaction between humans and AI.</p><p>As AI continues to evolve, the role of prompt engineering will become even more important, helping users and businesses unlock the full potential of artificial intelligence. Whether itâ€™s writing, problem-solving, or complex technical tasks, the way we interact with AI will increasingly depend on how well we craft our prompts.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> OpenAI </tag>
            
            <tag> GPT-4 </tag>
            
            <tag> GPT-3 </tag>
            
            <tag> Prompt Engineering </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Understanding the Azure OpenAI GPT-4 API Chat Role Usage</title>
      <link href="/2024/11/01/understanding-the-azure-openai-gpt-4-api-role/"/>
      <url>/2024/11/01/understanding-the-azure-openai-gpt-4-api-role/</url>
      
        <content type="html"><![CDATA[<p><code>Azure OpenAI</code> is a service provided by Microsoft that integrates OpenAIâ€™s advanced language models into the Azure cloud platform. It allows developers to access and use OpenAIâ€™s capabilities, such as natural language processing, code generation, and more, through Azureâ€™s infrastructure.</p><p>Recently, we have deployed our first version of the OpenAI <code>GPT-4</code> model into the Azure cloud platform. This model is a powerful natural language model that can generate text based on a given prompt.</p><h2 id="What-is-GPT-4"><a href="#What-is-GPT-4" class="headerlink" title="What is GPT-4?"></a>What is GPT-4?</h2><p><code>GPT-4</code> is a transformer-based language model that was developed by OpenAI. It is a powerful language model that can generate text based on a given prompt. It has been trained on a large dataset of text and can generate coherent and engaging text that is often considered to be the next big thing in language models.</p><h2 id="How-can-I-use-the-GPT-4-API"><a href="#How-can-I-use-the-GPT-4-API" class="headerlink" title="How can I use the GPT-4 API?"></a>How can I use the GPT-4 API?</h2><p>To use the GPT-4 API, you need to follow these steps:</p><ol><li>Create an Azure account.</li><li>Create a resource group.</li><li>Create a new OpenAI resource.</li><li>Generate an API key.</li><li>Use the API key to make API requests.</li></ol><h3 id="1-Create-an-Azure-account"><a href="#1-Create-an-Azure-account" class="headerlink" title="1. Create an Azure account"></a>1. Create an Azure account</h3><p>To use the GPT-4 API, you need to have an Azure account. If you donâ€™t have one, you can create one for free by following the steps in the <a href="https://azure.microsoft.com/en-us/free/">Azure sign-up page</a>.</p><h3 id="2-Create-a-resource-group"><a href="#2-Create-a-resource-group" class="headerlink" title="2. Create a resource group"></a>2. Create a resource group</h3><p>Create a resource group to organize your Azure resources. To create a new resource group, follow these steps:</p><ol><li>Go to the <a href="https://portal.azure.com/">Azure portal</a>.</li><li>Click on the <code>Resource groups</code> option in the left-hand menu.</li><li>Click on the <code>+ Create</code> button.</li><li>Enter a name for your resource group and select your subscription.</li><li>Click on the <code>Review + create</code> button.</li></ol><h3 id="3-Create-a-new-OpenAI-resource"><a href="#3-Create-a-new-OpenAI-resource" class="headerlink" title="3. Create a new OpenAI resource"></a>3. Create a new OpenAI resource</h3><p>To create a new OpenAI resource, follow these steps:</p><ol><li>Go to the <a href="https://portal.azure.com/">Azure portal</a>.</li><li>Click on the <code>Create a resource</code> button.</li><li>Search for <code>OpenAI</code> in the search bar.</li><li>Click on the <code>OpenAI</code> resource.</li><li>Click on the <code>Create</code> button.</li><li>Enter a name for your OpenAI resource and select your subscription.</li><li>Select the resource group you created earlier.</li><li>Select the pricing tier.</li><li>Click on the <code>Create</code> button.</li></ol><h3 id="4-Generate-an-API-key"><a href="#4-Generate-an-API-key" class="headerlink" title="4. Generate an API key"></a>4. Generate an API key</h3><p>To generate an API key, follow these steps:</p><ol><li>Go to the <a href="https://portal.azure.com/">Azure portal</a>.</li><li>Click on the <code>All resources</code> option in the left-hand menu.</li><li>Search for your OpenAI resource.</li><li>Click on the resource.</li><li>Click on the <code>Show access keys</code> button.</li><li>Copy the <code>Key 1</code> value.</li></ol><h3 id="5-Use-the-API-key-to-make-API-requests"><a href="#5-Use-the-API-key-to-make-API-requests" class="headerlink" title="5. Use the API key to make API requests"></a>5. Use the API key to make API requests</h3><p>To make API requests, we need to include the API key in the request headers. Hereâ€™s an example of how to make a request to the GPT-4 API with REST styles. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="variable">$AZURE_OPENAI_ENDPOINT</span>/openai/deployments/gpt-4o/chat/completions?api-version=2023-07-01-preview \</span><br><span class="line">  -H <span class="string">&quot;Content-Type: application/json&quot;</span> \</span><br><span class="line">  -H <span class="string">&quot;api-key: <span class="variable">$AZURE_OPENAI_API_KEY</span>&quot;</span> \</span><br><span class="line">  -d <span class="string">&#x27;&#123;&quot;messages&quot;:[&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;There are 5 classifications: Suggestion, Meanless, Compliment, Complaint, Please provide a classification for user input.&quot;&#125;,&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Does Azure OpenAI support customer managed keys?&quot;&#125;,&#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;A classification word&quot;&#125;,&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;its great and easy to use&quot;&#125;]&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>Place your API key and endpoint in the appropriate variables, and update which deployments model (gpt-4, gpt-4o or other models) and model version of your endpoint is using.</p><p>The Azure OpenAI also supports multiple programming languages, including <code>Python</code>, <code>JavaScript</code>, and <code>C#</code>. You can use the API to generate text in your preferred programming language.</p><h2 id="GPT-4-Chat-Roles"><a href="#GPT-4-Chat-Roles" class="headerlink" title="GPT-4 Chat Roles"></a>GPT-4 Chat Roles</h2><p>In above message parameter, you may notice thata there are three roles: <code>system</code>, <code>user</code>, and <code>assistant</code>. The GPT-4 API supports three chat roles. Let digger deeper into each role:</p><p><strong>System</strong>: This role sets the context or guidelines for the conversation. Itâ€™s where you can specify instructions or constraints for how the assistant should behave throughout the interaction.</p><p><strong>User</strong>: This role represents the input from the person interacting with the model. Any questions or prompts posed by the user fall under this role.</p><p><strong>Assistant</strong>: This role is for the modelâ€™s responses. It contains the output generated by the assistant based on the user input and the context provided by the system.</p><p>In another word. The <code>system</code> role sets the context, the <code>user</code> role represents the input, and the <code>assistant</code> role contains the output.</p><blockquote><p>Use system to define the conversationâ€™s tone, behavior, or rules.<br>Use user for all queries or statements made by the person.<br>Use assistant for the modelâ€™s replies.</p></blockquote><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>Letâ€™s say we want to classify the product feedback classification as <code>Suggestion</code>, <code>Meanless</code>, <code>Compliment</code>, <code>Complaint</code>, or <code>Others</code>. We can use the GPT-4 API to generate text based on the given prompt and classify the feedback.</p><p>First, we define the context or guidelines to let the assistant know what result we want to achieve. Given below content to the <code>system</code> role.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;There are 5 classifications: Suggestion, Meanless, Compliment, Complaint, Please provide a classification for user input.&quot;&#125;,</span><br></pre></td></tr></table></figure><p>And, we only the <code>OpenAI</code> to reply me the classification word when user input is provided. So we define the <code>assistant</code> role as <code>classification word</code>.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;A classification word&quot;&#125;</span><br></pre></td></tr></table></figure><p>Now, we can ask the user to provide the feedback and provide the <code>user</code> role.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;its great and easy to use&quot;&#125;</span><br></pre></td></tr></table></figure><p>After the conversation, the <code>assistant</code> role will provide the classification word as <code>Compliment</code>. You will notice that there is a piece of json indicates the <code>assistant</code> role content value in the response. The OpenAI gpt-4o model knows â€œits great and easy to useâ€ is a â€œComplimentâ€ and provides the classification word as â€œComplimentâ€.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;content&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Compliment&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;role&quot;</span><span class="punctuation">:</span> <span class="string">&quot;assistant&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/openai-chat-role-api-usage-example-1.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/openai-chat-role-api-usage-example-1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Classification - its great and easy to use" style="width:800px;"/></div><span class="image-caption">Classification - its great and easy to use</span></div><p>Letâ€™s try another user input.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;I&#x27;m in your walls&quot;&#125;</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/openai-chat-role-api-usage-example-2.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/openai-chat-role-api-usage-example-2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Classification - I'm in your walls" style="width:800px;"/></div><span class="image-caption">Classification - I'm in your walls</span></div><p>The <code>assistant</code> role will provide the classification word as <code>Meanless</code>. Because this input is not meanful for any product feedback.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In this article, we have explored the role of the Azure OpenAI GPT-4 API and how it can be used to generate text. We have also learned about the chat roles and how to use them to classify the product feedback.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> OpenAI </tag>
            
            <tag> Azure </tag>
            
            <tag> GPT-4 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Data Analysis Chart by Generative AI</title>
      <link href="/2024/10/29/data-analysis-chart-by-generative-ai/"/>
      <url>/2024/10/29/data-analysis-chart-by-generative-ai/</url>
      
        <content type="html"><![CDATA[<p>In data analysis, we often need to create charts to visualize the data by using BI tools, such as <code>Tableau</code>, <code>Power BI</code>, <code>AWS Quicksight</code>, or <code>Qlik Sense</code>. These tools allow us to create interactive and visually appealing charts, which can help us to identify patterns and trends in the data.</p><h2 id="General-Solution-Architecture-for-Data-Analysis-BI-Chart"><a href="#General-Solution-Architecture-for-Data-Analysis-BI-Chart" class="headerlink" title="General Solution Architecture for Data Analysis BI Chart"></a>General Solution Architecture for Data Analysis BI Chart</h2><p>The general data analysis BI chart solution architecture like below:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/bi-chart-general-arch.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/bi-chart-general-arch.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="General Solution Architecture for Data Analysis BI Chart" style="width:800px;"/></div><span class="image-caption">General Solution Architecture for Data Analysis BI Chart</span></div>.<p>Usually, the engieering create business chart by using BI tools after data is ETL proceseed. If the business want to see the data distribution chart, they need to ask the data engineer to create the chart. The data engineer will create the chart using BI tools and share it with the business. This may take some time and effort.</p><h2 id="Solution-Architecture-for-Data-Analysis-BI-Chart-by-Generative-AI"><a href="#Solution-Architecture-for-Data-Analysis-BI-Chart-by-Generative-AI" class="headerlink" title="Solution Architecture for Data Analysis BI Chart by Generative AI"></a>Solution Architecture for Data Analysis BI Chart by Generative AI</h2><p>Think about the scenario where the business want to see the data distribution chart without the data engineerâ€™s help. How can we create the chart without the data engineerâ€™s help?</p><p>One way to create the data distribution chart without the data engineerâ€™s help is to use a generative AI model. The business just need to describe what the data they want to see and want to display as which chart type. The generative AI application will create the chart for them.</p><p>The core important thing we need to let the GenAI to understand userâ€™s natural language and generate the information which application can be use. The solution architecture like below:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/bi-chart-AI-arch.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/bi-chart-AI-arch.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AI Solution Architecture for Data Analysis BI Chart" style="width:800px;"/></div><span class="image-caption">AI Solution Architecture for Data Analysis BI Chart</span></div>.<p>The AI application will take the userâ€™s natural language as input and generate the chart for them. The AI application will use the following steps to generate the chart:</p><ol><li>Understand the userâ€™s natural language and generate the chart title, chart type and chart related sql.</li><li>Connect to the database or dataset and execute the chart related sql to get the data.</li><li>Use the data to create the chart using the chart type.</li></ol><p>The AI model could be <code>ChatGPT</code>, <code>OpenAI</code> or <code>Claude</code> model. The AI model will generate the chart related sql, chart type and chart title based on the userâ€™s natural language. The AI model will use the chart type to create the chart.</p><p>For example, if the userâ€™s natural language is â€œShow the distribution of the sales by product categoryâ€, the AI application will generate the chart title as â€œSales Distribution by Product Categoryâ€ and chart type as â€œBar Chartâ€. The AI application will execute the following sql to get the data:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> product_category, <span class="built_in">SUM</span>(sales) <span class="keyword">as</span> total_sales</span><br><span class="line"><span class="keyword">FROM</span> sales_data</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> product_category</span><br></pre></td></tr></table></figure><p>Below is a demo to generate the chart for the userâ€™s natural language base on testing sample data.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/bi-chart-by-ai-test-1.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/bi-chart-by-ai-test-1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:800px;"/></div></div>.<p>User input natural language: </p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;I want to see the distribution of all product categories with duplicate devices removed, and exclude the empty category, please display it in a pie chart.&quot;</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/bi-chart-by-ai-test-1a.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/bi-chart-by-ai-test-1a.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:800px;"/></div></div>.<p>The AI model response below base on the userâ€™s natural language and prompts.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    &#x27;sql&#x27;<span class="punctuation">:</span> <span class="string">&quot;SELECT category, COUNT(DISTINCT macaddress) as device_count FROM device_demo_data WHERE category != &#x27;&#x27; GROUP BY category ORDER BY device_count DESC&quot;</span><span class="punctuation">,</span> </span><br><span class="line">    &#x27;chart&#x27;<span class="punctuation">:</span> &#x27;pie&#x27;<span class="punctuation">,</span> </span><br><span class="line">    &#x27;title&#x27;<span class="punctuation">:</span> &#x27;Distribution of Unique Devices by Product Category&#x27;</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>There is a question, how the AI model know to generate this data format for us? Actually it is because we provide the prompts to the AI model. The prompts will guide the AI model to generate the chart related sql, chart type and chart title. Below is sample prompts:</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">You are a data analyst. Below is the table structure information about devices reported data. I will ask you questions, and then please generate the json data format &#123;&#x27;sql&#x27;:&#x27;&#x27;,&#x27;chart&#x27;:&#x27;table&#x27;,&#x27;title&#x27;:&#x27;&#x27;&#125; based on the questions I asked. </span><br><span class="line">Emphasize: I only need this json data format. The &#x27;sql&#x27; value is used by AWS Athena to query and generate the chart data. </span><br><span class="line">The &#x27;chart&#x27; value is the chart type, &#x27;numeric&#x27; represents a just a number, &#x27;table&#x27; represents a table chart, &#x27;pie&#x27; represents a pie chart, &#x27;bar&#x27; represents a bar chart, &#x27;line&#x27; represents a line chart. </span><br><span class="line">The &#x27;title&#x27; value is the chart title. Please remember, I only need the json string format data, don&#x27;t need other sentence.</span><br><span class="line">CREATE EXTERNAL TABLE `device_demo_data`(</span><br><span class="line">  `macaddress` string COMMENT &#x27;è®¾å¤‡macåœ°å€ / The device macaddress&#x27;, </span><br><span class="line">  `productname` string COMMENT &#x27;è®¾å¤‡äº§å“åç§° / The device product name&#x27;, </span><br><span class="line">  `category` string COMMENT &#x27;è®¾å¤‡äº§å“çš„åˆ†ç±» / The device product category&#x27;, </span><br><span class="line">  `country` string COMMENT &#x27;è®¾å¤‡æ‰€åœ¨çš„å›½å®¶ / The country where the device is located&#x27;, </span><br><span class="line">  `region` string COMMENT &#x27;è®¾å¤‡ä¸Šä¼ æ•°æ®æ‰€åœ¨çš„åŒºåŸŸ / The region where the device data is reported&#x27;, </span><br><span class="line">  `default_region` string COMMENT &#x27;è®¾å¤‡å‡ºåŽ‚è®¾ç½®çš„é»˜è®¤åŒºåŸŸ / The default region set by the device&#x27;, </span><br><span class="line">  `oneosversion` string COMMENT &#x27;è®¾å¤‡OneOSçš„ç‰ˆæœ¬å· / The OneOS version of the device&#x27;, </span><br><span class="line">  `firmwareversion` string COMMENT &#x27;è®¾å¤‡çš„å›ºä»¶ç‰ˆæœ¬å· / The firmware version of the device&#x27;, </span><br><span class="line">  `officialversion` string COMMENT &#x27;è®¾å¤‡æ˜¯å¦æ˜¯å®˜æ–¹çš„å‘å¸ƒç‰ˆæœ¬ï¼Œ1ä¸ºå®˜æ–¹ç‰ˆæœ¬ï¼Œ 0ä¸ºéžå®˜æ–¹ç‰ˆæœ¬ / Whether the device is an official release, 1 for official version, 0 for non-official version&#x27;, </span><br><span class="line">  `createtime` string COMMENT &#x27;è®¾å¤‡ä¸ŠæŠ¥æ•°æ®çš„æ—¥æœŸ, æ•°æ®ç±»åž‹æ˜¯å­—ç¬¦ä¸²ï¼Œæ—¥æœŸæ ¼å¼æ˜¯2024-09-01ï¼Œè¡¨ç¤º2024å¹´9æœˆ1æ—¥ / The date when the device reported data, the data type is string, the date format is 2024-09-01, which means September 1, 2024&#x27;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>We tell AI model the data schema and each field means, and indicate only need the json format response with specific field. Once the AI model generate the response, we can use it to create the chart for the userâ€™s natural language.</p><p>We can also generate the line chart base on time line.</p><p>User input natural language: </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">How many distinct devices reported every week, exclude the empty date, display the data in line graph</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/bi-chart-by-ai-test-2.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/bi-chart-by-ai-test-2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:800px;"/></div></div>.<p>For the front-end UI to display the chart, we can use some chart library like <code>Echarts</code>, <code>Hightcharts</code>, <code>D3.js</code> or <code>Chart.js</code>. The front-end UI display the chart base on chart type and the data which queried by SQL.</p><p>All these generated charts can be added into dashboard.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/bi-chart-by-ai-dashboard.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/bi-chart-by-ai-dashboard.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:800px;"/></div></div>.<h2 id="Limitation"><a href="#Limitation" class="headerlink" title="Limitation"></a>Limitation</h2><p>As you can see, the AI solution architecture is a new way to create BI chart. However, it still has some limitations. It can not generate the complex chart which like some BI tools advanced chart fucntionality. But it is still a good start to create the chart for business users.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Python </tag>
            
            <tag> AWS </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Intelligent SQL Generator base on Spring AI with AWS Bedrock</title>
      <link href="/2024/10/23/intelligent-sql-generator-base-on-spring-ai-with-aws-bedrock/"/>
      <url>/2024/10/23/intelligent-sql-generator-base-on-spring-ai-with-aws-bedrock/</url>
      
        <content type="html"><![CDATA[<p>The generative AI is a type of artificial intelligence (AI) that can learn from data and generate new data. In this article, we will discuss how to build an intelligent SQL generator using <code>Spring AI</code> and <code>AWS Bedrock</code>. For example, the application able to provide the data sql to us after we input the natural language questions, and we can query the data by using the sql, even display the chart base on data queried.</p><h2 id="Spring-AI"><a href="#Spring-AI" class="headerlink" title="Spring AI"></a>Spring AI</h2><p>The <code>Spring AI</code> is a project of <code>Spring</code>. It support for all major AI Model providers such as <code>Anthropic</code>, <code>OpenAI</code>, <code>Microsoft</code>, <code>Amazon</code>, <code>Google</code>, and <code>Ollama</code>. Model type supports such as <code>Chart Completion</code>, <code>Text to Image</code>, <code>Text to Speech</code>, <code>Translation</code>, <code>Audio Transcription</code> and so on. It make it easy to integrate AI models into the application.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/spring-ai.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/spring-ai.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Spring AI" style="width:500px;"/></div><span class="image-caption">Spring AI</span></div><h2 id="AWS-Bedrock"><a href="#AWS-Bedrock" class="headerlink" title="AWS Bedrock"></a>AWS Bedrock</h2><p>Amazon Bedrock is a fully managed service that makes FMs from leading AI startups and Amazon available via an API, so you can choose from a wide range of FMs to find the model that is best suited for your use case. It contains <code>Anthropic</code> (<code>Claude</code>), <code>Meta</code> (<code>Llama</code>) and <code>Stability AI</code> models. In this blog, we will use <code>Claude</code> AI model of <code>Anthropic</code> to build our intelligent SQL generator.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/aws-bedrock-ai.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/aws-bedrock-ai.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Bedrock" style="width:600px;"/></div><span class="image-caption">AWS Bedrock</span></div><h2 id="Building-Intelligent-SQL-Generator"><a href="#Building-Intelligent-SQL-Generator" class="headerlink" title="Building Intelligent SQL Generator"></a>Building Intelligent SQL Generator</h2><p>Assuming weâ€™re data analyzer, we have product_sales, products and customers three tables data in mysql. And we want to query the data by input natural language instead of write specific SQL manually. We can use AI to understand user natural langauge to generate the SQL base on table schemas. Letâ€™s get start. </p><h3 id="Create-a-new-Spring-Boot-project"><a href="#Create-a-new-Spring-Boot-project" class="headerlink" title="Create a new Spring Boot project"></a>Create a new Spring Boot project</h3><p>Create a <code>Spring Boot</code> project with restful api, add the following dependencies in maven <code>pom.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-bedrock-ai-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>The <code>spring-ai-bedrock-ai-spring-boot-starter</code> is library that provides integration with <code>AWS Bedrock</code> models in <code>Spring AI</code>.</p><h3 id="Configure-AWS-Bedrock-configuraitons"><a href="#Configure-AWS-Bedrock-configuraitons" class="headerlink" title="Configure AWS Bedrock configuraitons"></a>Configure AWS Bedrock configuraitons</h3><p>In application.properties, configur below configurations.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=spring-ai-datasql</span><br><span class="line">spring.ai.bedrock.aws.region=us-east-1</span><br><span class="line">spring.ai.bedrock.aws.timeout=5m</span><br><span class="line">spring.ai.bedrock.anthropic3.chat.enabled=true</span><br><span class="line">spring.ai.bedrock.anthropic3.chat.options.max-tokens=4000</span><br><span class="line"></span><br><span class="line"># config below AWS credential key, configure it in Java environments or System environments</span><br><span class="line">spring.ai.bedrock.aws.access-key=$&#123;AWS_ACCESS_KEY_ID&#125;</span><br><span class="line">spring.ai.bedrock.aws.secret-key=$&#123;AWS_SECRET_ACCESS_KEY&#125;</span><br></pre></td></tr></table></figure><h3 id="Prepare-prompts-for-AI"><a href="#Prepare-prompts-for-AI" class="headerlink" title="Prepare prompts for AI"></a>Prepare prompts for AI</h3><p>Since we only need AI to generate the SQL base on mysql table schema. So we need prepare prompts to <code>AI</code> to fully understand our requirements. Below is <code>prompts.txt</code></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">There are 3 mysql tables schema product_sales, products, customers.</span><br><span class="line">CREATE TABLE product_sales (</span><br><span class="line">    sale_id INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">    product_id INT NOT NULL,</span><br><span class="line">    sale_date DATETIME DEFAULT CURRENT_TIMESTAMP,</span><br><span class="line">    price DECIMAL(10, 2) NOT NULL,</span><br><span class="line">    customer_id INT,</span><br><span class="line">    region VARCHAR(100),</span><br><span class="line">    FOREIGN KEY (product_id) REFERENCES products(product_id),</span><br><span class="line">    FOREIGN KEY (customer_id) REFERENCES customers(customer_id)</span><br><span class="line">);</span><br><span class="line">CREATE TABLE products (</span><br><span class="line">    product_id INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">    product_name VARCHAR(100),</span><br><span class="line">    product_category VARCHAR(100)</span><br><span class="line">);</span><br><span class="line">CREATE TABLE customers (</span><br><span class="line">    customer_id INT AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">    customer_name VARCHAR(100)</span><br><span class="line">);</span><br><span class="line">I will ask you question, please base on table schema to generate the SQL text in single line, please note I only need full correct sql text, do not</span><br><span class="line">need other text or any other characters.</span><br></pre></td></tr></table></figure><p>In above prompts, you can see it tells AI we only need SQL text base on the 3 mysql table schemas.</p><h3 id="Core-Code"><a href="#Core-Code" class="headerlink" title="Core Code"></a>Core Code</h3><p>Create a restful controller and pass the prompts and user input message to AI model.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.ai.datasql.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.bedrock.anthropic3.BedrockAnthropic3ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> spring.ai.datasql.service.PromptService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SQLGenController</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BedrockAnthropic3ChatModel chatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PromptService prompts;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SQLGenController</span><span class="params">(BedrockAnthropic3ChatModel chatModel)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.chatModel = chatModel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/ai/sql&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Map <span class="title function_">generate</span><span class="params">(<span class="meta">@RequestBody</span> String message)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">newMsg</span> <span class="operator">=</span> prompts.getContent() + message;</span><br><span class="line">        <span class="keyword">return</span> Map.of(<span class="string">&quot;sql&quot;</span>, chatModel.call(newMsg));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In above code, we inject <code>BedrockAnthropic3ChatModel</code> which is <code>Anthropic</code> model of <code>AWS Bedrock</code> provided by <code>Spring AI</code>. We also inject <code>PromptService</code> which is a service to read prompts.<br>In <code>generate</code> method, we read prompts from <code>PromptService</code> and append user input message to it. Then we call <code>chatModel.call</code> method to generate the SQL text.</p><p>Code of <code>PromptService</code> to read prompts from file.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.ai.datasql.service;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.PostConstruct;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromptService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;classpath:prompts.txt&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> org.springframework.core.io.Resource resource;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String fileContent;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        fileContent = <span class="keyword">new</span> <span class="title class_">String</span>(Files.readAllBytes(Paths.get(resource.getURI())));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getContent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fileContent;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Run-the-application"><a href="#Run-the-application" class="headerlink" title="Run the application"></a>Run the application</h3><p>Run the application and test the API by sending a request with user input message. We may encounter below errors.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/aws-bedrock-model-can-not-access.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/aws-bedrock-model-can-not-access.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Bedrock Model can not access"/></div><span class="image-caption">AWS Bedrock Model can not access</span></div><p>This is because the <code>spring.ai.bedrock.anthropic3.chat.model</code> in  current Spring AI version default value is <code>anthropic.claude-3-sonnet-20240229-v1:0</code>. Letâ€™s check the anthropic available Claude models in AWS Bedrock. Here we use <code>Claude 3.5</code> AI model.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/aws-bedrock-claude-model-id.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/aws-bedrock-claude-model-id.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Bedrock Anthropic Claude Model Id"/></div><span class="image-caption">AWS Bedrock Anthropic Claude Model Id</span></div><p>Copy this model id and update the <code>spring.ai.bedrock.anthropic3.chat.model</code> in <code>application.properties</code> file. The fully updated <code>application.properties</code> file should be like below.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=spring-ai-datasql</span><br><span class="line">spring.ai.bedrock.aws.region=us-east-1</span><br><span class="line">spring.ai.bedrock.aws.timeout=5m</span><br><span class="line">spring.ai.bedrock.anthropic3.chat.enabled=true</span><br><span class="line">spring.ai.bedrock.anthropic3.chat.options.max-tokens=4000</span><br><span class="line">spring.ai.bedrock.anthropic3.chat.model=anthropic.claude-3-5-sonnet-20240620-v1:0</span><br><span class="line"></span><br><span class="line"># config below AWS credential key, it also can be configure in Java environments or System environments</span><br><span class="line">spring.ai.bedrock.aws.access-key=$&#123;AWS_ACCESS_KEY_ID&#125;</span><br><span class="line">spring.ai.bedrock.aws.secret-key=$&#123;AWS_SECRET_ACCESS_KEY&#125;</span><br></pre></td></tr></table></figure><p>Now, we can run the application and test the API.</p><h4 id="Test-Example-1"><a href="#Test-Example-1" class="headerlink" title="Test Example 1"></a>Test Example 1</h4><p><strong>Input:</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">What&#x27;s the total prices of product sales ?</span><br></pre></td></tr></table></figure><p><strong>Output:</strong></p><p>The response will be like below.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(price) <span class="keyword">FROM</span> product_sales;</span><br></pre></td></tr></table></figure><p><strong>Postman Screenshot:</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/gen-sql-by-ai-test-1.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/gen-sql-by-ai-test-1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>The <code>AI</code> model can generate the SQL text base on user input message.</p><h4 id="Test-Example-2"><a href="#Test-Example-2" class="headerlink" title="Test Example 2"></a>Test Example 2</h4><p><strong>Input:</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">How many customers by our products? I only need unique customers.</span><br></pre></td></tr></table></figure><p><strong>Output:</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> customer_id) <span class="keyword">FROM</span> product_sales</span><br></pre></td></tr></table></figure><p><strong>Postman Screenshot:</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/gen-sql-by-ai-test-2.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/gen-sql-by-ai-test-2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="Test-Example-3"><a href="#Test-Example-3" class="headerlink" title="Test Example 3"></a>Test Example 3</h4><p><strong>Input:</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I want to see the total sales prices for each product categories.</span><br></pre></td></tr></table></figure><p><strong>Output:</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> product_category, <span class="built_in">SUM</span>(price) <span class="keyword">AS</span> total_sales <span class="keyword">FROM</span> product_sales <span class="keyword">JOIN</span> products <span class="keyword">ON</span> product_sales.product_id <span class="operator">=</span> products.product_id <span class="keyword">GROUP</span> <span class="keyword">BY</span> product_category;</span><br></pre></td></tr></table></figure><p><strong>Postman Screenshot:</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/gen-sql-by-ai-test-3.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/gen-sql-by-ai-test-3.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="Test-Example-4"><a href="#Test-Example-4" class="headerlink" title="Test Example 4"></a>Test Example 4</h4><p><strong>Input:</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Please show me all sales data which contains price, sales date, customer name and product name and product categories</span><br></pre></td></tr></table></figure><p><strong>Output:</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ps.price, ps.sale_date, c.customer_name, p.product_name, p.product_category <span class="keyword">FROM</span> product_sales ps <span class="keyword">JOIN</span> products p <span class="keyword">ON</span> ps.product_id <span class="operator">=</span> p.product_id <span class="keyword">JOIN</span> customers c <span class="keyword">ON</span> ps.customer_id <span class="operator">=</span> c.customer_id</span><br></pre></td></tr></table></figure><p><strong>Postman Screenshot:</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/gen-sql-by-ai-test-4.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/gen-sql-by-ai-test-4.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h4 id="Test-Example-5"><a href="#Test-Example-5" class="headerlink" title="Test Example 5"></a>Test Example 5</h4><p><strong>Input:</strong> </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Please show total sales prices of each product category on 2nd quarter this year</span><br></pre></td></tr></table></figure><p><strong>Output:</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> p.product_category, <span class="built_in">SUM</span>(ps.price) <span class="keyword">AS</span> total_sales <span class="keyword">FROM</span> product_sales ps <span class="keyword">JOIN</span> products p <span class="keyword">ON</span> ps.product_id <span class="operator">=</span> p.product_id <span class="keyword">WHERE</span> <span class="keyword">YEAR</span>(ps.sale_date) <span class="operator">=</span> <span class="keyword">YEAR</span>(CURDATE()) <span class="keyword">AND</span> QUARTER(ps.sale_date) <span class="operator">=</span> <span class="number">2</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> p.product_category</span><br></pre></td></tr></table></figure><p><strong>Postman Screenshot:</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/gen-sql-by-ai-test-5.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/gen-sql-by-ai-test-5.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>As you can see the <code>AI</code> model can generate the SQL text base on user input message. Base on this function, we can download the data from mysql or display the chart base on data queried. Itâ€™s good for business analyst to query the data by natural language.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
            <tag> AI </tag>
            
            <tag> AWS </tag>
            
            <tag> SQL </tag>
            
            <tag> Spring AI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The useEffect of React Runs Twice in Development Mode.</title>
      <link href="/2024/10/16/the-useeffect-of-react-runs-twice-in-development-mode/"/>
      <url>/2024/10/16/the-useeffect-of-react-runs-twice-in-development-mode/</url>
      
        <content type="html"><![CDATA[<p>Have you noticed that your <code>useEffect</code> hook of <code>React</code> runs twice when the page first loads in development mode? This occurs because since <code>React 18</code>, it can be confusing, especially for new developers. Letâ€™s explore why this happens and what it means.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/react/react-hook-useEffect.png" class="lazyload placeholder" data-srcset="/assets/images/react/react-hook-useEffect.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="React Hook useEffect" style="width:800px;"/></div><span class="image-caption">React Hook useEffect</span></div><h2 id="What-is-useEffect"><a href="#What-is-useEffect" class="headerlink" title="What is useEffect?"></a>What is <code>useEffect</code>?</h2><p><code>useEffect</code> is a hook that allows you to perform side effects in your components. Side effects can be things like <strong>fetching data</strong>, <strong>subscribing to events</strong>, or <strong>changing the DOM</strong>. This hook takes two arguments:</p><ol><li>A function to run your side effect.</li><li>An optional array of dependencies that tells React when to run the effect again.</li></ol><p>Hereâ€™s a simple example of useEffect in action:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ExampleComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Effect has been executed&#x27;</span>);</span><br><span class="line">    <span class="comment">// Side effect logic here</span></span><br><span class="line">  &#125;, [count]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>You clicked &#123;count&#125; times<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In above code, the log â€˜Effect has been executedâ€™ will be printed to the console twice when the component is first render on development mode.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/react/react-useEffect-runs-twice.png" class="lazyload placeholder" data-srcset="/assets/images/react/react-useEffect-runs-twice.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="React useEffect runs twice in development mode"/></div><span class="image-caption">React useEffect runs twice in development mode</span></div><h2 id="Why-Does-useEffect-Run-Twice-in-Development-Mode"><a href="#Why-Does-useEffect-Run-Twice-in-Development-Mode" class="headerlink" title="Why Does useEffect Run Twice in Development Mode?"></a>Why Does useEffect Run Twice in Development Mode?</h2><p>When you run your React app in development mode, you might see that the useEffect runs twice when the component loads for the first time. This can be confusing, especially for new developers.</p><h3 id="Reasons-for-the-Double-Execution"><a href="#Reasons-for-the-Double-Execution" class="headerlink" title="Reasons for the Double Execution"></a>Reasons for the Double Execution</h3><p><strong>Strict Mode:</strong> This behavior is part of Reactâ€™s <code>Strict Mode</code>. It purposely runs certain lifecycle methods and hooks like useEffect twice during development. This helps check if your code can handle side effects correctly.</p><p><strong>Testing Effects:</strong> By running the effect two times, React tests if your side effects can handle being called multiple times without causing bugs. This helps catch problems early.</p><h3 id="What-Happens-in-Production"><a href="#What-Happens-in-Production" class="headerlink" title="What Happens in Production?"></a>What Happens in Production?</h3><span class='pbg danger'>The double call only happens in development mode. When you make your app for production</span><h2 id="How-to-Handle-the-Double-Execution"><a href="#How-to-Handle-the-Double-Execution" class="headerlink" title="How to Handle the Double Execution"></a>How to Handle the Double Execution</h2><p>Here are some tips for dealing with the double execution of useEffect:</p><p><strong>Be Careful with State Updates</strong>: If your effect updates state, make sure itâ€™s safe to run the effect multiple times without causing issues.</p><p><strong>Use Cleanup Functions</strong>: Always return a cleanup function from your useEffect to free up resources and avoid memory issues.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Your side effect code here</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Cleanup code here</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [dependencies]);</span><br></pre></td></tr></table></figure><p><strong>Test Your Effects</strong>: Use the extra invocation to ensure that your effects work correctly.</p><h2 id="Disable-Strict-Mode"><a href="#Disable-Strict-Mode" class="headerlink" title="Disable Strict Mode"></a>Disable Strict Mode</h2><p>It is not recommend this way, but if you want to disable Strict Mode, in <code>React 18</code> you can disable Strict Mode by removing the <code>&lt;React.StrictMode&gt;</code> tag from the return statement in your root component.</p><p>In <code>Next.js</code>, you can disable Strict Mode by setting the following parameter in <code>next.config.js</code>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">reactStrictMode</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><span class='pbg green'>Seeing useEffect run twice in development mode can be surprising</span> Understanding this behavior and preparing your code for it will allow you to use React hooks effectively and build better applications.<p>Even though this might seem confusing at first, itâ€™s an important part of the React development experience. Happy coding!</p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS Glue Iceberg tables schema can&#39;t be updated with Pulumi</title>
      <link href="/2024/10/09/aws-glue-iceberg-tables-schema-can-t-be-updated-with-pulumi/"/>
      <url>/2024/10/09/aws-glue-iceberg-tables-schema-can-t-be-updated-with-pulumi/</url>
      
        <content type="html"><![CDATA[<h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><p>Recently, weâ€™re planing to use <code>Pulumi</code> to manage all current existing <code>AWS Glue Datacatalog</code> tables which are <code>Iceberg</code> format. For the <code>Iceberg</code> tables, I have post a blog before to talk about what is iceberg and whatâ€™s feature of it. Here is post link: <a href="https://stonefishy.github.io/2020/05/23/what-is-apache-iceberg/">https://stonefishy.github.io/2020/05/23/what-is-apache-iceberg/</a></p><p>To manage the AWS Glue Iceberg tables with <code>Pulumi</code>, due to our catalog table schemas are continue changes base on requirements. We need to do some technical POC whethere the pulumi can also support to update the iceberg metadata schema as well.</p><h2 id="Create-Glue-Iceberg-Table"><a href="#Create-Glue-Iceberg-Table" class="headerlink" title="Create Glue Iceberg Table"></a>Create Glue Iceberg Table</h2><p>Weâ€™re using <code>Pulumi</code> to manage the AWS Cloud Infrastructure. Before create glue table, a glue database is indeed.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pulumi</span><br><span class="line"><span class="keyword">import</span> pulumi_aws <span class="keyword">as</span> aws</span><br><span class="line"></span><br><span class="line">pulumi_database_test = aws.glue.CatalogDatabase(<span class="string">&quot;pulumi_database_test&quot;</span>,</span><br><span class="line">    create_table_default_permissions=[aws.glue.CatalogDatabaseCreateTableDefaultPermissionArgs(</span><br><span class="line">        permissions=[<span class="string">&quot;ALL&quot;</span>],</span><br><span class="line">        principal=aws.glue.CatalogDatabaseCreateTableDefaultPermissionPrincipalArgs(</span><br><span class="line">            data_lake_principal_identifier=<span class="string">&quot;IAM_ALLOWED_PRINCIPALS&quot;</span>,</span><br><span class="line">        ),</span><br><span class="line">    )],</span><br><span class="line">    name=<span class="string">&quot;pulumi_database_test&quot;</span>)</span><br></pre></td></tr></table></figure><p>Above code is to create a glue database named pulumi_database_test. Next Step is to create a glue table with <code>Iceberg</code> format.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pulumi</span><br><span class="line"><span class="keyword">import</span> pulumi_aws <span class="keyword">as</span> aws</span><br><span class="line"></span><br><span class="line">pulumi_external_table_test = aws.glue.CatalogTable(<span class="string">&quot;pulumi_external_table_test&quot;</span>,</span><br><span class="line">    database_name=<span class="string">&quot;pulumi_database_test&quot;</span>,</span><br><span class="line">    name=<span class="string">&quot;pulumi_external_table_test&quot;</span>,</span><br><span class="line">    storage_descriptor=aws.glue.CatalogTableStorageDescriptorArgs(</span><br><span class="line">        additional_locations=[<span class="string">&quot;s3://xxx/pulumi_external_table_test/data&quot;</span>],</span><br><span class="line">        columns=[</span><br><span class="line">            aws.glue.CatalogTableStorageDescriptorColumnArgs(</span><br><span class="line">                name=<span class="string">&quot;test1&quot;</span>,</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&quot;string&quot;</span>,</span><br><span class="line">            ),</span><br><span class="line">            aws.glue.CatalogTableStorageDescriptorColumnArgs(</span><br><span class="line">                name=<span class="string">&quot;test2&quot;</span>,</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&quot;string&quot;</span>,</span><br><span class="line">            ),</span><br><span class="line">            aws.glue.CatalogTableStorageDescriptorColumnArgs(</span><br><span class="line">                name=<span class="string">&quot;test3&quot;</span>,</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">            ),</span><br><span class="line">            aws.glue.CatalogTableStorageDescriptorColumnArgs(</span><br><span class="line">                name=<span class="string">&quot;test4&quot;</span>,</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&quot;string&quot;</span>,</span><br><span class="line">            )</span><br><span class="line">        ],</span><br><span class="line">        location=<span class="string">&quot;s3://xxx/pulumi_external_table_test&quot;</span>,</span><br><span class="line">    ),</span><br><span class="line">    table_type=<span class="string">&quot;EXTERNAL_TABLE&quot;</span>,</span><br><span class="line">        open_table_format_input=aws.glue.CatalogTableOpenTableFormatInputArgs(</span><br><span class="line">        iceberg_input=aws.glue.CatalogTableOpenTableFormatInputIcebergInputArgs(</span><br><span class="line">            metadata_operation=<span class="string">&quot;CREATE&quot;</span></span><br><span class="line">        )</span><br><span class="line">    ),</span><br><span class="line">    opts=pulumi.ResourceOptions(protect=<span class="literal">False</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>There is important thing to notice here is that we need to set <code>open_table_format_input</code> with <code>iceberg_input</code> and set <code>metadata_operation</code> as <code>CREATE</code>. This is because we want to create a new Iceberg table with new schema. </p><p>Below is glue iceberg table created screenshot. You can see the 4 fields is added in schema and table format is <code>Apache Iceberg</code>.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-glue-table.png" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-glue-table.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Glue Table Schema Created by Pulumi"/></div><span class="image-caption">AWS Glue Table Schema Created by Pulumi</span></div><p>Next, letâ€™s check the important file that is <code>Apache Iceberg</code> metadata file which is located in <code>s3://xxx/pulumi_external_table_test/metadata/</code>.  Download this json file <code>00006-fd122b03-a7aa-42cf-8fec-001535a9fcf5.metadata.json</code> from <code>S3</code>. The 4 fields are defined in metadata json file. That is good. The metadata json is created as well when creating glue table.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-glue-iceberg-metadata.png" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-glue-iceberg-metadata.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Glue Table Iceberg metadata"/></div><span class="image-caption">AWS Glue Table Iceberg metadata</span></div><h2 id="Insert-new-data-in-Glue-iceberg-table"><a href="#Insert-new-data-in-Glue-iceberg-table" class="headerlink" title="Insert new data in Glue iceberg table"></a>Insert new data in Glue iceberg table</h2><p>Letâ€™s using <code>AWS Athena</code> to insert a test data in the table.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pulumi_database_test.pulumi_external_table_test(test1,test2,test3,test4) <span class="keyword">VALUES</span>(<span class="string">&#x27;1a&#x27;</span>, <span class="string">&#x27;2a&#x27;</span>, <span class="literal">true</span>, <span class="string">&#x27;4a&#x27;</span>)</span><br></pre></td></tr></table></figure><p>The data is insert success and we can use <code>SELECT</code> sql to query the data.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-glue-iceberg-table-query.png" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-glue-iceberg-table-query.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Query inserted data in AWS Glue Iceberg table"/></div><span class="image-caption">Query inserted data in AWS Glue Iceberg table</span></div><p>In Iceberg table, we can <code>insert</code>, <code>update</code>, <code>delete</code> data as well.</p><h2 id="Update-Glue-Iceberg-table-schema"><a href="#Update-Glue-Iceberg-table-schema" class="headerlink" title="Update Glue Iceberg table schema"></a>Update Glue Iceberg table schema</h2><p>Letâ€™s add a new field <code>test5</code> in the glue iceberg table base on previous code.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pulumi</span><br><span class="line"><span class="keyword">import</span> pulumi_aws <span class="keyword">as</span> aws</span><br><span class="line"></span><br><span class="line">pulumi_external_table_test = aws.glue.CatalogTable(<span class="string">&quot;pulumi_external_table_test&quot;</span>,</span><br><span class="line">    database_name=<span class="string">&quot;pulumi_database_test&quot;</span>,</span><br><span class="line">    name=<span class="string">&quot;pulumi_external_table_test&quot;</span>,</span><br><span class="line">    storage_descriptor=aws.glue.CatalogTableStorageDescriptorArgs(</span><br><span class="line">        additional_locations=[<span class="string">&quot;s3://xxx/pulumi_external_table_test/data&quot;</span>],</span><br><span class="line">        columns=[</span><br><span class="line">            aws.glue.CatalogTableStorageDescriptorColumnArgs(</span><br><span class="line">                name=<span class="string">&quot;test1&quot;</span>,</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&quot;string&quot;</span>,</span><br><span class="line">            ),</span><br><span class="line">            aws.glue.CatalogTableStorageDescriptorColumnArgs(</span><br><span class="line">                name=<span class="string">&quot;test2&quot;</span>,</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&quot;string&quot;</span>,</span><br><span class="line">            ),</span><br><span class="line">            aws.glue.CatalogTableStorageDescriptorColumnArgs(</span><br><span class="line">                name=<span class="string">&quot;test3&quot;</span>,</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">            ),</span><br><span class="line">            aws.glue.CatalogTableStorageDescriptorColumnArgs(</span><br><span class="line">                name=<span class="string">&quot;test4&quot;</span>,</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&quot;string&quot;</span>,</span><br><span class="line">            ),</span><br><span class="line">            aws.glue.CatalogTableStorageDescriptorColumnArgs(</span><br><span class="line">                name=<span class="string">&quot;test5&quot;</span>,</span><br><span class="line">                <span class="built_in">type</span>=<span class="string">&quot;string&quot;</span>,</span><br><span class="line">            )</span><br><span class="line">        ],</span><br><span class="line">        location=<span class="string">&quot;s3://xxx/pulumi_external_table_test&quot;</span>,</span><br><span class="line">    ),</span><br><span class="line">    table_type=<span class="string">&quot;EXTERNAL_TABLE&quot;</span>,</span><br><span class="line">        open_table_format_input=aws.glue.CatalogTableOpenTableFormatInputArgs(</span><br><span class="line">        iceberg_input=aws.glue.CatalogTableOpenTableFormatInputIcebergInputArgs(</span><br><span class="line">            metadata_operation=<span class="string">&quot;CREATE&quot;</span></span><br><span class="line">        )</span><br><span class="line">    ),</span><br><span class="line">    opts=pulumi.ResourceOptions(protect=<span class="literal">False</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>Execute <code>pulumi up</code> command to update the glue table schema.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-glue-iceberg-update-by-pulumi.png" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-glue-iceberg-update-by-pulumi.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Pulumi update AWS Glue Iceberg table schema"/></div><span class="image-caption">Pulumi update AWS Glue Iceberg table schema</span></div><p>After that, we can check the glue table schema is updated to add a new field <code>test5</code>.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-glue-iceberg-table-new-field.png" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-glue-iceberg-table-new-field.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Glue iceberg table new field"/></div><span class="image-caption">AWS Glue iceberg table new field</span></div><p>Letâ€™s insert new data in the table with new field <code>test5</code> and run it in <code>AWS Athena</code>.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> pulumi_database_test.pulumi_external_table_test(test1,test2,test3,test4,test5) <span class="keyword">VALUES</span>(<span class="string">&#x27;1b&#x27;</span>, <span class="string">&#x27;2b&#x27;</span>, <span class="literal">true</span>, <span class="string">&#x27;4b&#x27;</span>, <span class="string">&#x27;5b&#x27;</span>)</span><br></pre></td></tr></table></figure><p>The Athena execute show below errors:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">COLUMN_NOT_FOUND: Insert column name does not exist in target table: test5. If a data manifest file was generated at &#x27;s3://xxxxxx/4c346103-60d2-45ea-9813-d7060bd5efe9/Unsaved/2024/10/09/37f67a67-4604-43cb-b113-af351c363a51-manifest.csv&#x27;, you may need to manually clean the data from locations specified in the manifest. Athena will not delete data in your account.</span><br><span class="line">This query ran against the &quot;pulumi_database_test&quot; database, unless qualified by the query. Please post the error message on our forum  or contact customer support  with Query Id: 37f67a67-4604-43cb-b113-af351c363a51</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-glue-iceberg-athena-insert-failed.png" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-glue-iceberg-athena-insert-failed.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Athena insert glue iceberg table failed"/></div><span class="image-caption">AWS Athena insert glue iceberg table failed</span></div><p>But when we check the <code>Apache Iceberg</code> metadata file again. The new field <code>test5</code> is not added in the new metadata file. Thatâ€™s why the insert new data with new field failed.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-glue-iceberg-metadata-not-updated.png" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-glue-iceberg-metadata-not-updated.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Glue iceberg table metadata not updated"/></div><span class="image-caption">AWS Glue iceberg table metadata not updated</span></div><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In Pulumi documentation. The <code>metadata_operation</code> of <code>iceberg_input</code> in <code>open_table_format_input</code> is only support <code>CREATE</code> value. It seems it only can create the iceberg metadata file when glue table created.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-glue-iceberg-pulumi-doc.png" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-glue-iceberg-pulumi-doc.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Pulumi API Doc"/></div><span class="image-caption">Pulumi API Doc</span></div><p>It seems this is <code>pulumi</code> issue. It is not updating the iceberg metadata file when the glue table schema is updated. Iâ€™ve raised a issue to pulumi,  here is issue link: <a href="https://github.com/pulumi/pulumi/issues/17516">https://github.com/pulumi/pulumi/issues/17516</a>. Hope this issue can be fixed soon.</p><p>Mean while, I found there is same issue in <code>Terraform</code> which also can not update the iceberg metadata file when the glue table schema is updated. Terraform issue link here <a href="https://github.com/hashicorp/terraform-provider-aws/issues/36641">https://github.com/hashicorp/terraform-provider-aws/issues/36641</a>.</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Pulumi </tag>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
            <tag> IaC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>User Survey Feedback Sentiment Analysis Base on AWS Cloud Solution</title>
      <link href="/2024/09/19/user-survey-feedback-sentiment-analysis-base-on-aws-cloud-solution/"/>
      <url>/2024/09/19/user-survey-feedback-sentiment-analysis-base-on-aws-cloud-solution/</url>
      
        <content type="html"><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>The App Product User Survey Feedback Sentiment Analysis Solution is a cloud-based solution that uses AWS services to analyze user feedback and sentiment of the app product. The solution uses Amazon Comprehend to perform sentiment analysis on the feedback and Amazon S3 to store the data. The solution is designed to be scalable and cost-effective, and can be easily integrated into any app product.</p><p>Basically, our survey feedback file is Excel file that contains the user feedback of app and related application info such as OS verion and app version. The feedback text is different language from global users, so we need to translate the text into English using Amazon Translate.  Besides, the feedback file is generated monthly. So, the solution will extract the feedback data from the Excel file, translate the text into English using Amazon Translate, perform sentiment analysis using Amazon Comprehend, and store the data in Amazon S3. The solution will also provide a dashboard to visualize the sentiment analysis results.</p><p>The <code>Amazon Comprehend</code> is a natural language processing (NLP) service that can analyze text and extract insights such as sentiment, syntax, entities, and key phrases. </p><h2 id="Solution-Architecture"><a href="#Solution-Architecture" class="headerlink" title="Solution Architecture"></a>Solution Architecture</h2><p>Below is the high-level architecture of the solution:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-sentiment-analysis-solution.png" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-sentiment-analysis-solution.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Sentiment Analysis Solution"/></div><span class="image-caption">AWS Sentiment Analysis Solution</span></div><h3 id="AWS-Services-Used"><a href="#AWS-Services-Used" class="headerlink" title="AWS Services Used"></a>AWS Services Used</h3><p>The solution uses the following AWS services:<br><code>AWS S3</code>: Amazon Simple Storage Service (S3) is a scalable object storage service that can store large amounts of data.<br><code>AWS Lambda</code>: AWS Lambda is a serverless compute service that can run code without provisioning or managing servers.<br><code>AWS Comprehend</code>: Amazon Comprehend is a natural language processing (NLP) service that can analyze text and extract insights such as sentiment, syntax, entities, and key phrases.<br><code>AWS SNS</code>: Amazon Simple Notification Service (SNS) is a messaging service that can be used to send notifications to users.<br><code>AWS Translate</code>: Amazon Translate is a machine translation service that can translate text from one language to another.<br><code>AWS SQS</code>: Amazon Simple Queue Service (SQS) is a messaging service that can be used to store and process large amounts of messages.<br><code>AWS CloudWatch</code>: Amazon CloudWatch is a monitoring service that can be used to monitor the solution and generate metrics.<br><code>AWS Glue</code>: Amazon Glue is a serverless ETL (extract, transform, and load) service that can be used to extract data from the survey feedback file and store it in Amazon S3.<br><code>AWS Athena</code>: Amazon Athena is a serverless data analytics service that can be used to query and analyze data stored in Amazon S3.<br><code>AWS QuickSight</code>: Amazon QuickSight is a business intelligence (BI) service that can be used to create visualizations and dashboards based on the sentiment analysis results.</p><h3 id="Solution-Implementation"><a href="#Solution-Implementation" class="headerlink" title="Solution Implementation"></a>Solution Implementation</h3><p>The solution implementation is divided into the following steps:</p><ol><li>Create an Amazon S3 bucket as raw data bucket to store the survey feedback Excel file.</li><li>Uploaded a survey feedback Excel file to the S3 bucket to trigger the AWS Lambda function.</li><li>AWS Lambda to extract the survey feedback data from the Excel file, translate the text into English using Amazon Translate, sentiment analysis using Amazon Comprehend, and store the data as Parquet format in another Amazon S3 Bucket.</li><li>Create an Amazon SNS topic to notify users by email when the Lambda process data failed.</li><li>Create an Amazon CloudWatch to log the lamdba exeuction logs, generate metrics.</li><li>AWS Glue Crawler to extract the parquet data from the processed amazon S3 bucket and generate a table schema.</li><li>Using Amazon Athena to query the data from the processed Amazon S3 bucket.</li><li>Create an Amazon QuickSight dashboard to visualize the sentiment analysis results.</li></ol><p>The AWS Lambda core function code is as follows:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> boto3</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> pyarrow <span class="keyword">as</span> pa</span><br><span class="line"><span class="keyword">import</span> pyarrow.parquet <span class="keyword">as</span> pq</span><br><span class="line"><span class="keyword">import</span> urllib.parse <span class="keyword">as</span> urlparse</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">S3_TARGET_BUCKET = os.environ[<span class="string">&#x27;QE_SURVEY_PROCESSED_TARGET_BUCKET&#x27;</span>]</span><br><span class="line">SNS_TOPIC_ARN = os.environ[<span class="string">&#x27;SNS_TOPIC_ARN&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">translate_feedbacks</span>(<span class="params">feedbacks</span>):</span><br><span class="line">    translate = boto3.client(<span class="string">&#x27;translate&#x27;</span>)</span><br><span class="line">    feedbacks_en = []</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;calling AWS Translate to auto detect language and translate feedback, total <span class="subst">&#123;feedbacks.__len__()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> feedback <span class="keyword">in</span> feedbacks:</span><br><span class="line">        response = translate.translate_text(</span><br><span class="line">            Text=feedback,</span><br><span class="line">            SourceLanguageCode=<span class="string">&#x27;auto&#x27;</span>,  <span class="comment"># Detect source language automatically</span></span><br><span class="line">            TargetLanguageCode=<span class="string">&#x27;en&#x27;</span></span><br><span class="line">        )</span><br><span class="line">        feedbacks_en.append(response[<span class="string">&#x27;TranslatedText&#x27;</span>])</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Finished transalate sourceText: <span class="subst">&#123;feedback&#125;</span> to targetText: <span class="subst">&#123;response[<span class="string">&#x27;TranslatedText&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> feedbacks_en</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">comprehend_sentiment</span>(<span class="params">feedbacks</span>):</span><br><span class="line">    comprehend = boto3.client(<span class="string">&#x27;comprehend&#x27;</span>)</span><br><span class="line">    batch_size = <span class="number">25</span></span><br><span class="line">    all_sentiments = []</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;calling AWS Comprehend AI to analysis feedback, total <span class="subst">&#123;feedbacks.__len__()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(feedbacks), batch_size):</span><br><span class="line">        batch_feedbacks = feedbacks[i:i+batch_size]</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;calling AWS Comprehend AI to analysis feedback, batch <span class="subst">&#123;i&#125;</span> - <span class="subst">&#123;i+batch_size&#125;</span>&quot;</span>)</span><br><span class="line">        comprehend_response = comprehend.batch_detect_sentiment(TextList=batch_feedbacks, LanguageCode=<span class="string">&#x27;en&#x27;</span>)</span><br><span class="line">        sentiments = [response[<span class="string">&#x27;Sentiment&#x27;</span>] <span class="keyword">for</span> response <span class="keyword">in</span> comprehend_response[<span class="string">&#x27;ResultList&#x27;</span>]]</span><br><span class="line">        all_sentiments.extend(sentiments)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> all_sentiments</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lambda_handler</span>(<span class="params">event, context</span>):</span><br><span class="line">    s3 = boto3.client(<span class="string">&#x27;s3&#x27;</span>)</span><br><span class="line">    sns_client = boto3.client(<span class="string">&#x27;sns&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    source_bucket = event[<span class="string">&#x27;Records&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;s3&#x27;</span>][<span class="string">&#x27;bucket&#x27;</span>][<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line">    source_key = urlparse.unquote_plus(event[<span class="string">&#x27;Records&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;s3&#x27;</span>][<span class="string">&#x27;object&#x27;</span>][<span class="string">&#x27;key&#x27;</span>])</span><br><span class="line">    </span><br><span class="line">    target_bucket = S3_TARGET_BUCKET</span><br><span class="line">    target_key = <span class="string">f&quot;qe-survey/<span class="subst">&#123;source_key.replace(<span class="string">&#x27;.xlsx&#x27;</span>, <span class="string">&#x27;.parquet&#x27;</span>)&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = s3.get_object(Bucket=source_bucket, Key=source_key)</span><br><span class="line">        excel_file = response[<span class="string">&#x27;Body&#x27;</span>].read()</span><br><span class="line">        </span><br><span class="line">        columns = [<span class="string">&#x27;ce_timestamp&#x27;</span>, <span class="string">&#x27;ce_host_id&#x27;</span>, <span class="string">&#x27;ce_host_os&#x27;</span>, <span class="string">&#x27;ce_hw&#x27;</span>, <span class="string">&#x27;ce_fw&#x27;</span>, <span class="string">&#x27;ce_sw&#x27;</span>, <span class="string">&#x27;survey_feedback&#x27;</span>, <span class="string">&#x27;survey_rating&#x27;</span>]</span><br><span class="line">        df = pd.read_excel(io.BytesIO(excel_file), usecols=columns)</span><br><span class="line">        df[<span class="string">&#x27;ce_timestamp&#x27;</span>] = pd.to_datetime(df[<span class="string">&#x27;ce_timestamp&#x27;</span>], <span class="built_in">format</span>=<span class="string">&#x27;%Y-%m-%d %H:%M:%S:%f&#x27;</span>)</span><br><span class="line">        df[<span class="string">&#x27;survey_feedback&#x27;</span>] = df[<span class="string">&#x27;survey_feedback&#x27;</span>].astype(<span class="built_in">str</span>)</span><br><span class="line">        valid_df = df[df[<span class="string">&#x27;survey_feedback&#x27;</span>].apply(<span class="keyword">lambda</span> x: x.strip() != <span class="string">&#x27;&#x27;</span>)]</span><br><span class="line">        valid_df = valid_df[valid_df[<span class="string">&#x27;survey_feedback&#x27;</span>] != <span class="string">&#x27;nan&#x27;</span>]</span><br><span class="line">        </span><br><span class="line">        feedbacks = valid_df[<span class="string">&#x27;survey_feedback&#x27;</span>].tolist()</span><br><span class="line">        </span><br><span class="line">        feedbacks_en = translate_feedbacks(feedbacks)</span><br><span class="line">        valid_df[<span class="string">&quot;survey_feedback_en&quot;</span>]= feedbacks_en</span><br><span class="line">        valid_df[<span class="string">&#x27;sentiment&#x27;</span>] = comprehend_sentiment(feedbacks_en)</span><br><span class="line">        </span><br><span class="line">        parquet_buffer = io.BytesIO()</span><br><span class="line">        pq.write_table(pa.Table.from_pandas(valid_df), parquet_buffer)</span><br><span class="line">        parquet_buffer.seek(<span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        s3.put_object(Bucket=target_bucket, Key=target_key, Body=parquet_buffer)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;source_key&#125;</span> File converted to Parquet <span class="subst">&#123;target_key&#125;</span> and stored in S3 bucket <span class="subst">&#123;target_bucket&#125;</span> successfully&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&#x27;statusCode&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">&#x27;body&#x27;</span>: json.dumps(<span class="string">f&#x27;<span class="subst">&#123;source_key&#125;</span> File converted to Parquet <span class="subst">&#123;target_key&#125;</span> and stored in S3 bucket <span class="subst">&#123;target_bucket&#125;</span> successfully&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;Error processing <span class="subst">&#123;source_key&#125;</span>: <span class="subst">&#123;e&#125;</span>&#x27;</span>)</span><br><span class="line">        sns_client.publish(</span><br><span class="line">            TopicArn=SNS_TOPIC_ARN,</span><br><span class="line">            Subject=<span class="string">&#x27;Lambda Function Processing QE Survey Feedback Failure Notification&#x27;</span>,</span><br><span class="line">            Message=<span class="string">f&#x27;An error occurred: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&#x27;</span></span><br><span class="line">        )</span><br></pre></td></tr></table></figure><p>The above code extracts the survey feedback data from the Excel file, translates the text into English using Amazon Translate, performs sentiment analysis using Amazon Comprehend, and stores the data as Parquet format in another Amazon S3 Bucket. also notify users by email when the Lambda process data failed by using Amazon SNS. </p><p>Below is sentiment analysis results visualization using Amazon QuickSight:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-sentiment-analysis-result.png" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-sentiment-analysis-result.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Sentiment Analysis Results"/></div><span class="image-caption">AWS Sentiment Analysis Results</span></div><p>This is a high-level overview of the solution implementation. The solution can be further customized and enhanced based on the specific requirements of the app product.</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> AWS </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Sentiment Analysis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to Fix AWS S3 Event Replacing Space With &#39;+&#39; Character Sign in Object Key Name</title>
      <link href="/2024/09/10/aws-s3-event-replacing-space-with-character-sign-in-object-key-name/"/>
      <url>/2024/09/10/aws-s3-event-replacing-space-with-character-sign-in-object-key-name/</url>
      
        <content type="html"><![CDATA[<p>The issue with AWS S3 Event notifications is that it replaces spaces with â€˜+â€™ character sign in the object key name. This can cause issues when trying to access the object in S3. It will occurs <code>NoSuchKey</code> error if not handling this issue properly.</p><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Configured a S3 bucket put event notification to a Lambda function. The Lambda function will be triggered when a new object is uploaded to the S3 bucket. I upload a file named â€˜2023 2nd quarter QE survey raw data.xlsxâ€™ into S3 bucket, the Lambda function is triggered, but when I try to access the object in S3, I get <code>NoSuchKey</code> error in <code>AWS CloudWatch Logs</code>. Debugging shows that the object key name is â€˜2023+2nd+quarter+QE+survey+raw+data.xlsxâ€™ instead of â€˜2023 2nd quarter QE survey raw data.xlsxâ€™. It means the S3 event notification is replacing the space with â€˜+â€™ character sign in the object key name.</p><p>The detail error is below:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] NoSuchKey: An error occurred (NoSuchKey) when calling the GetObject operation: The specified key does not exist.</span><br></pre></td></tr></table></figure><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>There are two solutions to fix this issue, one is from AWS S3 upload file side, another is from Lambda function side.</p><h3 id="1-From-AWS-S3-upload-file-side"><a href="#1-From-AWS-S3-upload-file-side" class="headerlink" title="1. From AWS S3 upload file side:"></a>1. From AWS S3 upload file side:</h3><p>If you have control over the upload process, ensure that the keys are properly URL-encoded.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> boto3</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"></span><br><span class="line">s3_client = boto3.client(<span class="string">&#x27;s3&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Example key with spaces</span></span><br><span class="line">object_key = <span class="string">&quot;2023 2nd quarter QE survey raw data.xlsx&quot;</span></span><br><span class="line">encoded_key = urllib.parse.quote(object_key)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Upload the object</span></span><br><span class="line">s3_client.upload_file(<span class="string">&quot;/tmp/2023 2nd quarter QE survey raw data.xlsx&quot;</span>, <span class="string">&quot;my-bucket-name&quot;</span>, encoded_key)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>This will ensure that the object key name is properly URL-encoded, which will prevent the S3 event notification from replacing spaces with â€˜+â€™ character sign. The <code>urllib.parse.quote</code> function will replace spaces with â€˜%20â€™ and â€˜+â€™ with â€˜%2Bâ€™.</p><h3 id="2-From-Lambda-function-side"><a href="#2-From-Lambda-function-side" class="headerlink" title="2. From Lambda function side:"></a>2. From Lambda function side:</h3><p>To fix this issue, we need to modify the Lambda function to handle the object key name with â€˜+â€™ character sign. We can use the <code>urllib.parse</code> package to handle it. The package library provide the function <code>unquote_plus</code> to replace â€˜+â€™ with space. Here is the code to handle the object key name with â€˜+â€™ character sign:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> urllib.parse <span class="keyword">as</span> urlparse</span><br><span class="line"><span class="keyword">import</span> boto3</span><br><span class="line"></span><br><span class="line">s3 = boto3.client(<span class="string">&#x27;s3&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lambda_handler</span>(<span class="params">event, context</span>):</span><br><span class="line">    bucket_name = event[<span class="string">&#x27;Records&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;s3&#x27;</span>][<span class="string">&#x27;bucket&#x27;</span>][<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line">    object_key = event[<span class="string">&#x27;Records&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;s3&#x27;</span>][<span class="string">&#x27;object&#x27;</span>][<span class="string">&#x27;key&#x27;</span>]</span><br><span class="line">    <span class="comment"># Replace &#x27;+&#x27; with space</span></span><br><span class="line">    object_key = urlparse.unquote_plus(object_key)</span><br><span class="line">    <span class="comment"># Download the object</span></span><br><span class="line">    s3.download_file(bucket_name, object_key, <span class="string">&#x27;/tmp/file.txt&#x27;</span>)</span><br><span class="line">    <span class="comment"># Do something with the downloaded file</span></span><br><span class="line">    <span class="comment">#...</span></span><br></pre></td></tr></table></figure><p>In the above code, we first get the bucket name and object key from the S3 event notification. We then use the <code>urlparse.unquote_plus</code> function to replace â€˜+â€™ with space in the object key name. Finally, we download the object using the <code>s3.download_file</code> function.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>To fix the issue with AWS S3 Event notifications replacing space with â€˜+â€™ character sign in the object key name, we need to handle it properly in the Lambda function. We can use the <code>urllib.parse</code> package to handle it.</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
            <tag> AWS S3 </tag>
            
            <tag> AWS Lambda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL ä¸­çš„ IS DISTINCT FROM è¯­æ³•è¯¦è§£</title>
      <link href="/2024/08/16/introduce-is-distinct-from-in-sql/"/>
      <url>/2024/08/16/introduce-is-distinct-from-in-sql/</url>
      
        <content type="html"><![CDATA[<p>åœ¨SQLæŸ¥è¯¢ä¸­ï¼Œæ¯”è¾ƒæ“ä½œç¬¦ <code>=</code> é€šå¸¸ç”¨äºŽæ£€æŸ¥ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ã€‚ç„¶è€Œï¼Œå½“æ¶‰åŠåˆ°å¤„ç†ç¼ºå¤±å€¼ï¼ˆ<code>NULL</code>ï¼‰æ—¶ï¼Œè¿™ç§æ“ä½œç¬¦å°±ä¼šé¢ä¸´æŒ‘æˆ˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œ<span class='pbg green'>SQL æä¾›äº† `IS DISTINCT FROM` æ“ä½œç¬¦ï¼Œå®ƒç”¨äºŽç²¾ç¡®æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ä¸åŒï¼Œå³ä½¿è¿™äº›å€¼ä¸­æœ‰ NULL</span>ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç» IS DISTINCT FROM çš„è¯­æ³•ã€è§£å†³çš„é—®é¢˜ä»¥åŠå¸¸è§çš„ä½¿ç”¨åœºæ™¯ã€‚</p><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>IS DISTINCT FROM çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expression1 <span class="keyword">IS</span> <span class="keyword">DISTINCT</span> <span class="keyword">FROM</span> expression2</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ expression1 å’Œ expression2 æ˜¯è¦è¿›è¡Œæ¯”è¾ƒçš„ä¸¤ä¸ªè¡¨è¾¾å¼ã€‚ è¯¥æ“ä½œç¬¦è¿”å›žå¸ƒå°”å€¼ï¼šTRUEã€FALSEã€‚</p><h2 id="ä¸»è¦è§£å†³çš„é—®é¢˜"><a href="#ä¸»è¦è§£å†³çš„é—®é¢˜" class="headerlink" title="ä¸»è¦è§£å†³çš„é—®é¢˜"></a>ä¸»è¦è§£å†³çš„é—®é¢˜</h2><p>åœ¨SQLä¸­ï¼Œ<code>NULL</code> å€¼ä»£è¡¨ç¼ºå¤±æˆ–æœªçŸ¥çš„æ•°æ®ã€‚å½“ä¸¤ä¸ªè¡¨è¾¾å¼ä¸­è‡³å°‘æœ‰ä¸€ä¸ªä¸º NULL æ—¶ï¼Œä½¿ç”¨ä¼ ç»Ÿçš„æ¯”è¾ƒæ“ä½œç¬¦ï¼ˆå¦‚ &#x3D; æˆ– &lt;&gt;ï¼‰è¿›è¡Œæ¯”è¾ƒä¼šå¯¼è‡´ä¸ç¡®å®šçš„ç»“æžœã€‚å…·ä½“æ¥è¯´ï¼š</p><ul><li>expression1 &#x3D; expression2 åœ¨ expression1 æˆ– expression2 ä¸º NULL æ—¶ä¼šè¿”å›ž UNKNOWNã€‚</li><li>expression1 &lt;&gt; expression2 åœ¨ expression1 æˆ– expression2 ä¸º NULL æ—¶ä¹Ÿä¼šè¿”å›ž UNKNOWNã€‚</li></ul><p>æ¯”å¦‚ä¸‹é¢çš„æŸ¥è¯¢è¯­å¥ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">    <span class="number">1</span> <span class="operator">=</span> <span class="keyword">NULL</span> <span class="keyword">as</span> A1,</span><br><span class="line">    <span class="keyword">NULL</span> <span class="operator">&lt;&gt;</span> <span class="number">1</span> <span class="keyword">as</span> A2,</span><br><span class="line">    <span class="keyword">NULL</span> <span class="operator">=</span> <span class="keyword">NULL</span> <span class="keyword">as</span> A3,</span><br><span class="line">    <span class="keyword">NULL</span> <span class="operator">&lt;&gt;</span> <span class="keyword">NULL</span> <span class="keyword">as</span> A4,</span><br><span class="line">    <span class="number">1</span> <span class="operator">=</span> <span class="number">1</span> <span class="keyword">as</span> A5, </span><br><span class="line">    <span class="number">1</span> <span class="operator">&lt;&gt;</span> <span class="number">1</span> <span class="keyword">as</span> A6</span><br></pre></td></tr></table></figure><p>ä¼šè¿”å›žä»¥ä¸‹ç»“æžœï¼š</p><table><thead><tr><th>A1</th><th>A2</th><th>A3</th><th>A4</th><th>A5</th><th>A6</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td>TRUE</td><td>FALSE</td></tr></tbody></table><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“ expression1 æˆ– expression2 ä¸º NULL æ—¶ï¼Œä¼ ç»Ÿçš„æ¯”è¾ƒæ“ä½œç¬¦ä¼šè¿”å›ž UNKNOWNç©ºå€¼ï¼Œ å¦‚ä¸Šé¢çš„A1, A2, A3, A4çš„ç»“æžœå€¼ï¼Œè¿™å°±ä¼šå¯¼è‡´ä¸ç¡®å®šæ€§ã€‚</p><p><code>IS DISTINCT FROM</code> æ“ä½œç¬¦çš„å‡ºçŽ°ï¼Œè§£å†³äº†è¿™äº›é—®é¢˜ã€‚å®ƒèƒ½æ­£ç¡®å¤„ç† <code>NULL</code> å€¼ï¼Œä¼šè¿”å›ž <code>TRUE æˆ– FALSE</code>ï¼Œç¡®ä¿ç»“æžœçš„å¯é æ€§ã€‚ åœ¨ä»¥ä¸‹æƒ…å†µä¸‹è¿”å›ž TRUEï¼š</p><ul><li>expression1 å’Œ expression2 éƒ½ä¸º NULLã€‚</li><li>expression1 å’Œ expression2 çš„å€¼ä¸åŒï¼ˆä¸è®ºæ˜¯å¦ä¸º NULLï¼‰ã€‚</li></ul><p>è€Œåœ¨ expression1 å’Œ expression2 ç›¸ç­‰ï¼ˆåŒ…æ‹¬éƒ½æ˜¯ NULLï¼‰çš„æƒ…å†µä¸‹ï¼ŒIS DISTINCT FROM è¿”å›ž FALSEã€‚ å¦å¤–è¿˜æœ‰ä¸€ä¸ª <code>IS NOT DISTINCT FROM</code> æ“ä½œç¬¦ï¼Œç”¨äºŽåˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ã€‚å…¶ç”¨æ³•ä¸€æ ·ï¼Œåªæ˜¯è¯­ä¹‰ç›¸åã€‚</p><p>ä¸‹é¢çš„ä¾‹å­æŸ¥è¯¢ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    <span class="number">1</span> <span class="keyword">IS</span> <span class="keyword">DISTINCT</span> <span class="keyword">FROM</span> <span class="keyword">NULL</span> <span class="keyword">as</span> B1,</span><br><span class="line">    <span class="keyword">NULL</span> <span class="keyword">IS</span> <span class="keyword">DISTINCT</span> <span class="keyword">FROM</span> <span class="number">1</span> <span class="keyword">as</span> B2,</span><br><span class="line">    <span class="number">1</span> <span class="keyword">IS</span> <span class="keyword">DISTINCT</span> <span class="keyword">FROM</span> <span class="number">2</span> <span class="keyword">as</span> B3,</span><br><span class="line">    <span class="keyword">NULL</span> <span class="keyword">IS</span> <span class="keyword">DISTINCT</span> <span class="keyword">FROM</span> <span class="keyword">NULL</span> <span class="keyword">as</span> B4,</span><br><span class="line">    <span class="number">1</span> <span class="keyword">IS</span> <span class="keyword">DISTINCT</span> <span class="keyword">FROM</span> <span class="number">1</span> <span class="keyword">as</span> B5,</span><br><span class="line">    <span class="number">1</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">DISTINCT</span> <span class="keyword">FROM</span> <span class="number">1</span> <span class="keyword">as</span> B6</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢ç»“æžœå¦‚ä¸‹:</p><table><thead><tr><th>B1</th><th>B2</th><th>B3</th><th>B4</th><th>B5</th><th>B6</th></tr></thead><tbody><tr><td>TRUE</td><td>TRUE</td><td>TRUE</td><td>FALSE</td><td>FALSE</td><td>TRUE</td></tr></tbody></table><p>å¯ä»¥çœ‹åˆ°ï¼ŒIS DISTINCT FROM æ­£ç¡®å¤„ç† NULL å€¼ï¼Œè¿”å›ž TRUE æˆ– FALSEï¼Œç¡®ä¿ç»“æžœçš„å¯é æ€§ã€‚</p><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><h3 id="æ•°æ®æ¸…æ´—å’ŒéªŒè¯"><a href="#æ•°æ®æ¸…æ´—å’ŒéªŒè¯" class="headerlink" title="æ•°æ®æ¸…æ´—å’ŒéªŒè¯"></a>æ•°æ®æ¸…æ´—å’ŒéªŒè¯</h3><p>åœ¨<code>æ•°æ®æ¸…æ´—</code>å’Œ<code>æ•°æ®éªŒè¯</code>è¿‡ç¨‹ä¸­ï¼Œç»å¸¸éœ€è¦æ£€æŸ¥æ•°æ®åº“ä¸­çš„å€¼æ˜¯å¦ä¸åŒï¼ŒåŒ…æ‹¬å¯¹ NULL å€¼çš„å¤„ç†ã€‚ä¾‹å¦‚ï¼Œæ¯”è¾ƒç”¨æˆ·è¾“å…¥çš„æ•°æ®ä¸ŽçŽ°æœ‰è®°å½•ï¼Œä»¥ç¡®å®šæ˜¯å¦æœ‰ä¸åŒçš„è®°å½•ã€‚<span class='pbg warning'>ä½¿ç”¨ IS DISTINCT FROM å¯ä»¥æ›´å‡†ç¡®åœ°å¤„ç† NULL å€¼ï¼Œé¿å…å‡ºçŽ°é”™è¯¯æˆ–é—æ¼ã€‚</span></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">WHERE</span> username <span class="keyword">IS</span> <span class="keyword">DISTINCT</span> <span class="keyword">FROM</span> <span class="string">&#x27;andrewsy&#x27;</span>;</span><br></pre></td></tr></table></figure><p>è¿™æ¡æŸ¥è¯¢ä¼šè¿”å›žæ‰€æœ‰ username ä¸Ž â€˜andrewsyâ€™ ä¸åŒçš„è®°å½•ï¼ŒåŒ…æ‹¬é‚£äº› username ä¸º NULL çš„è®°å½•ã€‚</p><h3 id="æ•°æ®æ›´æ–°"><a href="#æ•°æ®æ›´æ–°" class="headerlink" title="æ•°æ®æ›´æ–°"></a>æ•°æ®æ›´æ–°</h3><p>åœ¨æ›´æ–°æ•°æ®æ—¶ï¼Œä½¿ç”¨ IS DISTINCT FROM å¯ä»¥ç¡®ä¿åªæœ‰åœ¨æ•°æ®å®žé™…å˜åŒ–æ—¶æ‰è¿›è¡Œæ›´æ–°ï¼Œä»Žè€Œé¿å…ä¸å¿…è¦çš„æ›´æ–°æ“ä½œã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> users</span><br><span class="line"><span class="keyword">SET</span> email <span class="operator">=</span> <span class="string">&#x27;new_andrewsy@email.com&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span> email <span class="keyword">IS</span> <span class="keyword">DISTINCT</span> <span class="keyword">FROM</span> <span class="string">&#x27;new_andrewsy@email.com&#x27;</span>;</span><br></pre></td></tr></table></figure><p>è¿™æ¡æŸ¥è¯¢ä¼šæ›´æ–°æ‰€æœ‰ email ä¸åŒäºŽ â€˜<a href="mailto:&#x6e;&#x65;&#119;&#95;&#x61;&#110;&#100;&#x72;&#x65;&#x77;&#x73;&#x79;&#64;&#x65;&#109;&#x61;&#x69;&#108;&#x2e;&#x63;&#111;&#x6d;">&#x6e;&#x65;&#119;&#95;&#x61;&#110;&#100;&#x72;&#x65;&#x77;&#x73;&#x79;&#64;&#x65;&#109;&#x61;&#x69;&#108;&#x2e;&#x63;&#111;&#x6d;</a>â€˜ çš„è®°å½•ï¼ŒåŒ…æ‹¬é‚£äº› email ä¸º NULL çš„è®°å½•ã€‚</p><h3 id="æ•°æ®æ¯”è¾ƒ"><a href="#æ•°æ®æ¯”è¾ƒ" class="headerlink" title="æ•°æ®æ¯”è¾ƒ"></a>æ•°æ®æ¯”è¾ƒ</h3><p>åœ¨è¿›è¡Œå¤æ‚çš„æ•°æ®æ¯”è¾ƒæ—¶ï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ° NULL å€¼æ—¶ï¼ŒIS DISTINCT FROM æä¾›äº†æ›´ç›´è§‚çš„æ¯”è¾ƒé€»è¾‘ã€‚ä¾‹å¦‚ï¼Œåœ¨åˆå¹¶ä¸¤ä¸ªæ•°æ®é›†æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ“ä½œç¬¦æ¥ç¡®ä¿å”¯ä¸€æ€§ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">    dataset1</span><br><span class="line"><span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> </span><br><span class="line">    dataset2</span><br><span class="line"><span class="keyword">ON</span> </span><br><span class="line">    dataset1.id <span class="keyword">IS</span> <span class="keyword">DISTINCT</span> <span class="keyword">FROM</span> dataset2.id</span><br></pre></td></tr></table></figure><p>è¿™æ¡æŸ¥è¯¢ä¼šæ‰¾å‡ºä¸¤ä¸ªæ•°æ®é›†ä¸­ id ä¸åŒçš„è®°å½•ï¼ŒåŒ…æ‹¬ id ä¸º NULL çš„æƒ…å†µã€‚</p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p><code>IS DISTINCT FROM</code> æ˜¯ SQL æ ‡å‡†ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä½†å¹¶éžæ‰€æœ‰æ•°æ®åº“ç³»ç»Ÿéƒ½æ”¯æŒã€‚å…·ä½“çš„æ”¯æŒæƒ…å†µéœ€è¦æŸ¥é˜…æ•°æ®åº“çš„æ–‡æ¡£ã€‚åœ¨ä½¿ç”¨ IS DISTINCT FROM æ—¶ï¼Œç¡®ä¿æ•°æ®åº“ç³»ç»Ÿçš„ç‰ˆæœ¬å’Œæ–‡æ¡£ä¸­å¯¹æ­¤æ“ä½œç¬¦çš„æ”¯æŒåŠè¡Œä¸ºä¸€è‡´ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>IS DISTINCT FROM</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºŽåœ¨ SQL ä¸­å¤„ç†åŒ…å« NULL å€¼çš„æ•°æ®æ¯”è¾ƒã€‚å®ƒè§£å†³äº†ä¼ ç»Ÿæ¯”è¾ƒæ“ä½œç¬¦åœ¨å¤„ç† NULL å€¼æ—¶çš„ä¸è¶³ï¼Œä½¿å¾—æ•°æ®éªŒè¯ã€æ›´æ–°å’Œæ¯”è¾ƒæ›´åŠ å‡†ç¡®å’Œå¯é ã€‚åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œæ ¹æ®æ•°æ®åº“ç³»ç»Ÿçš„æ”¯æŒæƒ…å†µï¼Œåˆç†ä½¿ç”¨ IS DISTINCT FROM å¯ä»¥æ˜¾è‘—æé«˜æ•°æ®æ“ä½œçš„ç²¾ç¡®æ€§å’Œå¥å£®æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Big Data </tag>
            
            <tag> MySQL </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯¦è§£ SQL ä¸­çš„ LAG å‡½æ•°</title>
      <link href="/2024/08/15/what-is-lag-in-sql/"/>
      <url>/2024/08/15/what-is-lag-in-sql/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨åšæ•°æ®åˆ†æžï¼Œéœ€è¦æŒ–æŽ˜æ•°æ®éšæ—¶é—´å˜åŒ–çš„ä¿¡æ¯ã€‚æ‰€æœ‰æ•°æ®ç‰©ç†å­˜å‚¨åœ¨AWS S3ä¸Šï¼Œé€šè¿‡AWS Glue Catalogå’ŒAWS Athenaè¿›è¡Œæ•°æ®æŸ¥è¯¢ã€‚AWS Athenaæ”¯æŒSQLè¯­è¨€ï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†æžã€‚åœ¨å¤„ç†æ—¶é—´åºåˆ—æ•°æ®æˆ–åˆ†æžè¡Œé—´å˜åŒ–æ—¶ï¼Œ SQLä¸­çš„ <code>LAG</code> å‡½æ•°å’Œ <code>LEAD</code> å‡½æ•°æ˜¯éžå¸¸æœ‰ç”¨çš„ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ LAG å‡½æ•°çš„åŸºæœ¬ç”¨æ³•ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-LAG-å‡½æ•°ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-LAG-å‡½æ•°ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ LAG å‡½æ•°ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ LAG å‡½æ•°ï¼Ÿ</h2><p>åœ¨ SQL ä¸­ï¼Œ<code>LAG</code> å‡½æ•°æ˜¯ä¸€ç§<code>çª—å£å‡½æ•°</code>ï¼Œ<span class='pbg warning'>ç”¨äºŽèŽ·å–å½“å‰è¡Œä¹‹å‰æŸä¸€è¡Œçš„å€¼ã€‚è¿™åœ¨å¤„ç†æ—¶é—´åºåˆ—æ•°æ®æˆ–åˆ†æžè¡Œé—´å˜åŒ–æ—¶éžå¸¸æœ‰ç”¨ã€‚LAG å‡½æ•°å¯ä»¥è®©ä½ è®¿é—®å½“å‰è¡Œä¹‹å‰çš„è¡Œæ•°æ®ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨å­æŸ¥è¯¢æˆ–è‡ªè¿žæŽ¥ã€‚</span> è€Œ<code>LEAD</code> å‡½æ•°åˆ™æ˜¯èŽ·å–å½“å‰è¡Œä¹‹åŽçš„è¡Œæ•°æ®ã€‚ä»–ä»¬çš„è¯­æ³•å’Œç”¨æ³•ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ä¸åŒã€‚</p><h2 id="LAG-å‡½æ•°çš„è¯­æ³•"><a href="#LAG-å‡½æ•°çš„è¯­æ³•" class="headerlink" title="LAG å‡½æ•°çš„è¯­æ³•"></a>LAG å‡½æ•°çš„è¯­æ³•</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">LAG</span>(expression, <span class="keyword">offset</span>, <span class="keyword">default</span>) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> partition_column <span class="keyword">ORDER</span> <span class="keyword">BY</span> order_column)</span><br></pre></td></tr></table></figure><ul><li><code>expression</code>ï¼šè¦è¿”å›žçš„åˆ—æˆ–è®¡ç®—ç»“æžœã€‚</li><li><code>offset</code>ï¼šå‘å‰æŸ¥æ‰¾çš„è¡Œæ•°ï¼Œé»˜è®¤ä¸º 1ï¼ˆå³å‰ä¸€è¡Œï¼‰ã€‚</li><li><code>default</code>ï¼šå½“æ²¡æœ‰å‰è¡Œæ—¶è¿”å›žçš„é»˜è®¤å€¼ï¼Œé»˜è®¤ä¸º NULLã€‚</li><li><code>PARTITION BY</code>ï¼šç”¨äºŽå°†æ•°æ®åˆ†ç»„ã€‚å¦‚æžœçœç•¥ï¼ŒLAG ä¼šåœ¨æ•´ä¸ªç»“æžœé›†ä¸Šåº”ç”¨ã€‚</li><li><code>ORDER BY</code>ï¼šç¡®å®šè¡Œçš„é¡ºåºï¼ŒLAG å‡½æ•°ä¼šæ ¹æ®è¿™ä¸ªé¡ºåºæ¥è®¿é—®å‰é¢çš„è¡Œã€‚</li></ul><h2 id="å¦‚ä½•ä½¿ç”¨-LAG-å‡½æ•°"><a href="#å¦‚ä½•ä½¿ç”¨-LAG-å‡½æ•°" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ LAG å‡½æ•°"></a>å¦‚ä½•ä½¿ç”¨ LAG å‡½æ•°</h2><p><code>LAG</code> å‡½æ•°åœ¨ä½¿ç”¨æ—¶é€šå¸¸ä¸Ž <code>OVER</code> å­å¥ä¸€èµ·ä½¿ç”¨ã€‚OVER å­å¥ç”¨äºŽå®šä¹‰çª—å£ï¼ˆå³åº”ç”¨ LAG å‡½æ•°çš„èŒƒå›´ï¼‰ã€‚åœ¨çª—å£ä¸­ï¼Œ<code>ORDER BY</code> ç¡®å®šäº†è¡Œçš„é¡ºåºï¼Œ<code>PARTITION BY</code> åˆ™å¯ä»¥ç”¨æ¥å°†æ•°æ®åˆ†ç»„ï¼Œä½¿æ¯ä¸ªåˆ†ç»„å†…çš„è®¡ç®—äº’ç›¸ç‹¬ç«‹ã€‚</p><h3 id="åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ï¼š"><a href="#åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ï¼š" class="headerlink" title="åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ï¼š"></a>åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ï¼š</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º sales çš„è¡¨ï¼ŒåŒ…å« sale_date å’Œ amount åˆ—ã€‚æˆ‘ä»¬æƒ³è¦æ¯”è¾ƒæ¯ç¬”é”€å”®é‡‘é¢ä¸Žå‰ä¸€ç¬”é”€å”®é‡‘é¢çš„å˜åŒ–ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    sale_date,</span><br><span class="line">    amount,</span><br><span class="line">    <span class="built_in">LAG</span>(amount, <span class="number">1</span>) <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sale_date) <span class="keyword">AS</span> previous_amount</span><br><span class="line"><span class="keyword">FROM</span> sales;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼š</p><p>amount æ˜¯å½“å‰é”€å”®é‡‘é¢ã€‚<br>LAG(amount, 1) èŽ·å–å½“å‰é”€å”®çš„å‰ä¸€ç¬”é”€å”®é‡‘é¢ï¼ˆæ ¹æ® sale_date æŽ’åºï¼‰ã€‚</p><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><ol><li><p>æ—¶é—´åºåˆ—åˆ†æžï¼š<br>LAG å‡½æ•°éžå¸¸é€‚åˆåˆ†æžæ—¶é—´åºåˆ—æ•°æ®ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£æ•°æ®å˜åŒ–è¶‹åŠ¿ã€‚ä¾‹å¦‚ï¼Œåˆ†æžæ¯æœˆçš„é”€å”®æ•°æ®ï¼Œæ‰¾å‡ºå¢žé•¿æˆ–ä¸‹é™çš„è¶‹åŠ¿ã€‚</p></li><li><p>è®¡ç®—å˜åŒ–é‡ï¼š<br>å¯ä»¥è®¡ç®—å½“å‰å€¼ä¸Žå‰ä¸€å€¼ä¹‹é—´çš„å˜åŒ–é‡ï¼Œä¾‹å¦‚é”€å”®é¢å˜åŒ–ã€æ¸©åº¦å˜åŒ–ç­‰ã€‚</p></li><li><p>ç”Ÿæˆæ»šåŠ¨æŠ¥å‘Šï¼š<br>LAG å¯ä»¥ç”¨æ¥ç”Ÿæˆå¸¦æœ‰å‰å€¼çš„æ»šåŠ¨æŠ¥å‘Šï¼Œä¾‹å¦‚è®¡ç®—ç´¯è®¡é”€å”®é¢ï¼Œæˆ–è€…ç”Ÿæˆæ»žåŽæ•°æ®ç”¨äºŽæŠ¥è¡¨ã€‚</p></li></ol><h2 id="ä¸¾ä¸ªä¾‹å­"><a href="#ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªé”€å”®è®°å½•è¡¨ monthly_salesï¼Œç»“æž„å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> monthly_sales (</span><br><span class="line">    <span class="keyword">month</span> <span class="type">DATE</span>,</span><br><span class="line">    sales_amount <span class="type">DECIMAL</span>(<span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> monthly_sales (<span class="keyword">month</span>, sales_amount) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;2024-01-01&#x27;</span>, <span class="number">1000.00</span>),</span><br><span class="line">(<span class="string">&#x27;2024-02-01&#x27;</span>, <span class="number">1500.00</span>),</span><br><span class="line">(<span class="string">&#x27;2024-03-01&#x27;</span>, <span class="number">1200.00</span>),</span><br><span class="line">(<span class="string">&#x27;2024-04-01&#x27;</span>, <span class="number">1700.00</span>);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>LAG</code> å‡½æ•°æ¥æ¯”è¾ƒæ¯ä¸ªæœˆçš„é”€å”®é¢ä¸Žå‰ä¸€ä¸ªæœˆçš„é”€å”®é¢ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">month</span>,</span><br><span class="line">    sales_amount,</span><br><span class="line">    <span class="built_in">LAG</span>(sales_amount, <span class="number">1</span>) <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">month</span>) <span class="keyword">AS</span> previous_month_sales,</span><br><span class="line">    sales_amount <span class="operator">-</span> <span class="built_in">LAG</span>(sales_amount, <span class="number">1</span>) <span class="keyword">OVER</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">month</span>) <span class="keyword">AS</span> sales_difference</span><br><span class="line"><span class="keyword">FROM</span> monthly_sales;</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢ç»“æžœï¼š</p><table><thead><tr><th>month</th><th>sales_amount</th><th>previous_month_sales</th><th>sales_difference</th></tr></thead><tbody><tr><td>2024-01-01</td><td>1000.00</td><td>NULL</td><td>NULL</td></tr><tr><td>2024-02-01</td><td>1500.00</td><td>1000.00</td><td>500.00</td></tr><tr><td>2024-03-01</td><td>1200.00</td><td>1500.00</td><td>-300.00</td></tr><tr><td>2024-04-01</td><td>1700.00</td><td>1200.00</td><td>500.00</td></tr></tbody></table><p>åœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼š<br>previous_month_sales æ˜¾ç¤ºäº†å‰ä¸€ä¸ªæœˆçš„é”€å”®é¢ã€‚<br>sales_difference æ˜¾ç¤ºäº†å½“å‰æœˆä¸Žå‰ä¸€ä¸ªæœˆçš„é”€å”®é¢å·®å¼‚ã€‚<br>é€šè¿‡ä¸Šè¿°æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°åˆ†æžé”€å”®æ•°æ®çš„å˜åŒ–æƒ…å†µã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>LAG</code> å‡½æ•°æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ åœ¨æ•°æ®åˆ†æžä¸­å¤„ç†è¡Œé—´çš„æ¯”è¾ƒå’Œå˜åŒ–ã€‚æ— è®ºæ˜¯ç”¨äºŽæ—¶é—´åºåˆ—æ•°æ®ã€è®¡ç®—å˜åŒ–é‡ï¼Œè¿˜æ˜¯ç”Ÿæˆæ»šåŠ¨æŠ¥å‘Šï¼ŒLAG å‡½æ•°éƒ½èƒ½æä¾›æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚å®ƒé€šå¸¸ä¸Ž <code>OVER</code> å­å¥ä¸€èµ·ä½¿ç”¨, åœ¨OVERå­å¥ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šåˆ†ç»„æ¡ä»¶ã€æŽ’åºæ¡ä»¶ç­‰ã€‚<code>ORDER BY</code> ç¡®å®šè¡Œçš„é¡ºåºï¼Œ<code>PARTITION BY</code> åˆ™å¯ä»¥ç”¨æ¥å°†æ•°æ®åˆ†ç»„ï¼Œä½¿æ¯ä¸ªåˆ†ç»„å†…çš„è®¡ç®—äº’ç›¸ç‹¬ç«‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Big Data </tag>
            
            <tag> MySQL </tag>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to query tree-structured relation data in MySQL</title>
      <link href="/2024/08/02/how-to-query-tree-structured-relation-data-in-mysql/"/>
      <url>/2024/08/02/how-to-query-tree-structured-relation-data-in-mysql/</url>
      
        <content type="html"><![CDATA[<p>To query hierarchical relational data in <code>MySQL</code>, <code>recursive Common Table Expressions (CTEs)</code> are typically used. However, MySQL did not support recursive CTEs before version 8.0, so in earlier versions, <code>self-joins</code> are commonly used to handle such queries. Below is an example using a self-join, assuming we have a table employees that contains information about employees and their manager IDs (manager_id).</p><h2 id="Create-Table-and-Insert-Data"><a href="#Create-Table-and-Insert-Data" class="headerlink" title="Create Table and Insert Data"></a>Create Table and Insert Data</h2><p>Creating a table named <code>employees</code> with the following columns:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employees (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">100</span>),</span><br><span class="line">    manager_id <span class="type">INT</span>,</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (manager_id) <span class="keyword">REFERENCES</span> employees(id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employees (id, name, manager_id) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;CEO&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;CTO&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;CFO&#x27;</span>, <span class="number">1</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;Developer Lead&#x27;</span>, <span class="number">2</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;Accountant Lead&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">(<span class="number">6</span>, <span class="string">&#x27;Developer&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">(<span class="number">7</span>, <span class="string">&#x27;Junior Developer&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">(<span class="number">8</span>, <span class="string">&#x27;Senior Accountant&#x27;</span>, <span class="number">5</span>),</span><br><span class="line">(<span class="number">9</span>, <span class="string">&#x27;Junior Accountant&#x27;</span>, <span class="number">5</span>);</span><br></pre></td></tr></table></figure><h2 id="Self-Join"><a href="#Self-Join" class="headerlink" title="Self-Join"></a>Self-Join</h2><p>We can search for all employees and their direct reports (subordinates) using a self-join. The following SQL statement will list all employees and their direct managerâ€™s name.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e1.name <span class="keyword">AS</span> employee_name, e2.name <span class="keyword">AS</span> manager_name</span><br><span class="line"><span class="keyword">FROM</span> employees e1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees e2 <span class="keyword">ON</span> e1.manager_id <span class="operator">=</span> e2.id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> e1.manager_id, e1.id;</span><br></pre></td></tr></table></figure><p>We can also use a self-join to count the number of direct reports for each manager. The following SQL statement will list all managers and the number of their direct reports.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e1.name <span class="keyword">AS</span> manager_name, <span class="built_in">COUNT</span>(e2.id) <span class="keyword">AS</span> subordinate_count</span><br><span class="line"><span class="keyword">FROM</span> employees e1</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> employees e2 <span class="keyword">ON</span> e1.id <span class="operator">=</span> e2.manager_id</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> e1.id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> subordinate_count <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure><h2 id="Recursive-Common-Table-Expressions-CTEs"><a href="#Recursive-Common-Table-Expressions-CTEs" class="headerlink" title="Recursive Common Table Expressions (CTEs)"></a>Recursive Common Table Expressions (CTEs)</h2><p>MySQL 8.0 introduced support for recursive CTEs, which allows us to query hierarchical relational data more efficiently. The following SQL statement will list all employees and their direct reports (subordinates) using a recursive CTE.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> <span class="keyword">RECURSIVE</span> subordinates <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> id, name, manager_id</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span> <span class="comment">-- root node CEO, we can replace with any other root node ID, for example 2 which is CTO</span></span><br><span class="line">    <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line">    <span class="keyword">SELECT</span> e.id, e.name, e.manager_id</span><br><span class="line">    <span class="keyword">FROM</span> employees e</span><br><span class="line">    <span class="keyword">INNER</span> <span class="keyword">JOIN</span> subordinates s <span class="keyword">ON</span> e.manager_id <span class="operator">=</span> s.id</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> subordinates;</span><br></pre></td></tr></table></figure><p>But please note that this method only works for <code>MySQL 8.0</code> and above, as these versions support <code>recursive CTEs</code>.</p>]]></content>
      
      
      <categories>
          
          <category> Database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL 8.x CTEs feature - WITH clause</title>
      <link href="/2024/07/26/mysql-8-x-ctes-feature-with-clause/"/>
      <url>/2024/07/26/mysql-8-x-ctes-feature-with-clause/</url>
      
        <content type="html"><![CDATA[<p>MySQL <code>Common Table Expressions (CTEs)</code> are a powerful feature introduced in <code>MySQL 8.0</code>. CTEs are a type of MySQL 8.0 that provide a way to create <code>temporary result sets</code> that can be referenced within a <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code> statement. <span class='pbg danger'>The primary purpose of `CTEs` is to make complex queries more readable and manageable by breaking them down into simpler</span>.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/mysql/mysql-cte-with-clause.png" class="lazyload placeholder" data-srcset="/assets/images/mysql/mysql-cte-with-clause.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="MYSQL CTEs feature - WITH clause" style="width:600px;"/></div><span class="image-caption">MYSQL CTEs feature - WITH clause</span></div><h2 id="Purpose-of-CTEs"><a href="#Purpose-of-CTEs" class="headerlink" title="Purpose of CTEs"></a>Purpose of CTEs</h2><ul><li><strong>Readability</strong>: <code>CTEs</code> can make SQL queries more readable, especially for complex queries involving multiple subqueries or recursive operations.</li><li><strong>Modularity</strong>: They allow you to define a temporary result set that can be reused within the same query, promoting code reuse and reducing redundancy.</li><li><strong>Recursive Queries</strong>: CTEs support recursive queries, which are useful for querying hierarchical data like organizational charts, bill of materials, or tree structures.</li></ul><h2 id="How-to-Use-CTEs"><a href="#How-to-Use-CTEs" class="headerlink" title="How to Use CTEs"></a>How to Use CTEs</h2><p><code>CTEs</code> are defined using the <code>WITH</code> clause and can be referenced within the main query. Hereâ€™s the basic syntax:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> cte_name <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> ...</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> ... <span class="keyword">FROM</span> cte_name;</span><br></pre></td></tr></table></figure><h3 id="Basic-CTE"><a href="#Basic-CTE" class="headerlink" title="Basic CTE"></a>Basic CTE</h3><p>Suppose you have a table employees and you want to find the average salary of employees in each department.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> DepartmentSalaries <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> department_id, <span class="built_in">AVG</span>(salary) <span class="keyword">AS</span> avg_salary</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> DepartmentSalaries;</span><br></pre></td></tr></table></figure><p>In this example, DepartmentSalaries is a CTE that calculates the average salary for each department. The main query then selects from this CTE.</p><p><code>CTEs</code> feature also supports multiple temporary result sets in the same query, see below example:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span></span><br><span class="line">  cte1 <span class="keyword">AS</span> (<span class="keyword">SELECT</span> a, b <span class="keyword">FROM</span> table1),</span><br><span class="line">  cte2 <span class="keyword">AS</span> (<span class="keyword">SELECT</span> c, d <span class="keyword">FROM</span> table2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> b, d <span class="keyword">FROM</span> cte1 <span class="keyword">JOIN</span> cte2 <span class="keyword">WHERE</span> cte1.a <span class="operator">=</span> cte2.c;</span><br></pre></td></tr></table></figure><p>Above sqls defines two CTEs cte1 and cte2 and then joins them using a WHERE clause.</p><h3 id="Recursive-CTE"><a href="#Recursive-CTE" class="headerlink" title="Recursive CTE"></a>Recursive CTE</h3><p>A CTE can refer to itself to define a <code>recursive CTE</code>. Common applications of recursive CTEs include series generation and traversal of hierarchical or tree-structured data.</p><p>Suppose you have a table employees with a self-referencing column manager_id to represent a hierarchy. You want to find all subordinates of a given manager.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> <span class="keyword">RECURSIVE</span> Subordinates <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> employee_id, manager_id, name</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">WHERE</span> manager_id <span class="operator">=</span> <span class="number">1</span>  <span class="comment">-- Starting with the manager ID 1</span></span><br><span class="line">    <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line">    <span class="keyword">SELECT</span> e.employee_id, e.manager_id, e.name</span><br><span class="line">    <span class="keyword">FROM</span> employees e</span><br><span class="line">    <span class="keyword">INNER</span> <span class="keyword">JOIN</span> Subordinates s <span class="keyword">ON</span> e.manager_id <span class="operator">=</span> s.employee_id</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Subordinates;</span><br></pre></td></tr></table></figure><p>In this example, Subordinates is a recursive CTE that starts with employees directly reporting to manager ID 1 and then recursively includes all their subordinates.</p><h2 id="Key-Points"><a href="#Key-Points" class="headerlink" title="Key Points"></a>Key Points</h2><ul><li><strong>Non-Recursive CTEs</strong>: These are straightforward and do not involve recursion. They are simply a way to define a temporary result set for use within the query.</li><li><strong>Recursive CTEs</strong>: These involve recursion and are useful for hierarchical or tree-structured data. They must include a <code>UNION ALL</code> clause to combine the initial result set with the recursive result set.</li><li><strong>Scope</strong>: CTEs are scoped to the query they are defined in and cannot be referenced outside of that query.</li></ul><p><code>CTEs</code> are a powerful tool in MySQL that can significantly improve the <code>readability</code> and <code>maintainability</code> of <code>complex SQL queries</code>.</p><h2 id="Reference-Links"><a href="#Reference-Links" class="headerlink" title="Reference Links:"></a>Reference Links:</h2><p>For other scenarios, like use <code>WITH</code> clause in <code>UPDATE</code> or <code>DELETE</code> statements, please refer to the following links:</p><ul><li><strong>WITH (Common Table Expressions)</strong>: <a href="https://dev.mysql.com/doc/refman/8.4/en/with.html">https://dev.mysql.com/doc/refman/8.4/en/with.html</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Using Pulumi to Import the AWS Resources of the Other Region</title>
      <link href="/2024/07/04/using-pulumi-to-import-the-aws-resources-of-the-other-region/"/>
      <url>/2024/07/04/using-pulumi-to-import-the-aws-resources-of-the-other-region/</url>
      
        <content type="html"><![CDATA[<h2 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h2><p>By default, the Pulumi import the resource in the region which is specified in the <code>Pulumi.yaml</code> or <code>Pulumi.&lt;stack-name&gt;.yaml</code> file. If we import the resources which is located in other regions. It will cause the error by using <code>pulumi import</code> command.</p><p>For example, we have quicksight resources such like DataSource, DataSet located in the <code>eu-west-1</code> region, we already manage these resources in the pulumi by using <code>pulumi import</code> CLI command. All resources are located in <code>eu-west-1</code> region. It is specified in the <code>Pulumi.yaml</code> or <code>Pulumi.&lt;stack-name&gt;.yaml</code> file like below.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">config:</span></span><br><span class="line">  <span class="attr">aws:region:</span> <span class="string">eu-west-1</span></span><br></pre></td></tr></table></figure><p>Now we also want to import the existing resources such like QuickSight user Groups into the pulumi. But the AWS Quicksight user Groups resources all are located in the <code>us-east-1</code> region. The pulumi will give us the error if we try to import the other region resource direclty.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/pulumi/pulumi-import-other-region-resource-error.png" class="lazyload placeholder" data-srcset="/assets/images/pulumi/pulumi-import-other-region-resource-error.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>This is because the Pulumi is using default <code>provider</code> for the AWS resources. The default provider is set to the region which is specified in the <code>Pulumi.yaml</code> or <code>Pulumi.&lt;stack-name&gt;.yaml</code> file. So, if we want to import the resources from other region, we need to specify the provider for that region.</p><h2 id="Pulumi-Provider"><a href="#Pulumi-Provider" class="headerlink" title="Pulumi Provider"></a>Pulumi Provider</h2><p>A <code>Pulumi provider</code> is a plugin that enables Pulumi to interact with a specific cloud provider or service. These providers are responsible for translating the Pulumi code into the appropriate API calls for the target cloud platform. </p><p>By default, each provider uses its packageâ€™s global configuration settings, which are controlled by your stackâ€™s configuration. You can set information such as your cloud provider credentials with environment variables and configuration files. If you store this data in standard locations, Pulumi knows how to retrieve them. For example, you can run below command to set the AWS region to <code>eu-west-1</code> region for the AWS provider configuration.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi config set aws:region eu-west-1</span><br></pre></td></tr></table></figure><p>This command actually will set the <code>aws:region</code> configuration value for the AWS provider in your Pulumi stack yaml file. You can also define the provider in your pulumi code, and create related resources in the specified region.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pulumi</span><br><span class="line"><span class="keyword">import</span> pulumi_aws <span class="keyword">as</span> aws</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a new provider for the us-east-1 region</span></span><br><span class="line">us_east_1_provider = aws.Provider(<span class="string">&#x27;us-east-1&#x27;</span>, region=<span class="string">&#x27;us-east-1&#x27;</span>)</span><br><span class="line"><span class="comment"># Create the Quicksight Groups resources in the us-east-1 region</span></span><br><span class="line">quicksight_group = aws.quicksight.Group(</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>,</span><br><span class="line">    aws_account_id=<span class="string">&quot;&lt;aws-account-id&gt;&quot;</span>,</span><br><span class="line">    group_name=<span class="string">&quot;dev&quot;</span>,</span><br><span class="line">    opts=pulumi.ResourceOptions(</span><br><span class="line">        provider=us_east_1_provider</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>In above code, we create a new provider for the <code>us-east-1</code> region and then create the Quicksight user Groups resources in the <code>us-east-1</code> region. The <code>provider</code> option is used to specify the provider to use for the resource. Even we have global configuration for the <code>eu-west-1</code> region, we can still create the resources in the <code>us-east-1</code> region by specifying the provider.</p><h2 id="Importing-the-AWS-Resources-of-the-Other-Region"><a href="#Importing-the-AWS-Resources-of-the-Other-Region" class="headerlink" title="Importing the AWS Resources of the Other Region"></a>Importing the AWS Resources of the Other Region</h2><p>Back to previous topic, if we want to import the AWS Quicksight Users and Groups resources from the <code>us-east-1</code> region in current pulumi stack from the command line, we need to specify the provider for the pulumi command line. The Pulumi CLI import command takes an additional <code>--provider</code> option to specify the provider to use for the import.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi import aws:quicksight/group:Group dev xxxxxx/default/dev --provider name=urn</span><br></pre></td></tr></table></figure><p>In above command, we are importing the <code>aws:quicksight/group:Group</code> resource with the <code>dev</code> name in the provider. For the <code>--provider</code> option, The <code>name</code> is the name of the provider to use for the import, and <code>urn</code> is the URN of the provider to use for the import. Typically, the resource urns in pulumis is below format.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urn:pulumi:production::acmecorp-website::custom:resources:Resource$aws:s3/bucket:Bucket::my-bucket</span><br><span class="line">           ^^^^^^^^^^  ^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^</span><br><span class="line">           &lt;stack-name&gt; &lt;project-name&gt;   &lt;parent-type&gt;             &lt;resource-type&gt;       &lt;resource-name&gt;</span><br></pre></td></tr></table></figure><p>If there is no <code>parent-type</code> in the resource urn, the urns will be like below format.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">urn:pulumi:production::acmecorp-website::aws:s3/bucket:Bucket::my-bucket</span><br><span class="line">           ^^^^^^^^^^  ^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^</span><br><span class="line">           &lt;stack-name&gt; &lt;project-name&gt;   &lt;resource-type&gt;       &lt;resource-name&gt;</span><br></pre></td></tr></table></figure><p>For the details of Pulumi Resources URNs, please refer to the <a href="https://www.pulumi.com/docs/concepts/resources/names/#urns">Pulumi URNs</a>.</p><p>In our scenario, we can import the Quicksight Groups resources from the <code>us-east-1</code> region by using the provider. <span class='pbg warning'>There is one thing is important to note</span> For example, we donâ€™t have any <code>Provider</code> resources for the <code>us-east-1</code> region in our current stack. If we run below command to import the Quicksight Groups resources from the <code>us-east-1</code> region, it will fail. Below is an examle of the full import resource with <code>--provider</code> option</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi import aws:quicksight/group:Group dev &lt;aws-account-id&gt;/default/dev --provider us_east_1_provider=urn:pulumi:&lt;pulumi-project-name&gt;::quicksight::pulumi:providers:aws::us_east_1_provider</span><br></pre></td></tr></table></figure><p>The <code>&lt;aws-account-id&gt;</code> and <code>&lt;pulumi-project-name&gt;</code> are placeholder just for example. Without the <code>Provider</code> resource for the <code>us-east-1</code> region, the import command will fail as below error message.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Preview failed: bad provider reference &#x27;us_east_1_provider=urn:pulumi:&lt;pulumi-project-name&gt;::quicksight::pulumi:providers:aws::us_east_1_provider&#x27; is not valid URN&#x27;</span><br></pre></td></tr></table></figure><p>The error full screenshot is below.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/pulumi/pulumi-import-without-provider-error.png" class="lazyload placeholder" data-srcset="/assets/images/pulumi/pulumi-import-without-provider-error.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>To fix this issue, we need to create the <code>Provider</code> resource for the <code>us-east-1</code> region in our current stack. We can do this by adding the <code>Provider</code> resource in in our Pulumi code and using <code>Pulumi up</code> command to create the resource.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pulumi</span><br><span class="line"><span class="keyword">import</span> pulumi_aws <span class="keyword">as</span> aws</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a new provider for the us-east-1 region</span></span><br><span class="line">us_east_1_provider = aws.Provider(<span class="string">&#x27;us-east-1&#x27;</span>, region=<span class="string">&#x27;us-east-1&#x27;</span>)</span><br></pre></td></tr></table></figure><p>After that, we can run the import command again to import the Quicksight Groups resources from the <code>us-east-1</code> region. And now you will see the Quicksight Groups resources of the <code>us-east-1</code> region in your pulumi stack.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/pulumi/pulumi-import-provider-success.png" class="lazyload placeholder" data-srcset="/assets/images/pulumi/pulumi-import-provider-success.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>To import the AWS resources of the other region, we need to specify the provider for the pulumi command line. The Pulumi CLI import command takes an additional <code>--provider</code> option to specify the provider to use for the import. The <code>provider</code> resource should be created in pulumi before importing the resources of the other region resource.</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Pulumi </tag>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
            <tag> IaC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Keras3.0 - A Multi-framework Machine Learning Library</title>
      <link href="/2024/06/25/keras3-0-a-multi-framework-machine-learning-library/"/>
      <url>/2024/06/25/keras3-0-a-multi-framework-machine-learning-library/</url>
      
        <content type="html"><![CDATA[<p><code>Keras</code>3 is a full rewrite of Keras that enables you to run your Keras workflows on top of either <code>JAX</code>, <code>TensorFlow</code>, or <code>PyTorch</code>, and that unlocks brand new large-scale model training and deployment capabilities. Itâ€™s multi-framework machine learning, meaning that you can use Keras to train models on top of different backends, and deploy them to different platforms. You can also use Keras as a low-level cross-framework language to develop custom components such as layers, models, or metrics that can be used in native workflows in JAX, TensorFlow, or PyTorch â€” with one codebase.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/keras3-multi-framework-machine-learning.jpg" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/keras3-multi-framework-machine-learning.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Keras 3 Multi-framework Machine Learning"/></div><span class="image-caption">Keras 3 Multi-framework Machine Learning</span></div><h2 id="Whatâ€™s-New-in-Keras-3"><a href="#Whatâ€™s-New-in-Keras-3" class="headerlink" title="Whatâ€™s New in Keras 3?"></a>Whatâ€™s New in Keras 3?</h2><p>Keras 3 introduces several exciting features that enhance its usability, performance, and flexibility:</p><h4 id="Unified-API"><a href="#Unified-API" class="headerlink" title="Unified API"></a>Unified API</h4><p>Keras 3 continues to build on its legacy of a user-friendly and intuitive API. It aims to unify the high-level and low-level APIs more seamlessly, providing a consistent experience across different backends such as TensorFlow, PyTorch, and others.</p><h4 id="Multi-backend-Support"><a href="#Multi-backend-Support" class="headerlink" title="Multi-backend Support"></a>Multi-backend Support</h4><p>While Keras has traditionally been closely associated with TensorFlow, Keras 3 expands its compatibility to other popular deep learning frameworks. This means you can now use Keras with PyTorch and other backends, leveraging Kerasâ€™ high-level abstractions and ease of use across different environments.</p><h4 id="Improved-Performance"><a href="#Improved-Performance" class="headerlink" title="Improved Performance"></a>Improved Performance</h4><p>Efforts have been made in Keras 3 to optimize performance across various operations, ensuring faster execution times and better utilization of hardware resources. This improvement is crucial for handling larger datasets and complex models efficiently.</p><h4 id="Enhanced-Model-Deployment"><a href="#Enhanced-Model-Deployment" class="headerlink" title="Enhanced Model Deployment"></a>Enhanced Model Deployment</h4><p>Keras 3 simplifies the process of deploying trained models to production environments. With streamlined APIs for model serialization and deployment tools, it becomes easier to integrate Keras models into real-world applications.</p><h4 id="Expanded-Model-Zoo"><a href="#Expanded-Model-Zoo" class="headerlink" title="Expanded Model Zoo"></a>Expanded Model Zoo</h4><p>Keras 3 comes with an expanded model zoo, offering <code>pre-trained models</code> for a wider range of tasks and domains. This includes vision models (e.g., ResNet, EfficientNet), NLP models (e.g., BERT, GPT), and other specialized architectures, all accessible through a unified interface.</p><h4 id="Advanced-AutoML-Capabilities"><a href="#Advanced-AutoML-Capabilities" class="headerlink" title="Advanced AutoML Capabilities"></a>Advanced AutoML Capabilities</h4><p>The new release includes improved AutoML capabilities, allowing developers to automate model selection, hyperparameter tuning, and architecture search. This feature can significantly accelerate the model development process, especially for beginners and researchers exploring new domains.</p><h2 id="Pre-trained-Models"><a href="#Pre-trained-Models" class="headerlink" title="Pre-trained Models"></a>Pre-trained Models</h2><p>Thereâ€™s a wide range of pretrained models that you can start using today with Keras 3. About 40 Keras Applications models (the <code>keras.applications</code> namespace) are available in all backends. These models are pre-trained on large datasets and can be used for transfer learning or fine-tuning. It includes:</p><h4 id="Pre-trained-Models-for-Natural-Language-Processing"><a href="#Pre-trained-Models-for-Natural-Language-Processing" class="headerlink" title="Pre-trained Models for Natural Language Processing"></a>Pre-trained Models for Natural Language Processing</h4><ul><li>Albert</li><li>Bart</li><li>Bert</li><li>Bloom</li><li>DebertaV3</li><li>DistilBert</li><li>Gemma</li><li>Electra</li><li>Falcon</li><li>FNet</li><li>GPT2</li><li>Llama</li><li>Llama3</li><li>Mistral</li><li>OPT</li><li>PaliGemma</li><li>Phi3</li><li>Roberta</li><li>XLMRoberta</li></ul><h4 id="Pre-trained-Models-for-Computer-Vision"><a href="#Pre-trained-Models-for-Computer-Vision" class="headerlink" title="Pre-trained Models for Computer Vision"></a>Pre-trained Models for Computer Vision</h4><ul><li>CSPDarkNet</li><li>EfficientNetV2</li><li>MiT</li><li>MobileNetV3</li><li>ResNetV1</li><li>ResNetV2</li><li>VideoSwinB</li><li>VideoSwinS</li><li>VideoSwinT</li><li>VitDet</li><li>YOLOV8</li><li>ImageClassifier</li><li>VideoClassifier</li><li>CLIP</li><li>RetinaNet</li></ul><h2 id="How-to-Get-Started-with-Keras-3"><a href="#How-to-Get-Started-with-Keras-3" class="headerlink" title="How to Get Started with Keras 3?"></a>How to Get Started with Keras 3?</h2><h4 id="1-Install-Keras-3"><a href="#1-Install-Keras-3" class="headerlink" title="1.Install Keras 3"></a>1.Install Keras 3</h4><p>Ensure you have the latest version of Keras installed. You can install Keras via pip if you havenâ€™t already:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade keras</span><br></pre></td></tr></table></figure><h4 id="2-Define-Model"><a href="#2-Define-Model" class="headerlink" title="2.Define Model"></a>2.Define Model</h4><p>Use Kerasâ€™ high-level API to define your deep learning model. Hereâ€™s a simple example of a convolutional neural network (CNN) for image classification:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Conv2D, MaxPooling2D, Flatten, Dense</span><br><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"></span><br><span class="line">model = Sequential([</span><br><span class="line">    Conv2D(<span class="number">32</span>, (<span class="number">3</span>, <span class="number">3</span>), activation=<span class="string">&#x27;relu&#x27;</span>, input_shape=(<span class="number">32</span>, <span class="number">32</span>, <span class="number">3</span>)),</span><br><span class="line">    MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)),</span><br><span class="line">    Conv2D(<span class="number">64</span>, (<span class="number">3</span>, <span class="number">3</span>), activation=<span class="string">&#x27;relu&#x27;</span>),</span><br><span class="line">    MaxPooling2D((<span class="number">2</span>, <span class="number">2</span>)),</span><br><span class="line">    Flatten(),</span><br><span class="line">    Dense(<span class="number">64</span>, activation=<span class="string">&#x27;relu&#x27;</span>),</span><br><span class="line">    Dense(<span class="number">10</span>, activation=<span class="string">&#x27;softmax&#x27;</span>)</span><br><span class="line">])</span><br></pre></td></tr></table></figure><h4 id="3-Compile-and-Train-Model"><a href="#3-Compile-and-Train-Model" class="headerlink" title="3.Compile and Train Model"></a>3.Compile and Train Model</h4><p>Compile the model with a loss function, optimizer, and metrics, then train it on your data:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">model.<span class="built_in">compile</span>(optimizer=<span class="string">&#x27;adam&#x27;</span>,</span><br><span class="line">              loss=<span class="string">&#x27;sparse_categorical_crossentropy&#x27;</span>,</span><br><span class="line">              metrics=[<span class="string">&#x27;accuracy&#x27;</span>])</span><br><span class="line"></span><br><span class="line">model.fit(train_images, train_labels, epochs=<span class="number">10</span>, batch_size=<span class="number">32</span>, validation_data=(val_images, val_labels))</span><br></pre></td></tr></table></figure><h4 id="4-Deploy-models"><a href="#4-Deploy-models" class="headerlink" title="4.Deploy models"></a>4.Deploy models</h4><p>Keras 3 provides a simple and unified interface for deploying trained models to production environments. You can serialize your models and deploy them using tools such as TensorFlow Serving, PyTorch Hub, or JAX Hub. </p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Keras 3 bring a lot of exciting features to the table, including multi-backend support, improved performance, and enhanced model deployment. It also includes a wide range of pre-trained models for natural language processing and computer vision, making it easy to get started with deep learning. With these features, Keras 3 is a powerful and flexible tool for building and deploying deep learning models.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Keras </tag>
            
            <tag> TensorFlow </tag>
            
            <tag> PyTorch </tag>
            
            <tag> JAX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Understanding the X-Frame-Options HTTP Header</title>
      <link href="/2024/06/14/understanding-the-x-frame-options-http-header/"/>
      <url>/2024/06/14/understanding-the-x-frame-options-http-header/</url>
      
        <content type="html"><![CDATA[<p>Recently, we build a frontend website as a nginx docker image, before go live on production. We asking the security team to do the security scan for the website on stage environment. One of security issues indicates the <code>X-Frame-Options</code> HTTP header is not set properly. It will cause the website to be vulnerable to clickjacking attacks.</p><h2 id="Clickjacking-Attack"><a href="#Clickjacking-Attack" class="headerlink" title="Clickjacking Attack"></a>Clickjacking Attack</h2><p><code>Clickjacking</code> is a type of security vulnerability that allows an attacker to trick a user into clicking on a link or button on a malicious website that is designed to look like the legitimate website. This can happen when the attacker embeds the malicious website within a frame on the legitimate website, which can trick the user into clicking on the malicious link or button.</p><p>To prevent clickjacking attacks, we can use the <code>X-Frame-Options</code> HTTP header to specify whether a web page can be displayed within a frame or iframe. This header can have three possible values: <code>DENY</code>, <code>SAMEORIGIN</code>, and <code>ALLOW-FROM</code> uri.</p><h2 id="What-is-X-Frame-Options"><a href="#What-is-X-Frame-Options" class="headerlink" title="What is X-Frame-Options?"></a>What is X-Frame-Options?</h2><p>The X-Frame-Options is an HTTP response header used to control whether a web page can be displayed within a frame or iframe. It helps to mitigate clickjacking attacks by preventing malicious websites from embedding a vulnerable site within a frame and tricking users into taking unintended actions.</p><h2 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works"></a>How it works</h2><p>The X-Frame-Options header can have three possible values: DENY, SAMEORIGIN, and ALLOW-FROM uri.</p><p><code>DENY</code>: This value prevents the page from being displayed in a frame, regardless of the site attempting to do so.</p><p><code>SAMEORIGIN</code>: With this value, the page can be displayed in a frame on the same origin as the page itself. This restricts the frame to the same origin as the parent page.</p><p><code>ALLOW-FROM uri</code>: Here, the page can only be displayed in a frame on the specified origin.</p><h2 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h2><p>To implement the X-Frame-Options header, simply include the header in the serverâ€™s HTTP response. It can be implemented on code programming, server configuration, or web server configuration.</p><h3 id="Code-Programming"><a href="#Code-Programming" class="headerlink" title="Code Programming"></a>Code Programming</h3><p>Below is an example of how to set the header using different programming languages:</p><h4 id="Using-Node-js-Express"><a href="#Using-Node-js-Express" class="headerlink" title="Using Node.js (Express)"></a>Using Node.js (Express)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Set X-Frame-Options header to DENY</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">setHeader</span>(<span class="string">&#x27;X-Frame-Options&#x27;</span>, <span class="string">&#x27;DENY&#x27;</span>);</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="Using-Django-Python"><a href="#Using-Django-Python" class="headerlink" title="Using Django (Python)"></a>Using Django (Python)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set X-Frame-Options header to SAMEORIGIN</span></span><br><span class="line">response[<span class="string">&#x27;X-Frame-Options&#x27;</span>] = <span class="string">&#x27;SAMEORIGIN&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="Using-ASP-NET-C"><a href="#Using-ASP-NET-C" class="headerlink" title="Using ASP.NET (C#)"></a>Using ASP.NET (C#)</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Set X-Frame-Options header to ALLOW-FROM</span></span><br><span class="line">Response.AddHeader(<span class="string">&quot;X-Frame-Options&quot;</span>, <span class="string">&quot;ALLOW-FROM https://example.com&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="Server-Configuration"><a href="#Server-Configuration" class="headerlink" title="Server Configuration"></a>Server Configuration</h3><h4 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h4><p>To configure Nginx to send the X-Frame-Options header, add this either to your http, server or location configuration:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add_header X-Frame-Options SAMEORIGIN always;</span><br></pre></td></tr></table></figure><h4 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h4><p>To configure Apache to send the X-Frame-Options header for all pages, add this to your siteâ€™s configuration:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Header always set X-Frame-Options &quot;DENY&quot;</span><br></pre></td></tr></table></figure><h4 id="IIS"><a href="#IIS" class="headerlink" title="IIS"></a>IIS</h4><p>To configure IIS to send the X-Frame-Options header for all pages, add this to your web.config file:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">httpProtocol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">customHeaders</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">add</span> <span class="attr">name</span>=<span class="string">&quot;X-Frame-Options&quot;</span> <span class="attr">value</span>=<span class="string">&quot;DENY&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">customHeaders</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">httpProtocol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">system.webServer</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p>To demonstrate the effectiveness of the X-Frame-Options header, we can create a parent html page, and a child html page that is embedded within a frame in the parent page.</p><h3 id="Parent-HTML-Page"><a href="#Parent-HTML-Page" class="headerlink" title="Parent HTML Page"></a>Parent HTML Page</h3><p>Parent HTML page includes the iframe of the child page. The child page is hosted on a different domain (<a href="http://localhost:3333/child.html">http://localhost:3333/child.html</a>) to demonstrate the effectiveness of the X-Frame-Options header. </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Parent Page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Parent Page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is parent page. below is the iframe of child page.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:3333/child.html&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span> <span class="attr">sandbox</span>=<span class="string">&quot;allow-scripts&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 200px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Child-HTML-Page"><a href="#Child-HTML-Page" class="headerlink" title="Child HTML Page"></a>Child HTML Page</h3><p>Child HTML page is a simple page that displays a message. It is hosted on the domain (<a href="http://localhost:3333/child.html">http://localhost:3333/child.html</a>) by using <code>httpster</code> tool.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Child Page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Child Page<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>   </span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a child page.<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h3><p>To test the effectiveness of the X-Frame-Options header, we can open the parent page in a browser and observe the behavior.</p><h4 id="Without-X-Frame-Options-Header"><a href="#Without-X-Frame-Options-Header" class="headerlink" title="Without X-Frame-Options Header"></a>Without X-Frame-Options Header</h4><p>By default, the <code>httpster</code> does not add the X-Frame-Options header to the response. Therefore, the child page can be embedded within a frame on the parent page. See below screenshot, these is no X-Frame-Options header in the response.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/frontend/without-x-frame-options-response-header.png" class="lazyload placeholder" data-srcset="/assets/images/frontend/without-x-frame-options-response-header.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Without X-Frame-Options Header"/></div><span class="image-caption">Without X-Frame-Options Header</span></div><h4 id="With-X-Frame-Options-Header"><a href="#With-X-Frame-Options-Header" class="headerlink" title="With X-Frame-Options Header"></a>With X-Frame-Options Header</h4><p>With the X-Frame-Options header set to DENY, the child page cannot be embedded within a frame on the parent page.</p><p>To test the X-Frame-Options header, we need to modify the <code>httpster</code> server source code to add the X-Frame-Options header to the response. Actually, the <code>httpster</code> tool is a simple HTTP server base on node express. We can modify the <code>app.use</code> function to set the X-Frame-Options header in the httpster source code. </p><p>Here is the modified <code>app.use</code> function with the X-Frame-Options header set to DENY:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">   res.<span class="title function_">setHeader</span>(<span class="string">&#x27;X-Frame-Options&#x27;</span>, <span class="string">&#x27;DENY&#x27;</span>);</span><br><span class="line">   <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>We can then open the parent page in a browser and observe the behavior. See below screenshot, these is with X-Frame-Options header value set to DENY in the response. And the child page is blocked from being embedded within a frame on the parent page.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/frontend/with-x-frame-options-response-header-deny.png" class="lazyload placeholder" data-srcset="/assets/images/frontend/with-x-frame-options-response-header-deny.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="With X-Frame-Options Header Value DENY"/></div><span class="image-caption">With X-Frame-Options Header Value DENY</span></div><p>And also, there is error message in the console of the browser, which indicates that the child page is blocked from being embedded within a frame on the parent page.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/frontend/with-x-frame-opitons-response-header-deny-console.png" class="lazyload placeholder" data-srcset="/assets/images/frontend/with-x-frame-opitons-response-header-deny-console.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="With X-Frame-Options Header Value DENY Console Error"/></div><span class="image-caption">With X-Frame-Options Header Value DENY Console Error</span></div><p>You can also test the X-Frame-Options header with different values such as SAMEORIGIN and ALLOW-FROM uri to see how it affects the behavior of the website.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>By implementing the X-Frame-Options header, web developers can enhance the security of their websites and protect users from potential clickjacking attacks. It is recommended to set this header appropriately based on the specific requirements of the web application.</p><p>Remember to test the effectiveness of the header using browser developer tools and security testing tools to ensure that it is properly configured.</p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Points of AWS China CloudFront You Need to Notice</title>
      <link href="/2024/04/18/the-points-of-aws-china-cloudfront-you-need-to-notice/"/>
      <url>/2024/04/18/the-points-of-aws-china-cloudfront-you-need-to-notice/</url>
      
        <content type="html"><![CDATA[<p>There are much difference between AWS Global and AWS China. The background of this blog is that Iâ€™m responsible for migrating the aws global application to aws china. The application already go lived on AWS Global. The application is  collecting the user inforamtion and for business logic. The business wants this application to serve China customer. Due to the application regulation,  the application needs to deployed in AWS China and store the user information in AWS China.</p><p>The application is using below AWS services:</p><ul><li>AWS S3: store the static website assets and user information.</li><li>AWS ALB: the load balancer for the application.</li><li>AWS ASG: auto scaling group for the application.</li><li>AWS ECR: store the application container image.</li><li>AWS ECS: run the application container.</li><li>AWS ACM: manage the SSL certificate.</li><li>AWS WAF: web application firewall.</li><li>AWS VPC: virtual private cloud.</li><li>AWS S3 VPC Gateway: access the S3 bucket from the VPC.</li><li>AWS CloudWatch: monitor the application logs, performance and alarms.</li><li>AWS SNS: notificate the stack holder when application performance is abnormal.</li><li>AWS CloudFront: serve the static website and user information.</li></ul><h2 id="AWS-China"><a href="#AWS-China" class="headerlink" title="AWS China"></a>AWS China</h2><p>The AWS China is a separate entity operated by a local partner in compliance with Chinese regulations. Data centers located in Beijing and Ningxia. The operator is different between Beijing and Ningxia. Beijing region operated by Sinnet(å…‰çŽ¯æ–°ç½‘)ï¼ŒNingxia region operated by NWCD(è¥¿äº‘æ•°æ®). Basicallyï¼Œ the service price of Ningxia region is cheaper than Beijing region. You can find the detail pricing in the AWS China link <a href="https://calculator.amazonaws.cn/#/">https://calculator.amazonaws.cn/#/</a>. AWS Fargate priciing is here <a href="https://www.amazonaws.cn/en/fargate/pricing">https://www.amazonaws.cn/en/fargate/pricing</a></p><h2 id="Difference-between-AWS-Global-and-AWS-China"><a href="#Difference-between-AWS-Global-and-AWS-China" class="headerlink" title="Difference between AWS Global and AWS China"></a>Difference between AWS Global and AWS China</h2><p>The AWS China has many limiation and difference with AWS Global. And also some new services are not available in AWS China. When you migrate the application to AWS China, you need to consider the below points:</p><ol><li>AWS China has different pricing policy. The pricing policy is different between Beijing and Ningxia. </li><li>The Infrastructure code is different between AWS Global and AWS China. The code need to be modified to adapt to AWS China.</li><li>The Website should be do the ICP filling and Goverment Filling. (åŸŸåå¤‡æ¡ˆï¼Œç½‘å®‰å¤‡æ¡ˆ)</li></ol><h3 id="Infrastructure-as-Code"><a href="#Infrastructure-as-Code" class="headerlink" title="Infrastructure as Code"></a>Infrastructure as Code</h3><p>Weâ€™re using <code>Pulumi</code> to manage the infrastructure as code. Pulumi is a tool for developing, building, and deploying cloud applications and infrastructure. It supports multiple cloud providers including AWS, Azure, GCP, and Kubernetes.<br>There are AWS Service Resource definition is different with AWS Global on AWS China. In AWS China there is an <code>amazonaws.com.cn</code> string for endpoint, and <code>aws-cn</code> ARN prefix. The code need to be modified to adapt to AWS China.</p><h4 id="AWS-China-1"><a href="#AWS-China-1" class="headerlink" title="AWS China"></a>AWS China</h4><ul><li>AWS EndPoint: xxxxxxx.s3.cn-northwest-1.<strong>amazonaws.com.cn</strong>&#x2F;example.txt</li><li>AWS ARNs: arn:<strong>aws-cn</strong>:s3:::xxxxxxx&#x2F;example.txt</li></ul><h4 id="AWS-Global"><a href="#AWS-Global" class="headerlink" title="AWS Global"></a>AWS Global</h4><ul><li>AWS EndPoint: xxxxxxx.s3.cn-northwest-1.<strong>amazonaws.com</strong>&#x2F;example.txt</li><li>AWS ARNs: arn:<strong>aws</strong>:s3:::xxxxxxx&#x2F;example.txt</li></ul><h3 id="CloudFront"><a href="#CloudFront" class="headerlink" title="CloudFront"></a>CloudFront</h3><p>In our application is much difference between AWS Global and AWS China, especially the CloudFront.</p><ul><li>Requires ICP filing and domain name filing in AWS China.</li><li>The CloudFront provides domain name like â€œ*.cloudfront.cnâ€ which cannot be used in for website serving in AWS China. You can not access the website through the CloudFront domain name. It returns 403 Forbidden error.</li><li>The SSL&#x2F;TLS certificates for CloudFront does not support the Amazon Certificate Manager in AWS China. It requires to use SSL&#x2F;TLS certificate from third party, and then - - import certificate in IAM. It is only support IAM to store the certificates for CloudFront in AWS China.</li><li>The CloudFront does not supports the Amazon WAF in AWS China.</li><li>The Cache polices and Origin request polices does not support in AWS China</li><li>The Lambda@Edge is not available in AWS China.</li><li>CloudFront origin access only supports legacy access identities OAI for S3 bucket, does not support OAC in AWS China</li><li>The CloudFront origin for S3 bucket which is not a website endpoint, the following format: <code>bucket-name.s3.region.amazonaws.com.cn</code>, remember <code>region</code> after <code>s3</code></li><li>The CloudFront origin for S3 bucket which is a website endpoint, use the following format: <code>bucket-name.s3-website.region.amazonaws.com.cn</code>, remember <code>region</code> after <code>s3-website</code></li></ul><p>For more information, please refer to the AWS China CloudFront <a href="https://docs.amazonaws.cn/en_us/aws/latest/userguide/cloudfront.html#feature-diff">https://docs.amazonaws.cn/en_us/aws/latest/userguide/cloudfront.html#feature-diff</a></p><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>In this blog, we have discussed the important points when migrate the aws global application to aws china, especially for the AWS CloudFront. We have listed the difference between AWS Global and AWS China, and also the CloudFront difference between AWS Global and AWS China.</p><p>If you want to know more about AWS China service difference with AWS Global, you can refer to this official link <a href="https://docs.amazonaws.cn/en_us/aws/latest/userguide/services.html">https://docs.amazonaws.cn/en_us/aws/latest/userguide/services.html</a></p><p>Hope this blog can help you to migrate the application to AWS China.</p><h2 id="Useful-Links"><a href="#Useful-Links" class="headerlink" title="Useful Links"></a>Useful Links</h2><ul><li>AWS China Service Difference: <a href="https://docs.amazonaws.cn/en_us/aws/latest/userguide/services.html">https://docs.amazonaws.cn/en_us/aws/latest/userguide/services.html</a></li><li>AWS China Service Pricing: <a href="https://calculator.amazonaws.cn/#/">https://calculator.amazonaws.cn/#/</a></li><li>AWS China Fargate Pricing: <a href="https://www.amazonaws.cn/en/fargate/pricing">https://www.amazonaws.cn/en/fargate/pricing</a></li><li>AWS China Edge Location: <a href="https://www.amazonaws.cn/en/cloudfront/features/">https://www.amazonaws.cn/en/cloudfront/features/</a></li><li>AWS China CloudFront Error Investigation: <a href="https://zhuanlan.zhihu.com/p/182517851">https://zhuanlan.zhihu.com/p/182517851</a></li><li>ICP&#x2F;IPåœ°å€&#x2F;åŸŸåä¿¡æ¯å¤‡æ¡ˆç®¡ç†ç³»ç»Ÿ: <a href="https://beian.miit.gov.cn/#/Integrated/index">https://beian.miit.gov.cn/#/Integrated/index</a></li><li>å…¨å›½äº’è”ç½‘å®‰å…¨ç®¡ç†æœåŠ¡å¹³å°: <a href="https://beian.mps.gov.cn/#/query/webSearch">https://beian.mps.gov.cn/#/query/webSearch</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Migrate a legacy application to AWS Cloud</title>
      <link href="/2024/03/13/migrate-a-legacy-application-to-aws-cloud/"/>
      <url>/2024/03/13/migrate-a-legacy-application-to-aws-cloud/</url>
      
        <content type="html"><![CDATA[<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Recently, we got a requirement from the company to move the application to AWS Cloud. The company has a strong focus on security and compliance, and stack holders also want the application more reliable and scalable. The migration also need to be done as soon as possible.</p><p>The application running on a local data center. The application is consists of two parts, frontend is a static website built with React and provide the user interface to user, the backend is a Python Flask application that provide the API to interact with the frontend. The backend server also contains a machine learning model algorithm that is used to process the userâ€™s ears photo. </p><p>The application main logic is that the user answer some questions and scan and upload their ears photo to the backend server from the website, the backend server will process the photo and return the suggestion result to user to recommend which headset or earphone is the best fit for them.</p><h2 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h2><p>After analysis application technologies and architecture, base on the requirements, we did some architecture design. Below is the architecture of the application on AWS Cloud. </p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-migrate-legacy-app-arch.png" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-migrate-legacy-app-arch.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Application Architecture on AWS Cloud"/></div><span class="image-caption">Application Architecture on AWS Cloud</span></div><p>The application is hosted on AWS Cloud, major is that the frontend is served by CloudFront, the backend is served by ECS, and the userâ€™s ears photo is stored in S3 bucket. The application is using the following AWS services:</p><h4 id="AWS-S3-Bucket"><a href="#AWS-S3-Bucket" class="headerlink" title="AWS S3 Bucket"></a>AWS S3 Bucket</h4><p>Setup two s3 buckets, one is for storing the userâ€™s ears photo, and config the object expires after 90 days. second bucket is for storing the static website files. All s3 buckets are public blocked.</p><h4 id="AWS-VPC"><a href="#AWS-VPC" class="headerlink" title="AWS VPC"></a>AWS VPC</h4><p>Create a dedicate VPC for the application, and configure the subnets, route tables, and security groups. Two public subnets and two private subnets are used.</p><h4 id="AWS-ECR"><a href="#AWS-ECR" class="headerlink" title="AWS ECR"></a>AWS ECR</h4><p>Use ECR to store the Docker image of the backend application. The image will be built and pushed to ECR by CI&#x2F;CD pipeline.</p><h4 id="AWS-ECS"><a href="#AWS-ECS" class="headerlink" title="AWS ECS"></a>AWS ECS</h4><p>Use ECS to run the backend application as a container in private subnets, and configure the auto scaling group and load balancer. Autoscaling minimum size is 2 and maximum size is 20.</p><h4 id="AWS-ALB"><a href="#AWS-ALB" class="headerlink" title="AWS ALB"></a>AWS ALB</h4><p>Create a ALB to serve the backend ECS service, and configure the listener rules to forward the traffic to the ECS service. The ALB attached the SSL certificate from ACM.</p><h4 id="AWS-S3-VPC-Gateway-Endpoint"><a href="#AWS-S3-VPC-Gateway-Endpoint" class="headerlink" title="AWS S3 VPC Gateway Endpoint"></a>AWS S3 VPC Gateway Endpoint</h4><p>Use the S3 VPC Gateway Endpoint to access the s3 bucket from the backend ECS container.</p><h4 id="AWS-Internet-Gateway"><a href="#AWS-Internet-Gateway" class="headerlink" title="AWS Internet Gateway"></a>AWS Internet Gateway</h4><p>The Internet Gateway to connect the VPC to the internet. Put the ALB on the two public subnets across two AZs </p><h4 id="AWS-CloudWatch"><a href="#AWS-CloudWatch" class="headerlink" title="AWS CloudWatch"></a>AWS CloudWatch</h4><p>Use CloudWatch to monitor the application performance, and create alarms to notify the team when the application is not running as expected.</p><h4 id="AWS-SNS"><a href="#AWS-SNS" class="headerlink" title="AWS SNS"></a>AWS SNS</h4><p>Use SNS to notify the team when the application performance is not good, and the team can take action to improve the application performance.</p><h4 id="AWS-ACM"><a href="#AWS-ACM" class="headerlink" title="AWS ACM"></a>AWS ACM</h4><p>Use ACM to manage the SSL certificate for the ALB and CloudFront, the certificate is issued by the IT team. The application is served over HTTPS.</p><h4 id="AWS-CloudFront"><a href="#AWS-CloudFront" class="headerlink" title="AWS CloudFront"></a>AWS CloudFront</h4><p>Use CloudFront to serve the static website files, and cache the files to improve the website loading speed. Config CloudFront to access s3 bucket by OAC. Create a another origin for the ALB.</p><h4 id="AWS-Security-Group"><a href="#AWS-Security-Group" class="headerlink" title="AWS Security Group"></a>AWS Security Group</h4><p>Create a security group for the ECS container, and allow the traffic from the ALB to the ECS container. And one more security group for the ALB to allow the traffic only from AWS CloudFront prefix list.</p><h4 id="AWS-IAM"><a href="#AWS-IAM" class="headerlink" title="AWS IAM"></a>AWS IAM</h4><p>Create an IAM role for the ECS container, and attach the necessary policies to the role to access the s3 bucket, ECR, and CloudWatch.</p><h4 id="AWS-WAF"><a href="#AWS-WAF" class="headerlink" title="AWS WAF"></a>AWS WAF</h4><p>Use WAF to protect the application from common web exploits and attacks. This is mandatory for the companyâ€™s security policy. The security team will also review the infrastucture and do the security scan the application. The application wonâ€™t be deployed to production if the security scan failed.</p><h2 id="IaC-with-Pulumi"><a href="#IaC-with-Pulumi" class="headerlink" title="IaC with Pulumi"></a>IaC with Pulumi</h2><p>Use Pulumi to manage the AWS resources, and create the infrastructure as code. The code will be checked into the source control, and for the pipeline, weâ€™re using Bamboo pipeline as company already using Bamboo for CI&#x2F;CD. The pipeline will doing below major things.</p><ol><li>Build the Docker image and push to ECR.</li><li>Deploy the frontend static website to CloudFront, and invalidate the cache to make the content updated for end user.</li><li>Update the infrastucture by creating or updating the AWS resources by using pulumi.</li></ol><h2 id="Rationale"><a href="#Rationale" class="headerlink" title="Rationale"></a>Rationale</h2><p>The migration of the legacy application to AWS Cloud is a complex task, and we need to follow the best practices to make the migration successful.</p><ol><li>Using CloudFront and S3 bucket to host the static website and userâ€™s ears photo is scalable and cost-effective. </li><li>Using the ECS and ALB to serve the backend application is also a good choice to improve the application performance and scalability. Weâ€™re not using AWS API Gateway and AWS Lambda to serve as backend because we are requested to migrate the application to Cloud as soon as possible. Build the python <code>Flask</code> application to a docker image and push to ECR is a good practice to deploy the application to AWS Cloud in this situation.</li><li>Using the VPC and security group to isolate the application and improve the security is a must. The ECS is located in private subnets, and the ALB is in public subnets, and the traffic is only allowed from AWS CloudFront prefix list to ALB, then forward traffic to ECS container.</li><li>Using the ACM to manage the SSL certificate for the ALB and CloudFront is a good practice to improve the security and compliance.</li><li>Using the CloudWatch to monitor the application performance and create alarms to notify the team when the application is not running as expected is a good practice to improve the application reliability.</li><li>Using the IAM role to access the s3 bucket, ECR, and CloudWatch is a good practice to improve the security and control.</li><li>Using the WAF to protect the application from common web exploits and attacks is a mandatory requirement for the companyâ€™s security policy.</li><li>Using Pulumi to manage the AWS resources as code is a good practice to improve the automation and reliability of the migration process.</li></ol><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>This is just a sample of how to migrate a legacy application to AWS Cloud, and there are many other factors to consider when migrating a legacy application to AWS Cloud. The key is to follow the best practices and use the right tools to make the migration successful base on the requirements.</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Pulumi </tag>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
            <tag> IaC </tag>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Manage the Existing Cloud Resources By Using Pulumi Import</title>
      <link href="/2024/02/27/importing-existing-cloud-resources-with-pulumi/"/>
      <url>/2024/02/27/importing-existing-cloud-resources-with-pulumi/</url>
      
        <content type="html"><![CDATA[<p>In many real-world scenarios, cloud infrastructure is already in place before adopting infrastructure as code (IaC) solutions like Pulumi. Pulumi provides a feature called <code>import</code> to help manage existing cloud resources within its IaC framework. This feature allows users to import the current state of resources into their Pulumi codebase, making it easier to adopt Pulumi for managing existing infrastructure.</p><h2 id="Pulumi-Import"><a href="#Pulumi-Import" class="headerlink" title="Pulumi Import"></a>Pulumi Import</h2><p>Pulumiâ€™s import feature provides a way to bring existing cloud resources under Pulumiâ€™s management. By creating a Pulumi program and using the pulumi import command, users can declare and manage existing infrastructure resources using Pulumi. The pulumi supports both importing existing resources with the CLI and importing existing resources in the code. Here weâ€™re talking about the CLI import to generate the code for the imported resources. </p><h2 id="Usage-and-Syntax"><a href="#Usage-and-Syntax" class="headerlink" title="Usage and Syntax"></a>Usage and Syntax</h2><p>To import an existing cloud resource into Pulumi, you need to follow these steps:</p><ol><li><p>Create a Pulumi Project<br>Create a new Pulumi project or use an existing Pulumi project where you want to manage the imported resources. For creating a pulumi project, you can check the previous blog post on how to create a new Pulumi project.</p></li><li><p>Identify the Resource to Import<br>Identify the existing resource in your cloud provider environment that you want to import into Pulumi. This could be a virtual machine, database, storage bucket, or any other supported resource.</p></li><li><p>Apply the Import<br>Apply the import operation to bring the existing resource under Pulumiâ€™s management. Pulumi will generate the appropriate code for the resource based on its current state in the cloud provider environment.</p></li></ol><p>The syntax for the import command is as follows:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi import &lt;type&gt; &lt;name&gt; &lt;id&gt;</span><br></pre></td></tr></table></figure><ul><li><code>&lt;type&gt;</code> is the Pulumi type token to use for the imported resource.</li><li><code>&lt;name&gt;</code> is the resource name to apply to the resource once itâ€™s imported.</li><li><code>&lt;id&gt;</code> is the value to use for the resource lookup in the cloud provider.</li></ul><h2 id="Managing-Imported-Resources"><a href="#Managing-Imported-Resources" class="headerlink" title="Managing Imported Resources"></a>Managing Imported Resources</h2><p>Once the resources are imported, they can be managed just like any other Pulumi-managed resources. The imported resources can be updated, deleted, and included in stacks alongside other Pulumi-declared infrastructure.</p><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>I created a S3 bucket name <code>my-s3-bucket</code> from AWS Console manually. But now I want to manage this S3 bucket by Pulumi. After identifying the bucket to be imported, the import command:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi import aws:s3/bucket:Bucket my-bucket my-s3-bucket</span><br></pre></td></tr></table></figure><ul><li><code>aws:s3/bucket:Bucket</code> is the Pulumi type token for the S3 bucket resource.</li><li><code>my-bucket</code> is the resource name to apply to the imported resource.</li><li><code>my-s3-bucket</code> is the value to use for the resource lookup in the AWS provider, here itâ€™s bucket name.</li></ul><p>After running the import command, Pulumi will generate the appropriate code for the S3 bucket resource based on its current state in the AWS provider. Below is screenshot of the output of the import command:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/pulumi/pulumi-import.png" class="lazyload placeholder" data-srcset="/assets/images/pulumi/pulumi-import.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Pulumi Import"/></div><span class="image-caption">Pulumi Import</span></div><p>And generated code:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pulumi</span><br><span class="line"><span class="keyword">import</span> pulumi_aws <span class="keyword">as</span> aws</span><br><span class="line"></span><br><span class="line">my_bucket = aws.s3.Bucket(<span class="string">&quot;my-bucket&quot;</span>,</span><br><span class="line">    arn=<span class="string">&quot;arn:aws-cn:s3:::my-s3-bucket&quot;</span>,</span><br><span class="line">    bucket=<span class="string">&quot;my-s3-bucket&quot;</span>,</span><br><span class="line">    hosted_zone_id=<span class="string">&quot;Z282HJ1KT0DH03&quot;</span>,</span><br><span class="line">    request_payer=<span class="string">&quot;BucketOwner&quot;</span>,</span><br><span class="line">    server_side_encryption_configuration=aws.s3.BucketServerSideEncryptionConfigurationArgs(</span><br><span class="line">        rule=aws.s3.BucketServerSideEncryptionConfigurationRuleArgs(</span><br><span class="line">            apply_server_side_encryption_by_default=aws.s3.BucketServerSideEncryptionConfigurationRuleApplyServerSideEncryptionByDefaultArgs(</span><br><span class="line">                sse_algorithm=<span class="string">&quot;AES256&quot;</span>,</span><br><span class="line">            ),</span><br><span class="line">            bucket_key_enabled=<span class="literal">True</span>,</span><br><span class="line">        ),</span><br><span class="line">    ),</span><br><span class="line">    opts=pulumi.ResourceOptions(protect=<span class="literal">True</span>))</span><br></pre></td></tr></table></figure><p>In above code, you will notice there is a <code>protect=True</code> option set for the imported resource. This is to prevent any accidental deletion of the imported resource.</p><p>So when you try to delete the imported resource, Pulumi will give the errors to you. Letâ€™s try to delete the imported S3 bucket:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi destroy</span><br></pre></td></tr></table></figure><p>You see, it displays the error message that the S3 bucket is protected and cannot be deleted.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/pulumi/pulumi-destory-import.png" class="lazyload placeholder" data-srcset="/assets/images/pulumi/pulumi-destory-import.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Pulumi Destory Import Protected Resource"/></div><span class="image-caption">Pulumi Destory Import Protected Resource</span></div><p>If you want to delete the resource in the cloud provider environment, you can remove the <code>protect=True</code> option from the code or change the <code>protect</code> option to <code>False</code>.</p><p>In above weâ€™re using <code>pulumi import</code> to import the s3 bucket resource and code is generated on console. We can also generate the code into python file directly by using below command:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi import aws:s3/bucket:Bucket my-bucket my-s3-bucket -o my-s3-bucket.py</span><br></pre></td></tr></table></figure><h2 id="Pulumi-State"><a href="#Pulumi-State" class="headerlink" title="Pulumi State"></a>Pulumi State</h2><p>Pulumi maintains a state file that tracks the current state of all resources in the cloud provider environment. When a resource is imported, Pulumi updates the state file to reflect the imported resource. This allows Pulumi to manage the imported resource as if it were created in the cloud provider environment.</p><p>Sometimes, we want to delete the state which imported in pulumi, but keep the existing cloud resources. In such case, we can use below command to only delete the state and keep the existing cloud resources.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi state delete &lt;urn&gt;</span><br></pre></td></tr></table></figure><ul><li><code>&lt;urn&gt;</code> is the unique resource identifier of the imported resource.</li></ul><p>To check the <code>&lt;urn&gt;</code> of the resource, we can use <code>pulumi stack --show-urns</code> to see the list urns of all resources in the current stack.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi stack --show-urns</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/pulumi/pulumi-stack-show-urns.png" class="lazyload placeholder" data-srcset="/assets/images/pulumi/pulumi-stack-show-urns.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Pulumi Stack Show Urns"/></div><span class="image-caption">Pulumi Stack Show Urns</span></div><p>In above screenshot, we can see the <code>&lt;urn&gt;</code> of the imported S3 bucket resource.To delete the state of the imported resource, we can use the following command:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi state delete urn:pulumi:dev::pulumi-test::aws:s3/bucket:Bucket::my-bucket --force -y</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/pulumi/pulumi-state-delete.png" class="lazyload placeholder" data-srcset="/assets/images/pulumi/pulumi-state-delete.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Pulumi State Delete Imported Resource"/></div><span class="image-caption">Pulumi State Delete Imported Resource</span></div><p>After deleting the state, the imported S3 bucket will still exist in the cloud provider environment.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Pulumiâ€™s import feature allows users to seamlessly integrate existing cloud resources into their Pulumi programs. By following the import process and syntax, users can effectively manage their entire infrastructure, including existing resources, through Pulumiâ€™s IaC approach.</p><p>This feature simplifies the transition to Pulumi for managing infrastructure and enables teams to leverage the benefits of IaC without having to recreate their entire cloud environment from scratch.</p><h2 id="Reference-Links"><a href="#Reference-Links" class="headerlink" title="Reference Links"></a>Reference Links</h2><ul><li>Pulumi Import: <a href="https://www.pulumi.com/docs/cli/commands/pulumi_import/">https://www.pulumi.com/docs/cli/commands/pulumi_import/</a></li><li>S3 Bucket Import: <a href="https://www.pulumi.com/registry/packages/aws/api-docs/s3/bucket/#import">https://www.pulumi.com/registry/packages/aws/api-docs/s3/bucket/#import</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Pulumi </tag>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
            <tag> IaC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pulumi - A Powerful IaC to manage the cloud infrastructure</title>
      <link href="/2024/02/11/pulumi-a-powerful-iac-to-manage-the-cloud-infrastructure/"/>
      <url>/2024/02/11/pulumi-a-powerful-iac-to-manage-the-cloud-infrastructure/</url>
      
        <content type="html"><![CDATA[<p>To manage the application cloud infrastructure more efficiently, we can use the <code>Terraform</code> for <code>IaC(Infrastructure as Code)</code>. But today, weâ€™re not going to talk about the Terraform, weâ€™re going to talk about the Pulumi. A powerful IaC tool that manages the cloud infrastructure.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/pulumi/pulumi-platform.png" class="lazyload placeholder" data-srcset="/assets/images/pulumi/pulumi-platform.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Pulumi Platform"/></div><span class="image-caption">Pulumi Platform</span></div><p>Pulumi is an open-source <code>infrastructure as code (IaC)</code> tool that provides a powerful way to create, deploy, and manage cloud infrastructure. It is the easiest way to build and deploy infrastructure, of any architecture and on any cloud, using programming languages that you already know and love, such as <code>TypeScript</code>, <code>Python</code>, <code>Go</code>, <code>C#</code>, <code>Java</code> etc.</p><p>It is a cross-platform tool that runs on <code>Windows</code>, <code>Linux</code>, and <code>macOS</code>, and supports a wide range of cloud providers, including <code>AWS</code>, <code>Azure</code>, <code>GCP</code>, <code>Kubernetes</code>, <code>Docker</code>, and more. It is also easy to use and has a simple and intuitive interface.</p><p>CI&#x2F;CD integration is also supported, which means you can use Pulumi to deploy your infrastructure as part of your CI&#x2F;CD pipeline. This makes it easier to manage and update your infrastructure as your application evolves.</p><h2 id="Install-Pulumi"><a href="#Install-Pulumi" class="headerlink" title="Install Pulumi"></a>Install Pulumi</h2><p>The pulumi  is a cross-platform tool that runs on Windows, Linux, and macOS. You can find and download the latest version from the official website: <a href="https://www.pulumi.com/docs/install/versions/">https://www.pulumi.com/docs/install/versions/</a>. Follow this link to <a href="https://www.pulumi.com/docs/install/">https://www.pulumi.com/docs/install/</a> to install the Pulumi CLI. Itâ€™s very simple to set up the Pulumi CLI on your machine.</p><p>Once you installed pulumi, simply run the below command to check the version:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi version</span><br></pre></td></tr></table></figure><h2 id="Create-a-new-Pulumi-project"><a href="#Create-a-new-Pulumi-project" class="headerlink" title="Create a new Pulumi project"></a>Create a new Pulumi project</h2><p>To create a new Pulumi project, you can use the <code>pulumi new</code> command. Below command is creating a new project with AWS Python template.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi new aws-python</span><br></pre></td></tr></table></figure><p>This will create a new project with a simple AWS Python template. The project will have a <code>Pulumi.yaml</code> file, which is the configuration file for the project.</p><h2 id="Configure-the-Pulumi-project"><a href="#Configure-the-Pulumi-project" class="headerlink" title="Configure the Pulumi project"></a>Configure the Pulumi project</h2><p>The <code>Pulumi.yaml</code> file is the configuration file for the project. It contains the project name and some configuration.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">my-project</span></span><br><span class="line"><span class="attr">runtime:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">python</span></span><br><span class="line">  <span class="attr">options:</span></span><br><span class="line">    <span class="attr">virtualenv:</span> <span class="string">venv</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">A</span> <span class="string">minimal</span> <span class="string">AWS</span> <span class="string">Python</span> <span class="string">Pulumi</span> <span class="string">program</span></span><br></pre></td></tr></table></figure><p>In the above configuration, we have set the project name as <code>my-project</code>, the runtime as <code>python</code> and the virtualenv as <code>venv</code>. The description is a brief description of the project.</p><h2 id="Create-a-new-stack"><a href="#Create-a-new-stack" class="headerlink" title="Create a new stack"></a>Create a new stack</h2><p>To create a new stack, you can use the <code>pulumi stack init</code> command. Below command is creating a new stack with the name <code>dev</code>.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi stack init dev</span><br></pre></td></tr></table></figure><p>Once you created the stack, the pululmi will generate a file named <code>Pulumi.dev.yaml</code> in your project folder. You can select it using the <code>pulumi stack select</code> command.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi stack select dev</span><br></pre></td></tr></table></figure><h2 id="Configure-the-stack"><a href="#Configure-the-stack" class="headerlink" title="Configure the stack"></a>Configure the stack</h2><p>The <code>Pulumi.dev.yaml</code> file is the configuration file for the stack.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">encryptionsalt:</span> <span class="string">v1:6YTR30z2X9tM=:v1:+fJN/nMOdJM+XjeZ:P7V9XPB9GHKE/dBuXX1uOCNGwgQztre==</span></span><br><span class="line"><span class="attr">config:</span> </span><br><span class="line">  <span class="attr">aws:region:</span> <span class="string">us-west-2</span></span><br><span class="line">  <span class="attr">aws:profile:</span> <span class="string">profile-account-1</span></span><br></pre></td></tr></table></figure><p>In above configuration, we have set the encryption salt (this is generated), and the AWS region and profile. You can add more configuration as per your requirement.</p><h2 id="Create-a-new-resource"><a href="#Create-a-new-resource" class="headerlink" title="Create a new resource"></a>Create a new resource</h2><p>To create a new resource, such as s3 bucket, you can write python code in the <code>main.py</code> file. Below is the code to create a new s3 bucket.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pulumi</span><br><span class="line"><span class="keyword">import</span> pulumi_aws <span class="keyword">as</span> aws</span><br><span class="line"></span><br><span class="line">bucket = aws.s3.Bucket(<span class="string">&quot;my-bucket&quot;</span>)</span><br></pre></td></tr></table></figure><p>In the above code, we have imported the <code>aws</code> module and created a new s3 bucket resource. The <code>Bucket</code> function creates a new s3 bucket with the name <code>my-bucket</code>.</p><h2 id="Preview-the-changes"><a href="#Preview-the-changes" class="headerlink" title="Preview the changes"></a>Preview the changes</h2><p>To preview the changes, you can use the <code>pulumi preview</code> command. This command will show the changes that will be applied to the infrastructure.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi preview</span><br></pre></td></tr></table></figure><p>Below is the project currently Iâ€™m working on for <code>pululmi preview</code> showcase.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/pulumi/pulumi-preview.png" class="lazyload placeholder" data-srcset="/assets/images/pulumi/pulumi-preview.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Pulumi Preview"/></div><span class="image-caption">Pulumi Preview</span></div><p>In above screenshot, you can see the changes that will be applied to the infrastructure. Including <code>update</code>, <code>create</code> and <code>delete</code> resources listed. You can also use the <code>--diff</code> option to show the difference between the current state and the desired state.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi preview --diff</span><br></pre></td></tr></table></figure><h2 id="Deploy-the-infrastructure"><a href="#Deploy-the-infrastructure" class="headerlink" title="Deploy the infrastructure"></a>Deploy the infrastructure</h2><p>To deploy the infrastructure, you can use the <code>pulumi up</code> command. This command will deploy the infrastructure as per the configuration in the <code>Pulumi.yaml</code> file.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi up</span><br></pre></td></tr></table></figure><p>This will deploy the infrastructure and show the output.</p><h2 id="Check-the-status-of-the-infrastructure"><a href="#Check-the-status-of-the-infrastructure" class="headerlink" title="Check the status of the infrastructure"></a>Check the status of the infrastructure</h2><p>To check the status of the infrastructure, you can use the <code>pulumi stack</code> command. This command will show the status of the infrastructure.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi stack</span><br></pre></td></tr></table></figure><p>This will show the status of the infrastructure. Below is the output of the <code>pulumi stack</code> command of one project Iâ€™m working.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/pulumi/pulumi-stack.png" class="lazyload placeholder" data-srcset="/assets/images/pulumi/pulumi-stack.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Pulumi Stack"/></div><span class="image-caption">Pulumi Stack</span></div><h2 id="Destroy-the-infrastructure"><a href="#Destroy-the-infrastructure" class="headerlink" title="Destroy the infrastructure"></a>Destroy the infrastructure</h2><p>To destroy the infrastructure, you can use the <code>pulumi destroy</code> command. This command will destroy the infrastructure as per the configuration in the <code>Pulumi.yaml</code> file.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pulumi destroy</span><br></pre></td></tr></table></figure><p>This will destroy the infrastructure. Please be aware that this command will destroy all the resources in the stack. Itâ€™s dangerous to use this command, so use it with caution. You should know what youâ€™re doing before using this command.</p><p>There are much more features of Pulumi, but I hope this article will give you a good idea about Pulumi.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Pulumi is a powerful IaC tool that manages the cloud infrastructure. It is easy to use and has a simple and intuitive interface. It supports a wide range of cloud providers, including AWS, Azure, GCP, Kubernetes, Docker, and more. It is also easy to integrate with CI&#x2F;CD pipeline.</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Pulumi </tag>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
            <tag> IaC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ºä½•Redisé€‰æ‹©å•çº¿ç¨‹è€Œéžå¤šçº¿ç¨‹æž¶æž„ï¼Ÿ</title>
      <link href="/2024/01/25/why-redis-choose-single-thread/"/>
      <url>/2024/01/25/why-redis-choose-single-thread/</url>
      
        <content type="html"><![CDATA[<p>åœ¨çŽ°ä»£çš„äº’è”ç½‘åº”ç”¨ä¸­ï¼Œæ•°æ®å­˜å‚¨å’Œè®¿é—®é€Ÿåº¦æ˜¯è‡³å…³é‡è¦çš„ã€‚Redisï¼Œä½œä¸ºä¸€æ¬¾é«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œä»¥å…¶å¿«é€Ÿçš„è¯»å†™é€Ÿåº¦å’Œçµæ´»çš„æ•°æ®ç»“æž„è€Œé—»åã€‚ç„¶è€Œï¼Œä»¤äººæƒŠå¥‡çš„æ˜¯ï¼Œ<code>Redisé‡‡ç”¨äº†å•çº¿ç¨‹çš„æ‰§è¡Œæ¨¡åž‹</code>ï¼Œè€Œä¸æ˜¯ä¸€äº›å…¶ä»–æ•°æ®åº“é‡‡ç”¨çš„å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹æ¨¡åž‹ã€‚æœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨Redisä¸ºä½•é€‰æ‹©è¿™ç§çœ‹ä¼¼ä¸åˆç†çš„è®¾è®¡å†³ç­–ï¼Œä»¥åŠè¿™ä¸ªå†³ç­–èƒŒåŽçš„æŠ€æœ¯åŽŸç†ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/redis/redis-logo.webp" class="lazyload placeholder" data-srcset="/assets/images/redis/redis-logo.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Redis" style="width:600px;"/></div><span class="image-caption">Redis</span></div><h3 id="Redisç®€ä»‹"><a href="#Redisç®€ä»‹" class="headerlink" title="Redisç®€ä»‹"></a>Redisç®€ä»‹</h3><p><code>Redis</code>æ˜¯ä¸€æ¬¾åŸºäºŽå†…å­˜çš„æ•°æ®å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¤šç§æ•°æ®ç»“æž„ï¼Œå¦‚å­—ç¬¦ä¸²ã€å“ˆå¸Œè¡¨ã€åˆ—è¡¨ã€é›†åˆç­‰ã€‚ç”±äºŽæ•°æ®å®Œå…¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ŒRedisèƒ½å¤Ÿæä¾›æžé«˜çš„è¯»å†™é€Ÿåº¦ï¼Œä½¿å…¶æˆä¸ºè®¸å¤šåº”ç”¨çš„é¦–é€‰æ•°æ®åº“ã€‚</p><p>ç„¶è€Œï¼Œä»¤äººæƒŠè®¶çš„æ˜¯ï¼ŒRedisåœ¨è®¾è®¡æ—¶é€‰æ‹©äº†å•çº¿ç¨‹æ‰§è¡Œæ¨¡åž‹ï¼Œä¸Žå…¶ä»–ä¸€äº›æ•°æ®åº“ç³»ç»Ÿé‡‡ç”¨çš„å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹æ¨¡åž‹å½¢æˆé²œæ˜Žå¯¹æ¯”ã€‚è¿™ä¸ªå†³ç­–å¼•èµ·äº†è®¸å¤šäººçš„å¥½å¥‡ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å°†æ·±å…¥æŽ¢è®¨Redisä¸ºä½•åšå‡ºè¿™ä¸€é€‰æ‹©ã€‚</p><h3 id="ä¸ºä½•é€‰æ‹©å•çº¿ç¨‹ï¼Ÿ"><a href="#ä¸ºä½•é€‰æ‹©å•çº¿ç¨‹ï¼Ÿ" class="headerlink" title="ä¸ºä½•é€‰æ‹©å•çº¿ç¨‹ï¼Ÿ"></a>ä¸ºä½•é€‰æ‹©å•çº¿ç¨‹ï¼Ÿ</h3><h4 id="1-ç®€å•æ€§ä¸Žå¯ç»´æŠ¤æ€§"><a href="#1-ç®€å•æ€§ä¸Žå¯ç»´æŠ¤æ€§" class="headerlink" title="1. ç®€å•æ€§ä¸Žå¯ç»´æŠ¤æ€§"></a>1. ç®€å•æ€§ä¸Žå¯ç»´æŠ¤æ€§</h4><p>Redisçš„è®¾è®¡å“²å­¦ä¹‹ä¸€æ˜¯ä¿æŒç®€å•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚<code>å•çº¿ç¨‹æ¨¡åž‹é¿å…äº†å¤æ‚çš„å¹¶å‘æŽ§åˆ¶å’ŒåŒæ­¥æœºåˆ¶ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°å’Œå®¹æ˜“ç»´æŠ¤</code>ã€‚åœ¨ä¸€ä¸ªå•çº¿ç¨‹çš„çŽ¯å¢ƒä¸­ï¼Œå¼€å‘è€…æ›´å®¹æ˜“ç†è§£å’Œè°ƒè¯•ä»£ç ï¼Œå‡å°‘äº†å‡ºé”™çš„å¯èƒ½æ€§ã€‚</p><h4 id="2-é¿å…ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€"><a href="#2-é¿å…ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€" class="headerlink" title="2. é¿å…ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€"></a>2. é¿å…ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€</h4><p>å¤šçº¿ç¨‹æ¨¡åž‹ä¸­ï¼Œçº¿ç¨‹ä¹‹é—´çš„åˆ‡æ¢ä¼šå¼•å…¥ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€‚è€Œåœ¨å•çº¿ç¨‹æ¨¡åž‹ä¸‹ï¼Œè¿™ç§å¼€é”€è¢«æœ€å°åŒ–ï¼Œå› ä¸ºä¸å­˜åœ¨å¤šçº¿ç¨‹ä¹‹é—´çš„ç«žäº‰å’Œåˆ‡æ¢ã€‚è¿™ä½¿å¾—Redisèƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°åˆ©ç”¨CPUèµ„æºï¼Œæé«˜æ•´ä½“æ€§èƒ½ã€‚</p><h4 id="3-å†…å­˜è®¿é—®çš„å±€éƒ¨æ€§"><a href="#3-å†…å­˜è®¿é—®çš„å±€éƒ¨æ€§" class="headerlink" title="3. å†…å­˜è®¿é—®çš„å±€éƒ¨æ€§"></a>3. å†…å­˜è®¿é—®çš„å±€éƒ¨æ€§</h4><p>Redisçš„å·¥ä½œè´Ÿè½½é€šå¸¸æ˜¯å†…å­˜å¯†é›†åž‹çš„ï¼Œè€Œä¸æ˜¯è®¡ç®—å¯†é›†åž‹çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå•çº¿ç¨‹æ¨¡åž‹çš„ä¼˜åŠ¿æ˜¾è€Œæ˜“è§ã€‚ç”±äºŽRedisæ•°æ®å®Œå…¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¯¹äºŽå¤§å¤šæ•°æ“ä½œè€Œè¨€ï¼ŒCPUä¸»è¦æ‰§è¡Œçš„æ˜¯å†…å­˜è¯»å†™æ“ä½œã€‚<code>å•çº¿ç¨‹æ¨¡åž‹é¿å…äº†å¤šçº¿ç¨‹ä¹‹é—´é¢‘ç¹çš„å…±äº«å†…å­˜è®¿é—®</code>ï¼Œåˆ©ç”¨äº†å†…å­˜è®¿é—®çš„å±€éƒ¨æ€§ï¼Œä»Žè€Œæé«˜äº†æ€§èƒ½ã€‚</p><h4 id="4-åŽŸå­æ€§æ“ä½œç®€åŒ–"><a href="#4-åŽŸå­æ€§æ“ä½œç®€åŒ–" class="headerlink" title="4. åŽŸå­æ€§æ“ä½œç®€åŒ–"></a>4. åŽŸå­æ€§æ“ä½œç®€åŒ–</h4><p>Redisé€šè¿‡ä½¿ç”¨äº‹åŠ¡å’ŒåŽŸå­æ€§æ“ä½œæ¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚<code>åœ¨å•çº¿ç¨‹æ¨¡åž‹ä¸‹ï¼ŒåŽŸå­æ€§æ“ä½œæ›´å®¹æ˜“å®žçŽ°ï¼Œå› ä¸ºä¸éœ€è¦è€ƒè™‘å¤šçº¿ç¨‹ä¹‹é—´çš„ç«žäº‰æ¡ä»¶</code>ã€‚è¿™ä½¿å¾—Redisèƒ½å¤Ÿæä¾›å¯é çš„äº‹åŠ¡æ”¯æŒï¼Œç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚</p><h3 id="å•çº¿ç¨‹æ¨¡åž‹çš„æŒ‘æˆ˜ä¸Žåº”å¯¹"><a href="#å•çº¿ç¨‹æ¨¡åž‹çš„æŒ‘æˆ˜ä¸Žåº”å¯¹" class="headerlink" title="å•çº¿ç¨‹æ¨¡åž‹çš„æŒ‘æˆ˜ä¸Žåº”å¯¹"></a>å•çº¿ç¨‹æ¨¡åž‹çš„æŒ‘æˆ˜ä¸Žåº”å¯¹</h3><h4 id="1-é˜»å¡žé—®é¢˜"><a href="#1-é˜»å¡žé—®é¢˜" class="headerlink" title="1. é˜»å¡žé—®é¢˜"></a>1. é˜»å¡žé—®é¢˜</h4><p>å•çº¿ç¨‹æ¨¡åž‹çš„ä¸€ä¸ªæ½œåœ¨é—®é¢˜æ˜¯å½“æ‰§è¡ŒæŸäº›é˜»å¡žæ“ä½œæ—¶ï¼Œæ•´ä¸ªç³»ç»Ÿä¼šè¢«é˜»å¡žã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒRedisé‡‡ç”¨äº†éžé˜»å¡žçš„I&#x2F;Oæ¨¡åž‹ã€‚<code>é€šè¿‡ä½¿ç”¨å¼‚æ­¥éžé˜»å¡žçš„ç½‘ç»œI/Oï¼ŒRedisèƒ½å¤Ÿåœ¨ç­‰å¾…å¤–éƒ¨æ“ä½œå®Œæˆçš„åŒæ—¶ç»§ç»­å¤„ç†å…¶ä»–è¯·æ±‚ï¼Œä»Žè€Œæé«˜ç³»ç»Ÿçš„å¹¶å‘æ€§</code>ã€‚<br><img src="/assets/images/redis/redis-io-multiplexing-2.webp" class="lazyload placeholder" data-srcset="/assets/images/redis/redis-io-multiplexing-2.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h4 id="2-å¤šæ ¸åˆ©ç”¨é—®é¢˜"><a href="#2-å¤šæ ¸åˆ©ç”¨é—®é¢˜" class="headerlink" title="2. å¤šæ ¸åˆ©ç”¨é—®é¢˜"></a>2. å¤šæ ¸åˆ©ç”¨é—®é¢˜</h4><p>å•çº¿ç¨‹æ¨¡åž‹ä¼¼ä¹Žä¸èƒ½å……åˆ†åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„ä¼˜åŠ¿ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒRediså¼•å…¥äº†å¤šä¸ªå®žä¾‹çš„æ¦‚å¿µã€‚é€šè¿‡è¿è¡Œå¤šä¸ªRediså®žä¾‹ï¼Œæ¯ä¸ªå®žä¾‹åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­è¿è¡Œï¼Œä»Žè€Œåˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„ä¼˜åŠ¿ã€‚è¿™ç§æ–¹å¼åœ¨ä¿æŒç®€å•æ€§çš„åŒæ—¶ï¼Œä½¿å¾—Redisèƒ½å¤Ÿåœ¨å¤šæ ¸ç³»ç»Ÿä¸­å‘æŒ¥æ›´å¤§çš„æ€§èƒ½ä¼˜åŠ¿ã€‚</p><h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>Redisé€‰æ‹©å•çº¿ç¨‹è€Œéžå¤šçº¿ç¨‹çš„è®¾è®¡å†³ç­–å¹¶éžå‡ºäºŽå¶ç„¶ï¼Œè€Œæ˜¯ç»è¿‡æ·±æ€ç†Ÿè™‘çš„ç»“æžœã€‚åœ¨ä¿æŒç®€å•æ€§ã€å¯ç»´æŠ¤æ€§çš„åŒæ—¶ï¼Œå•çº¿ç¨‹æ¨¡åž‹é€šè¿‡é¿å…ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€åˆ©ç”¨å†…å­˜è®¿é—®çš„å±€éƒ¨æ€§ç­‰ä¼˜åŠ¿ï¼Œå®žçŽ°äº†å‡ºè‰²çš„æ€§èƒ½ã€‚åŒæ—¶ï¼Œé€šè¿‡é‡‡ç”¨éžé˜»å¡žI&#x2F;Oå’Œå¤šå®žä¾‹çš„ç­–ç•¥ï¼ŒæˆåŠŸåº”å¯¹äº†å•çº¿ç¨‹æ¨¡åž‹å¯èƒ½é‡åˆ°çš„é˜»å¡žå’Œå¤šæ ¸åˆ©ç”¨çš„é—®é¢˜ã€‚</p><p>æ€»ä½“è€Œè¨€ï¼ŒRedisçš„è®¾è®¡å†³ç­–å±•çŽ°äº†å¯¹æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§çš„å¹³è¡¡è€ƒè™‘ï¼Œä½¿å¾—å®ƒæˆä¸ºä¸€ä¸ªåœ¨è®¸å¤šé«˜æ€§èƒ½åº”ç”¨åœºæ™¯ä¸­å¤‡å—é’ççš„å†…å­˜æ•°æ®åº“ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså•çº¿ç¨‹ä¹‹é€Ÿåº¦ä¹‹è°œè§£æž</title>
      <link href="/2024/01/22/redis-single-thread-speed/"/>
      <url>/2024/01/22/redis-single-thread-speed/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æ•°æ®åº“é¢†åŸŸä¸­ï¼Œå¤šçº¿ç¨‹é€šå¸¸è¢«è®¤ä¸ºæ˜¯æé«˜æ€§èƒ½çš„å…³é”®ã€‚ç„¶è€Œï¼Œ<code>Redis</code>å´æ˜¯ä¸€ä¸ªç‹¬ç‰¹çš„å­˜åœ¨ï¼Œå®ƒä»¥å•çº¿ç¨‹çš„æ–¹å¼è¿…çŒ›åœ°å¤„ç†å„ç§è¯·æ±‚ï¼Œå±•çŽ°å‡ºæƒŠäººçš„é€Ÿåº¦å’Œæ•ˆçŽ‡ã€‚æœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨Rediså•çº¿ç¨‹æ¨¡åž‹çš„å¥¥ç§˜ä»¥åŠå®ƒå¦‚ä½•åœ¨é«˜å¹¶å‘çŽ¯å¢ƒä¸‹ä¿æŒå‡ºè‰²æ€§èƒ½ã€‚</p><h3 id="Redisçš„å•çº¿ç¨‹æ¨¡åž‹"><a href="#Redisçš„å•çº¿ç¨‹æ¨¡åž‹" class="headerlink" title="Redisçš„å•çº¿ç¨‹æ¨¡åž‹"></a>Redisçš„å•çº¿ç¨‹æ¨¡åž‹</h3><p>Redisä¹‹æ‰€ä»¥è¢«ç§°ä¸ºå•çº¿ç¨‹ï¼Œæ˜¯å› ä¸ºå®ƒåœ¨å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æ—¶é‡‡ç”¨äº†<code>å•çº¿ç¨‹çš„äº‹ä»¶å¾ªçŽ¯æœºåˆ¶</code>ã€‚è¿™æ„å‘³ç€Redisä¸€æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªæ“ä½œï¼Œä¾‹å¦‚è¯»å–æˆ–å†™å…¥ï¼Œè€Œä¸æ˜¯åŒæ—¶æ‰§è¡Œå¤šä¸ªæ“ä½œã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸å¦¨ç¢Redisåœ¨å®žé™…åº”ç”¨ä¸­è¡¨çŽ°å‡ºè‰²ã€‚</p><h3 id="äº‹ä»¶é©±åŠ¨ä¸Žå¼‚æ­¥éžé˜»å¡ž"><a href="#äº‹ä»¶é©±åŠ¨ä¸Žå¼‚æ­¥éžé˜»å¡ž" class="headerlink" title="äº‹ä»¶é©±åŠ¨ä¸Žå¼‚æ­¥éžé˜»å¡ž"></a>äº‹ä»¶é©±åŠ¨ä¸Žå¼‚æ­¥éžé˜»å¡ž</h3><p>Redisçš„å•çº¿ç¨‹æ¨¡åž‹å¹¶ä¸æ„å‘³ç€å®ƒä¼šé˜»å¡žåœ¨æŸä¸ªè¯·æ±‚ä¸Šï¼Œç›¸åï¼Œå®ƒé‡‡ç”¨äº†<code>äº‹ä»¶é©±åŠ¨</code>å’Œ<code>å¼‚æ­¥éžé˜»å¡ž</code>çš„æ–¹å¼ã€‚é€šè¿‡ä½¿ç”¨<code>I/Oå¤šè·¯å¤ç”¨æœºåˆ¶</code>ï¼ŒRedisèƒ½å¤Ÿåœ¨ç­‰å¾…ä¸€ä¸ªæ“ä½œå®Œæˆçš„åŒæ—¶ç»§ç»­å¤„ç†å…¶ä»–è¯·æ±‚ã€‚è¿™ç§è®¾è®¡ä½¿å¾—Redisèƒ½å¤Ÿå……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æºï¼Œé«˜æ•ˆåœ°å“åº”å¤§é‡å¹¶å‘è¯·æ±‚ã€‚<br><img src="/assets/images/redis/redis-io-multiplexing.webp" class="lazyload placeholder" data-srcset="/assets/images/redis/redis-io-multiplexing.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Redis I/O Multiplexing"></p><h3 id="å†…å­˜æ•°æ®åº“ä¸Žå¿«é€Ÿè®¿é—®"><a href="#å†…å­˜æ•°æ®åº“ä¸Žå¿«é€Ÿè®¿é—®" class="headerlink" title="å†…å­˜æ•°æ®åº“ä¸Žå¿«é€Ÿè®¿é—®"></a>å†…å­˜æ•°æ®åº“ä¸Žå¿«é€Ÿè®¿é—®</h3><p>Rediså°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè¿™æ˜¯å…¶é«˜é€Ÿè¯»å†™çš„å…³é”®ã€‚å†…å­˜çš„å¿«é€Ÿè®¿é—®é€Ÿåº¦è¿œè¿œè¶…è¿‡äº†ç£ç›˜è®¿é—®é€Ÿåº¦ï¼Œä½¿å¾—Redisèƒ½å¤Ÿåœ¨çž¬é—´å®Œæˆè¯¸å¦‚è¯»å–ã€å†™å…¥ç­‰æ“ä½œã€‚æ­¤å¤–ï¼ŒRedisé€šè¿‡ä½¿ç”¨æ•°æ®ç»“æž„çš„æ–¹å¼ï¼Œå¦‚å“ˆå¸Œè¡¨å’Œæœ‰åºé›†åˆï¼Œè¿›ä¸€æ­¥æé«˜äº†æ•°æ®çš„è®¿é—®æ•ˆçŽ‡ã€‚</p><h3 id="ä¼˜ç§€çš„æŒä¹…åŒ–æœºåˆ¶"><a href="#ä¼˜ç§€çš„æŒä¹…åŒ–æœºåˆ¶" class="headerlink" title="ä¼˜ç§€çš„æŒä¹…åŒ–æœºåˆ¶"></a>ä¼˜ç§€çš„æŒä¹…åŒ–æœºåˆ¶</h3><p>å°½ç®¡Redisä¸»è¦æ˜¯å†…å­˜æ•°æ®åº“ï¼Œä½†å®ƒä¹Ÿæä¾›äº†æŒä¹…åŒ–çš„æœºåˆ¶ï¼Œç¡®ä¿æ•°æ®ä¸ä¼šå› æœåŠ¡å™¨é‡å¯è€Œä¸¢å¤±ã€‚é€šè¿‡å°†æ•°æ®å¼‚æ­¥å†™å…¥ç£ç›˜ï¼ŒRedisåœ¨ä¿æŒé«˜æ€§èƒ½çš„åŒæ—¶ï¼Œä¹Ÿå…·å¤‡äº†å¯é çš„æ•°æ®æŒä¹…æ€§ï¼Œä½¿å…¶åœ¨å…³é”®ä¸šåŠ¡åœºæ™¯ä¸­å¾—ä»¥å¹¿æ³›åº”ç”¨ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©ä½¿ç”¨RDBå¿«ç…§æˆ–AOFæ—¥å¿—æ¥å®žçŽ°æŒä¹…åŒ–ã€‚</p><h3 id="é«˜çº§åˆ«çš„ä¼˜åŒ–ç­–ç•¥"><a href="#é«˜çº§åˆ«çš„ä¼˜åŒ–ç­–ç•¥" class="headerlink" title="é«˜çº§åˆ«çš„ä¼˜åŒ–ç­–ç•¥"></a>é«˜çº§åˆ«çš„ä¼˜åŒ–ç­–ç•¥</h3><p>Redisé€šè¿‡é‡‡ç”¨å¤šç§é«˜çº§ä¼˜åŒ–ç­–ç•¥ï¼Œè¿›ä¸€æ­¥æå‡äº†æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡ä½¿ç”¨<code>ç®¡é“æŠ€æœ¯</code>å¯ä»¥æ‰¹é‡æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œå‡å°‘é€šä¿¡å¼€é”€ã€‚æ­¤å¤–ï¼ŒRedisè¿˜å®žçŽ°äº†è™šæ‹Ÿå†…å­˜ã€é›†ç¾¤æ¨¡å¼ç­‰å¤šç§æœºåˆ¶ï¼Œä¸ºç”¨æˆ·æä¾›äº†çµæ´»è€Œå¼ºå¤§çš„å·¥å…·ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å°½ç®¡Redisé‡‡ç”¨äº†å•çº¿ç¨‹æ¨¡åž‹ï¼Œä½†å…¶å‡ºè‰²çš„æ€§èƒ½å’Œé«˜æ•ˆçš„è®¾è®¡ä½¿å¾—å®ƒæˆä¸ºä¸€ä¸ªå¤‡å—æ¬¢è¿Žçš„æ•°æ®åº“è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡<strong>äº‹ä»¶é©±åŠ¨</strong>ã€<strong>å¼‚æ­¥éžé˜»å¡ž</strong>ã€<strong>å†…å­˜æ•°æ®åº“</strong>ç­‰å¤šç§æŠ€æœ¯æ‰‹æ®µçš„å·§å¦™ç»“åˆï¼ŒRedisæˆåŠŸåœ°è§£å†³äº†å•çº¿ç¨‹æ¨¡åž‹å¯èƒ½é¢ä¸´çš„æ€§èƒ½ç“¶é¢ˆï¼Œå±•çŽ°å‡ºå¼ºå¤§çš„æ½œåŠ›å’Œå¹¿æ³›çš„åº”ç”¨å‰æ™¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æž„å»ºJavaScriptç”Ÿæˆå™¨ï¼šæŽ¢ç´¢æ— ç©·å¯èƒ½çš„ä¸–ç•Œ</title>
      <link href="/2024/01/19/javascript-generator-powerful/"/>
      <url>/2024/01/19/javascript-generator-powerful/</url>
      
        <content type="html"><![CDATA[<p>JavaScriptä½œä¸ºä¸€ç§å¼ºå¤§è€Œçµæ´»çš„ç¼–ç¨‹è¯­è¨€ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸°å¯Œçš„å·¥å…·å’ŒåŠŸèƒ½ã€‚å…¶ä¸­ï¼Œç”Ÿæˆå™¨ï¼ˆ<code>Generators</code>ï¼‰æ˜¯ä¸€é¡¹å¼•äººæ³¨ç›®çš„ç‰¹æ€§ï¼Œå®ƒä»¬å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ç¼–å†™å¼‚æ­¥ä»£ç æ—¶æ›´åŠ è½»æ¾åœ°ç®¡ç†æµç¨‹å’ŒçŠ¶æ€ã€‚æœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨JavaScriptç”Ÿæˆå™¨çš„åŸºæœ¬æ¦‚å¿µï¼Œå¹¶æä¾›ä¸€äº›å®žç”¨çš„ä»£ç ç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬ä¸€åŒè¸å…¥ç”Ÿæˆå™¨çš„ç¥žå¥‡ä¸–ç•Œã€‚</p><h3 id="ç”Ÿæˆå™¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ç”Ÿæˆå™¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ç”Ÿæˆå™¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ç”Ÿæˆå™¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ç”Ÿæˆå™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»åž‹çš„å‡½æ•°ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨éœ€è¦æ—¶æš‚åœå’Œæ¢å¤æ‰§è¡Œã€‚ä¸Žæ™®é€šå‡½æ•°ä¸åŒï¼Œç”Ÿæˆå™¨çš„æ‰§è¡Œå¯ä»¥åœ¨æ¯æ¬¡æš‚åœæ—¶ä¿ç•™å…¶çŠ¶æ€ï¼Œè¿™ä½¿å¾—ç¼–å†™å¼‚æ­¥ä»£ç å˜å¾—æ›´åŠ ç›´è§‚å’Œå¯è¯»ã€‚</p><p>è¦åˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>function*</code>å…³é”®å­—ï¼Œå¹¶åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨<code>yield</code>è¯­å¥æ¥æŒ‡ç¤ºæš‚åœæ‰§è¡Œã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç”Ÿæˆå™¨ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">simpleGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> generator = <span class="title function_">simpleGenerator</span>();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(generator.<span class="title function_">next</span>()); <span class="comment">// è¾“å‡º: &#123; value: 1, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(generator.<span class="title function_">next</span>()); <span class="comment">// è¾“å‡º: &#123; value: 2, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(generator.<span class="title function_">next</span>()); <span class="comment">// è¾“å‡º: &#123; value: 3, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(generator.<span class="title function_">next</span>()); <span class="comment">// è¾“å‡º: &#123; value: undefined, done: true &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºsimpleGeneratorçš„ç”Ÿæˆå™¨ï¼Œå®ƒä¾æ¬¡äº§ç”Ÿæ•°å­—1ã€2å’Œ3ã€‚æ¯æ¬¡è°ƒç”¨generator.next()æ—¶ï¼Œç”Ÿæˆå™¨ä¼šä»Žä¸Šä¸€æ¬¡æš‚åœçš„åœ°æ–¹ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ªyieldè¯­å¥æˆ–å‡½æ•°ç»“æŸã€‚</p><h3 id="ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†å¼‚æ­¥ä»»åŠ¡"><a href="#ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†å¼‚æ­¥ä»»åŠ¡"></a>ä½¿ç”¨ç”Ÿæˆå™¨å¤„ç†å¼‚æ­¥ä»»åŠ¡</h3><p>ç”Ÿæˆå™¨çš„çœŸæ­£å¨åŠ›ä½“çŽ°åœ¨å¤„ç†å¼‚æ­¥ä»»åŠ¡æ—¶ã€‚é€šè¿‡ç”Ÿæˆå™¨å’Œ<code>yield</code>è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥åŒæ­¥çš„æ–¹å¼ç¼–å†™å¼‚æ­¥ä»£ç ï¼Œä½¿å…¶æ›´æ˜“äºŽç†è§£å’Œç»´æŠ¤ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å¼‚æ­¥ç”Ÿæˆå™¨ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(<span class="string">`Data from <span class="subst">$&#123;url&#125;</span>`</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">asyncGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data1 = <span class="keyword">yield</span> <span class="title function_">fetchData</span>(<span class="string">&#x27;https://api.example.com/data1&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data1);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> data2 = <span class="keyword">yield</span> <span class="title function_">fetchData</span>(<span class="string">&#x27;https://api.example.com/data2&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data2);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´å¤šå¼‚æ­¥ä»»åŠ¡...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">runAsyncGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> generator = <span class="title function_">asyncGenerator</span>();</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleNext</span> = (<span class="params">result</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; value, done &#125; = generator.<span class="title function_">next</span>(result);</span><br><span class="line">    <span class="keyword">if</span> (!done) &#123;</span><br><span class="line">      value.<span class="title function_">then</span>(handleNext);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleNext</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">runAsyncGenerator</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼šData from https://api.example.com/data1</span></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼šData from https://api.example.com/data2</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼ŒasyncGeneratoræ˜¯ä¸€ä¸ªå¼‚æ­¥ç”Ÿæˆå™¨ï¼Œé€šè¿‡fetchDataå‡½æ•°æ¨¡æ‹Ÿå¼‚æ­¥æ•°æ®èŽ·å–ã€‚runAsyncGeneratorå‡½æ•°è´Ÿè´£å¯åŠ¨å¼‚æ­¥ç”Ÿæˆå™¨ï¼Œå¹¶åœ¨æ¯æ¬¡ç”Ÿæˆå™¨æš‚åœæ—¶å¤„ç†Promiseçš„è§£æžã€‚</p><h3 id="ç”Ÿæˆå™¨çš„é”™è¯¯å¤„ç†"><a href="#ç”Ÿæˆå™¨çš„é”™è¯¯å¤„ç†" class="headerlink" title="ç”Ÿæˆå™¨çš„é”™è¯¯å¤„ç†"></a>ç”Ÿæˆå™¨çš„é”™è¯¯å¤„ç†</h3><p>ç”Ÿæˆå™¨ä¹Ÿå¯ä»¥ç”¨äºŽæ›´å¥½åœ°å¤„ç†é”™è¯¯ã€‚é€šè¿‡åœ¨ç”Ÿæˆå™¨å†…éƒ¨ä½¿ç”¨<code>try...catch</code>è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥æ•èŽ·å¹¶å¤„ç†å¼‚æ­¥ä»»åŠ¡ä¸­çš„é”™è¯¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`Error from <span class="subst">$&#123;url&#125;</span>`</span>));</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">errorHandlingGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">yield</span> <span class="title function_">fetchData</span>(<span class="string">&#x27;https://api.example.com&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error.<span class="property">message</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">runErrorHandlingGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> generator = <span class="title function_">errorHandlingGenerator</span>();</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleNext</span> = (<span class="params">result</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; value, done &#125; = generator.<span class="title function_">next</span>(result);</span><br><span class="line">      <span class="keyword">if</span> (!done) &#123;</span><br><span class="line">        value.<span class="title function_">then</span>(handleNext).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> generator.<span class="keyword">throw</span>(error));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      generator.<span class="keyword">throw</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">handleNext</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">runErrorHandlingGenerator</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºï¼š Error: error from https://api.example.com</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼ŒerrorHandlingGeneratoræ¼”ç¤ºäº†å¦‚ä½•åœ¨ç”Ÿæˆå™¨å†…æ•èŽ·å¼‚æ­¥ä»»åŠ¡çš„é”™è¯¯ã€‚runErrorHandlingGeneratorå‡½æ•°ç”¨äºŽå¯åŠ¨ç”Ÿæˆå™¨ï¼Œå¹¶é€šè¿‡catchè¯­å¥å¤„ç†ç”Ÿæˆå™¨å†…éƒ¨çš„é”™è¯¯ã€‚</p><h3 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h3><p>JavaScriptç”Ÿæˆå™¨æ˜¯ä¸€é¡¹å¼ºå¤§è€Œçµæ´»çš„åŠŸèƒ½ï¼Œä¸ºå¼‚æ­¥ç¼–ç¨‹å¸¦æ¥äº†æ–°çš„èŒƒå¼ã€‚é€šè¿‡ç»“åˆ<code>ç”Ÿæˆå™¨</code>å’Œ<code>yield</code>è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ¸…æ™°åœ°è¡¨è¾¾ä»£ç çš„æµç¨‹ï¼Œå¹¶æ›´å®¹æ˜“åœ°å¤„ç†å¼‚æ­¥ä»»åŠ¡å’Œé”™è¯¯ã€‚åœ¨å®žé™…é¡¹ç›®ä¸­ï¼Œç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªå€¼å¾—æ·±å…¥ç ”ç©¶å’Œåº”ç”¨çš„å·¥å…·ï¼Œå®ƒä¸ºæˆ‘ä»¬æ‰“å¼€äº†æ— ç©·å¯èƒ½çš„ç¼–ç¨‹ä¸–ç•Œã€‚è®©æˆ‘ä»¬åœ¨ä»£ç çš„æµ·æ´‹ä¸­ç•…æ¸¸ï¼Œå‘çŽ°ç”Ÿæˆå™¨ä¸ºæˆ‘ä»¬å¸¦æ¥çš„æ–°å¥‡å’Œä¾¿åˆ©å§ï¼</p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥ç†è§£ES6ä¸­çš„Symbolç±»åž‹</title>
      <link href="/2024/01/03/understand-es6-symbol/"/>
      <url>/2024/01/03/understand-es6-symbol/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ES6ï¼ˆECMAScript 2015ï¼‰ä¸­å¼•å…¥äº†ä¸€ç§æ–°çš„åŸºæœ¬æ•°æ®ç±»åž‹â€”â€”<code>Symbol</code>ã€‚Symbolç±»åž‹çš„å¼•å…¥ä¸°å¯Œäº†JavaScriptè¯­è¨€ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§ç‹¬ä¸€æ— äºŒçš„æ ‡è¯†ç¬¦ã€‚æœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨Symbolçš„ç‰¹æ€§ã€ç”¨é€”ä»¥åŠä»£ç ç¤ºä¾‹ã€‚</p><h3 id="1-Symbolçš„åˆ›å»º"><a href="#1-Symbolçš„åˆ›å»º" class="headerlink" title="1. Symbolçš„åˆ›å»º"></a>1. Symbolçš„åˆ›å»º</h3><p>Symbolçš„åˆ›å»ºæ˜¯é€šè¿‡è°ƒç”¨å…¨å±€çš„Symbolå‡½æ•°å®žçŽ°çš„ã€‚Symbolå‡½æ•°æŽ¥å—ä¸€ä¸ªå¯é€‰çš„æè¿°å‚æ•°ï¼Œè¯¥å‚æ•°ç”¨äºŽæ ‡è¯†Symbolçš„ç”¨é€”ï¼Œä½†ä¸ä¼šå½±å“Symbolçš„å”¯ä¸€æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªæ²¡æœ‰æè¿°çš„Symbol</span></span><br><span class="line"><span class="keyword">const</span> symbol1 = <span class="title class_">Symbol</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> symbol1); <span class="comment">// è¾“å‡º: symbol</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¸¦æœ‰æè¿°çš„Symbol</span></span><br><span class="line"><span class="keyword">const</span> symbol2 = <span class="title class_">Symbol</span>(<span class="string">&#x27;mySymbol&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(symbol2.<span class="title function_">toString</span>()); <span class="comment">// è¾“å‡º: Symbol(mySymbol)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-Symbolçš„å”¯ä¸€æ€§"><a href="#2-Symbolçš„å”¯ä¸€æ€§" class="headerlink" title="2. Symbolçš„å”¯ä¸€æ€§"></a>2. Symbolçš„å”¯ä¸€æ€§</h3><p>Symbolæ˜¯å”¯ä¸€çš„ï¼Œå³ä½¿æè¿°ç›¸åŒï¼Œå®ƒä»¬ä¹Ÿæ˜¯ä¸åŒçš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> symbol1 = <span class="title class_">Symbol</span>(<span class="string">&#x27;mySymbol&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> symbol2 = <span class="title class_">Symbol</span>(<span class="string">&#x27;mySymbol&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(symbol1 === symbol2); <span class="comment">// è¾“å‡º: false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-Symbolä½œä¸ºå¯¹è±¡å±žæ€§å"><a href="#3-Symbolä½œä¸ºå¯¹è±¡å±žæ€§å" class="headerlink" title="3. Symbolä½œä¸ºå¯¹è±¡å±žæ€§å"></a>3. Symbolä½œä¸ºå¯¹è±¡å±žæ€§å</h3><p>ä½¿ç”¨Symbolä½œä¸ºå¯¹è±¡å±žæ€§åå¯ä»¥é˜²æ­¢å±žæ€§åå†²çªï¼Œæé«˜ä»£ç çš„å¥å£®æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mySymbol = <span class="title class_">Symbol</span>(<span class="string">&#x27;mySymbol&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  [mySymbol]: <span class="string">&#x27;Hello Symbol!&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj[mySymbol]); <span class="comment">// è¾“å‡º: Hello Symbol!</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>); <span class="comment">// è¾“å‡º: John</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-å†…ç½®Symbol"><a href="#4-å†…ç½®Symbol" class="headerlink" title="4. å†…ç½®Symbol"></a>4. å†…ç½®Symbol</h3><p>ES6å¼•å…¥äº†ä¸€äº›å†…ç½®çš„Symbolï¼Œå®ƒä»¬åœ¨ç‰¹å®šçš„ä¸Šä¸‹æ–‡ä¸­æœ‰ç€é‡è¦çš„ä½œç”¨ã€‚</p><h4 id="Symbol-iteratorï¼š-ç”¨äºŽå®šä¹‰å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨ã€‚"><a href="#Symbol-iteratorï¼š-ç”¨äºŽå®šä¹‰å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨ã€‚" class="headerlink" title="Symbol.iteratorï¼š ç”¨äºŽå®šä¹‰å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨ã€‚"></a>Symbol.iteratorï¼š ç”¨äºŽå®šä¹‰å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨ã€‚</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myIterable = &#123;</span><br><span class="line">  [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]: <span class="keyword">function</span>* () &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> value <span class="keyword">of</span> myIterable) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡º:</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Symbol-forå’ŒSymbol-keyForï¼š-ç”¨äºŽåˆ›å»ºå’Œæ£€ç´¢å…¨å±€Symbolæ³¨å†Œè¡¨ä¸­çš„Symbolã€‚"><a href="#Symbol-forå’ŒSymbol-keyForï¼š-ç”¨äºŽåˆ›å»ºå’Œæ£€ç´¢å…¨å±€Symbolæ³¨å†Œè¡¨ä¸­çš„Symbolã€‚" class="headerlink" title="Symbol.forå’ŒSymbol.keyForï¼š ç”¨äºŽåˆ›å»ºå’Œæ£€ç´¢å…¨å±€Symbolæ³¨å†Œè¡¨ä¸­çš„Symbolã€‚"></a>Symbol.forå’ŒSymbol.keyForï¼š ç”¨äºŽåˆ›å»ºå’Œæ£€ç´¢å…¨å±€Symbolæ³¨å†Œè¡¨ä¸­çš„Symbolã€‚</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> globalSymbol = <span class="title class_">Symbol</span>.<span class="title function_">for</span>(<span class="string">&#x27;globalSymbol&#x27;</span>); <span class="comment">//æ³¨å†Œåˆ°å…¨å±€Symbolè¡¨</span></span><br><span class="line"><span class="keyword">const</span> localSymbol = <span class="title class_">Symbol</span>(<span class="string">&#x27;localSymbol&#x27;</span>); <span class="comment">// æœªæ³¨å†Œåˆ°å…¨å±€Symboè¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Symbol</span>.<span class="title function_">keyFor</span>(globalSymbol)); <span class="comment">// è¾“å‡º: globalSymbol</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Symbol</span>.<span class="title function_">keyFor</span>(localSymbol)); <span class="comment">// è¾“å‡º: undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-ä½¿ç”¨Symbolæ¥å®šä¹‰å¸¸é‡"><a href="#5-ä½¿ç”¨Symbolæ¥å®šä¹‰å¸¸é‡" class="headerlink" title="5. ä½¿ç”¨Symbolæ¥å®šä¹‰å¸¸é‡"></a>5. ä½¿ç”¨Symbolæ¥å®šä¹‰å¸¸é‡</h3><p>ä½¿ç”¨Symbolæ¥å®šä¹‰å¸¸é‡å¯ä»¥æœ‰æ•ˆåœ°é¿å…å‘½åå†²çªã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">COLOR_RED</span> = <span class="title class_">Symbol</span>(<span class="string">&#x27;Red&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">COLOR_GREEN</span> = <span class="title class_">Symbol</span>(<span class="string">&#x27;Green&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printColor</span>(<span class="params">color</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="attr">COLOR_RED</span>:</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;çº¢è‰²&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="attr">COLOR_GREEN</span>:</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç»¿è‰²&#x27;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æœªçŸ¥é¢œè‰²&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">printColor</span>(<span class="variable constant_">COLOR_RED</span>); <span class="comment">// è¾“å‡º: çº¢è‰²</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h3><p>Symbolæ˜¯ä¸€é¡¹å¼ºå¤§è€Œçµæ´»çš„ç‰¹æ€§ï¼Œå®ƒä¸ºJavaScriptå¼•å…¥äº†ä¸€ç§å…¨æ–°çš„æ•°æ®ç±»åž‹ï¼Œæé«˜äº†ä»£ç çš„å®‰å…¨æ€§å’Œå¯è¯»æ€§ã€‚åœ¨å®žé™…å¼€å‘ä¸­ï¼Œåˆç†è¿ç”¨Symbolèƒ½å¤Ÿä½¿ä»£ç æ›´å…·è¡¨è¾¾åŠ›å’Œæ‰©å±•æ€§ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿå¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£å’Œåº”ç”¨ES6ä¸­çš„Symbolç±»åž‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç†è§£RAGï¼šä¿¡æ¯æ£€ç´¢ä¸Žç”Ÿæˆæ¨¡åž‹çš„ç»“åˆ</title>
      <link href="/2023/12/16/rag-info-retrieve-and-text-generation-combination/"/>
      <url>/2023/12/16/rag-info-retrieve-and-text-generation-combination/</url>
      
        <content type="html"><![CDATA[<p>åœ¨äººå·¥æ™ºèƒ½çš„å¿«é€Ÿå‘å±•ä¸­ï¼Œå¦‚ä½•æœ‰æ•ˆåœ°å¤„ç†å’Œç”Ÿæˆè‡ªç„¶è¯­è¨€æˆä¸ºäº†ä¸€ä¸ªå…³é”®é—®é¢˜ã€‚è¿‘å¹´æ¥ï¼Œ<code>RAGï¼ˆRetrieval-Augmented Generationï¼‰</code>ç³»ç»Ÿçš„å‡ºçŽ°ä¸ºè¿™ä¸€æŒ‘æˆ˜æä¾›äº†æ–°çš„è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨RAGçš„æ¦‚å¿µã€å‡ºçŽ°çš„èƒŒæ™¯ã€åŽŸç†ä»¥åŠå…¶åº”ç”¨åœºæ™¯ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯RAGï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯RAGï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯RAGï¼Ÿ"></a>ä»€ä¹ˆæ˜¯RAGï¼Ÿ</h2><p><code>RAGæ˜¯ä¸€ç§ç»“åˆä¿¡æ¯æ£€ç´¢ä¸Žç”Ÿæˆæ¨¡åž‹çš„è‡ªç„¶è¯­è¨€å¤„ç†ç³»ç»Ÿ</code>ã€‚å®ƒé€šè¿‡ä»Žå¤–éƒ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œç„¶åŽåˆ©ç”¨ç”Ÿæˆæ¨¡åž‹å°†è¿™äº›ä¿¡æ¯æ•´åˆï¼Œç”Ÿæˆé«˜è´¨é‡çš„æ–‡æœ¬å“åº”ã€‚è¿™ç§æ–¹æ³•ä¸ä»…å¢žå¼ºäº†ç”Ÿæˆå†…å®¹çš„å‡†ç¡®æ€§ï¼Œè¿˜æé«˜äº†ä¸Šä¸‹æ–‡çš„ç›¸å…³æ€§ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/rag-workflow.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/rag-workflow.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="RAGå·¥ä½œæµç¨‹" style="width:800px;"/></div><span class="image-caption">RAGå·¥ä½œæµç¨‹</span></div><h2 id="ä¸ºä»€ä¹ˆä¼šå‡ºçŽ°RAGï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šå‡ºçŽ°RAGï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šå‡ºçŽ°RAGï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šå‡ºçŽ°RAGï¼Ÿ</h2><p>ä¼ ç»Ÿçš„ç”Ÿæˆæ¨¡åž‹ï¼Œå¦‚<code>GPT</code>ç³»åˆ—ï¼Œè™½ç„¶åœ¨ç”Ÿæˆè‡ªç„¶è¯­è¨€æ–‡æœ¬æ–¹é¢è¡¨çŽ°å‡ºè‰²ï¼Œä½†å®ƒä»¬é€šå¸¸ä¾èµ–äºŽå›ºå®šçš„è®­ç»ƒæ•°æ®é›†ã€‚è¿™æ„å‘³ç€å®ƒä»¬çš„çŸ¥è¯†æ˜¯é™æ€çš„ï¼Œä¸èƒ½è‡ªåŠ¨æ›´æ–°ã€‚æ­¤å¤–ï¼Œå½“é¢ä¸´éœ€è¦ç‰¹å®šçŸ¥è¯†æˆ–æœ€æ–°ä¿¡æ¯çš„é—®é¢˜æ—¶ï¼Œç”Ÿæˆæ¨¡åž‹çš„å›žç­”å¯èƒ½ä¼šä¸å‡†ç¡®æˆ–è¿‡æ—¶ã€‚</p><p>ä¸ºäº†å…‹æœè¿™äº›é™åˆ¶ï¼ŒRAGç³»ç»Ÿåº”è¿è€Œç”Ÿã€‚å®ƒé€šè¿‡å°†ç”Ÿæˆæ¨¡åž‹ä¸Žä¿¡æ¯æ£€ç´¢ç»“åˆï¼Œä½¿å¾—ç³»ç»Ÿèƒ½å¤ŸåŠ¨æ€è®¿é—®å’Œåˆ©ç”¨æœ€æ–°çš„ä¿¡æ¯ï¼Œä»Žè€Œæé«˜å›žç­”çš„è´¨é‡å’Œå®žç”¨æ€§ã€‚</p><h2 id="RAGçš„åŽŸç†"><a href="#RAGçš„åŽŸç†" class="headerlink" title="RAGçš„åŽŸç†"></a>RAGçš„åŽŸç†</h2><p>RAGç³»ç»Ÿä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶ï¼šä¿¡æ¯æ£€ç´¢æ¨¡å—å’Œç”Ÿæˆæ¨¡å—ã€‚</p><p><strong>ä¿¡æ¯æ£€ç´¢æ¨¡å—</strong>ï¼šè¯¥æ¨¡å—è´Ÿè´£ä»Žä¸€ä¸ªå¤§åž‹æ–‡æ¡£åº“æˆ–çŸ¥è¯†åº“ä¸­æ£€ç´¢ä¸Žç”¨æˆ·æŸ¥è¯¢ç›¸å…³çš„æ–‡æœ¬ç‰‡æ®µã€‚å®ƒé€šå¸¸ä½¿ç”¨å‘é‡æ£€ç´¢ã€å…³é”®è¯åŒ¹é…ç­‰æŠ€æœ¯ï¼Œå¿«é€Ÿå®šä½åˆ°ä¸ŽæŸ¥è¯¢å†…å®¹æœ€ç›¸å…³çš„ä¿¡æ¯ã€‚</p><blockquote><p>å‘é‡æ£€ç´¢ï¼šé€šè¿‡å°†æ–‡æœ¬è¡¨ç¤ºä¸ºå‘é‡ï¼Œè®¡ç®—ç›¸ä¼¼åº¦ï¼Œä»¥æ‰¾åˆ°æœ€ç›¸å…³çš„æ–‡æ¡£ã€‚å¸¸ç”¨çš„æŠ€æœ¯åŒ…æ‹¬TF-IDFå’ŒWord Embeddingsã€‚<br>å…³é”®è¯åŒ¹é…ï¼šä½¿ç”¨å…³é”®è¯ä»Žæ•°æ®åº“ä¸­ç­›é€‰å‡ºç›¸å…³æ–‡æ¡£ï¼Œè™½ç„¶æ•ˆçŽ‡è¾ƒé«˜ï¼Œä½†å¯èƒ½ä¸å¦‚å‘é‡æ£€ç´¢å…¨é¢ã€‚</p></blockquote><p><strong>ç”Ÿæˆæ¨¡å—</strong>ï¼šä¸€æ—¦æ£€ç´¢åˆ°ç›¸å…³ä¿¡æ¯ï¼Œç”Ÿæˆæ¨¡å—å°†è¿™äº›ä¿¡æ¯ä½œä¸ºè¾“å…¥ï¼Œç»“åˆä¸Šä¸‹æ–‡ç”Ÿæˆæœ€ç»ˆçš„å“åº”ã€‚è¿™ä¸€è¿‡ç¨‹ä¸ä»…ä¿è¯äº†ç”Ÿæˆå†…å®¹çš„æµç•…æ€§å’Œè¿žè´¯æ€§ï¼Œè¿˜èƒ½èžå…¥æœ€æ–°çš„çŸ¥è¯†ã€‚ç”Ÿæˆæ¨¡å—åˆ©ç”¨æ·±åº¦å­¦ä¹ æ¨¡åž‹ï¼ˆå¦‚Transformeræž¶æž„ï¼‰æ¥æ•´åˆæ£€ç´¢åˆ°çš„ä¿¡æ¯ï¼Œå¹¶ç”Ÿæˆè‡ªç„¶æµç•…çš„æ–‡æœ¬ã€‚è¿™ä¸€è¿‡ç¨‹åŒ…æ‹¬ï¼š</p><blockquote><p>ä¸Šä¸‹æ–‡èžåˆï¼šç”Ÿæˆæ¨¡åž‹åœ¨ç†è§£æ£€ç´¢ä¿¡æ¯çš„åŸºç¡€ä¸Šï¼Œç»“åˆç”¨æˆ·çš„å…·ä½“é—®é¢˜ï¼Œç”Ÿæˆå…·æœ‰ä¸Šä¸‹æ–‡è¿žè´¯æ€§çš„å›žç­”ã€‚<br>å¤šæ ·æ€§ç”Ÿæˆï¼šé€šè¿‡è°ƒæ•´ç”Ÿæˆç­–ç•¥ï¼ŒRAGå¯ä»¥ç”Ÿæˆå¤šæ ·çš„å“åº”ï¼Œé¿å…å•ä¸€å›žç­”ã€‚</p></blockquote><p>é€šè¿‡è¿™æ ·çš„ç»„åˆï¼ŒRAGç³»ç»Ÿèƒ½å¤Ÿåœ¨å›žç­”å¤æ‚é—®é¢˜æ—¶æä¾›æ›´åŠ å…¨é¢å’Œå‡†ç¡®çš„ä¿¡æ¯ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/rag-data-prepare-retrieval.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/rag-data-prepare-retrieval.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="æ•°æ®å‡†å¤‡ä¸Žæ£€ç´¢å¢žå¼ºç”Ÿæˆ" style="width:800px;"/></div><span class="image-caption">æ•°æ®å‡†å¤‡ä¸Žæ£€ç´¢å¢žå¼ºç”Ÿæˆ</span></div><h2 id="RAGçš„å·¥ä½œæµç¨‹"><a href="#RAGçš„å·¥ä½œæµç¨‹" class="headerlink" title="RAGçš„å·¥ä½œæµç¨‹"></a>RAGçš„å·¥ä½œæµç¨‹</h2><p>RAGçš„å·¥ä½œæµç¨‹é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li>ç”¨æˆ·æå‡ºé—®é¢˜æˆ–è¯·æ±‚ä¿¡æ¯ã€‚</li><li>ç³»ç»Ÿæ ¹æ®ç”¨æˆ·çš„æŸ¥è¯¢ï¼Œä»ŽçŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ã€‚</li><li>ç”Ÿæˆæ¨¡å—èŽ·å–æ£€ç´¢åˆ°çš„å†…å®¹ï¼Œå¹¶ä¸Žä¸Šä¸‹æ–‡ç»“åˆã€‚</li><li>æœ€ç»ˆï¼Œç³»ç»Ÿç”Ÿæˆå¹¶è¾“å‡ºå›žç­”ï¼Œç¡®ä¿ä¿¡æ¯çš„å‡†ç¡®æ€§å’Œæµç•…æ€§ã€‚</li></ol><h2 id="RAGçš„ä¼˜è¶Šæ€§"><a href="#RAGçš„ä¼˜è¶Šæ€§" class="headerlink" title="RAGçš„ä¼˜è¶Šæ€§"></a>RAGçš„ä¼˜è¶Šæ€§</h2><p>ç›¸è¾ƒäºŽä¼ ç»Ÿçš„ç”Ÿæˆæ¨¡åž‹ï¼ŒRAGç³»ç»Ÿåœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å…·æœ‰æ˜Žæ˜¾çš„ä¼˜åŠ¿ï¼š</p><ol><li>åŠ¨æ€æ›´æ–°ï¼šRAGèƒ½å¤Ÿå®žæ—¶è®¿é—®å’Œåˆ©ç”¨æœ€æ–°çš„ä¿¡æ¯ï¼Œç¡®ä¿ç”Ÿæˆå†…å®¹çš„æ—¶æ•ˆæ€§ã€‚</li><li>å‡†ç¡®æ€§æå‡ï¼šé€šè¿‡æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼ŒRAGèƒ½å¤Ÿæä¾›æ›´ä¸ºå‡†ç¡®å’Œä¸Šä¸‹æ–‡ç›¸å…³çš„ç­”æ¡ˆã€‚</li><li>çµæ´»æ€§ï¼šå¯åº”ç”¨äºŽå¤šç§åœºæ™¯ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·éœ€æ±‚ï¼Œé€‚åº”æ€§å¼ºã€‚</li></ol><h2 id="RAGçš„åº”ç”¨åœºæ™¯"><a href="#RAGçš„åº”ç”¨åœºæ™¯" class="headerlink" title="RAGçš„åº”ç”¨åœºæ™¯"></a>RAGçš„åº”ç”¨åœºæ™¯</h2><p>RAGç³»ç»Ÿçš„çµæ´»æ€§å’Œé«˜æ•ˆæ€§ä½¿å…¶åœ¨å¤šä¸ªé¢†åŸŸå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽï¼š</p><p><strong>é—®ç­”ç³»ç»Ÿ</strong>ï¼šåœ¨å®¢æˆ·æ”¯æŒæˆ–ä¿¡æ¯æŸ¥è¯¢ä¸­ï¼ŒRAGå¯ä»¥å¿«é€Ÿæ£€ç´¢åˆ°ç›¸å…³æ–‡æ¡£ï¼Œæä¾›å³æ—¶å’Œå‡†ç¡®çš„å›žç­”ã€‚</p><p><strong>å†…å®¹ç”Ÿæˆ</strong>ï¼šåœ¨æ–°é—»æŠ¥é“ã€åšå®¢æ–‡ç« ç­‰å†…å®¹åˆ›ä½œä¸­ï¼ŒRAGèƒ½å¤Ÿå¸®åŠ©ä½œè€…æ•´åˆæœ€æ–°çš„ä¿¡æ¯ï¼Œç”Ÿæˆå…·æœ‰æ·±åº¦å’Œæ—¶æ•ˆæ€§çš„å†…å®¹ã€‚</p><p><strong>æ•™è‚²å’ŒåŸ¹è®­</strong>ï¼šRAGå¯ä»¥ç”¨äºŽåœ¨çº¿æ•™è‚²å¹³å°ï¼Œæä¾›ä¸ªæ€§åŒ–çš„å­¦ä¹ å»ºè®®å’Œç­”æ¡ˆï¼Œå¸®åŠ©å­¦ç”Ÿæ›´å¥½åœ°ç†è§£å¤æ‚æ¦‚å¿µã€‚</p><p><strong>åŒ»ç–—é¢†åŸŸ</strong>ï¼šåœ¨åŒ»å­¦é—®ç­”ç³»ç»Ÿä¸­ï¼ŒRAGå¯ä»¥ç»“åˆæœ€æ–°çš„ç ”ç©¶æ–‡çŒ®å’ŒæŒ‡å—ï¼Œä¸ºæ‚£è€…å’ŒåŒ»ç”Ÿæä¾›ä¸“ä¸šçš„å»ºè®®ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>RAGä½œä¸ºä¸€ç§æ–°å…´çš„è‡ªç„¶è¯­è¨€å¤„ç†æŠ€æœ¯ï¼Œé€šè¿‡ç»“åˆä¿¡æ¯æ£€ç´¢ä¸Žç”Ÿæˆæ¨¡åž‹çš„ä¼˜åŠ¿ï¼Œå¼€è¾Ÿäº†æ–°çš„åº”ç”¨å‰æ™¯ã€‚éšç€æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼ŒRAGç³»ç»Ÿå°†ç»§ç»­åœ¨å¤šä¸ªé¢†åŸŸå‘æŒ¥é‡è¦ä½œç”¨ï¼ŒæŽ¨åŠ¨äººæœºäº¤äº’çš„è¿›ä¸€æ­¥å‘å±•ã€‚æ— è®ºæ˜¯è§£å†³å¤æ‚é—®é¢˜ï¼Œè¿˜æ˜¯ç”Ÿæˆé«˜è´¨é‡å†…å®¹ï¼ŒRAGéƒ½å±•ç¤ºäº†å…¶åœ¨æ™ºèƒ½åº”ç”¨ä¸­çš„å·¨å¤§æ½œåŠ›ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> OpenAI </tag>
            
            <tag> RAG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A fast in-process analytical database - DuckDB</title>
      <link href="/2023/11/19/a-fast-in-process-analytical-database-duckdb/"/>
      <url>/2023/11/19/a-fast-in-process-analytical-database-duckdb/</url>
      
        <content type="html"><![CDATA[<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p><code>DuckDB</code> is a seriously powerful database, with a host of unique and amazing features that are straight from the world of academic database research. Itâ€™s a fast in-process analytical database that can handle large datasets and perform complex queries. Itâ€™s <code>free</code>, <code>open-source</code>, and written in C++ and SQL. It supports to run on Linux, macOS, Windows, and all popular hardware architectures.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/duckdb-logo.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/duckdb-logo.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:600px;"/></div></div><h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><p>A few of key features for blazing fast OLAP query performance on large datasets (involving aggregations and joins on 100M+ rows on multiple tables), are listed below.</p><ul><li>Like other OLAP data warehouses, DuckDB uses <code>columnar storage</code>, which is a great fit for analytical workloads, because it allows for fast, efficient scans over large amounts of data</li><li>Uses vectorized query execution, which is a technique that allows for processing large amounts of data in batches.</li><li>Uses concurrent execution via threads, which allows for faster execution of queries, and is a great fit for modern multi-threaded CPUs.</li><li>Offers a rich SQL dialect. It can read and write file formats such as <code>CSV</code>, <code>Excel</code>, <code>Parquet</code>, and <code>JSON</code>, to and from the <code>local file system</code> and <code>remote endpoints</code> such as S3 buckets.</li><li>Supports integration with popular database such as <code>MySQL</code>, <code>PostgreSQL</code>, <code>SQLite</code>.</li><li>Data can very easily move from a DuckDB table to a <code>Pandas</code> or <code>Polars</code> <code>DataFrame</code>, and <code>vice-versa</code>.</li><li>It also offers connectors that allow users to directly read <code>Parquet</code> data from <code>AWS S3</code>, <code>GCS</code> and <code>Azure storage</code>.</li></ul><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/duckdb-analytic-workloads.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/duckdb-analytic-workloads.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="A productive DuckDB setup for large (100M+ size) analytical workloads" style="width:800px;"/></div><span class="image-caption">A productive DuckDB setup for large (100M+ size) analytical workloads</span></div><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><h3 id="As-Software"><a href="#As-Software" class="headerlink" title="As Software"></a>As Software</h3><p>DuckDB can be installed on <code>Linux</code>, <code>macOS</code>, and <code>Windows</code>. It can be installed using a package manager, or by downloading the source code and building it manually. You can refer to the official documentation for installation instructions. </p><h3 id="As-Library"><a href="#As-Library" class="headerlink" title="As Library"></a>As Library</h3><p><code>DuckDB</code> not only as tools or software on system. It also supports as a library that can be used in other applications, as a part of a larger application, or as a standalone database. It can be used in <code>Python</code>, <code>Node.js</code>, <code>R</code>, <code>Java</code>, <code>C++</code>, and other programming languages.</p><h4 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install duckdb --upgrade</span><br></pre></td></tr></table></figure><h4 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install duckdb</span><br></pre></td></tr></table></figure><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.duckdb<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>duckdb_jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><h3 id="Supports-Various-File-Formats"><a href="#Supports-Various-File-Formats" class="headerlink" title="Supports Various File Formats"></a>Supports Various File Formats</h3><p>For the DuckDB usage, below is using <code>Python</code> as an example.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> duckdb</span><br><span class="line">duckdb.read_csv(<span class="string">&quot;example.csv&quot;</span>)                <span class="comment"># read a CSV file into a Relation</span></span><br><span class="line">duckdb.read_parquet(<span class="string">&quot;example.parquet&quot;</span>)        <span class="comment"># read a Parquet file into a Relation</span></span><br><span class="line">duckdb.read_json(<span class="string">&quot;example.json&quot;</span>)              <span class="comment"># read a JSON file into a Relation</span></span><br><span class="line"></span><br><span class="line">duckdb.sql(<span class="string">&quot;SELECT * FROM &#x27;example.csv&#x27;&quot;</span>)     <span class="comment"># directly query a CSV file</span></span><br><span class="line">duckdb.sql(<span class="string">&quot;SELECT * FROM &#x27;example.parquet&#x27;&quot;</span>) <span class="comment"># directly query a Parquet file</span></span><br><span class="line">duckdb.sql(<span class="string">&quot;SELECT * FROM &#x27;example.json&#x27;&quot;</span>)    <span class="comment"># directly query a JSON file</span></span><br><span class="line"></span><br><span class="line">duckdb.sql(<span class="string">&quot;SELECT 42&quot;</span>).write_parquet(<span class="string">&quot;out.parquet&quot;</span>) <span class="comment"># Write to a Parquet file</span></span><br><span class="line">duckdb.sql(<span class="string">&quot;SELECT 42&quot;</span>).write_csv(<span class="string">&quot;out.csv&quot;</span>)         <span class="comment"># Write to a CSV file</span></span><br><span class="line">duckdb.sql(<span class="string">&quot;COPY (SELECT 42) TO &#x27;out.parquet&#x27;&quot;</span>)      <span class="comment"># Copy to a Parquet file</span></span><br><span class="line"></span><br><span class="line">duckdb.sql(<span class="string">&quot;SELECT 42&quot;</span>).fetchall()   <span class="comment"># Python objects</span></span><br><span class="line">duckdb.sql(<span class="string">&quot;SELECT 42&quot;</span>).df()         <span class="comment"># Pandas DataFrame</span></span><br><span class="line">duckdb.sql(<span class="string">&quot;SELECT 42&quot;</span>).pl()         <span class="comment"># Polars DataFrame</span></span><br><span class="line">duckdb.sql(<span class="string">&quot;SELECT 42&quot;</span>).arrow()      <span class="comment"># Arrow Table</span></span><br><span class="line">duckdb.sql(<span class="string">&quot;SELECT 42&quot;</span>).fetchnumpy() <span class="comment"># NumPy Arrays</span></span><br></pre></td></tr></table></figure><h3 id="Supports-Multiple-Data-Sources"><a href="#Supports-Multiple-Data-Sources" class="headerlink" title="Supports Multiple Data Sources"></a>Supports Multiple Data Sources</h3><p>It also supports various data sources, including local files, S3 buckets, and remote endpoints.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(trip_distance) <span class="keyword">FROM</span> <span class="string">&#x27;s3://yellow_tripdata_20[12]*.parquet&#x27;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="string">&#x27;~/local/files/file.parquet&#x27;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="string">&#x27;https://shell.duckdb.org/data/tpch/0_01/parquet/lineitem.parquet&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="Pandas-DataFrames"><a href="#Pandas-DataFrames" class="headerlink" title="Pandas DataFrames"></a>Pandas DataFrames</h3><p>DuckDB can even treat pandas dataframes as DuckDB tables and query them directly.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> duckdb</span><br><span class="line"></span><br><span class="line">mydf = pd.DataFrame(&#123;<span class="string">&#x27;a&#x27;</span> : [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]&#125;)</span><br><span class="line"><span class="built_in">print</span>(duckdb.query(<span class="string">&quot;SELECT sum(a) FROM mydf;&quot;</span>).fetchall())</span><br></pre></td></tr></table></figure><h3 id="Retional-API"><a href="#Retional-API" class="headerlink" title="Retional API"></a>Retional API</h3><p>It also supports retional API for querying data, which allows for filtering, grouping, and aggregating data.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> duckdb</span><br><span class="line">rel = duckdb.sql(<span class="string">&quot;SELECT * FROM range(1_000_000) tbl(id)&quot;</span>)</span><br><span class="line">duckdb.sql(<span class="string">&quot;SELECT sum(id) FROM rel&quot;</span>).show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># aggregate(expr, groups = &#123;&#125;)</span></span><br><span class="line">rel = duckdb.sql(<span class="string">&quot;SELECT * FROM range(1_000_000) tbl(id)&quot;</span>)</span><br><span class="line">rel.aggregate(<span class="string">&quot;id % 2 AS g, sum(id), min(id), max(id)&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># except_(rel)</span></span><br><span class="line">r1 = duckdb.sql(<span class="string">&quot;SELECT * FROM range(10) tbl(id)&quot;</span>)</span><br><span class="line">r2 = duckdb.sql(<span class="string">&quot;SELECT * FROM range(5) tbl(id)&quot;</span>)</span><br><span class="line">r1.except_(r2).show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># filter(condition)</span></span><br><span class="line">rel = duckdb.sql(<span class="string">&quot;SELECT * FROM range(1_000_000) tbl(id)&quot;</span>)</span><br><span class="line">rel.<span class="built_in">filter</span>(<span class="string">&quot;id &gt; 5&quot;</span>).limit(<span class="number">3</span>).show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># there are more operations available, refer to the documentation for more details.</span></span><br></pre></td></tr></table></figure><h3 id="Result-Output"><a href="#Result-Output" class="headerlink" title="Result Output"></a>Result Output</h3><p><code>DuckDB</code> query result output can be saved on local file system by using below methods.</p><ul><li>write_csv</li><li>write_parquet</li></ul><h3 id="Persistence"><a href="#Persistence" class="headerlink" title="Persistence"></a>Persistence</h3><p>The data also can be persistent on disk as <code>*.db</code> file. The duckdb.connect(dbname) creates a connection to a persistent database. Any data written to that connection will be persisted, and can be reloaded by reconnecting to the same file, both from Python and from other DuckDB clients.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> duckdb</span><br><span class="line"></span><br><span class="line"><span class="comment"># create a connection to a file called &#x27;file.db&#x27;</span></span><br><span class="line">con = duckdb.connect(<span class="string">&quot;file.db&quot;</span>)</span><br><span class="line"><span class="comment"># create a table and load data into it</span></span><br><span class="line">con.sql(<span class="string">&quot;CREATE TABLE test (i INTEGER)&quot;</span>)</span><br><span class="line">con.sql(<span class="string">&quot;INSERT INTO test VALUES (42)&quot;</span>)</span><br><span class="line"><span class="comment"># query the table</span></span><br><span class="line">con.table(<span class="string">&quot;test&quot;</span>).show()</span><br><span class="line"><span class="comment"># explicitly close the connection</span></span><br><span class="line">con.close()</span><br><span class="line"><span class="comment"># Note: connections also closed implicitly when they go out of scope</span></span><br></pre></td></tr></table></figure><p>Or using context manager to automatically close the connection.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> duckdb</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> duckdb.connect(<span class="string">&quot;file.db&quot;</span>) <span class="keyword">as</span> con:</span><br><span class="line">    con.sql(<span class="string">&quot;CREATE TABLE test (i INTEGER)&quot;</span>)</span><br><span class="line">    con.sql(<span class="string">&quot;INSERT INTO test VALUES (42)&quot;</span>)</span><br><span class="line">    con.table(<span class="string">&quot;test&quot;</span>).show()</span><br><span class="line">    <span class="comment"># the context manager closes the connection automatically</span></span><br></pre></td></tr></table></figure><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p><code>DuckDB</code> is a great database for analytical workloads, with a rich SQL dialect, fast vectorized query execution, and support for various file formats. Itâ€™s also easy to use as a library in other applications, and can be used as a standalone database. Happy to try!</p>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Parquet </tag>
            
            <tag> Python </tag>
            
            <tag> DataBase </tag>
            
            <tag> DuckDB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤§æ•°æ®å­˜å‚¨æ ¼å¼ä¹‹ Parquet, ORC, Avro</title>
      <link href="/2023/10/21/data-storage-format-parquet-ocr-and-avro/"/>
      <url>/2023/10/21/data-storage-format-parquet-ocr-and-avro/</url>
      
        <content type="html"><![CDATA[<p>æ•°æ®å­˜å‚¨æ ¼å¼åœ¨å¤§æ•°æ®å¤„ç†å’Œåˆ†æžä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚Avroã€Parquet å’Œ ORCï¼ˆä¼˜åŒ–è¡Œåˆ—å¼ï¼‰æ˜¯ Hadoop ç”Ÿæ€ç³»ç»Ÿä¸­ä½¿ç”¨çš„ä¸‰ç§æµè¡Œæ ¼å¼ã€‚æ¯ç§æ ¼å¼éƒ½æœ‰å…¶ä¼˜åŠ¿å’Œç‹¬ç‰¹åŠŸèƒ½ï¼Œä½¿å…¶é€‚åˆç‰¹å®šç”¨ä¾‹ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/apache-parquet-orc-avro.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/apache-parquet-orc-avro.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:800px;"/></div></div><h2 id="Apache-Parquet"><a href="#Apache-Parquet" class="headerlink" title="Apache Parquet"></a>Apache Parquet</h2><p><code>Apache Parquet</code> æ˜¯ä¸€ç§åˆ—å¼å­˜å‚¨æ ¼å¼ï¼Œæ—¨åœ¨ä¼˜åŒ–å¤§åž‹æ•°æ®é›†çš„æŸ¥è¯¢æ€§èƒ½å’Œåˆ†æžå¤„ç†ã€‚å®ƒå°†æ•°æ®ç»„ç»‡æˆåˆ—ï¼Œä»Žè€Œå®žçŽ°é«˜æ•ˆçš„åŽ‹ç¼©å’Œåˆ—çº§æ“ä½œã€‚Parquet æ–‡ä»¶å­˜å‚¨æœ‰å…³æž¶æž„çš„å…ƒæ•°æ®å’Œæœ‰åŠ©äºŽæŸ¥è¯¢ä¼˜åŒ–çš„ç»Ÿè®¡ä¿¡æ¯ã€‚è¯¥æ ¼å¼ä¸Ž Apache Hadoop ç”Ÿæ€ç³»ç»Ÿé«˜åº¦å…¼å®¹ï¼ŒåŒ…æ‹¬ Apache Hiveã€Apache Impala å’Œ Apache Spark ç­‰å·¥å…·ã€‚</p><h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹:"></a>ç‰¹ç‚¹:</h3><p><strong>åˆ—å¼å­˜å‚¨</strong>ï¼šæ•°æ®æŒ‰åˆ—è¿›è¡Œå­˜å‚¨ï¼Œè¿™ä½¿å¾—å¯¹ç‰¹å®šåˆ—çš„æŸ¥è¯¢æ•ˆçŽ‡è¾ƒé«˜ã€‚<br><strong>æ”¯æŒåŽ‹ç¼©</strong>ï¼šå†…ç½®æ”¯æŒå¤šç§åŽ‹ç¼©ç®—æ³•ï¼Œå¦‚ <code>Snappy</code>ã€<code>Gzip</code> å’Œ <code>Brotli</code>ã€‚<br><strong>æ”¯æŒå¤æ‚æ•°æ®ç±»åž‹</strong>ï¼šæ”¯æŒåµŒå¥—æ•°æ®ç»“æž„ï¼Œå¦‚æ•°ç»„ã€æ˜ å°„ç­‰ã€‚<br><strong>å…¼å®¹æ€§</strong>ï¼šå¹¿æ³›æ”¯æŒå¤šç§å¤§æ•°æ®å¤„ç†æ¡†æž¶ï¼Œå¦‚ <code>Apache Spark</code>ã€<code>Apache Hive</code> å’Œ <code>AWS Athena</code>ã€‚</p><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹:"></a>ä¼˜ç‚¹:</h3><p><strong>é«˜æ•ˆæŸ¥è¯¢</strong>ï¼šåˆ—å¼å­˜å‚¨æé«˜äº†å¯¹ç‰¹å®šåˆ—çš„æŸ¥è¯¢æ€§èƒ½ï¼Œå°¤å…¶æ˜¯éœ€è¦è¯»å–å¤§é‡æ•°æ®ä½†åªæ¶‰åŠå°‘æ•°åˆ—çš„æƒ…å†µã€‚<br><strong>åŽ‹ç¼©çŽ‡é«˜</strong>ï¼šç”±äºŽç›¸åŒåˆ—çš„æ•°æ®åœ¨ä¸€èµ·ï¼Œèƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°åŽ‹ç¼©ã€‚<br><strong>é€‚ç”¨äºŽå¤§æ•°æ®å¤„ç†</strong>ï¼šä¼˜åŒ–äº†è¯»å–å’Œå­˜å‚¨æ€§èƒ½ã€‚</p><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹:"></a>ç¼ºç‚¹:</h3><p><strong>å†™å…¥æ€§èƒ½</strong>ï¼šç›¸æ¯”äºŽè¡Œå¼å­˜å‚¨ï¼Œå†™å…¥æ€§èƒ½å¯èƒ½è¾ƒå·®ï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®å†™å…¥æ—¶éœ€è¦æ›´å¤šçš„ç¼–ç å’ŒåŽ‹ç¼©æ“ä½œã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯:"></a>ä½¿ç”¨åœºæ™¯:</h3><ul><li>é€‚ç”¨äºŽéœ€è¦è¿›è¡Œå¤æ‚åˆ†æžå’ŒæŸ¥è¯¢çš„å¤§æ•°æ®çŽ¯å¢ƒï¼Œå¦‚æ•°æ®ä»“åº“å’Œå¤§æ•°æ®åˆ†æžç³»ç»Ÿã€‚</li><li>é€‚åˆéœ€è¦é«˜åŽ‹ç¼©æ¯”å’Œå¿«é€Ÿè¯»å–çš„åœºæ™¯ã€‚</li></ul><h2 id="Apache-ORC-Optimized-Row-Columnar"><a href="#Apache-ORC-Optimized-Row-Columnar" class="headerlink" title="Apache ORC (Optimized Row Columnar)"></a>Apache ORC (Optimized Row Columnar)</h2><p><code>Apache ORC</code> æ˜¯å¦ä¸€ç§ä¸“ä¸ºåŸºäºŽ Hadoop çš„å¤§æ•°æ®å¤„ç†è€Œè®¾è®¡çš„åˆ—å¼å­˜å‚¨æ ¼å¼ã€‚å®ƒç”± Apache Hive é¡¹ç›®å¼€å‘ï¼Œä¸Žå…¶ä»–æ ¼å¼ç›¸æ¯”ï¼Œå®ƒæä¾›äº†æ›´å¥½çš„æ€§èƒ½å’ŒåŽ‹ç¼©èƒ½åŠ›ã€‚ORC æ–‡ä»¶ä»¥é«˜åº¦ä¼˜åŒ–çš„åˆ—å¼æ ¼å¼å­˜å‚¨æ•°æ®ï¼Œå¯å®žçŽ°é«˜æ•ˆåŽ‹ç¼©ã€è°“è¯ä¸‹æŽ¨å’Œåˆ—çº§æ“ä½œã€‚</p><h3 id="ç‰¹ç‚¹-1"><a href="#ç‰¹ç‚¹-1" class="headerlink" title="ç‰¹ç‚¹:"></a>ç‰¹ç‚¹:</h3><p><strong>åˆ—å¼å­˜å‚¨</strong>ï¼šåƒ <code>Parquet</code> ä¸€æ ·ï¼Œ<code>ORC</code> ä¹Ÿæ˜¯åˆ—å¼å­˜å‚¨ã€‚<br><strong>é«˜åŽ‹ç¼©çŽ‡</strong>ï¼šORC æä¾›é«˜åŽ‹ç¼©çŽ‡çš„æ”¯æŒï¼Œå¸¸ç”¨çš„åŽ‹ç¼©ç®—æ³•åŒ…æ‹¬ <code>Zlib</code> å’Œ <code>LZ4</code>ã€‚<br><strong>å†…ç½®ç´¢å¼•</strong>ï¼šæ”¯æŒå†…ç½®çš„ç´¢å¼•å’Œç»Ÿè®¡ä¿¡æ¯ï¼Œä½¿å¾—è¯»å–æ•°æ®æ—¶æ›´å¿«ã€‚<br><strong>å¿«é€Ÿè¯»å–</strong>ï¼šä¼˜åŒ–äº†è¯»å–æ€§èƒ½ï¼Œå°¤å…¶æ˜¯å¯¹äºŽå¤§æ•°æ®é‡çš„æŸ¥è¯¢ã€‚</p><h3 id="ä¼˜ç‚¹-1"><a href="#ä¼˜ç‚¹-1" class="headerlink" title="ä¼˜ç‚¹:"></a>ä¼˜ç‚¹:</h3><p><strong>é«˜æ•ˆå­˜å‚¨å’ŒåŽ‹ç¼©</strong>ï¼šé€šå¸¸æ¯” Parquet æä¾›æ›´é«˜çš„åŽ‹ç¼©æ¯”å’Œæ›´å¿«çš„è¯»å–é€Ÿåº¦ã€‚<br><strong>å†…ç½®ç´¢å¼•</strong>ï¼šé€šè¿‡ç´¢å¼•åŠ é€Ÿäº†æ•°æ®è¯»å–å’ŒæŸ¥è¯¢ã€‚<br><strong>æ”¯æŒ Hive ç‰¹æ€§</strong>ï¼šä¸Ž <code>Apache Hive</code> å…¼å®¹æ€§è¾ƒå¥½ã€‚</p><h3 id="ç¼ºç‚¹-1"><a href="#ç¼ºç‚¹-1" class="headerlink" title="ç¼ºç‚¹:"></a>ç¼ºç‚¹:</h3><p><strong>å†™å…¥æ€§èƒ½</strong>ï¼šå†™å…¥æ€§èƒ½å¯èƒ½è¾ƒä½Žï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®æ›´æ–°é¢‘ç¹çš„æƒ…å†µä¸‹ã€‚<br><strong>å…¼å®¹æ€§</strong>ï¼šè™½ç„¶æ”¯æŒçš„æ¡†æž¶å¤šï¼Œä½†ä¸ŽæŸäº›å·¥å…·å’Œç³»ç»Ÿçš„å…¼å®¹æ€§å¯èƒ½ä¸å¦‚ Parquet å¹¿æ³›ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯-1"><a href="#ä½¿ç”¨åœºæ™¯-1" class="headerlink" title="ä½¿ç”¨åœºæ™¯:"></a>ä½¿ç”¨åœºæ™¯:</h3><ul><li>é€‚ç”¨äºŽéœ€è¦é«˜åŽ‹ç¼©çŽ‡å’Œé«˜æ•ˆè¯»å–çš„å¤§æ•°æ®åˆ†æžä»»åŠ¡ï¼Œå°¤å…¶æ˜¯åœ¨ä½¿ç”¨ <code>Apache Hive</code> çš„çŽ¯å¢ƒä¸­ã€‚</li><li>é€‚åˆè¿›è¡Œå¤§é‡çš„æ‰¹å¤„ç†å’Œåˆ†æžä»»åŠ¡ã€‚</li></ul><h2 id="Apache-Avro"><a href="#Apache-Avro" class="headerlink" title="Apache Avro"></a>Apache Avro</h2><p><code>Apache Avro</code> æ˜¯ä¸€ä¸ªåŸºäºŽè¡Œçš„æ•°æ®åºåˆ—åŒ–ç³»ç»Ÿï¼Œä¸“æ³¨äºŽæä¾›ä¸€ç§ç´§å‡‘ã€é«˜æ•ˆä¸”åŸºäºŽæž¶æž„çš„æ•°æ®åºåˆ—åŒ–æ–¹æ³•ã€‚å®ƒå¼ºè°ƒç®€å•æ€§å¹¶æ”¯æŒåŠ¨æ€ç±»åž‹ã€‚Avro ä»¥äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨æ•°æ®ï¼Œå¹¶åœ¨æ•°æ®æ–‡ä»¶ä¸­åŒ…å«æž¶æž„ã€‚è¿™ç§è‡ªæè¿°åŠŸèƒ½å…è®¸è½»æ¾å®žçŽ°æž¶æž„æ¼”å˜å’Œè·¨ä¸åŒç¼–ç¨‹è¯­è¨€çš„å…¼å®¹æ€§ã€‚</p><h3 id="ç‰¹ç‚¹-2"><a href="#ç‰¹ç‚¹-2" class="headerlink" title="ç‰¹ç‚¹:"></a>ç‰¹ç‚¹:</h3><p><strong>è¡Œå¼å­˜å‚¨</strong>ï¼šæ•°æ®ä»¥è¡Œçš„å½¢å¼å­˜å‚¨ï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„è®°å½•ã€‚<br><strong>æ”¯æŒ schema</strong>ï¼šä½¿ç”¨ JSON æ ¼å¼å®šä¹‰ schemaï¼Œæ”¯æŒè‡ªæè¿°æ•°æ®ã€‚<br><strong>æ•°æ®åºåˆ—åŒ–</strong>ï¼šä¸»è¦ç”¨äºŽæ•°æ®çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œé€‚åˆæµæ•°æ®å’Œæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿã€‚<br><strong>æ”¯æŒåŽ‹ç¼©</strong>ï¼šæ”¯æŒå¤šç§åŽ‹ç¼©ç®—æ³•ï¼Œå¦‚ Snappyã€‚</p><h3 id="ä¼˜ç‚¹-2"><a href="#ä¼˜ç‚¹-2" class="headerlink" title="ä¼˜ç‚¹:"></a>ä¼˜ç‚¹:</h3><p><strong>é«˜æ•ˆåºåˆ—åŒ–</strong>ï¼šä¼˜åŒ–äº†åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œï¼Œé€‚åˆæµå¼å¤„ç†ã€‚<br><strong>çµæ´»çš„ schema è¿›åŒ–</strong>ï¼šå…è®¸ schema çš„æ¼”è¿›ï¼Œé€‚åˆéœ€è¦é¢‘ç¹æ›´æ–° schema çš„åœºæ™¯ã€‚<br><strong>ç®€å•æ˜“ç”¨</strong>ï¼šè‡ªæè¿°çš„ schema ä½¿å¾—æ•°æ®äº¤æ¢å˜å¾—ç®€å•ã€‚</p><h3 id="ç¼ºç‚¹-2"><a href="#ç¼ºç‚¹-2" class="headerlink" title="ç¼ºç‚¹:"></a>ç¼ºç‚¹:</h3><p><strong>æŸ¥è¯¢æ€§èƒ½</strong>ï¼šè¡Œå¼å­˜å‚¨å¯èƒ½åœ¨è¯»å–ç‰¹å®šåˆ—æ—¶æ€§èƒ½è¾ƒå·®ã€‚<br><strong>åŽ‹ç¼©çŽ‡</strong>ï¼šé€šå¸¸ä¸å¦‚ Parquet å’Œ ORC é«˜æ•ˆã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯-2"><a href="#ä½¿ç”¨åœºæ™¯-2" class="headerlink" title="ä½¿ç”¨åœºæ™¯:"></a>ä½¿ç”¨åœºæ™¯:</h3><ul><li>é€‚ç”¨äºŽéœ€è¦é«˜æ•ˆåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æµæ•°æ®å’Œæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿï¼Œå¦‚ <code>Kafka</code>ã€<code>æ—¥å¿—ç³»ç»Ÿ</code>ç­‰ã€‚</li><li>é€‚åˆéœ€è¦é¢‘ç¹æ›´æ–° <code>schema</code> å’Œæ”¯æŒ schema æ¼”è¿›çš„åœºæ™¯ã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li><code>Parquet</code> å’Œ <code>ORC</code> ä¸»è¦ç”¨äºŽå¤§æ•°æ®å­˜å‚¨å’Œåˆ†æžï¼Œå› å…¶åˆ—å¼å­˜å‚¨ç‰¹æ€§æä¾›äº†é«˜æ•ˆçš„æŸ¥è¯¢å’ŒåŽ‹ç¼©æ€§èƒ½ã€‚</li><li><code>Parquet</code> é€‚åˆå¹¿æ³›çš„å·¥å…·å’Œæ¡†æž¶ï¼Œå°¤å…¶æ˜¯åœ¨ <code>AWS Athena</code>ã€<code>Apache Spark</code> ç­‰çŽ¯å¢ƒä¸­ã€‚</li><li><code>ORC</code> åœ¨ <code>Hadoop</code> å’Œ <code>Hive</code> çŽ¯å¢ƒä¸­è¡¨çŽ°å°¤ä¸ºå‡ºè‰²ï¼Œé€‚åˆéœ€è¦é«˜åŽ‹ç¼©çŽ‡å’Œè¯»å–æ€§èƒ½çš„åœºæ™¯ã€‚</li><li><code>Avro</code> ä¸»è¦ç”¨äºŽæ•°æ®çš„åºåˆ—åŒ–å’Œæµæ•°æ®å¤„ç†ï¼Œé€‚åˆæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿå’Œéœ€è¦é«˜æ•ˆåºåˆ—åŒ–çš„åº”ç”¨, é€‚ç”¨äºŽ <code>Kafka</code> ç­‰æµæ•°æ®å¹³å°å’Œéœ€è¦é«˜æ•ˆæ•°æ®äº¤æ¢çš„åœºæ™¯ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Apache Parquet </tag>
            
            <tag> Apache ORC </tag>
            
            <tag> Apache Avro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>What is Bixby Capsuleï¼ŸHow to develop it?</title>
      <link href="/2023/09/10/what-is-bixby-capsule/"/>
      <url>/2023/09/10/what-is-bixby-capsule/</url>
      
        <content type="html"><![CDATA[<p><img src="/assets/images/bixby/bixby.webp" class="lazyload placeholder" data-srcset="/assets/images/bixby/bixby.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Bixby Capsule"></p><h2 class="bamboo-h " id="å¯¼è¨€2k9bot1gh1o">å¯¼è¨€</h2><br/><p>åœ¨ä»Šå¤©çš„æ•°å­—æ—¶ä»£ï¼Œè™šæ‹ŸåŠ©æ‰‹å·²ç»æˆä¸ºæˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†ã€‚Bixbyï¼Œä¸‰æ˜Ÿç”µå­å¼€å‘çš„äººå·¥æ™ºèƒ½åŠ©æ‰‹ï¼Œæ˜¯å…¶ä¸­ä¸€ä¸ªå¤‡å—æ¬¢è¿Žçš„åŠ©æ‰‹ä¹‹ä¸€ã€‚<code>Bixby Capsule</code> æ˜¯æ‰©å±• Bixby åŠŸèƒ½çš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼Œæœ¬æ–‡å°†ä»‹ç»ä»€ä¹ˆæ˜¯ Bixby Capsuleã€å®ƒçš„å·¥ä½œåŽŸç†ä»¥åŠå¦‚ä½•å¼€å‘è‡ªå·±çš„ Capsuleã€‚</p><h2 class="bamboo-h " id="ä»€ä¹ˆæ˜¯ Bixby Capsuleï¼Ÿ12fu2u3hgph">ä»€ä¹ˆæ˜¯ Bixby Capsuleï¼Ÿ</h2><br/><p>Bixby Capsule æ˜¯ä¸€ä¸ªä¸º Bixby åŠ©æ‰‹åˆ›å»ºè‡ªå®šä¹‰åŠŸèƒ½å’ŒæŠ€èƒ½çš„å®¹å™¨ã€‚å®ƒå…è®¸å¼€å‘è€…åˆ›å»ºã€éƒ¨ç½²å’Œå…±äº«ç‰¹å®šé¢†åŸŸçš„è™šæ‹ŸåŠ©æ‰‹åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡è¯­éŸ³å’Œæ–‡æœ¬ä¸Žè™šæ‹ŸåŠ©æ‰‹è¿›è¡Œäº¤äº’ã€‚Capsule çš„æ ¸å¿ƒç›®æ ‡æ˜¯æ‰©å±• Bixby çš„èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿæ‰§è¡Œç‰¹å®šé¢†åŸŸçš„ä»»åŠ¡ï¼Œå¦‚è®¾å®šé—¹é’Ÿã€é¢„è®¢é¤åŽ…ã€æŸ¥è¯¢å¤©æ°”ã€æ’­æ”¾éŸ³ä¹ç­‰ã€‚</p><h2 class="bamboo-h " id="Bixby Capsule çš„å·¥ä½œåŽŸç†6u0n3wg93e8">Bixby Capsule çš„å·¥ä½œåŽŸç†</h2><br/><p>äº†è§£ Bixby Capsule çš„å·¥ä½œåŽŸç†å¯¹äºŽå¼€å‘è€…éžå¸¸é‡è¦ã€‚ä¸‹é¢æ˜¯ Bixby Capsule çš„å·¥ä½œåŽŸç†çš„ç®€è¦æ¦‚è¿°ï¼š</p><p><strong>è¯­éŸ³è¾“å…¥æˆ–æ–‡æœ¬è¾“å…¥</strong>ï¼š<br>ç”¨æˆ·é€šè¿‡è¯­éŸ³æˆ–æ–‡æœ¬ä¸Ž Bixby è¿›è¡Œäº¤äº’ï¼Œæå‡ºè¯·æ±‚æˆ–é—®é¢˜ã€‚</p><p><strong>è¯­éŸ³è¯†åˆ«å’Œè‡ªç„¶è¯­è¨€å¤„ç†</strong>ï¼š<br>Bixby ä½¿ç”¨è¯­éŸ³è¯†åˆ«æŠ€æœ¯å°†ç”¨æˆ·çš„è¯­éŸ³è½¬åŒ–ä¸ºæ–‡æœ¬ï¼Œç„¶åŽä½¿ç”¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰æŠ€æœ¯ç†è§£ç”¨æˆ·çš„æ„å›¾å’Œéœ€æ±‚ã€‚</p><p><strong>Capsule åŒ¹é…</strong>ï¼š<br>Bixby ç¡®å®šç”¨æˆ·çš„è¯·æ±‚ä¸Žå“ªä¸ª Capsule æœ€åŒ¹é…ï¼Œè¿™æ˜¯é€šè¿‡åŒ¹é…ç”¨æˆ·çš„æ„å›¾ä¸Ž Capsule çš„åŠŸèƒ½æ¥å®žçŽ°çš„ã€‚</p><p><strong>Capsule äº¤äº’</strong>ï¼š<br>ä¸€æ—¦ç¡®å®šäº†åŒ¹é…çš„ Capsuleï¼ŒBixby ä¸Žè¯¥ Capsule è¿›è¡Œäº¤äº’ï¼Œå°†ç”¨æˆ·çš„è¯·æ±‚ä¼ é€’ç»™ Capsuleã€‚</p><p><strong>Capsule æ‰§è¡Œ</strong>ï¼š<br>Capsule æŽ¥æ”¶ç”¨æˆ·çš„è¯·æ±‚å¹¶æ‰§è¡Œç›¸å…³æ“ä½œï¼Œå¯èƒ½éœ€è¦ä¸Žå¤–éƒ¨æ•°æ®æºæˆ–æœåŠ¡è¿›è¡Œäº¤äº’ä»¥èŽ·å–ä¿¡æ¯æˆ–æ‰§è¡Œä»»åŠ¡ã€‚</p><p><strong>å“åº”ç”¨æˆ·</strong>ï¼š<br>Capsule è¿”å›žç»“æžœç»™ Bixbyï¼Œç„¶åŽ Bixby å°†ç»“æžœå‘ˆçŽ°ç»™ç”¨æˆ·ï¼Œé€šå¸¸ä»¥è¯­éŸ³æˆ–æ–‡æœ¬å½¢å¼ã€‚</p><h2 class="bamboo-h " id="å¦‚ä½•å¼€å‘ Bixby Capsuleï¼Ÿ134gvf3b35u">å¦‚ä½•å¼€å‘ Bixby Capsuleï¼Ÿ</h2><br/><p>çŽ°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å¼€å‘è‡ªå·±çš„ Bixby Capsuleã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€è¦çš„æ­¥éª¤ï¼š</p><h3 id="æ­¥éª¤-1ï¼šå‡†å¤‡å¼€å‘çŽ¯å¢ƒ"><a href="#æ­¥éª¤-1ï¼šå‡†å¤‡å¼€å‘çŽ¯å¢ƒ" class="headerlink" title="æ­¥éª¤ 1ï¼šå‡†å¤‡å¼€å‘çŽ¯å¢ƒ"></a>æ­¥éª¤ 1ï¼šå‡†å¤‡å¼€å‘çŽ¯å¢ƒ</h3><p>åœ¨å¼€å§‹å¼€å‘ä¹‹å‰ï¼Œæ‚¨éœ€è¦å‡†å¤‡å¥½å¼€å‘çŽ¯å¢ƒã€‚è¿™åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p><h4 id="1-1-å®‰è£…-Bixby-å¼€å‘å·¥å…·"><a href="#1-1-å®‰è£…-Bixby-å¼€å‘å·¥å…·" class="headerlink" title="1.1 å®‰è£… Bixby å¼€å‘å·¥å…·"></a>1.1 å®‰è£… Bixby å¼€å‘å·¥å…·</h4><p>Bixby å¼€å‘å·¥å…·åŒ…æ‹¬ Bixby IDEï¼ˆé›†æˆå¼€å‘çŽ¯å¢ƒï¼‰å’Œ Bixby CLIï¼ˆå‘½ä»¤è¡Œå·¥å…·ï¼‰ã€‚å¯ä»¥ä»Ž Bixby Developer Center çš„å®˜æ–¹ç½‘ç«™ä¸Šä¸‹è½½å’Œå®‰è£…è¿™äº›å·¥å…·ã€‚ç¡®ä¿æ‚¨çš„å¼€å‘çŽ¯å¢ƒè®¾ç½®æ­£ç¡®ã€‚</p><h4 id="1-2-æ³¨å†Œ-Bixby-å¼€å‘è€…è´¦æˆ·"><a href="#1-2-æ³¨å†Œ-Bixby-å¼€å‘è€…è´¦æˆ·" class="headerlink" title="1.2 æ³¨å†Œ Bixby å¼€å‘è€…è´¦æˆ·"></a>1.2 æ³¨å†Œ Bixby å¼€å‘è€…è´¦æˆ·</h4><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæ‚¨éœ€è¦åœ¨ Bixby Developer Center ä¸Šæ³¨å†Œä¸€ä¸ªå¼€å‘è€…è´¦æˆ·ã€‚è¿™ä¸ªè´¦æˆ·å°†ç”¨äºŽåˆ›å»ºã€ç®¡ç†å’Œéƒ¨ç½² Capsulesã€‚</p><h3 id="æ­¥éª¤-2ï¼šåˆ›å»º-Capsule"><a href="#æ­¥éª¤-2ï¼šåˆ›å»º-Capsule" class="headerlink" title="æ­¥éª¤ 2ï¼šåˆ›å»º Capsule"></a>æ­¥éª¤ 2ï¼šåˆ›å»º Capsule</h3><p>çŽ°åœ¨ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ Capsuleï¼š</p><h4 id="2-1-ä½¿ç”¨-Bixby-IDE-åˆ›å»º-Capsule"><a href="#2-1-ä½¿ç”¨-Bixby-IDE-åˆ›å»º-Capsule" class="headerlink" title="2.1 ä½¿ç”¨ Bixby IDE åˆ›å»º Capsule"></a>2.1 ä½¿ç”¨ Bixby IDE åˆ›å»º Capsule</h4><ol><li>æ‰“å¼€ Bixby IDEã€‚</li><li>åœ¨ IDE ä¸­é€‰æ‹© â€œFileâ€ &gt; â€œNewâ€ &gt; â€œBixby Capsuleâ€ã€‚</li><li>è¾“å…¥ Capsule çš„åç§°å’Œæè¿°ï¼Œå¹¶é€‰æ‹© Capsule çš„ç±»åž‹ï¼ˆä¾‹å¦‚ï¼Œâ€è‡ªå®šä¹‰â€ æˆ– â€œSmart Speakerâ€ï¼‰ã€‚</li><li>ç‚¹å‡» â€œCreateâ€ æŒ‰é’®ã€‚</li></ol><h4 id="2-2-å®šä¹‰ç»“æž„ã€æ¦‚å¿µå’Œæ“ä½œ"><a href="#2-2-å®šä¹‰ç»“æž„ã€æ¦‚å¿µå’Œæ“ä½œ" class="headerlink" title="2.2 å®šä¹‰ç»“æž„ã€æ¦‚å¿µå’Œæ“ä½œ"></a>2.2 å®šä¹‰ç»“æž„ã€æ¦‚å¿µå’Œæ“ä½œ</h4><p>åœ¨ Capsule ä¸­ï¼Œæ‚¨å¯ä»¥å®šä¹‰ç»“æž„ï¼ˆStructuresï¼‰ã€æ¦‚å¿µï¼ˆConceptsï¼‰å’Œæ“ä½œï¼ˆActionsï¼‰æ¥è¡¨ç¤ºæ‚¨çš„æ•°æ®å’ŒåŠŸèƒ½ï¼š</p><ol><li>åœ¨ IDE ä¸­ï¼Œå¯¼èˆªåˆ° models ç›®å½•ï¼Œç„¶åŽåˆ›å»ºä¸€ä¸ªæ–°çš„ .bxb æ–‡ä»¶ã€‚</li><li>åœ¨æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥å¼€å§‹å®šä¹‰ç»“æž„ã€æ¦‚å¿µå’Œæ“ä½œã€‚ä¾‹å¦‚ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">integer (NumDiceConcept) &#123;</span><br><span class="line">  description (The number of dice to throw.)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">structure (RollResultConcept) &#123;</span><br><span class="line">  description (The result object produced by the RollDice action.)</span><br><span class="line">  property (sum) &#123;</span><br><span class="line">    type (SumConcept)</span><br><span class="line">    min (Required)</span><br><span class="line">    max (One)</span><br><span class="line">  &#125;</span><br><span class="line">  property (roll) &#123;</span><br><span class="line">    description (The list of results for each dice roll.)</span><br><span class="line">    type (RollConcept)</span><br><span class="line">    min (Required)</span><br><span class="line">    max (Many)</span><br><span class="line">  &#125;      </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">action (RollDice) &#123;</span><br><span class="line">  collect&#123;</span><br><span class="line">    input (numDice) &#123;</span><br><span class="line">      type (NumDiceConcept)</span><br><span class="line">      min (Required)</span><br><span class="line">      max (One)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    input (numSides) &#123;</span><br><span class="line">      type (NumSidesConcept)</span><br><span class="line">      min (Required)</span><br><span class="line">      max (One)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; </span><br><span class="line">  output (RollResultConcept)</span><br><span class="line">  type (Calculation)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ­¥éª¤-3ï¼šè®¾è®¡å¯¹è¯"><a href="#æ­¥éª¤-3ï¼šè®¾è®¡å¯¹è¯" class="headerlink" title="æ­¥éª¤ 3ï¼šè®¾è®¡å¯¹è¯"></a>æ­¥éª¤ 3ï¼šè®¾è®¡å¯¹è¯</h3><p>ä½¿ç”¨ Bixby IDE çš„å¯¹è¯å·¥å…·ï¼Œæ‚¨å¯ä»¥è®¾è®¡ç”¨æˆ·ä¸Ž Capsule çš„å¯¹è¯ï¼š</p><h4 id="3-1-åˆ›å»ºå¯¹è¯æ–‡ä»¶"><a href="#3-1-åˆ›å»ºå¯¹è¯æ–‡ä»¶" class="headerlink" title="3.1 åˆ›å»ºå¯¹è¯æ–‡ä»¶"></a>3.1 åˆ›å»ºå¯¹è¯æ–‡ä»¶</h4><ol><li>åœ¨ IDE ä¸­ï¼Œå¯¼èˆªåˆ° resources&#x2F;dialogs ç›®å½•ã€‚</li><li>åˆ›å»ºä¸€ä¸ªæ–°çš„ .dialog æ–‡ä»¶ï¼Œä¸ºæ‚¨çš„ Capsule å®šä¹‰ä¸€ä¸ªå¯¹è¯ã€‚</li></ol><h4 id="3-2-å®šä¹‰ç”¨æˆ·è¾“å…¥å’Œå›žå¤"><a href="#3-2-å®šä¹‰ç”¨æˆ·è¾“å…¥å’Œå›žå¤" class="headerlink" title="3.2 å®šä¹‰ç”¨æˆ·è¾“å…¥å’Œå›žå¤"></a>3.2 å®šä¹‰ç”¨æˆ·è¾“å…¥å’Œå›žå¤</h4><p>åœ¨å¯¹è¯æ–‡ä»¶ä¸­ï¼Œå®šä¹‰ç”¨æˆ·è¾“å…¥ç¤ºä¾‹å’Œ Capsule çš„å›žå¤ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dialog (Result) &#123;</span><br><span class="line">  match &#123;</span><br><span class="line">    BusinessCategory (this) &#123;</span><br><span class="line">      from-property: Business (business)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  template(&quot;#&#123;value(business.name)&#125; has #&#123;joinAs(&#x27;value&#x27;, this)&#125;.&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ­¥éª¤-4ï¼šæµ‹è¯•å’Œè°ƒè¯•-Capsule"><a href="#æ­¥éª¤-4ï¼šæµ‹è¯•å’Œè°ƒè¯•-Capsule" class="headerlink" title="æ­¥éª¤ 4ï¼šæµ‹è¯•å’Œè°ƒè¯• Capsule"></a>æ­¥éª¤ 4ï¼šæµ‹è¯•å’Œè°ƒè¯• Capsule</h3><p>åœ¨éƒ¨ç½²ä¹‹å‰ï¼Œç¡®ä¿æ‚¨å¯¹ Capsule è¿›è¡Œäº†æµ‹è¯•å’Œè°ƒè¯•ï¼š</p><h4 id="4-1-ä½¿ç”¨æ¨¡æ‹Ÿå™¨æµ‹è¯•"><a href="#4-1-ä½¿ç”¨æ¨¡æ‹Ÿå™¨æµ‹è¯•" class="headerlink" title="4.1 ä½¿ç”¨æ¨¡æ‹Ÿå™¨æµ‹è¯•"></a>4.1 ä½¿ç”¨æ¨¡æ‹Ÿå™¨æµ‹è¯•</h4><p>åœ¨ Bixby IDE ä¸­ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå™¨æ¥æ¨¡æ‹Ÿç”¨æˆ·ä¸Ž Capsule çš„å¯¹è¯ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡æ­£å¸¸å·¥ä½œã€‚æ£€æŸ¥å›žå¤æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p><h4 id="4-2-è°ƒè¯•"><a href="#4-2-è°ƒè¯•" class="headerlink" title="4.2 è°ƒè¯•"></a>4.2 è°ƒè¯•</h4><p>ä½¿ç”¨ Bixby IDE çš„è°ƒè¯•å·¥å…·æ¥æŸ¥æ‰¾å’Œä¿®å¤æ½œåœ¨é—®é¢˜ã€‚æ‚¨å¯ä»¥è®¾ç½®æ–­ç‚¹ã€æŸ¥çœ‹å˜é‡çš„å€¼ï¼Œå¹¶è¿›è¡Œå•æ­¥è°ƒè¯•ä»¥ç¡®ä¿ Capsule çš„è¡Œä¸ºæ­£ç¡®ã€‚</p><h3 id="æ­¥éª¤-5ï¼šéƒ¨ç½²-Capsule"><a href="#æ­¥éª¤-5ï¼šéƒ¨ç½²-Capsule" class="headerlink" title="æ­¥éª¤ 5ï¼šéƒ¨ç½² Capsule"></a>æ­¥éª¤ 5ï¼šéƒ¨ç½² Capsule</h3><p>ä¸€æ—¦æ‚¨å¯¹ Capsule æ»¡æ„å¹¶é€šè¿‡äº†æµ‹è¯•ï¼Œå°±å¯ä»¥å¼€å§‹éƒ¨ç½²å®ƒï¼š</p><h4 id="5-1-åˆ›å»ºå¼€å‘ç‰ˆæœ¬"><a href="#5-1-åˆ›å»ºå¼€å‘ç‰ˆæœ¬" class="headerlink" title="5.1 åˆ›å»ºå¼€å‘ç‰ˆæœ¬"></a>5.1 åˆ›å»ºå¼€å‘ç‰ˆæœ¬</h4><p>åœ¨ Bixby IDE ä¸­ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå¼€å‘ç‰ˆæœ¬çš„ Capsuleï¼Œè¿™ä¸ªç‰ˆæœ¬å¯ä»¥åœ¨æ‚¨çš„å¼€å‘çŽ¯å¢ƒä¸­ä½¿ç”¨ï¼š</p><ol><li>é€‰æ‹© â€œBuildâ€ &gt; â€œCreate Development Versionâ€ã€‚</li><li>ç¡®è®¤åˆ›å»ºç‰ˆæœ¬å¹¶ç­‰å¾…å®Œæˆã€‚</li></ol><h4 id="5-2-æäº¤å®¡æ ¸"><a href="#5-2-æäº¤å®¡æ ¸" class="headerlink" title="5.2 æäº¤å®¡æ ¸"></a>5.2 æäº¤å®¡æ ¸</h4><p>å¦‚æžœæ‚¨è®¡åˆ’å°† Capsule åˆ†äº«ç»™å…¶ä»–äººæˆ–å‘å¸ƒåˆ° Bixby Marketplaceï¼Œæ‚¨éœ€è¦æäº¤å®¡æ ¸è¯·æ±‚ï¼š</p><ol><li>åœ¨ Bixby Developer Center ä¸Šç™»å½•ã€‚</li><li>åœ¨å¼€å‘è€…ä¸­å¿ƒä¸­ï¼Œé€‰æ‹©æ‚¨çš„ Capsule é¡¹ç›®ï¼Œç„¶åŽæäº¤å®¡æ ¸è¯·æ±‚ã€‚</li></ol><h3 id="æ­¥éª¤-6ï¼šå‘å¸ƒå’Œåˆ†äº«"><a href="#æ­¥éª¤-6ï¼šå‘å¸ƒå’Œåˆ†äº«" class="headerlink" title="æ­¥éª¤ 6ï¼šå‘å¸ƒå’Œåˆ†äº«"></a>æ­¥éª¤ 6ï¼šå‘å¸ƒå’Œåˆ†äº«</h3><p>ä¸€æ—¦å®¡æ ¸é€šè¿‡ï¼Œæ‚¨å¯ä»¥å°† Capsule å‘å¸ƒå¹¶åˆ†äº«ç»™å…¶ä»–ç”¨æˆ·ï¼š</p><h4 id="6-1-å‘å¸ƒ"><a href="#6-1-å‘å¸ƒ" class="headerlink" title="6.1 å‘å¸ƒ"></a>6.1 å‘å¸ƒ</h4><ol><li>åœ¨ Bixby Developer Center ä¸Šï¼Œé€‰æ‹© â€œå‘å¸ƒâ€ é€‰é¡¹ã€‚</li><li>è¾“å…¥æœ‰å…³ Capsule çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åç§°ã€æè¿°å’Œå›¾æ ‡ã€‚</li><li>å‘å¸ƒæ‚¨çš„ Capsuleã€‚</li></ol><h4 id="6-2-åˆ†äº«"><a href="#6-2-åˆ†äº«" class="headerlink" title="6.2 åˆ†äº«"></a>6.2 åˆ†äº«</h4><p>æ‚¨å¯ä»¥åˆ†äº«æ‚¨çš„ Capsule çš„é“¾æŽ¥ç»™å…¶ä»–ç”¨æˆ·ï¼Œæˆ–è€…åœ¨ Bixby Marketplace ä¸Šæ‰¾åˆ°å®ƒ</p><h2 class="bamboo-h " id="ç»“è®º1t6vogw03fr">ç»“è®º</h2><br/><p>Bixby Capsule æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…åˆ›å»ºè‡ªå®šä¹‰è™šæ‹ŸåŠ©æ‰‹åº”ç”¨ç¨‹åºï¼Œæä¾›å„ç§åŠŸèƒ½å’ŒæŠ€èƒ½ã€‚äº†è§£å…¶å·¥ä½œåŽŸç†ä»¥åŠæŒ‰ç…§ä¸Šè¿°æ­¥éª¤è¿›è¡Œå¼€å‘ï¼Œå°†ä½¿æ‚¨èƒ½å¤Ÿæž„å»ºå‡ºä»¤äººå°è±¡æ·±åˆ»çš„ Bixby Capsulesï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œæ‰©å±• Bixby çš„åŠŸèƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Bixby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS Glue DataBrew - ç®€åŒ–æ•°æ®å‡†å¤‡çš„åˆ©å™¨</title>
      <link href="/2023/09/05/aws-glue-databrew-data-preparation-tool/"/>
      <url>/2023/09/05/aws-glue-databrew-data-preparation-tool/</url>
      
        <content type="html"><![CDATA[<p>æ•°æ®å‡†å¤‡æ˜¯æ•°æ®åˆ†æžå’Œæœºå™¨å­¦ä¹ çš„å…³é”®æ­¥éª¤ä¹‹ä¸€ã€‚<code>AWS Glue DataBrew</code> æ˜¯ Amazon Web Servicesï¼ˆAWSï¼‰æä¾›çš„ä¸€é¡¹å¼ºå¤§å·¥å…·ï¼Œæ—¨åœ¨å¸®åŠ©æ•°æ®å·¥ç¨‹å¸ˆã€æ•°æ®åˆ†æžå¸ˆå’Œæ•°æ®ç§‘å­¦å®¶è½»æ¾åœ°å‡†å¤‡æ•°æ®ä»¥è¿›è¡Œåˆ†æžã€æŠ¥å‘Šå’Œæœºå™¨å­¦ä¹ ã€‚æœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨ AWS Glue DataBrew çš„ç‰¹ç‚¹ã€ä¼˜åŠ¿ã€ä½¿ç”¨åœºæ™¯å’Œå¦‚ä½•å…¥é—¨ã€‚<br><img src="/assets/images/aws/aws-glue-databrew.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-glue-databrew.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Glue DataBrew"></p><h2 class="bamboo-h " id="AWS Glue DataBrew ç®€ä»‹2n4ayle0w9k">AWS Glue DataBrew ç®€ä»‹</h2><br/><p>AWS Glue DataBrew æ˜¯ä¸€é¡¹å…¨æ‰˜ç®¡çš„æ•°æ®å‡†å¤‡æœåŠ¡ï¼Œå®ƒé€šè¿‡å¯è§†åŒ–ç•Œé¢å’Œè‡ªåŠ¨åŒ–å·¥å…·ç®€åŒ–äº†æ•°æ®æ¸…ç†ã€è½¬æ¢å’Œå‡†å¤‡çš„è¿‡ç¨‹ã€‚ä»¥ä¸‹æ˜¯ AWS Glue DataBrew çš„ä¸€äº›å…³é”®ç‰¹ç‚¹ï¼š</p><h4 id="å¯è§†åŒ–æ•°æ®å‡†å¤‡"><a href="#å¯è§†åŒ–æ•°æ®å‡†å¤‡" class="headerlink" title="å¯è§†åŒ–æ•°æ®å‡†å¤‡"></a>å¯è§†åŒ–æ•°æ®å‡†å¤‡</h4><p>DataBrew æä¾›äº†ç›´è§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿè½»æ¾åœ°æŽ¢ç´¢ã€æ¸…ç†å’Œè½¬æ¢æ•°æ®ï¼Œè€Œæ— éœ€ç¼–å†™å¤æ‚çš„ä»£ç ã€‚</p><h4 id="æ•°æ®æŽ¢ç´¢"><a href="#æ•°æ®æŽ¢ç´¢" class="headerlink" title="æ•°æ®æŽ¢ç´¢"></a>æ•°æ®æŽ¢ç´¢</h4><p>æ‚¨å¯ä»¥é€šè¿‡æ•°æ®æŽ¢ç´¢åŠŸèƒ½å¿«é€Ÿäº†è§£æ•°æ®çš„ç»“æž„ã€å†…å®¹å’Œè´¨é‡ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£æ•°æ®ã€‚</p><h4 id="è‡ªåŠ¨æ•°æ®è§„èŒƒåŒ–"><a href="#è‡ªåŠ¨æ•°æ®è§„èŒƒåŒ–" class="headerlink" title="è‡ªåŠ¨æ•°æ®è§„èŒƒåŒ–"></a>è‡ªåŠ¨æ•°æ®è§„èŒƒåŒ–</h4><p>DataBrew è‡ªåŠ¨æ£€æµ‹æ•°æ®ç±»åž‹å’Œç»“æž„ï¼Œå¹¶æä¾›æ•°æ®è§„èŒƒåŒ–å»ºè®®ï¼Œä»¥ç¡®ä¿æ•°æ®åœ¨åˆ†æžè¿‡ç¨‹ä¸­çš„ä¸€è‡´æ€§ã€‚</p><h4 id="å¤šæºæ•°æ®æ”¯æŒ"><a href="#å¤šæºæ•°æ®æ”¯æŒ" class="headerlink" title="å¤šæºæ•°æ®æ”¯æŒ"></a>å¤šæºæ•°æ®æ”¯æŒ</h4><p>DataBrew å¯ä»¥è¿žæŽ¥åˆ°å¤šç§æ•°æ®æºï¼ŒåŒ…æ‹¬æ•°æ®æ¹–ã€æ•°æ®ä»“åº“ã€æ•°æ®åº“ã€äº‘å­˜å‚¨å’Œ APIã€‚</p><h4 id="æ•°æ®è½¬æ¢å’Œæ¸…æ´—"><a href="#æ•°æ®è½¬æ¢å’Œæ¸…æ´—" class="headerlink" title="æ•°æ®è½¬æ¢å’Œæ¸…æ´—"></a>æ•°æ®è½¬æ¢å’Œæ¸…æ´—</h4><p>æ‚¨å¯ä»¥ä½¿ç”¨ DataBrew è¿›è¡Œå„ç§æ•°æ®è½¬æ¢å’Œæ¸…æ´—æ“ä½œï¼Œå¦‚åˆ é™¤é‡å¤æ•°æ®ã€å¡«å……ç¼ºå¤±å€¼ã€åˆå¹¶åˆ—ç­‰ã€‚</p><h4 id="å·¥ä½œæµç¨‹è‡ªåŠ¨åŒ–"><a href="#å·¥ä½œæµç¨‹è‡ªåŠ¨åŒ–" class="headerlink" title="å·¥ä½œæµç¨‹è‡ªåŠ¨åŒ–"></a>å·¥ä½œæµç¨‹è‡ªåŠ¨åŒ–</h4><p>DataBrew æ”¯æŒåˆ›å»ºæ•°æ®å‡†å¤‡å·¥ä½œæµç¨‹ï¼Œä»¥è‡ªåŠ¨æ‰§è¡Œå¤šä¸ªæ•°æ®å‡†å¤‡ä»»åŠ¡ï¼Œæé«˜æ•ˆçŽ‡ã€‚</p><h4 id="æ•°æ®ç›‘æŽ§å’Œå®¡è®¡"><a href="#æ•°æ®ç›‘æŽ§å’Œå®¡è®¡" class="headerlink" title="æ•°æ®ç›‘æŽ§å’Œå®¡è®¡"></a>æ•°æ®ç›‘æŽ§å’Œå®¡è®¡</h4><p>DataBrew æä¾›æ•°æ®ç›‘æŽ§å’Œå®¡è®¡åŠŸèƒ½ï¼Œä»¥è·Ÿè¸ªæ•°æ®å‡†å¤‡æ“ä½œï¼Œç¡®ä¿æ•°æ®è´¨é‡å’Œå®‰å…¨æ€§ã€‚</p><h2 class="bamboo-h " id="AWS Glue DataBrew çš„ä¼˜åŠ¿1hu441nji3b">AWS Glue DataBrew çš„ä¼˜åŠ¿</h2><br/><p>ä¸ºä»€ä¹ˆè¦é€‰æ‹© AWS Glue DataBrew ä½œä¸ºæ•°æ®å‡†å¤‡å·¥å…·ï¼Ÿä»¥ä¸‹æ˜¯å®ƒçš„ä¸€äº›æ˜¾è‘—ä¼˜åŠ¿ï¼š</p><h4 id="é™ä½ŽæŠ€æœ¯é—¨æ§›"><a href="#é™ä½ŽæŠ€æœ¯é—¨æ§›" class="headerlink" title="é™ä½ŽæŠ€æœ¯é—¨æ§›"></a>é™ä½ŽæŠ€æœ¯é—¨æ§›</h4><p>DataBrew çš„å¯è§†åŒ–ç•Œé¢ä½¿æ•°æ®å‡†å¤‡è¿‡ç¨‹å¯¹äºŽä¸æ“…é•¿ç¼–ç¨‹çš„ç”¨æˆ·ä¹Ÿå˜å¾—æ›´åŠ å¯è¡Œï¼Œé™ä½Žäº†æŠ€æœ¯é—¨æ§›ã€‚</p><h4 id="èŠ‚çœæ—¶é—´"><a href="#èŠ‚çœæ—¶é—´" class="headerlink" title="èŠ‚çœæ—¶é—´"></a>èŠ‚çœæ—¶é—´</h4><p>è‡ªåŠ¨åŒ–åŠŸèƒ½å’Œé¢„å»ºçš„æ•°æ®è½¬æ¢æ“ä½œå¯ä»¥å¤§å¹…èŠ‚çœæ•°æ®å‡†å¤‡çš„æ—¶é—´ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿæ›´å¿«åœ°èŽ·å¾—æ´žå¯Ÿã€‚</p><h4 id="æ”¹è¿›æ•°æ®è´¨é‡"><a href="#æ”¹è¿›æ•°æ®è´¨é‡" class="headerlink" title="æ”¹è¿›æ•°æ®è´¨é‡"></a>æ”¹è¿›æ•°æ®è´¨é‡</h4><p>DataBrew çš„æ•°æ®æŽ¢ç´¢å’Œè´¨é‡è¯„ä¼°å·¥å…·æœ‰åŠ©äºŽå‘çŽ°å’Œè§£å†³æ•°æ®è´¨é‡é—®é¢˜ï¼Œæé«˜æ•°æ®åˆ†æžçš„å¯é æ€§ã€‚</p><h4 id="ä¸Ž-AWS-ç”Ÿæ€ç³»ç»Ÿé›†æˆ"><a href="#ä¸Ž-AWS-ç”Ÿæ€ç³»ç»Ÿé›†æˆ" class="headerlink" title="ä¸Ž AWS ç”Ÿæ€ç³»ç»Ÿé›†æˆ"></a>ä¸Ž AWS ç”Ÿæ€ç³»ç»Ÿé›†æˆ</h4><p>DataBrew ä¸Žå…¶ä»– AWS æœåŠ¡é›†æˆï¼Œå¯æ— ç¼é›†æˆåˆ°æ‚¨çš„æ•°æ®å·¥ä½œæµç¨‹ä¸­ï¼Œå¦‚ AWS Glueã€S3ã€Redshift ç­‰ã€‚</p><h2 class="bamboo-h " id="AWS Glue DataBrew çš„ä½¿ç”¨åœºæ™¯27ysw73aqkv">AWS Glue DataBrew çš„ä½¿ç”¨åœºæ™¯</h2><br/><p>AWS Glue DataBrew é€‚ç”¨äºŽå¤šç§ä½¿ç”¨åœºæ™¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽï¼š</p><h4 id="æ•°æ®æ¸…ç†å’Œè§„èŒƒåŒ–"><a href="#æ•°æ®æ¸…ç†å’Œè§„èŒƒåŒ–" class="headerlink" title="æ•°æ®æ¸…ç†å’Œè§„èŒƒåŒ–"></a>æ•°æ®æ¸…ç†å’Œè§„èŒƒåŒ–</h4><p>å°†åŽŸå§‹æ•°æ®æ¸…ç†å¹¶è§„èŒƒåŒ–ï¼Œä»¥ä¾¿è¿›è¡Œåˆ†æžå’ŒæŠ¥å‘Šã€‚</p><h4 id="æ•°æ®æŽ¢ç´¢å’Œå¯è§†åŒ–"><a href="#æ•°æ®æŽ¢ç´¢å’Œå¯è§†åŒ–" class="headerlink" title="æ•°æ®æŽ¢ç´¢å’Œå¯è§†åŒ–"></a>æ•°æ®æŽ¢ç´¢å’Œå¯è§†åŒ–</h4><p>é€šè¿‡æ•°æ®æŽ¢ç´¢åŠŸèƒ½å¯è§†åŒ–æ•°æ®ï¼Œä»¥ä¾¿æ›´å¥½åœ°äº†è§£æ•°æ®çš„ç‰¹ç‚¹ã€‚</p><h4 id="ç¼ºå¤±æ•°æ®å¤„ç†"><a href="#ç¼ºå¤±æ•°æ®å¤„ç†" class="headerlink" title="ç¼ºå¤±æ•°æ®å¤„ç†"></a>ç¼ºå¤±æ•°æ®å¤„ç†</h4><p>å¡«å……ç¼ºå¤±æ•°æ®æˆ–è¯†åˆ«ç¼ºå¤±æ•°æ®çš„æ¨¡å¼ã€‚</p><h4 id="æ•°æ®åˆå¹¶å’Œåˆ†å‰²"><a href="#æ•°æ®åˆå¹¶å’Œåˆ†å‰²" class="headerlink" title="æ•°æ®åˆå¹¶å’Œåˆ†å‰²"></a>æ•°æ®åˆå¹¶å’Œåˆ†å‰²</h4><p>åˆå¹¶ä¸åŒæ¥æºçš„æ•°æ®æˆ–æ‹†åˆ†åŒ…å«å¤šä¸ªå€¼çš„åˆ—ã€‚</p><h4 id="æ•°æ®è´¨é‡ç›‘æŽ§"><a href="#æ•°æ®è´¨é‡ç›‘æŽ§" class="headerlink" title="æ•°æ®è´¨é‡ç›‘æŽ§"></a>æ•°æ®è´¨é‡ç›‘æŽ§</h4><p>æŒç»­ç›‘æŽ§æ•°æ®è´¨é‡ï¼Œä»¥åŠæ—¶å‘çŽ°é—®é¢˜å¹¶é‡‡å–çº æ­£æŽªæ–½ã€‚</p><h2 class="bamboo-h " id="å…¥é—¨ AWS Glue DataBrew117i1f51fim">å…¥é—¨ AWS Glue DataBrew</h2><br/><p>è¦å¼€å§‹ä½¿ç”¨ AWS Glue DataBrewï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><ol><li>ç™»å½• AWS æŽ§åˆ¶å°ï¼šä½¿ç”¨æ‚¨çš„ AWS å¸æˆ·ç™»å½• AWS ç®¡ç†æŽ§åˆ¶å°ã€‚</li><li>å¯¼èˆªåˆ° AWS Glue DataBrewï¼šåœ¨ AWS æŽ§åˆ¶å°ä¸­ï¼Œå¯¼èˆªåˆ° DataBrew æœåŠ¡é¡µé¢ã€‚</li><li>åˆ›å»ºé¡¹ç›®ï¼šåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®æˆ–é€‰æ‹©çŽ°æœ‰é¡¹ç›®ï¼Œä»¥å¼€å§‹æ•°æ®å‡†å¤‡å·¥ä½œã€‚</li><li>å¯¼å…¥æ•°æ®ï¼šå°†æ‚¨è¦å‡†å¤‡çš„æ•°æ®å¯¼å…¥é¡¹ç›®ã€‚</li><li>ä½¿ç”¨ DataBrewï¼šåœ¨ DataBrew çš„å¯è§†åŒ–ç•Œé¢ä¸­æŽ¢ç´¢ã€æ¸…ç†å’Œè½¬æ¢æ•°æ®ã€‚</li><li>ä¿å­˜å’Œå¯¼å‡ºæ•°æ®ï¼šå®Œæˆæ•°æ®å‡†å¤‡åŽï¼Œæ‚¨å¯ä»¥å°†æ•°æ®ä¿å­˜å¹¶å¯¼å‡ºåˆ°å…¶ä»– AWS æœåŠ¡æˆ–åº”ç”¨ç¨‹åºä¸­ã€‚</li></ol><h2 class="bamboo-h " id="æ€»ç»“2jhsffcnt0c">æ€»ç»“</h2><br/><p>AWS Glue DataBrew æ˜¯ä¸€é¡¹å¼ºå¤§çš„æ•°æ®å‡†å¤‡å·¥å…·ï¼Œå®ƒé€šè¿‡å¯è§†åŒ–ç•Œé¢å’Œè‡ªåŠ¨åŒ–åŠŸèƒ½ä½¿æ•°æ®å‡†å¤‡å˜å¾—æ›´åŠ å®¹æ˜“å’Œé«˜æ•ˆã€‚æ— è®ºæ‚¨æ˜¯æ•°æ®å·¥ç¨‹å¸ˆã€æ•°æ®åˆ†æžå¸ˆè¿˜æ˜¯æ•°æ®ç§‘å­¦å®¶ï¼ŒDataBrew éƒ½å¯ä»¥å¸®åŠ©æ‚¨åŠ é€Ÿæ•°æ®åˆ†æžçš„è¿‡ç¨‹ï¼Œä»ŽåŽŸå§‹æ•°æ®ä¸­æå–æœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚å¼€å§‹ä½¿ç”¨ DataBrewï¼Œå¹¶ä½“éªŒæ•°æ®å‡†å¤‡çš„å…¨æ–°æ–¹å¼ï¼</p>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Big Data </tag>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to install additional msi components.</title>
      <link href="/2023/05/25/how-to-install-additional-msi-components/"/>
      <url>/2023/05/25/how-to-install-additional-msi-components/</url>
      
        <content type="html"><![CDATA[<p>Recently, I had the opportunity to work on a project that requires to build a Msi Installer which contains multiple components. The project was to install these components on a Windows machine. To build this Msi Installer, I used <code>WiX toolset</code>. Itâ€™s a powerful tool that allows you to create complex installers with a high degree of flexibility. But here Iâ€™m not going to go into the details of how to create a Msi Installer using WiX toolset. Instead, Iâ€™ll focus on how to use <code>msiexec</code> tool to install additional components of a Windows MSI package.</p><h2 id="Understanding-msiexec"><a href="#Understanding-msiexec" class="headerlink" title="Understanding msiexec"></a>Understanding <code>msiexec</code></h2><p><code>msiexec</code> is a command-line utility that allows you to install, modify, or uninstall software that comes in the form of an MSI package. MSI (Microsoft Installer) packages are commonly used for software distribution because they offer a standardized way to handle installations, including dependencies and custom actions.</p><h2 id="Windows-Installer-Properties"><a href="#Windows-Installer-Properties" class="headerlink" title="Windows Installer Properties"></a>Windows Installer Properties</h2><p>The Windows Installer contains several properties that can be set to customize the installation process. These properties is defined in list categories.</p><ul><li>Component Location Properties</li><li>Configuration Properties</li><li>Date, Time Properties</li><li>Feature Installation Options Properties</li><li>Hardware Properties</li><li>Installation Status Properties</li><li>Operating System Properties</li><li>Product Information Properties</li><li>Summary Information Update Properties</li><li>System Folder Properties</li><li>User Information Properties</li></ul><p>For more details, please refer to the official documentation of Windows Installer. <a href="https://learn.microsoft.com/en-us/windows/win32/msi/property-reference">https://learn.microsoft.com/en-us/windows/win32/msi/property-reference</a></p><h2 id="The-ADDLOCAL-Option"><a href="#The-ADDLOCAL-Option" class="headerlink" title="The ADDLOCAL Option"></a>The <code>ADDLOCAL</code> Option</h2><p>One of the most useful options when using msiexec is <code>ADDLOCAL</code>. This option allows you to specify which features or components of the MSI package you want to install. Hereâ€™s the basic syntax:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msiexec /i &lt;path_to_msi_file&gt; ADDLOCAL=&lt;component1&gt;[,&lt;component2&gt;,...]</span><br></pre></td></tr></table></figure><p>This works in a scenario, some feature components of msi package already installed, and you can use this property to install additional component.</p><h2 id="Example-Scenario"><a href="#Example-Scenario" class="headerlink" title="Example Scenario"></a>Example Scenario</h2><p>Letâ€™s say you have an MSI package named example.msi that contains several components, including FeatureA, FeatureB, and FeatureC. If you only need FeatureA and FeatureB, you can use the following command:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msiexec /i &quot;C:\path\to\example.msi&quot; ADDLOCAL=FeatureA,FeatureB</span><br></pre></td></tr></table></figure><p>This command will install only the specified components, saving you time and disk space.</p><h2 id="Combining-with-Other-Options"><a href="#Combining-with-Other-Options" class="headerlink" title="Combining with Other Options"></a>Combining with Other Options</h2><p>msiexec offers a variety of other options that you can combine with <code>ADDLOCAL</code> to customize your installation further. For instance, you can use the <code>/passive</code> option for a passive installation, which means the installation will run with minimal user interaction:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msiexec /i &quot;C:\path\to\example.msi&quot; ADDLOCAL=FeatureA /passive</span><br></pre></td></tr></table></figure><p>This is particularly useful for automated installations or when you want to avoid user prompts.</p><h3 id="Important-Considerations"><a href="#Important-Considerations" class="headerlink" title="Important Considerations"></a>Important Considerations</h3><ol><li><p><code>Component Names</code>: Ensure that the component names are exactly as specified in the MSI package. These names can usually be found in the documentation provided with the MSI package or by inspecting the package with a tool like <code>Orca</code>.</p></li><li><p><code>All Components</code>: If you need to install all components, you can omit the <code>ADDLOCAL=ALL</code> option to install everything:</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msiexec /i &quot;C:\path\to\example.msi&quot; ADDLOCAL=ALL</span><br></pre></td></tr></table></figure><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Using <code>msiexec</code> with the <code>ADDLOCAL</code> option is a powerful way to manage MSI installations, allowing you to install only the components you need. This not only saves time but also ensures that your system remains clutter-free with unnecessary software. Whether youâ€™re a system administrator, a developer, or simply someone who likes to keep their system lean, mastering msiexec is a valuable skill.</p><p>By following the examples and tips provided in this blog post, youâ€™ll be well on your way to becoming an expert in MSI installations. Happy installing!</p><h2 id="Useful-Links"><a href="#Useful-Links" class="headerlink" title="Useful Links"></a>Useful Links</h2><ul><li>Windows Instalelr: <a href="https://learn.microsoft.com/en-us/windows/win32/msi/windows-installer-portal">https://learn.microsoft.com/en-us/windows/win32/msi/windows-installer-portal</a></li><li>Windows Installer Property Reference: <a href="https://docs.microsoft.com/en-us/windows/win32/msi/property-reference">https://docs.microsoft.com/en-us/windows/win32/msi/property-reference</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Msi </tag>
            
            <tag> Wix </tag>
            
            <tag> Installer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Machine Learning Sentiment Analysis - Load Model &amp; Predict</title>
      <link href="/2023/05/02/machine-learning-sentiment-analysis-load-model-predict/"/>
      <url>/2023/05/02/machine-learning-sentiment-analysis-load-model-predict/</url>
      
        <content type="html"><![CDATA[<p>In previous blog, we have saved the trained model in the local. In this post, we will load the saved model and predict the sentiment of a given text.</p><h2 id="Load-Model"><a href="#Load-Model" class="headerlink" title="Load Model"></a>Load Model</h2><p>To load the saved model, we will use the <code>load_model</code> function from the tensorflow keras library. Itâ€™s very simple to load the saved model. We just need to pass the path of the saved model as an argument to the <code>load_model</code> function.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">load_model</span>(<span class="params">model_path</span>):</span><br><span class="line">    model = tf.keras.models.load_model(model_path)</span><br><span class="line">    <span class="keyword">return</span> model</span><br></pre></td></tr></table></figure><p>In above code, we have defined a function <code>load_model</code> which takes the path of the saved model as an argument. We then load the saved model using the <code>load_model</code> function and return the loaded model.  Next step we will use this model object to predict the sentiment of a given text.</p><h2 id="Predict-Sentiment"><a href="#Predict-Sentiment" class="headerlink" title="Predict Sentiment"></a>Predict Sentiment</h2><p>To predict the sentiment of a given text, we will use the <code>predict</code> function of the loaded model. Itâ€™s very simple to predict the sentiment of a given text using the loaded model. We defined below function to predict the sentiment of a given text. It can accepts a single text or a list of texts.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">predict_sentiment</span>(<span class="params">model_path, sentence</span>):</span><br><span class="line">    <span class="comment"># load the model from disk</span></span><br><span class="line">    loaded_model = train_model.load_model(model_path)</span><br><span class="line">    </span><br><span class="line">    predict_text = tf.constant([])</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">isinstance</span>(sentence, <span class="built_in">list</span>)):</span><br><span class="line">        predict_text = tf.constant(sentence)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        predict_text = tf.constant([sentence])</span><br><span class="line"></span><br><span class="line">    prediction = loaded_model.predict(predict_text)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Sentence:\n&quot;</span>, sentence)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Prediction: \n&quot;</span>, prediction)</span><br></pre></td></tr></table></figure><p>In above code, we have defined a function <code>predict_sentiment</code> which takes the path of the saved model and the sentence as an argument. We then load the saved model using the <code>load_model</code> function and predict the sentiment of the given sentence using the <code>predict</code> function of the loaded model. Finally, we print the sentence and the predicted sentiment.</p><h2 id="Trained-Model-Predict-Movie-Review"><a href="#Trained-Model-Predict-Movie-Review" class="headerlink" title="Trained Model Predict Movie Review"></a>Trained Model Predict Movie Review</h2><p>Here, I choosed sample sentences which are positive and negative from test data of IMDb movie review. Below is testing result.</p><h3 id="Positive-Sentiment"><a href="#Positive-Sentiment" class="headerlink" title="Positive Sentiment"></a>Positive Sentiment</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">My boyfriend and I went to watch The Guardian.At first I didn&#x27;t want to watch it, but I loved the movie- It was definitely the best movie I have seen in sometime.They portrayed the USCG very well, it really showed me what they do and I think they should really be appreciated more.Not only did it teach but it was a really good movie. The movie shows what the really do and how hard the job is.I think being a USCG would be challenging and very scary. It was a great movie all around. I would suggest this movie for anyone to see.The ending broke my heart but I know why he did it. The storyline was great I give it 2 thumbs up. I cried it was very emotional, I would give it a 20 if I could!</span><br></pre></td></tr></table></figure><p>The positive movie review text prediction is: 0.9982441, which means the sentiment of the given text is positive.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/sentiment-analysis-predict-positive.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/sentiment-analysis-predict-positive.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Sentiment Analysis Predict Positive Movie Review"/></div><span class="image-caption">Sentiment Analysis Predict Positive Movie Review</span></div><h3 id="Negative-Sentiment"><a href="#Negative-Sentiment" class="headerlink" title="Negative Sentiment"></a>Negative Sentiment</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Once again Mr. Costner has dragged out a movie for far longer than necessary. Aside from the terrific sea rescue sequences, of which there are very few I just did not care about any of the characters. Most of us have ghosts in the closet, and Costner&#x27;s character are realized early on, and then forgotten until much later, by which time I did not care. The character we should really care about is a very cocky, overconfident Ashton Kutcher. The problem is he comes off as kid who thinks he&#x27;s better than anyone else around him and shows no signs of a cluttered closet. His only obstacle appears to be winning over Costner. Finally when we are well past the half way point of this stinker, Costner tells us all about Kutcher&#x27;s ghosts. We are told why Kutcher is driven to be the best with no prior inkling or foreshadowing. No magic here, it was all I could do to keep from turning it off an hour in.</span><br></pre></td></tr></table></figure><p>The negative movie review text prediction is: 0.1066813, which means the sentiment of the given text is negative.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/sentiment-analysis-predict-negative.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/sentiment-analysis-predict-negative.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Sentiment Analysis Predict Negative Movie Review"/></div><span class="image-caption">Sentiment Analysis Predict Negative Movie Review</span></div><p>Fro the movie review text, the model predicts the sentiment as positive and negative with high accuracy.</p><h2 id="AWS-Comprehend-Predict-Movie-Review"><a href="#AWS-Comprehend-Predict-Movie-Review" class="headerlink" title="AWS Comprehend Predict Movie Review"></a>AWS Comprehend Predict Movie Review</h2><p>Below screenshot result is from AWS Comprehend Sentiment Analysis by using the same text. The result is similar.</p><h3 id="Positive"><a href="#Positive" class="headerlink" title="Positive"></a>Positive</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/aws-comprehend-predict-positive.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/aws-comprehend-predict-positive.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Comprehend Predict Positive Movie Review" style="width:600px;"/></div><span class="image-caption">AWS Comprehend Predict Positive Movie Review</span></div><h3 id="Negative"><a href="#Negative" class="headerlink" title="Negative"></a>Negative</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/aws-comprehend-predict-negative.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/aws-comprehend-predict-negative.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Comprehend Predict Negative Movie Review" style="width:600px;"/></div><span class="image-caption">AWS Comprehend Predict Negative Movie Review</span></div><h2 id="Trained-Model-Predict-Short-Text"><a href="#Trained-Model-Predict-Short-Text" class="headerlink" title="Trained Model Predict Short Text"></a>Trained Model Predict Short Text</h2><p>Our trained model is trained by the more words and sentences of the movie review. Itâ€™s not trained on short text. So, letâ€™s test our trained model on a short text. Below is a short negative text.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Overall, this movie fell short of expectations, failing to deliver on its promise and leaving viewers disappointed.</span><br></pre></td></tr></table></figure><p>The short negative text prediction is: 0.8730284, it is biger than 0.5, which means the sentiment of the given text prediction is wrong. The text is negative, but the model prediction is positive.</p><p>Letâ€™s use more than 50 words movie review text to test our trained model. Below negative movie review text is generated by the <code>ChatGPT</code>, not from the IMDb movie review test dataset.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The film started with promising potential but quickly unraveled into a tedious and confusing mess. The plot was convoluted, jumping between disconnected storylines without coherence. Characters lacked depth, their motivations unclear and actions inexplicable. Despite a talented cast, performances felt uninspired, failing to salvage a script riddled with clichÃ©s and predictable twists. Overall, it was a disappointing experience, leaving viewers bewildered and dissatisfied.</span><br></pre></td></tr></table></figure><p>Above text prediction is: 0.02043398, which means the sentiment of the given text is very negative. The model prediction result as expected.</p><h2 id="Trained-Model-Predict-Other-Domain-Text"><a href="#Trained-Model-Predict-Other-Domain-Text" class="headerlink" title="Trained Model Predict Other Domain Text"></a>Trained Model Predict Other Domain Text</h2><p>In the last, letâ€™s try to use the model to predict other domain instead of the movie review. Letâ€™s use the <code>ChatGPT</code> to generate a more than 50 words about travel feedback.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">My vacation experience was marred by a series of unfortunate events. From delayed flights and lost luggage to subpar accommodations and unhelpful staff, every aspect seemed plagued by mishaps. The tourist attractions were overcrowded, making it impossible to enjoy any peaceful moments. Despite meticulous planning, the trip turned into a stressful ordeal, leaving me wishing I had stayed home instead.</span><br></pre></td></tr></table></figure><p>The text prediction is: 0.3355006, the prediction is negative. Itâ€™s correct. However, compare to the movie review text, the model is not trained on the travel feedback text. Itâ€™s not a good result as we want.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In this post, we have introduced the concept of sentiment analysis and trained a model using the movie review dataset. We have also tested the trained model on movie review and travel feedback text. Beside, we also compared the result with AWS Comprehend Sentiment Analysis. We have seen that our trained model is not good at predicting the sentiment of short text. We need to train the model on more data to improve the accuracy of the prediction. And for the other domain text, like travel feedback, since our model is not trained on this domain, itâ€™s not a good result. The model also need to be trained on more data to improve the accuracy of the prediction.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> AWS </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Keras </tag>
            
            <tag> NLP </tag>
            
            <tag> Tensorflow </tag>
            
            <tag> Sentiment Analysis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Machine Learning Sentiment Analysis - Evaluate &amp; Save Model</title>
      <link href="/2023/04/18/machine-learning-sentiment-analysis-evaluate-save-model/"/>
      <url>/2023/04/18/machine-learning-sentiment-analysis-evaluate-save-model/</url>
      
        <content type="html"><![CDATA[<p>In previous post, we have trained a machine learning model to classify sentiments of movie reviews. In this post, we will evaluate the performance of the model and save the model for future use.</p><h2 id="Evaluate-Model"><a href="#Evaluate-Model" class="headerlink" title="Evaluate Model"></a>Evaluate Model</h2><p>To evaluate the performance of the model, we will use the test dataset. Using the <code>evaluate</code> method of the model to calculate the loss and accuracy of the model on the test dataset.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># evaluate model on test dataset</span></span><br><span class="line">loss, accuracy = trained_model.evaluate(test_dataset)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Test accuracy:&quot;</span>, accuracy)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Test loss:&quot;</span>, loss)</span><br></pre></td></tr></table></figure><p>The <code>evaluate</code> method returns two values, the loss and the accuracy of the model on the test dataset. We can use these values to evaluate the performance of the model. below is result of the evaluation on the test dataset:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Test accuracy: 0.8694400191307068</span><br><span class="line">Test loss: 0.3562678098678589</span><br></pre></td></tr></table></figure><h2 id="Save-Model"><a href="#Save-Model" class="headerlink" title="Save Model"></a>Save Model</h2><p>To save the model for future use, we will use the <code>save</code> method of the model. The trained model will be saved in the local machine as a <code>.keras</code> file. The model file format extension can be <code>.h5</code>, <code>.tf</code> or <code>.keras</code>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">save_model</span>(<span class="params">vectorize_layer, model, model_saved_path</span>):</span><br><span class="line">    export_model = tf.keras.Sequential([</span><br><span class="line">        vectorize_layer, <span class="comment"># text vectorization layer</span></span><br><span class="line">        model <span class="comment"># the model trained before</span></span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line">    export_model.<span class="built_in">compile</span>(</span><br><span class="line">        loss=losses.BinaryCrossentropy(from_logits=<span class="literal">False</span>), </span><br><span class="line">        optimizer=<span class="string">&quot;adam&quot;</span>, </span><br><span class="line">        metrics=[<span class="string">&#x27;accuracy&#x27;</span>]</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># save model</span></span><br><span class="line">    export_model.save(model_saved_path)</span><br><span class="line">    <span class="keyword">return</span> export_model</span><br></pre></td></tr></table></figure><p>In above code, we first create a new model by combining the <code>vectorize_layer</code> and the trained <code>model</code>. We then compile the model with the same loss function, optimizer and metrics used during training. Finally, we save the model using the <code>save</code> method and return the saved model. </p><p>Here is a thing need to be noticed, we need to put the <code>vectorize_layer</code> as the first layer of the model so that it can be used to preprocess the text data before passing it to the trained model.</p><p>In the next blog, we will introduce how to load the model and use it to make predictions on new data.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Keras </tag>
            
            <tag> NLP </tag>
            
            <tag> Tensorflow </tag>
            
            <tag> Sentiment Analysis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Machine Learning Sentiment Analysis - Train Model</title>
      <link href="/2023/04/02/machine-learning-sentiment-analysis-train-model/"/>
      <url>/2023/04/02/machine-learning-sentiment-analysis-train-model/</url>
      
        <content type="html"><![CDATA[<p>In previous blog, we have built a tensorflow model to classify sentiments of movie reviews base on tensorflow and keras high level API, and compile it. In this blog, we will train the model on the movie review dataset to improve the accuracy of the model.</p><h2 id="Train-Model"><a href="#Train-Model" class="headerlink" title="Train Model"></a>Train Model</h2><p>To train the model, we need to pass the training dataset<code>and validation dataset into the model. The</code>training dataset<code>is used to train the model and the</code>validation dataset&#96; is used to evaluate the modelâ€™s performance. Beside, we also need to specify the number of epochs to train the model.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># train the model</span></span><br><span class="line">history = model.fit(</span><br><span class="line">    train_ds, <span class="comment"># training dataset  </span></span><br><span class="line">    validation_data=val_ds, <span class="comment"># validation dataset</span></span><br><span class="line">    epochs=config.epochs <span class="comment"># number of training rounds over the entire dataset</span></span><br><span class="line">  )</span><br></pre></td></tr></table></figure><p>In above code, we are using <code>fit()</code> method to train the model. The <code>fit()</code> method takes two arguments, <code>train_ds</code> and <code>val_ds</code>. <code>train_ds</code> is the training dataset and <code>val_ds</code> is the validation dataset. The <code>epochs</code> argument specifies the number of training rounds over the entire dataset. The <code>fit()</code> method returns a <code>history</code> object which contains the training and validation metrics. </p><p>Below is the model training epochos, we defined the epochs as 11, so you can see the there is 11 steps to train the model. Each step is an epoch and displaying the training and validation loss and accuracy.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># the trainning times</span></span><br><span class="line">epochs = <span class="number">11</span></span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/sentiment-analysis-model-train-epochs.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/sentiment-analysis-model-train-epochs.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Model Train Epochs" style="width:800px;"/></div><span class="image-caption">Model Train Epochs</span></div><h2 id="Plot-Training-Metrics"><a href="#Plot-Training-Metrics" class="headerlink" title="Plot Training Metrics"></a>Plot Training Metrics</h2><p>Base on history object, we can plot the training and validation metrics. We using <code>matplotlib</code> library to plot the metrics.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">display_training_loss_history</span>(<span class="params">trained_history</span>):</span><br><span class="line">    history_dict = trained_history.history</span><br><span class="line">    history_dict.keys()</span><br><span class="line">    loss = history_dict[<span class="string">&#x27;loss&#x27;</span>]</span><br><span class="line">    val_loss = history_dict[<span class="string">&#x27;val_loss&#x27;</span>]</span><br><span class="line">    epochs = <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(history_dict[<span class="string">&#x27;binary_accuracy&#x27;</span>]) + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    plt.plot(epochs, loss, <span class="string">&#x27;bo&#x27;</span>, label=<span class="string">&#x27;Training Loss&#x27;</span>) <span class="comment"># &quot;bo&quot; is for &quot;blue dot&quot;</span></span><br><span class="line">    plt.plot(epochs, val_loss, <span class="string">&#x27;b&#x27;</span>, label=<span class="string">&#x27;Validation Loss&#x27;</span>) <span class="comment"># b is for &quot;solid blue line&quot;</span></span><br><span class="line">    plt.title(<span class="string">&#x27;Training and Validation Loss&#x27;</span>)</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Epochs&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Loss&#x27;</span>)</span><br><span class="line">    plt.legend()</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">display_training_accuracy_history</span>(<span class="params">trained_history</span>):</span><br><span class="line">    history_dict = trained_history.history</span><br><span class="line">    history_dict.keys()</span><br><span class="line">    acc = history_dict[<span class="string">&#x27;binary_accuracy&#x27;</span>]</span><br><span class="line">    val_acc = history_dict[<span class="string">&#x27;val_binary_accuracy&#x27;</span>]</span><br><span class="line">    epochs = <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(acc) + <span class="number">1</span>)</span><br><span class="line">    plt.plot(epochs, acc, <span class="string">&#x27;bo&#x27;</span>, label=<span class="string">&#x27;Training Accuracy&#x27;</span>)</span><br><span class="line">    plt.plot(epochs, val_acc, <span class="string">&#x27;b&#x27;</span>, label=<span class="string">&#x27;Validation Accuracy&#x27;</span>)</span><br><span class="line">    plt.title(<span class="string">&#x27;Training and Validation Accuracy&#x27;</span>)</span><br><span class="line">    plt.xlabel(<span class="string">&#x27;Epochs&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;Accuracy&#x27;</span>)</span><br><span class="line">    plt.legend(loc=<span class="string">&#x27;lower right&#x27;</span>)</span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure><p>Above code defines two functions to plot the training and validation loss and accuracy. We can call these functions after training the model to plot the metrics. Below is plot graphically of the training and validation loss and accuracy.</p><h3 id="Training-and-Validation-Accuracy"><a href="#Training-and-Validation-Accuracy" class="headerlink" title="Training and Validation Accuracy"></a>Training and Validation Accuracy</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/sentiment-analysis-model-train-accuracy.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/sentiment-analysis-model-train-accuracy.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Training and Validation Accuracy" style="width:800px;"/></div><span class="image-caption">Training and Validation Accuracy</span></div><p>In the above graph, we can see that the training accuracy and validation accuracy are close to each other, which means the model is not overfitting. The training and validation accuracy are increasing.</p><h3 id="Training-and-Validation-Loss"><a href="#Training-and-Validation-Loss" class="headerlink" title="Training and Validation Loss"></a>Training and Validation Loss</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/sentiment-analysis-model-train-loss.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/sentiment-analysis-model-train-loss.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Training and Validation Loss" style="width:800px;"/></div><span class="image-caption">Training and Validation Loss</span></div><p>In above graph, we can see that the training loss and validation loss are decreasing. This means the model is improving its performance on the training dataset.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In this blog, we have trained the model on the movie review dataset to improve the accuracy of the model. We have also plotted the training and validation metrics to check the performance of the model. In the next blog, we will evaluate the model on the test dataset.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Keras </tag>
            
            <tag> NLP </tag>
            
            <tag> Tensorflow </tag>
            
            <tag> Sentiment Analysis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Machine Learning Sentiment Analysis - Compile Model</title>
      <link href="/2023/03/25/machine-learning-sentiment-analysis-compile-model/"/>
      <url>/2023/03/25/machine-learning-sentiment-analysis-compile-model/</url>
      
        <content type="html"><![CDATA[<p>In previous blog, we have built a machine learning model to classify the sentiment of a given text. In this blog, we will introduce how to compile the model.</p><h2 id="Compile-Model"><a href="#Compile-Model" class="headerlink" title="Compile Model"></a>Compile Model</h2><p>After building the model, we need to compile it. Compiling the model involves specifying the loss function, optimizer, and evaluation metric.</p><h3 id="Loss-Function"><a href="#Loss-Function" class="headerlink" title="Loss Function"></a>Loss Function</h3><p>The loss function is used to measure the difference between the predicted output and the actual output. It is used to minimize the difference between the predicted output and the actual output.</p><p>There are several loss functions available in <code>Keras</code>:</p><ul><li>Binary Crossentropy</li><li>Categorical Crossentropy</li></ul><p><code>æŸå¤±å‡½æ•°ï¼ˆLoss Functionï¼‰</code>æ˜¯æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ ä¸­ç”¨äºŽè¡¡é‡æ¨¡åž‹é¢„æµ‹å€¼ä¸ŽçœŸå®žå€¼ä¹‹é—´å·®å¼‚çš„å‡½æ•°ã€‚å®ƒçš„ä½œç”¨æ˜¯è¯„ä¼°æ¨¡åž‹çš„é¢„æµ‹æ€§èƒ½ï¼Œå¹¶æŒ‡å¯¼æ¨¡åž‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¿›è¡Œå‚æ•°è°ƒæ•´ï¼Œä»¥æœ€å°åŒ–é¢„æµ‹è¯¯å·®ã€‚</p><ul><li><strong>åº¦é‡è¯¯å·®</strong>ï¼šæŸå¤±å‡½æ•°è®¡ç®—æ¨¡åž‹é¢„æµ‹å€¼ä¸ŽçœŸå®žå€¼ä¹‹é—´çš„å·®å¼‚ï¼Œä»Žè€Œåº¦é‡æ¨¡åž‹çš„é¢„æµ‹è¯¯å·®ã€‚</li><li><strong>ä¼˜åŒ–ç›®æ ‡</strong>ï¼šæŸå¤±å‡½æ•°ä¸ºæ¨¡åž‹çš„ä¼˜åŒ–æä¾›äº†ä¸€ä¸ªæ˜Žç¡®çš„ç›®æ ‡ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä¼˜åŒ–ç®—æ³•ï¼ˆå¦‚æ¢¯åº¦ä¸‹é™ï¼‰ä¼šè°ƒæ•´æ¨¡åž‹çš„å‚æ•°ï¼Œä»¥æœ€å°åŒ–æŸå¤±å‡½æ•°çš„å€¼ã€‚</li><li><strong>è¯„ä¼°æ€§èƒ½</strong>ï¼šæŸå¤±å‡½æ•°çš„å€¼å¯ä»¥ç”¨äºŽè¯„ä¼°æ¨¡åž‹çš„æ€§èƒ½ã€‚é€šå¸¸ï¼ŒæŸå¤±å‡½æ•°çš„å€¼è¶Šå°ï¼Œæ¨¡åž‹çš„é¢„æµ‹æ€§èƒ½è¶Šå¥½</li></ul><h3 id="Optimizer"><a href="#Optimizer" class="headerlink" title="Optimizer"></a>Optimizer</h3><p>The optimizer is used to update the weights of the model during training. It adjusts the weights to minimize the loss function. There are several optimizers available in <code>Keras</code>:</p><ul><li>SGD (Stochastic Gradient Descent)</li><li>Adam (Adaptive Moment Estimation)</li><li>Adagrad</li><li>Adadelta</li><li>RMSprop</li></ul><p><code>ä¼˜åŒ–å™¨ï¼ˆOptimizerï¼‰</code>æ˜¯æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ ä¸­ç”¨äºŽæ›´æ–°æ¨¡åž‹å‚æ•°ä»¥æœ€å°åŒ–æŸå¤±å‡½æ•°çš„ç®—æ³•ã€‚å®ƒçš„ä½œç”¨æ˜¯é€šè¿‡è°ƒæ•´æ¨¡åž‹çš„å‚æ•°ï¼Œä½¿å¾—æŸå¤±å‡½æ•°çš„å€¼å°½å¯èƒ½å°ï¼Œä»Žè€Œæé«˜æ¨¡åž‹çš„é¢„æµ‹æ€§èƒ½ã€‚</p><ul><li><strong>å‚æ•°æ›´æ–°</strong>ï¼šä¼˜åŒ–å™¨æ ¹æ®æŸå¤±å‡½æ•°çš„æ¢¯åº¦ä¿¡æ¯ï¼Œè®¡ç®—å‡ºæ¨¡åž‹å‚æ•°çš„æ›´æ–°æ–¹å‘å’Œæ­¥é•¿ï¼Œä»Žè€Œæ›´æ–°æ¨¡åž‹çš„å‚æ•°ã€‚</li><li><strong>åŠ é€Ÿæ”¶æ•›</strong>ï¼šä¼˜åŒ–å™¨é€šè¿‡å„ç§ç­–ç•¥ï¼ˆå¦‚åŠ¨é‡ã€è‡ªé€‚åº”å­¦ä¹ çŽ‡ç­‰ï¼‰ï¼ŒåŠ é€Ÿæ¨¡åž‹çš„æ”¶æ•›è¿‡ç¨‹ï¼Œä½¿å¾—æ¨¡åž‹æ›´å¿«åœ°è¾¾åˆ°æœ€ä¼˜è§£ã€‚</li><li><strong>é˜²æ­¢è¿‡æ‹Ÿåˆ</strong>ï¼šä¼˜åŒ–å™¨å¯ä»¥é€šè¿‡æ­£åˆ™åŒ–ç­‰æŠ€æœ¯ï¼Œé˜²æ­¢æ¨¡åž‹åœ¨è®­ç»ƒæ•°æ®ä¸Šè¿‡æ‹Ÿåˆï¼Œæé«˜æ¨¡åž‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</li></ul><h3 id="Evaluation-Metric"><a href="#Evaluation-Metric" class="headerlink" title="Evaluation Metric"></a>Evaluation Metric</h3><p>The evaluation metric is used to measure the performance of the model.  There are several evaluation metrics available in <code>Keras</code>:</p><ul><li>Accuracy</li><li>Precision</li><li>Recall</li><li>F1 Score</li><li>AUC (Area Under the Curve)</li></ul><p><code>æŒ‡æ ‡ï¼ˆMetricsï¼‰</code>æ˜¯æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ ä¸­ç”¨äºŽè¯„ä¼°æ¨¡åž‹æ€§èƒ½çš„é‡åŒ–æ ‡å‡†ã€‚å®ƒä»¬çš„ä½œç”¨æ˜¯æä¾›ä¸€ç§å®¢è§‚çš„æ–¹å¼æ¥è¡¡é‡æ¨¡åž‹çš„é¢„æµ‹èƒ½åŠ›ï¼Œå¹¶å¸®åŠ©ç”¨æˆ·äº†è§£æ¨¡åž‹åœ¨ä¸åŒæ–¹é¢çš„è¡¨çŽ°ã€‚</p><ul><li><strong>æ€§èƒ½è¯„ä¼°</strong>ï¼šæŒ‡æ ‡ç”¨äºŽè¯„ä¼°æ¨¡åž‹åœ¨è®­ç»ƒã€éªŒè¯å’Œæµ‹è¯•æ•°æ®ä¸Šçš„æ€§èƒ½ã€‚ä¸åŒçš„æŒ‡æ ‡å¯ä»¥è¡¡é‡æ¨¡åž‹åœ¨ä¸åŒæ–¹é¢çš„è¡¨çŽ°ï¼Œå¦‚å‡†ç¡®çŽ‡ã€ç²¾ç¡®çŽ‡ã€å¬å›žçŽ‡ã€F1åˆ†æ•°ç­‰ã€‚</li><li><strong>ç›‘æŽ§è®­ç»ƒè¿‡ç¨‹</strong>ï¼šæŒ‡æ ‡å¯ä»¥ç”¨äºŽç›‘æŽ§æ¨¡åž‹çš„è®­ç»ƒè¿‡ç¨‹ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£æ¨¡åž‹æ˜¯å¦åœ¨æ­£ç¡®åœ°å­¦ä¹ å’Œæ”¹è¿›ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡è§‚å¯Ÿè®­ç»ƒå’ŒéªŒè¯æŒ‡æ ‡çš„å˜åŒ–ï¼Œå¯ä»¥åˆ¤æ–­æ¨¡åž‹æ˜¯å¦è¿‡æ‹Ÿåˆæˆ–æ¬ æ‹Ÿåˆã€‚</li><li><strong>æ¨¡åž‹é€‰æ‹©</strong>ï¼šæŒ‡æ ‡å¯ä»¥ç”¨äºŽæ¯”è¾ƒä¸åŒæ¨¡åž‹çš„æ€§èƒ½ï¼Œä»Žè€Œé€‰æ‹©æœ€ä¼˜çš„æ¨¡åž‹ã€‚ä¾‹å¦‚ï¼Œåœ¨å¤šä¸ªæ¨¡åž‹ä¸­ï¼Œå¯ä»¥é€‰æ‹©åœ¨éªŒè¯æ•°æ®ä¸Šè¡¨çŽ°æœ€å¥½çš„æ¨¡åž‹è¿›è¡Œè¿›ä¸€æ­¥çš„æµ‹è¯•å’Œéƒ¨ç½²ã€‚</li></ul><p>Now, letâ€™s compile our model with <code>Binary Crossentropy</code> loss function, <code>Adam</code> optimizer, and <code>Accuracy</code> evaluation metric. Below is code.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># compile the model</span></span><br><span class="line">model.<span class="built_in">compile</span>(</span><br><span class="line">   <span class="comment"># Loss function (äºŒåˆ†ç±»äº¤å‰ç†µæŸå¤±å‡½æ•°), aim to calculate the difference between the predicted and actual values</span></span><br><span class="line">    loss=losses.BinaryCrossentropy(), </span><br><span class="line">    <span class="comment"># A adam optimizer(è‡ªé€‚åº”çŸ©ä¼°è®¡ä¼˜åŒ–å™¨)ï¼Œ a popular optimizer for neural networks, aim to minimize the loss function</span></span><br><span class="line">    optimizer=<span class="string">&#x27;adam&#x27;</span>, </span><br><span class="line">    <span class="comment"># Binary Accuracy metric(äºŒåˆ†ç±»å‡†ç¡®çŽ‡è¯„ä¼°æŒ‡æ ‡)ï¼Œ&gt;0.5 is positiveï¼Œ&lt;0.5 is negative</span></span><br><span class="line">    metrics=[tf.metrics.BinaryAccuracy(threshold=<span class="number">0.5</span>)]</span><br><span class="line">  ) </span><br></pre></td></tr></table></figure><p>In above code, we have used <code>BinaryCrossentropy</code> loss function, <code>adam</code> optimizer, and <code>BinaryAccuracy</code> metric. We have also set the threshold to 0.5, which means that if the predicted value is greater than 0.5, it is considered as positive, otherwise it is considered as negative. </p><p>Now, we have compiled our model. In next blog, we will introduce the process of training the model.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Keras </tag>
            
            <tag> NLP </tag>
            
            <tag> Tensorflow </tag>
            
            <tag> Sentiment Analysis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Machine Learning Sentiment Analysis - Build Model</title>
      <link href="/2023/03/12/machine-learning-sentiment-analysis-build-model/"/>
      <url>/2023/03/12/machine-learning-sentiment-analysis-build-model/</url>
      
        <content type="html"><![CDATA[<p>In previous post, we have talk about the <code>Text Vectorization</code> which is the process of converting text data into numerical data. In this post, we will build a <code>Sentiment Analysis</code> model using <code>Keras</code> and <code>Tensorflow</code> libraries.</p><h2 id="Neural-Network"><a href="#Neural-Network" class="headerlink" title="Neural Network"></a>Neural Network</h2><p>Before build the <code>tensorflow</code> model, letâ€™s take a look the <code>Neuron Network</code>. The <code>Neuron Network</code> is a type of artificial neural network that is based on the structure of the human brain. It consists of layers of interconnected neurons, or nodes. Each neuron receives input from other neurons, processes it, and then passes the output to other neurons. The final output of the network is a prediction of the networkâ€™s input.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/neural-network.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/neural-network.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Neural Network Architecture" style="width:800px;"/></div><span class="image-caption">Neural Network Architecture</span></div><p>In the Neural Network, there are three layers, input, hidden, and output. The input layer receives the input data, the hidden layer processes the data, and the output layer produces the output. The hidden layer consists of multiple neurons, each with its own weights and biases. The weights and biases are adjusted during the training process to minimize the error between the predicted output and the actual output.</p><h2 id="Sentiment-Analysis-Model"><a href="#Sentiment-Analysis-Model" class="headerlink" title="Sentiment Analysis Model"></a>Sentiment Analysis Model</h2><p>In the <code>Sentiment Analysis</code> model, we will use the <code>Keras</code> library to build the <code>Tensorflow</code> model. The <code>Keras</code> library is a high-level neural networks API, written in Python and capable of running on top of TensorFlow, Pytorch etc. It was developed with a focus on enabling fast experimentation.</p><p>Below is the code to build the <code>Sentiment Analysis</code> model using <code>Keras</code> and <code>Tensorflow</code> libraries. We using <code>Embedding</code>, <code>GlobalAveragePooling1D</code>, <code>Dense</code>, <code>Dropout</code> layers to build the model.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">model = tf.keras.Sequential([</span><br><span class="line">  <span class="comment"># Embedding layer with 64 dimensions</span></span><br><span class="line">  layers.Embedding(config.max_features, config.embedding_dim),</span><br><span class="line">  layers.Dropout(<span class="number">0.3</span>),</span><br><span class="line">  <span class="comment"># average pooling layer to get the mean of all the word embeddings in a sentence</span></span><br><span class="line">  layers.GlobalAveragePooling1D(), </span><br><span class="line">  layers.Dropout(<span class="number">0.2</span>),</span><br><span class="line">  <span class="comment"># fully connected layer with 64 nerual units, relual activation function f(x)=max(0, x). Popular for deep neural networks</span></span><br><span class="line">  layers.Dense(config.embedding_dim, activation=<span class="string">&#x27;relu&#x27;</span>),</span><br><span class="line">  <span class="comment"># dropout layer to prevent overfitting, 0.2 means 20% of the neurons will be dropped out</span></span><br><span class="line">  layers.Dropout(<span class="number">0.2</span>), </span><br><span class="line">  layers.Dense(config.embedding_dim, activation=<span class="string">&#x27;relu&#x27;</span>),</span><br><span class="line">  layers.Dropout(<span class="number">0.1</span>),</span><br><span class="line">  <span class="comment"># output layer with sigmoid activation function, output probabilities (0 - 1)</span></span><br><span class="line">  layers.Dense(<span class="number">1</span>, activation=<span class="string">&#x27;sigmoid&#x27;</span>)]) </span><br><span class="line">model.summary()</span><br></pre></td></tr></table></figure><p>To better understand each layerâ€™s purpose, letâ€™s break it down into Chinese. </p><h3 id="Sequential-Model"><a href="#Sequential-Model" class="headerlink" title="Sequential Model"></a>Sequential Model</h3><p><code>Sequential</code>æ˜¯Kerasä¸­çš„ä¸€ç§æ¨¡åž‹ï¼Œå®ƒæ˜¯ä¸€ç§çº¿æ€§å †å æ¨¡åž‹ï¼Œå³å°†å¤šä¸ªå±‚è¿žæŽ¥åœ¨ä¸€èµ·ã€‚å®ƒå¯ä»¥å°†å¤šä¸ªå±‚ä½œä¸ºä¸€ä¸ªæ•´ä½“æ¥çœ‹å¾…ï¼Œå¹¶å°†å…¶è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªå±‚çš„è¾“å…¥ã€‚</p><h3 id="Embedding-Layer"><a href="#Embedding-Layer" class="headerlink" title="Embedding Layer"></a>Embedding Layer</h3><p><code>Embedding</code>å±‚æ˜¯ä¸€ç§ç”¨äºŽå°†æ•´æ•°åºåˆ—ï¼ˆé€šå¸¸æ˜¯è¯æ±‡è¡¨ä¸­çš„å•è¯ç´¢å¼•ï¼‰è½¬æ¢ä¸ºå¯†é›†å‘é‡è¡¨ç¤ºçš„å±‚ã€‚å®ƒçš„ä½œç”¨æ˜¯å°†ç¦»æ•£çš„ã€é«˜ç»´åº¦çš„è¾“å…¥ï¼ˆå¦‚å•è¯ç´¢å¼•ï¼‰æ˜ å°„åˆ°è¿žç»­çš„ã€ä½Žç»´åº¦çš„å‘é‡ç©ºé—´ä¸­ã€‚<br><strong>è¯åµŒå…¥</strong>ï¼šå°†è¯æ±‡è¡¨ä¸­çš„æ¯ä¸ªå•è¯æ˜ å°„åˆ°ä¸€ä¸ªå›ºå®šå¤§å°çš„å‘é‡ã€‚è¿™äº›å‘é‡å¯ä»¥æ•æ‰å•è¯ä¹‹é—´çš„è¯­ä¹‰å…³ç³»ï¼Œä¾‹å¦‚ç›¸ä¼¼çš„å•è¯åœ¨å‘é‡ç©ºé—´ä¸­ä¼šæ›´æŽ¥è¿‘ã€‚<br><strong>é™ç»´</strong>ï¼šå°†é«˜ç»´åº¦çš„è¾“å…¥ï¼ˆå¦‚è¯æ±‡è¡¨ä¸­çš„å•è¯ç´¢å¼•ï¼‰è½¬æ¢ä¸ºä½Žç»´åº¦çš„å‘é‡è¡¨ç¤ºï¼Œä»Žè€Œå‡å°‘æ¨¡åž‹çš„å‚æ•°æ•°é‡å’Œè®¡ç®—å¤æ‚åº¦ã€‚</p><h3 id="GlobalAveragePooling1D-Layer"><a href="#GlobalAveragePooling1D-Layer" class="headerlink" title="GlobalAveragePooling1D Layer"></a>GlobalAveragePooling1D Layer</h3><p><code>GlobalAveragePooling1D</code>æ˜¯Kerasä¸­çš„ä¸€ç§æ± åŒ–å±‚ï¼Œç”¨äºŽä¸€ç»´æ•°æ®ï¼ˆå¦‚æ—¶é—´åºåˆ—æˆ–æ–‡æœ¬æ•°æ®ï¼‰ã€‚å®ƒçš„ä½œç”¨æ˜¯å°†è¾“å…¥çš„æ¯ä¸ªç‰¹å¾ç»´åº¦è¿›è¡Œå…¨å±€å¹³å‡æ± åŒ–ï¼Œä»Žè€Œå°†æ¯ä¸ªç‰¹å¾ç»´åº¦åŽ‹ç¼©ä¸ºä¸€ä¸ªå•ä¸€çš„å€¼ã€‚<br><strong>é™ç»´</strong>ï¼šé€šè¿‡è®¡ç®—æ¯ä¸ªç‰¹å¾ç»´åº¦çš„å¹³å‡å€¼ï¼Œå°†è¾“å…¥çš„ç»´åº¦å‡å°‘åˆ°ä¸€ä¸ªå•ä¸€çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœè¾“å…¥æ˜¯ä¸€ä¸ªå½¢çŠ¶ä¸º(batch_size, steps, features)çš„å¼ é‡ï¼ŒGlobalAveragePooling1Då°†è¾“å‡ºä¸€ä¸ªå½¢çŠ¶ä¸º(batch_size, features)çš„å¼ é‡ã€‚<br><strong>ç‰¹å¾åŽ‹ç¼©</strong>ï¼šé€šè¿‡å…¨å±€å¹³å‡æ± åŒ–ï¼Œå¯ä»¥æœ‰æ•ˆåœ°åŽ‹ç¼©è¾“å…¥çš„ç‰¹å¾ï¼Œå‡å°‘æ¨¡åž‹çš„å‚æ•°æ•°é‡å’Œè®¡ç®—å¤æ‚åº¦ã€‚</p><h3 id="Dense-Layer"><a href="#Dense-Layer" class="headerlink" title="Dense Layer"></a>Dense Layer</h3><p><code>Dense</code>å±‚æ˜¯ä¸€ç§å…¨è¿žæŽ¥å±‚ï¼ˆfully connected layerï¼‰ï¼Œä¹Ÿç§°ä¸ºå¯†é›†å±‚ã€‚å®ƒçš„ä½œç”¨æ˜¯å°†è¾“å…¥çš„æ¯ä¸ªå…ƒç´ ä¸Žè¯¥å±‚çš„æ¯ä¸ªç¥žç»å…ƒè¿›è¡Œè¿žæŽ¥ï¼Œå¹¶åº”ç”¨çº¿æ€§å˜æ¢å’Œæ¿€æ´»å‡½æ•°ã€‚<br><strong>çº¿æ€§å˜æ¢</strong>ï¼šå¯¹è¾“å…¥æ•°æ®è¿›è¡Œçº¿æ€§ç»„åˆï¼Œå³é€šè¿‡æƒé‡çŸ©é˜µå’Œåç½®å‘é‡å¯¹è¾“å…¥è¿›è¡ŒåŠ æƒæ±‚å’Œã€‚<br><strong>æ¿€æ´»å‡½æ•°</strong>ï¼šåœ¨å®Œæˆçº¿æ€§å˜æ¢åŽï¼Œåº”ç”¨æ¿€æ´»å‡½æ•°ï¼ˆå¦‚ReLUã€sigmoidã€tanhç­‰ï¼‰ä»¥å¼•å…¥éžçº¿æ€§ç‰¹æ€§ï¼Œä»Žè€Œä½¿ç¥žç»ç½‘ç»œèƒ½å¤Ÿå­¦ä¹ å’Œè¡¨ç¤ºæ›´å¤æ‚çš„å‡½æ•°ã€‚</p><h3 id="Dropout-Layer"><a href="#Dropout-Layer" class="headerlink" title="Dropout Layer"></a>Dropout Layer</h3><p><code>Dropout</code>å±‚æ˜¯ä¸€ç§æ­£åˆ™åŒ–æŠ€æœ¯ï¼Œç”¨äºŽé˜²æ­¢ç¥žç»ç½‘ç»œè¿‡æ‹Ÿåˆã€‚å®ƒçš„ä½œç”¨æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­éšæœºåœ°å°†ä¸€äº›ç¥žç»å…ƒçš„è¾“å‡ºè®¾ç½®ä¸º0ï¼Œä»Žè€Œä½¿å¾—ç½‘ç»œä¸ä¼šè¿‡åº¦ä¾èµ–äºŽæŸäº›ç‰¹å®šçš„ç¥žç»å…ƒï¼Œå¢žå¼ºäº†æ¨¡åž‹çš„æ³›åŒ–èƒ½åŠ›ã€‚<br><strong>éšæœºå¤±æ´»</strong>ï¼šåœ¨æ¯æ¬¡è®­ç»ƒè¿­ä»£ä¸­ï¼ŒDropoutå±‚ä¼šéšæœºé€‰æ‹©ä¸€å®šæ¯”ä¾‹çš„ç¥žç»å…ƒï¼ˆç”±å‚æ•°rateæŒ‡å®šï¼Œä¾‹å¦‚0.1è¡¨ç¤º10%çš„ç¥žç»å…ƒï¼‰ï¼Œå¹¶å°†å®ƒä»¬çš„è¾“å‡ºè®¾ç½®ä¸º0ã€‚<br><strong>å‡å°‘è¿‡æ‹Ÿåˆ</strong>ï¼šé€šè¿‡éšæœºå¤±æ´»ç¥žç»å…ƒï¼ŒDropoutå±‚å¯ä»¥å‡å°‘ç¥žç»ç½‘ç»œå¯¹ç‰¹å®šè¾“å…¥ç‰¹å¾çš„ä¾èµ–ï¼Œä»Žè€Œé˜²æ­¢æ¨¡åž‹åœ¨è®­ç»ƒæ•°æ®ä¸Šè¿‡åº¦æ‹Ÿåˆï¼Œæé«˜æ¨¡åž‹åœ¨æœªè§æ•°æ®ä¸Šçš„æ³›åŒ–èƒ½åŠ›ã€‚</p><h3 id="Sigmoid-Activation-Function"><a href="#Sigmoid-Activation-Function" class="headerlink" title="Sigmoid Activation Function"></a>Sigmoid Activation Function</h3><p><code>Sigmoid</code>æ¿€æ´»å‡½æ•°æ˜¯ä¸€ç§å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°ï¼Œå®ƒå°†è¾“å…¥å€¼åŽ‹ç¼©åˆ°0-1ä¹‹é—´ï¼Œå¹¶å°†è¾“å‡ºè§£é‡Šä¸ºæ¦‚çŽ‡ã€‚</p><p>The <code>summary()</code> method is used to print the model architecture. It provides a summary of the layers in the model, including the number of parameters and the shape of the output.</p><p>So now, we have build the <code>Sentiment Analysis</code> model using <code>Keras</code> and <code>Tensorflow</code> libraries. In the next post, we will train the model and evaluate its performance.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Keras </tag>
            
            <tag> NLP </tag>
            
            <tag> Tensorflow </tag>
            
            <tag> Sentiment Analysis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Machine Learning Sentiment Analysis - Text Vectorization</title>
      <link href="/2023/02/21/machine-learning-sentiment-analysis-text-vectorization/"/>
      <url>/2023/02/21/machine-learning-sentiment-analysis-text-vectorization/</url>
      
        <content type="html"><![CDATA[<p>In previous blog, we discussed about the basics of Sentiment Analysis and load the raw dataset which is IMDb movie reviews. In this blog, we will discuss about text vectorization and how to use it in Sentiment Analysis.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/text-vectorization.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/text-vectorization.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Text Vectorization" style="width:800px;"/></div><span class="image-caption">Text Vectorization</span></div><h2 id="Text-Vectorization-Methods"><a href="#Text-Vectorization-Methods" class="headerlink" title="Text Vectorization Methods"></a>Text Vectorization Methods</h2><p>Before train the model, we need to convert the text data into numerical data. Text representation is the process of converting text data into a numerical form that can be used for machine learning tasks. There are several ways to represent text data, such as <code>Bag-of-Words</code>, <code>TF-IDF</code>, and <code>Word Embeddings</code>.</p><h3 id="Bag-of-Words-BoW"><a href="#Bag-of-Words-BoW" class="headerlink" title="Bag-of-Words (BoW)"></a>Bag-of-Words (BoW)</h3><p><code>Bag-of-Words (BoW)</code> is a method of text representation that converts text into a word frequency vector. In this representation, the text is treated as a â€œbagâ€ containing all the words, without considering their order and grammatical structure. The number of times each word appears in the text is recorded, forming a vector. This method ignores the order and context of words but is simple and easy to implement.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/BoW-bag-of-words.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/BoW-bag-of-words.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="BoW Text Vectorization" style="width:800px;"/></div><span class="image-caption">BoW Text Vectorization</span></div><h3 id="TF-IDF-Term-Frequency-Inverse-Document-Frequency"><a href="#TF-IDF-Term-Frequency-Inverse-Document-Frequency" class="headerlink" title="TF-IDF (Term Frequency-Inverse Document Frequency)"></a>TF-IDF (Term Frequency-Inverse Document Frequency)</h3><p><code>TF-IDF</code> is a statistical method used to evaluate the importance of a word in a document collection or corpus. It consists of two parts:<br><strong>Term Frequency (TF):</strong> The frequency of a word in a document.<br><strong>Inverse Document Frequency (IDF):</strong> The inverse of the document frequency, which measures the general importance of a word across all documents. IDF is calculated by taking the logarithm of the total number of documents divided by the number of documents containing the word.</p><p>The TF-IDF value is the product of TF and IDF, used to measure the importance of a word in a document. The higher the TF-IDF value, the more important the word is in the document.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/TF-IDF.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/TF-IDF.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="TF-IDF Text Vectorization" style="width:800px;"/></div><span class="image-caption">TF-IDF Text Vectorization</span></div><h3 id="Word-Embeddings"><a href="#Word-Embeddings" class="headerlink" title="Word Embeddings"></a>Word Embeddings</h3><p><code>Word Embedding</code> is a technique that represents words as dense vectors. Unlike traditional <code>Bag-of-Words</code> and <code>TF-IDF</code> methods, Word Embedding captures semantic relationships between words. Through training, these vectors can represent words in a vector space, where words with similar meanings are closer to each other in the vector space. The main advantages of Word Embedding include:<br><strong>Semantic Capture:</strong> It can capture semantic relationships between words, for example, the distance between â€œkingâ€ and â€œqueenâ€ in the vector space will be closer than the distance between â€œkingâ€ and â€œappleâ€.<br><strong>Dimensionality Reduction:</strong> Compared to high-dimensional One-Hot encoding, Word Embedding typically uses lower-dimensional vectors to represent words.<br><strong>Context Awareness:</strong> Some advanced Word Embedding techniques (such as BERT and GPT) can capture the meaning of words in different contexts.<br>In deep learning models, Word Embedding is usually used as an input layer to convert text data into numerical vectors, making it easier for neural networks to process.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/word-embedding.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/word-embedding.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Word Embedding Text Vectorization" style="width:800px;"/></div><span class="image-caption">Word Embedding Text Vectorization</span></div><h2 id="Text-Vectorization"><a href="#Text-Vectorization" class="headerlink" title="Text Vectorization"></a>Text Vectorization</h2><p>In this section, we will discuss about different text vectorization techniques and how to use them in Sentiment Analysis. This method <code>TextVectorization</code> layer in TensorFlow is similar to Bag-of-Words because it converts text into sequences of integer encodings, without considering the order of words. Unlike traditional <code>Bag-of-Words</code> and <code>TF-IDF</code>, the TextVectorization layer is implemented directly in TensorFlow, making it easy to integrate with deep learning models.</p><h3 id="Create-TextVectorization-Layer"><a href="#Create-TextVectorization-Layer" class="headerlink" title="Create TextVectorization Layer"></a>Create TextVectorization Layer</h3><p>Below is the code to covert the text data into numerical data using TextVectorization layer in TensorFlow:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">from</span> tensorflow.keras <span class="keyword">import</span> layers</span><br><span class="line"><span class="keyword">import</span> config</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">create_text_vectorization_layer</span>(<span class="params">raw_train_ds</span>):</span><br><span class="line">  vectorize_layer = layers.TextVectorization(</span><br><span class="line">    standardize=<span class="string">&#x27;lower_and_strip_punctuation&#x27;</span>,</span><br><span class="line">    max_tokens=config.max_features,</span><br><span class="line">    output_mode=<span class="string">&#x27;int&#x27;</span>,</span><br><span class="line">    output_sequence_length=config.sequence_length <span class="comment"># output sequence length</span></span><br><span class="line">    )</span><br><span class="line">  <span class="comment"># adapt the vectorization layer to the training data</span></span><br><span class="line">  train_text = raw_train_ds.<span class="built_in">map</span>(<span class="keyword">lambda</span> x, y: x)</span><br><span class="line">  vectorize_layer.adapt(train_text)</span><br><span class="line">  <span class="keyword">return</span> vectorize_layer</span><br></pre></td></tr></table></figure><p>In the above code, we first import the necessary libraries and load the configuration file. We then define a function <code>create_text_vectorization_layer</code> which takes the raw training dataset as input and returns the TextVectorization layer.</p><p>The <code>TextVectorization</code> layer is initialized with the <code>standardize</code> parameter set to <code>lower_and_strip_punctuation</code>, which converts all text to lowercase and removes any punctuation. The <code>max_tokens</code> parameter is set to <code>config.max_features</code>, which is the maximum number of unique words to keep in the vocabulary. The <code>output_mode</code> parameter is set to <code>int</code>, which means that the output will be integer indices representing the words in the vocabulary. The <code>output_sequence_length</code> parameter is set to <code>config.sequence_length</code>, which is the length of the output sequences.</p><p>We then adapt the vectorization layer to the training data using the <code>adapt</code> method. This method fits the vectorization layer to the vocabulary of the training data, which is used to encode the input text into integer sequences.</p><h3 id="Vectorize-Text-Data"><a href="#Vectorize-Text-Data" class="headerlink" title="Vectorize Text Data"></a>Vectorize Text Data</h3><p>After that, we can use the TextVectorization layer to vectorize the text data. Core code as below:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">vectorize_text</span>(<span class="params">text, label, vectorize_layer</span>):</span><br><span class="line">  text = tf.expand_dims(text, -<span class="number">1</span>) <span class="comment"># add a dimension for the text vectorization layer</span></span><br><span class="line">  <span class="keyword">return</span> vectorize_layer(text), label</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">vectorize_dataset</span>(<span class="params">dataset, vectorize_layer</span>):</span><br><span class="line">  vectorized_dataset = dataset.<span class="built_in">map</span>(<span class="keyword">lambda</span> text, label: vectorize_text(text, label, vectorize_layer)) <span class="comment"># vectorize text data</span></span><br><span class="line">  vectorized_dataset = vectorized_dataset.cache().prefetch(buffer_size=tf.data.AUTOTUNE) <span class="comment"># performance optimization</span></span><br><span class="line">  <span class="keyword">return</span> vectorized_dataset</span><br></pre></td></tr></table></figure><p>The above code defines two functions: <code>vectorize_text</code> and <code>vectorize_dataset</code>. The <code>vectorize_text</code> function takes the text data and label, and applies the TextVectorization layer to the text data. The <code>vectorize_dataset</code> function takes the raw dataset and the TextVectorization layer, and applies the <code>vectorize_text</code> function to each element in the dataset. The <code>cache</code> and <code>prefetch</code> methods are used to optimize the performance of the dataset.</p><p>The function <code>vectorize_dataset</code> returns the vectorized dataset, which can be used to train the model.</p><p>In next blog, we will talk about build a Sentiment Analysis model using TensorFlow and Keras, and using this vectorized dataset to train the model.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Keras </tag>
            
            <tag> NLP </tag>
            
            <tag> Tensorflow </tag>
            
            <tag> Sentiment Analysis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Machine Learning Sentiment Analysis - Load Raw Dataset</title>
      <link href="/2023/02/14/machine-learning-sentiment-analysis-load-raw-dataset/"/>
      <url>/2023/02/14/machine-learning-sentiment-analysis-load-raw-dataset/</url>
      
        <content type="html"><![CDATA[<p>Recently, the <code>ChatGPT</code> is very hot in the NLP community. It is a transformer-based language model that can generate human-like conversations. It attracts me to learn about Machine Learning to build a AI model. In this blog, I will talk about how to build a Sentiment Analysis model, the topic will be separated into several blogs, including Load raw dataset,Text Vectorization, Model Training, and Model Evaluation, Model Testing.</p><h2 id="Sentiment-Analysis"><a href="#Sentiment-Analysis" class="headerlink" title="Sentiment Analysis"></a>Sentiment Analysis</h2><p>Sentiment Analysis is a natural language processing (NLP) task that involves classifying the sentiment of a given text into one of the predefined categories such as positive, negative, or neutral. The goal of sentiment analysis is to understand the attitude or opinion of the writer towards a particular topic or product.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/sentiment-analysis.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/sentiment-analysis.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Sentiment Analysis" style="width:600px;"/></div><span class="image-caption">Sentiment Analysis</span></div><h2 id="Dataset"><a href="#Dataset" class="headerlink" title="Dataset"></a>Dataset</h2><p>To build and train a sentiment analysis model, we need a dataset. The dataset used in this blog is the <code>IMDB movie review dataset</code>. You can find this dataset more information in previous blogs. It contains 50,000 movie reviews labeled as <code>positive</code> or <code>negative</code>. The dataset is split into 25,000 reviews for training and 25,000 reviews for testing.</p><p>After downloading the dataset, unzip the file and put it in a directory named <code>dataset</code>. The directory structure should look like this:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">dataset</span><br><span class="line">â”œâ”€â”€ test</span><br><span class="line">â”‚   â”œâ”€â”€ neg</span><br><span class="line">â”‚   â””â”€â”€ pos</span><br><span class="line">â””â”€â”€ train</span><br><span class="line">    â”œâ”€â”€ neg</span><br><span class="line">    â””â”€â”€ pos</span><br></pre></td></tr></table></figure><h2 id="Loading-the-Raw-Data"><a href="#Loading-the-Raw-Data" class="headerlink" title="Loading the Raw Data"></a>Loading the Raw Data</h2><p>We will load the raw data using <code>tensorflow</code> and <code>keras</code> libraries. The <code>text_dataset_from_directory</code> function is used to load the dataset. The function takes the directory path, batch size, validation split, subset, and seed as input parameters. </p><p>The <code>validation_split</code> parameter is used to split the dataset into training and validation sets. For example, if the <code>validation_split</code> is set to 0.2, 20% of the data will be used for validation.</p><p>The <code>subset</code> parameter is used to specify which subset of the data to load. <code>training</code> value is used to load only the training data. <code>validation</code> value is used to load only the validation data. The <code>seed</code> parameter is used to ensure reproducibility.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> config</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_raw_train_dataset</span>():</span><br><span class="line">    <span class="keyword">return</span> tf.keras.utils.text_dataset_from_directory(</span><br><span class="line">        config.ds_train_dir,</span><br><span class="line">        batch_size=config.ds_batch_size, <span class="comment"># batch size</span></span><br><span class="line">        validation_split=config.validate_split, <span class="comment"># 10% of data will be used for validation</span></span><br><span class="line">        subset=<span class="string">&#x27;training&#x27;</span>, <span class="comment"># only training data will be used</span></span><br><span class="line">        seed=config.ds_batch_seed) <span class="comment"># to ensure reproducibility</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_raw_validation_dataset</span>():</span><br><span class="line">    <span class="keyword">return</span> tf.keras.utils.text_dataset_from_directory(</span><br><span class="line">        config.ds_train_dir,</span><br><span class="line">        batch_size=config.ds_batch_size,</span><br><span class="line">        validation_split=config.validate_split,</span><br><span class="line">        subset=<span class="string">&#x27;validation&#x27;</span>,</span><br><span class="line">        seed=config.ds_batch_seed)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">load_raw_test_dataset</span>():</span><br><span class="line">    <span class="keyword">return</span> tf.keras.utils.text_dataset_from_directory(</span><br><span class="line">        config.ds_test_dir,</span><br><span class="line">        batch_size=config.ds_batch_size)</span><br></pre></td></tr></table></figure><p>In above code, there are three functions defined to load the raw data. The <code>load_raw_train_dataset</code> function is used to load the training data, the <code>load_raw_validation_dataset</code> function is used to load the validation data, and the <code>load_raw_test_dataset</code> function is used to load the test data.</p><p>For the <code>config.py</code> file, we will define the following parameters for above raw data loading functions.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dataset directory for training</span></span><br><span class="line">ds_train_dir = <span class="string">&quot;dataset/train&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># dataset directory for testing</span></span><br><span class="line">ds_test_dir = <span class="string">&quot;dataset/test&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># batch size for training and testing</span></span><br><span class="line">ds_batch_size = <span class="number">32</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># random seed for shuffling the data</span></span><br><span class="line">ds_batch_seed = <span class="number">36</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 10% of data will be used for validation</span></span><br><span class="line">validate_split = <span class="number">0.1</span></span><br></pre></td></tr></table></figure><p>In above code, we are loading the raw data from the <code>dataset/train</code> and <code>dataset/test</code> directories. The <code>batch_size</code> parameter is set to 32, which means that the data will be loaded in batches of 32. The <code>validation_split</code> parameter is set to 0.1, which means that 10% of the data will be used for validation. The <code>subset</code> parameter is set to <code>training</code> to load only the training data, <code>validation</code> to load only the validation data. The <code>seed</code> parameter is set to 36 to ensure reproducibility.</p><p>So for now, we have loaded the raw data, in the next blog, we will talk about text vectorization which is the process of converting text into numerical form that can be used for training and testing the model.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Keras </tag>
            
            <tag> NLP </tag>
            
            <tag> Tensorflow </tag>
            
            <tag> Sentiment Analysis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Pile - A Comprehensive Dataset for Training NLP Models</title>
      <link href="/2023/02/01/the-pile-a-comprehensive-dataset-for-training-nlp-models/"/>
      <url>/2023/02/01/the-pile-a-comprehensive-dataset-for-training-nlp-models/</url>
      
        <content type="html"><![CDATA[<p>In the rapidly evolving field of natural language processing (NLP), the quality and diversity of training data are crucial for developing robust and capable models. One of the most significant contributions to this area is <code>The Pile</code>, an open-source, large-scale dataset curated by EleutherAI. This blog post will delve into what The Pile is, its components, and how you can use it to train your own NLP models.</p><h2 id="What-is-The-Pile"><a href="#What-is-The-Pile" class="headerlink" title="What is The Pile?"></a>What is The Pile?</h2><p>The Pile is a massive dataset designed specifically for training NLP models. It comprises approximately <code>825 gigabytes</code> of text data collected from a wide array of sources to ensure diversity and richness in language representation. Created by EleutherAI, The Pile aims to provide researchers and developers with a <code>high-quality</code>, <code>comprehensive</code> dataset that can support the development of state-of-the-art NLP models.</p><h2 id="Components-of-The-Pile"><a href="#Components-of-The-Pile" class="headerlink" title="Components of The Pile"></a>Components of The Pile</h2><p>The Pile is composed of a variety of sub-datasets, each contributing unique content to the overall collection. Here are some of the key components:</p><ul><li><code>Wikipedia</code>: A snapshot of English Wikipedia, providing a wealth of general knowledge across numerous domains. It contains approximately 1.5 billion words in plain text format.</li><li><code>Books3</code>: A collection of books from various genres and disciplines, offering rich and diverse narrative styles. It contains approximately 196,640 books in plain text format.</li><li><code>PubMed Central</code>: Biomedical literature providing specialized scientific text. PubMed CentralÂ® (PMC) is a free full-text archive of biomedical and life sciences journal literature at the U.S. National Institutes of Healthâ€™s National Library of Medicine (NIH&#x2F;NLM)</li><li><code>StackExchange</code>: Q&amp;A data from StackExchange sites, capturing technical discussions and community knowledge. StackExchange is a question-and-answer website for programmers, data scientists, and other professionals.</li><li><code>GitHub</code>: Code repositories from GitHub, including source code and associated documentation. GitHub is a popular platform for hosting software development projects.</li><li><code>ArXiv</code>: Scientific papers from the ArXiv preprint server, covering a broad range of academic research. ArXiv is a free distribution service and an open-access archive for nearly 2.4 million scholarly articles in the fields of physics, mathematics, computer science, quantitative biology, quantitative finance, statistics, electrical engineering and systems science, and economics</li></ul><p>The Pile not only contains above datasets, it also includes like <code>YoutubeSubtitles</code>, <code>Freelaw</code> and <code>HackerNews</code> etc. These components ensure that The Pile covers a broad spectrum of human knowledge and language use, making it an invaluable resource for training versatile NLP models.</p><p>You can access the full list of components and their sizes on the official EleutherAI github repo here: <a href="https://github.com/EleutherAI/the-pile?tab=readme-ov-file">https://github.com/EleutherAI/the-pile?tab=readme-ov-file</a></p><h2 id="Why-Use-The-Pile"><a href="#Why-Use-The-Pile" class="headerlink" title="Why Use The Pile?"></a>Why Use The Pile?</h2><ul><li><code>Diversity</code>: With text from multiple domains and styles, The Pile helps create models that generalize well across different contexts.</li><li><code>Size</code>: At 825 gigabytes, The Pile provides a substantial amount of data, which is vital for training large-scale NLP models.</li><li><code>Quality</code>: Curated with care, The Pile filters out low-quality content, ensuring that the data used for training is valuable and relevant.</li><li><code>Open Source</code>: The Pile is freely available, supporting open research and development in the NLP community.</li></ul><h2 id="How-to-Use-The-Pile"><a href="#How-to-Use-The-Pile" class="headerlink" title="How to Use The Pile"></a>How to Use The Pile</h2><p>Using The Pile for training NLP models involves several steps, from acquiring the dataset to preprocessing it for model training. Hereâ€™s a step-by-step guide:</p><h3 id="Acquire-the-Dataset"><a href="#Acquire-the-Dataset" class="headerlink" title="Acquire the Dataset"></a>Acquire the Dataset</h3><p>You can download The Pile from the official EleutherAI repository. Ensure you have sufficient storage and bandwidth to handle the datasetâ€™s size.</p><h3 id="Set-Up-Your-Environment"><a href="#Set-Up-Your-Environment" class="headerlink" title="Set Up Your Environment"></a>Set Up Your Environment</h3><p>Ensure you have a robust computing environment set up, ideally with access to powerful GPUs if youâ€™re training large models. Popular frameworks like PyTorch or TensorFlow are suitable for this task.</p><h3 id="Preprocess-the-Data"><a href="#Preprocess-the-Data" class="headerlink" title="Preprocess the Data"></a>Preprocess the Data</h3><p>Depending on your specific use case, you might need to preprocess the data. This could involve tokenization, normalization, or formatting the text to match the input requirements of your chosen model. Libraries like Hugging Faceâ€™s Tokenizers can be very helpful here.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> GPT2Tokenizer</span><br><span class="line"></span><br><span class="line">tokenizer = GPT2Tokenizer.from_pretrained(<span class="string">&#x27;gpt2&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">preprocess</span>(<span class="params">text</span>):</span><br><span class="line">    <span class="keyword">return</span> tokenizer.encode(text, return_tensors=<span class="string">&#x27;pt&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="Load-the-Data"><a href="#Load-the-Data" class="headerlink" title="Load the Data"></a>Load the Data</h3><p>Use data loading utilities to efficiently feed the data into your training pipeline. If youâ€™re using <code>PyTorch</code>, <code>DataLoader</code> can help manage batching and shuffling.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> DataLoader, Dataset</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TextDataset</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, texts</span>):</span><br><span class="line">        self.texts = texts</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.texts)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, idx</span>):</span><br><span class="line">        <span class="keyword">return</span> preprocess(self.texts[idx])</span><br><span class="line"></span><br><span class="line">texts = [...]  <span class="comment"># Load your text data here</span></span><br><span class="line">dataset = TextDataset(texts)</span><br><span class="line">dataloader = DataLoader(dataset, batch_size=<span class="number">8</span>, shuffle=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h3 id="Train-Your-Model"><a href="#Train-Your-Model" class="headerlink" title="Train Your Model"></a>Train Your Model</h3><p>Set up your NLP model and start the training process. Ensure you monitor the training metrics to adjust hyperparameters as needed.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> GPT2LMHeadModel, Trainer, TrainingArguments</span><br><span class="line"></span><br><span class="line">model = GPT2LMHeadModel.from_pretrained(<span class="string">&#x27;gpt2&#x27;</span>)</span><br><span class="line"></span><br><span class="line">training_args = TrainingArguments(</span><br><span class="line">    output_dir=<span class="string">&#x27;./results&#x27;</span>,</span><br><span class="line">    num_train_epochs=<span class="number">1</span>,</span><br><span class="line">    per_device_train_batch_size=<span class="number">4</span>,</span><br><span class="line">    save_steps=<span class="number">10_000</span>,</span><br><span class="line">    save_total_limit=<span class="number">2</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trainer = Trainer(</span><br><span class="line">    model=model,</span><br><span class="line">    args=training_args,</span><br><span class="line">    train_dataset=dataset,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">trainer.train()</span><br></pre></td></tr></table></figure><h3 id="Evaluate-and-Fine-tune"><a href="#Evaluate-and-Fine-tune" class="headerlink" title="Evaluate and Fine-tune"></a>Evaluate and Fine-tune</h3><p>After initial training, evaluate your model on validation data and fine-tune as necessary. This could involve additional training on specific subsets of The Pile or other datasets to enhance performance on particular tasks.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>The Pile represents a monumental step forward in the availability of high-quality, diverse datasets for NLP research. By leveraging The Pile, you can train more robust and generalizable language models, pushing the boundaries of what NLP systems can achieve. Whether youâ€™re an academic researcher or an industry practitioner, The Pile offers a valuable resource to support your work in developing cutting-edge NLP technologies.</p><h2 id="Reference-Links"><a href="#Reference-Links" class="headerlink" title="Reference Links"></a>Reference Links</h2><ul><li><a href="https://pile.eleuther.ai/">https://pile.eleuther.ai/</a></li><li><a href="https://github.com/EleutherAI/the-pile?tab=readme-ov-file">https://github.com/EleutherAI/the-pile?tab=readme-ov-file</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> NLP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A Large Movie Review Dataset for Binary Sementic Analysis</title>
      <link href="/2023/01/11/a-large-movie-review-dataset-for-binary-sementic-analysis/"/>
      <url>/2023/01/11/a-large-movie-review-dataset-for-binary-sementic-analysis/</url>
      
        <content type="html"><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>In this article, we will discuss about a large movie review dataset for <code>binary semantic analysis</code>. It is extracted from IMDb(<a href="https://www.imdb.com/">https://www.imdb.com/</a>) movie sites and handled by <code>Stanford</code> university. The dataset contains 50,000 movie reviews labeled as positive or negative. It is divided into training and testing sets with 25,000 and 25,000 movie reviews respectively. It is labeled as positive or negative based on the sentiment of the review. It also include an additional 50,000 unlabeled documents for unsupervised learning. </p><h2 id="Dataset-Information"><a href="#Dataset-Information" class="headerlink" title="Dataset Information"></a>Dataset Information</h2><h4 id="Positive-Reviews"><a href="#Positive-Reviews" class="headerlink" title="Positive Reviews"></a>Positive Reviews</h4><p>The positive reviews contains 25000 movie reviews labeled as positive. A positive review has a score &gt;&#x3D; 7 out of 10. The positive reviews are mostly positive and entertaining. The reviews are mostly written in the positive tone. In the <code>aclImdb\train\pos</code> directory, the suffix number of files all <code>&gt;= 7</code>. Example file name like <code>10_8.txt</code> which means star rating <code>8/10</code> from IMDb.</p><h4 id="Negative-Reviews"><a href="#Negative-Reviews" class="headerlink" title="Negative Reviews"></a>Negative Reviews</h4><p>The negative reviews contains 25000 movie reviews labeled as negative. A negative review has a score <code>&lt;= 4</code> out of 10. The negative reviews are mostly negative and sad. The reviews are mostly written in the negative tone. In the <code>aclImdb\train\neg</code> directory, the suffix number of files all <code>&lt;= 4</code>. Example file name like <code>10_3.txt</code> which means star rating <code>3/10</code> from IMDb.</p><p>The reviews with more neutral ratings are not included in the train&#x2F;test sets.</p><h4 id="Unlabeled-Reviews"><a href="#Unlabeled-Reviews" class="headerlink" title="Unlabeled Reviews"></a>Unlabeled Reviews</h4><p>The unlabeled reviews contains 50000 movie reviews that are not labeled as positive or negative. These reviews are used for unsupervised learning. In the <code>aclImdb\train\unsup</code> directory, these reviews are not labeled as positive or negative, the suffix number of files all are <code>0</code> which means the score. Example file name like <code>10_0.txt</code>.</p><h4 id="Test-dataset-reviews"><a href="#Test-dataset-reviews" class="headerlink" title="Test dataset reviews"></a>Test dataset reviews</h4><p>The test reviews contains 25000 movie reviews. These reviews are used for evaluating the performance of the model. In the <code>aclImdb\test</code> directory, it contains <code>pos</code> and <code>neg</code> directories with the same structure as the <code>train</code> directory.</p><h4 id="Tokenized-BoW"><a href="#Tokenized-BoW" class="headerlink" title="Tokenized BoW"></a>Tokenized BoW</h4><p>In addition to the review text files, there is a already-tokenized bag of words (BoW) features that were used in <code>Standford</code> experiments. These are stored in .feat files in the train&#x2F;test directories. Each .feat file is in LIBSVM format, an ascii sparse-vector format for labeled data. The feature indices in these files start from 0, and the text tokens corresponding to a feature index is found in [imdb.vocab]. So a line with 0:7 in a .feat file means the first word in <a href="the">imdb.vocab</a> appears 7 times in that review.</p><h2 id="Download-the-Dataset"><a href="#Download-the-Dataset" class="headerlink" title="Download the Dataset"></a>Download the Dataset</h2><p>The complete dataset can be downloaded from the following link: <a href="https://ai.stanford.edu/~amaas/data/sentiment/aclImdb_v1.tar.gz">https://ai.stanford.edu/~amaas/data/sentiment/aclImdb_v1.tar.gz</a>. Once you download and unzip it, you can see the major dataset structure as shown below:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">aclImdb</span><br><span class="line">â”œâ”€â”€ README</span><br><span class="line">â”œâ”€â”€ imdb.vocab </span><br><span class="line">â”œâ”€â”€ test</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ neg</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ 2_1.txt</span><br><span class="line">â”‚Â Â  â””â”€â”€ pos</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ 3_8.txt</span><br><span class="line">â”œâ”€â”€ train</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ neg</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ 12_1.txt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ pos</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ 4_8.txt</span><br><span class="line">â”‚Â Â  â””â”€â”€ unsup</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ 10_0.txt</span><br></pre></td></tr></table></figure><p>In the <code>.txt</code> file, the text content is review of the movie.</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Keras </tag>
            
            <tag> TensorFlow </tag>
            
            <tag> Dataset </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Understanding Tensorflow for Machine Learning</title>
      <link href="/2023/01/02/understanding-tensorflow-for-machine-learning/"/>
      <url>/2023/01/02/understanding-tensorflow-for-machine-learning/</url>
      
        <content type="html"><![CDATA[<h2 id="Introduction-to-TensorFlow"><a href="#Introduction-to-TensorFlow" class="headerlink" title="Introduction to TensorFlow"></a>Introduction to TensorFlow</h2><p><code>TensorFlow</code> is an open-source machine learning framework developed by <code>Google</code>. It is designed to facilitate the creation and deployment of <code>machine learning</code> models, from simple linear regression to complex deep neural networks. TensorFlow provides a comprehensive ecosystem of tools, libraries, and community resources that allow researchers and developers to build and train ML models efficiently.</p><h2 id="Core-Concepts"><a href="#Core-Concepts" class="headerlink" title="Core Concepts"></a>Core Concepts</h2><h3 id="Tensors"><a href="#Tensors" class="headerlink" title="Tensors"></a>Tensors</h3><p>At the heart of TensorFlow is the concept of a <code>tensor(å¼ é‡)</code>. A tensor is a generalization of vectors and matrices to potentially higher dimensions. In TensorFlow, tensors are multi-dimensional arrays with a uniform type (<code>dtype</code>). Tensors are the primary data structure used in TensorFlow operations.</p><h3 id="Graphs-and-Sessions"><a href="#Graphs-and-Sessions" class="headerlink" title="Graphs and Sessions"></a>Graphs and Sessions</h3><p>TensorFlow uses a <code>dataflow graph(æ•°æ®æµå›¾)</code> to represent the computations required for a machine learning model. The <code>graph</code> consists of nodes <code>(operations)(æ“ä½œ)</code> and edges <code>(tensors)(å¼ é‡)</code>. Each node in the graph represents an operation, and the edges represent the tensors that flow between these operations.</p><p>To execute the graph, TensorFlow uses sessions. A <code>session</code> encapsulates the environment in which the operations in the graph are executed to produce tensors.</p><h3 id="Variables-and-Placeholders"><a href="#Variables-and-Placeholders" class="headerlink" title="Variables and Placeholders"></a>Variables and Placeholders</h3><ul><li><strong>Variables</strong>: These are used to hold and update parameters during the training process. Variables are in-memory buffers containing tensors.</li><li><strong>Placeholders</strong>: These are used to feed data into the graph. They allow you to pass data into the graph at runtime without initializing them with a value.</li></ul><h2 id="Building-a-Model"><a href="#Building-a-Model" class="headerlink" title="Building a Model"></a>Building a Model</h2><h3 id="Defining-the-Graph"><a href="#Defining-the-Graph" class="headerlink" title="Defining the Graph"></a>Defining the Graph</h3><p>To build a model, you first define the <code>computational graph(è®¡ç®—å›¾)</code>. This involves creating the necessary operations and connecting them with tensors. For example, to create a simple linear regression model, you might define the following operations:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line"><span class="comment"># Placeholders for input and output data</span></span><br><span class="line">x = tf.placeholder(tf.float32, shape=[<span class="literal">None</span>, n_features], name=<span class="string">&#x27;x&#x27;</span>)</span><br><span class="line">y = tf.placeholder(tf.float32, shape=[<span class="literal">None</span>, <span class="number">1</span>], name=<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Variables for weights and bias</span></span><br><span class="line">w = tf.Variable(tf.zeros([n_features, <span class="number">1</span>]), name=<span class="string">&#x27;weights&#x27;</span>)</span><br><span class="line">b = tf.Variable(tf.zeros([<span class="number">1</span>]), name=<span class="string">&#x27;bias&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Model: y = Wx + b</span></span><br><span class="line">y_pred = tf.matmul(x, w) + b</span><br></pre></td></tr></table></figure><h3 id="Loss-Function-and-Optimizer"><a href="#Loss-Function-and-Optimizer" class="headerlink" title="Loss Function and Optimizer"></a>Loss Function and Optimizer</h3><p>Next, you need to define a <code>loss function(æŸå¤±å‡½æ•°)</code> to measure how well the modelâ€™s predictions match the actual data. Common loss functions include <code>mean squared error(å‡æ–¹è¯¯å·®) for regression problems(å›žå½’é—®é¢˜)</code> and <code>cross-entropy(äº¤å‰ç†µ) for classification problems(åˆ†ç±»é—®é¢˜)</code>.</p><p>You also need to choose an <code>optimizer</code> to minimize the loss function. TensorFlow provides several optimizers, such as <code>GradientDescentOptimizer(æ¢¯åº¦ä¸‹é™ä¼˜åŒ–å™¨)</code>, <code>AdamOptimizer(è‡ªé€‚åº”çŸ©é˜µä¼°è®¡ä¼˜åŒ–å™¨)</code>, <code>AdagradOptimizer</code>, and <code>RMSPropOptimizer</code>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Mean squared error loss function</span></span><br><span class="line">loss = tf.reduce_mean(tf.square(y_pred - y))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Gradient descent optimizer</span></span><br><span class="line">optimizer = tf.train.GradientDescentOptimizer(learning_rate).minimize(loss)</span><br></pre></td></tr></table></figure><h2 id="Training-the-Model"><a href="#Training-the-Model" class="headerlink" title="Training the Model"></a>Training the Model</h2><p>To train the model, you need to run the session and feed the data into the placeholders. The optimizer will adjust the variables to minimize the loss.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment"># Initialize variables</span></span><br><span class="line">    sess.run(tf.global_variables_initializer())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Training loop</span></span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        _, loss_value = sess.run([optimizer, loss], feed_dict=&#123;x: train_x, y: train_y&#125;)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Epoch <span class="subst">&#123;epoch&#125;</span>, Loss: <span class="subst">&#123;loss_value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h2><p>Once the model is trained, you can deploy it for inference. TensorFlow provides several tools for model deployment, including <code>TensorFlow Serving</code>, <code>TensorFlow Lite for mobile and embedded devices</code>, and <code>TensorFlow.js for web applications</code>.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>TensorFlow is a powerful and flexible framework for building and deploying machine learning models. By understanding its core concepts and tools, you can efficiently develop and train models for a wide range of applications.</p><p>For more details, please refer to the official TensorFlow documentation: <a href="https://www.tensorflow.org/">https://www.tensorflow.org/</a></p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Keras </tag>
            
            <tag> TensorFlow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS Auto Scaling Group - å®žçŽ°å¼¹æ€§è‡ªåŠ¨æ‰©å±•çš„æŠ€æœ¯æŒ‡å—</title>
      <link href="/2022/11/15/aws-auto-scaling-group/"/>
      <url>/2022/11/15/aws-auto-scaling-group/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Cloudé¢†åŸŸï¼Œå¼¹æ€§è‡ªåŠ¨æ‰©å±•æ˜¯ç¡®ä¿åº”ç”¨ç¨‹åºé«˜å¯ç”¨æ€§å’Œæ€§èƒ½çš„å…³é”®ç»„æˆéƒ¨åˆ†ã€‚<code>AWS Auto Scaling Groupï¼ˆASGï¼‰</code>æ˜¯Amazon Web Servicesï¼ˆAWSï¼‰æä¾›çš„ä¸€é¡¹å¼ºå¤§æœåŠ¡ï¼Œå¯å¸®åŠ©æ‚¨è‡ªåŠ¨æ‰©å±•å’Œç®¡ç†åº”ç”¨ç¨‹åºçš„èµ„æºï¼Œä»¥é€‚åº”ä¸æ–­å˜åŒ–çš„å·¥ä½œè´Ÿè½½éœ€æ±‚ã€‚æœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨AWS Auto Scaling Groupçš„æŠ€æœ¯ç»†èŠ‚ï¼ŒåŒ…æ‹¬å…¶æ ¸å¿ƒæ¦‚å¿µã€é…ç½®é€‰é¡¹ã€æœ€ä½³å®žè·µå’Œå®žé™…åº”ç”¨åœºæ™¯ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-asg-capacity.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-asg-capacity.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Auto Scaling Group" style="width:600px;"/></div><span class="image-caption">AWS Auto Scaling Group</span></div><h3 id="ç†è§£-AWS-Auto-Scaling-Groupï¼ˆASGï¼‰"><a href="#ç†è§£-AWS-Auto-Scaling-Groupï¼ˆASGï¼‰" class="headerlink" title="ç†è§£ AWS Auto Scaling Groupï¼ˆASGï¼‰"></a>ç†è§£ AWS Auto Scaling Groupï¼ˆASGï¼‰</h3><ul><li><strong>ä»€ä¹ˆæ˜¯Auto Scaling Groupï¼Ÿ</strong></li></ul><p>AWS Auto Scaling Groupï¼ˆASGï¼‰æ˜¯ä¸€é¡¹AWSæœåŠ¡ï¼Œå…è®¸æ‚¨è‡ªåŠ¨å¢žåŠ æˆ–å‡å°‘åº”ç”¨ç¨‹åºå®žä¾‹çš„æ•°é‡ï¼Œä»¥æ»¡è¶³æµé‡æ³¢åŠ¨ã€‚ASGåŸºäºŽä¸€ç»„è§„åˆ™æ¥åŠ¨æ€è°ƒæ•´å®žä¾‹çš„æ•°é‡ï¼Œç¡®ä¿åº”ç”¨ç¨‹åºå…·æœ‰æ‰€éœ€çš„å®¹é‡ï¼Œå¹¶æä¾›é«˜å¯ç”¨æ€§ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-asg-elb.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-asg-elb.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Auto Scaling Group in AWS with Load Balancer" style="width:600px;"/></div><span class="image-caption">Auto Scaling Group in AWS with Load Balancer</span></div><ul><li><strong>ASGçš„å·¥ä½œåŽŸç†</strong></li></ul><p>ASGé€šè¿‡ç›‘æŽ§é…ç½®çš„æŒ‡æ ‡ï¼Œä¾‹å¦‚CPUåˆ©ç”¨çŽ‡æˆ–è¯·æ±‚çŽ‡ï¼Œæ¥ç¡®å®šæ˜¯å¦éœ€è¦è°ƒæ•´å®žä¾‹æ•°é‡ã€‚å®ƒå¯ä»¥è‡ªåŠ¨å¯åŠ¨æ–°å®žä¾‹ä»¥åº”å¯¹é«˜è´Ÿè½½ï¼Œæˆ–è€…åœæ­¢ä¸å†éœ€è¦çš„å®žä¾‹ä»¥èŠ‚çœæˆæœ¬ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-asg-cloudwatch.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-asg-cloudwatch.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Auto Scaling in AWS with Cloud Watch Alarm" style="width:600px;"/></div><span class="image-caption">Auto Scaling in AWS with Cloud Watch Alarm</span></div><ul><li><strong>ASGçš„ä¼˜åŠ¿</strong></li></ul><p>ASGçš„ä¼˜åŠ¿åŒ…æ‹¬è‡ªåŠ¨åŒ–æ‰©å±•ã€é«˜å¯ç”¨æ€§ã€æˆæœ¬æ•ˆç›Šä»¥åŠåº”å¯¹ä¸æ–­å˜åŒ–çš„éœ€æ±‚ã€‚å®ƒå¯ä»¥ç¡®ä¿åº”ç”¨ç¨‹åºå§‹ç»ˆå…·å¤‡æ‰€éœ€çš„æ€§èƒ½ï¼Œå¹¶ä¸”æ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚</p><h3 id="Auto-Scaling-Groupçš„å…³é”®ç»„ä»¶"><a href="#Auto-Scaling-Groupçš„å…³é”®ç»„ä»¶" class="headerlink" title="Auto Scaling Groupçš„å…³é”®ç»„ä»¶"></a>Auto Scaling Groupçš„å…³é”®ç»„ä»¶</h3><ul><li><strong>å¯åŠ¨é…ç½®ï¼ˆLaunch Configurationï¼‰</strong></li></ul><p>å¯åŠ¨é…ç½®å®šä¹‰äº†ASGå¯åŠ¨æ–°å®žä¾‹æ—¶ä½¿ç”¨çš„AMIã€å®žä¾‹ç±»åž‹ã€å®‰å…¨ç»„ç­‰å‚æ•°ã€‚å®ƒå……å½“äº†åˆ›å»ºå®žä¾‹çš„è“å›¾ã€‚</p><ul><li><strong>è‡ªåŠ¨æ‰©å±•ç­–ç•¥ï¼ˆAuto Scaling Policiesï¼‰</strong></li></ul><p>è‡ªåŠ¨æ‰©å±•ç­–ç•¥æ˜¯ASGçš„æ ¸å¿ƒã€‚å®ƒä»¬å®šä¹‰äº†ä½•æ—¶ä»¥åŠå¦‚ä½•æ‰©å±•æˆ–ç¼©å‡å®žä¾‹æ•°é‡ï¼ŒåŸºäºŽç›‘æŽ§æŒ‡æ ‡å’Œé˜ˆå€¼çš„è§¦å‘æ¡ä»¶ã€‚</p><ul><li><strong>å¥åº·æ£€æŸ¥ï¼ˆHealth Checksï¼‰</strong></li></ul><p>å¥åº·æ£€æŸ¥ç”¨äºŽç›‘æŽ§å®žä¾‹çš„å¥åº·çŠ¶æ€ã€‚ASGå¯ä»¥è‡ªåŠ¨æ›¿æ¢å¤±è´¥æˆ–ä¸å¥åº·çš„å®žä¾‹ï¼Œç¡®ä¿åº”ç”¨ç¨‹åºçš„ç¨³å®šæ€§ã€‚</p><h3 id="Auto-Scaling-Groupçš„é…ç½®é€‰é¡¹"><a href="#Auto-Scaling-Groupçš„é…ç½®é€‰é¡¹" class="headerlink" title="Auto Scaling Groupçš„é…ç½®é€‰é¡¹"></a>Auto Scaling Groupçš„é…ç½®é€‰é¡¹</h3><ul><li><strong>æœŸæœ›å®¹é‡ä¸Žæœ€å°&#x2F;æœ€å¤§å¤§å°</strong></li></ul><p>æœŸæœ›å®¹é‡æ˜¯æ‚¨å¸Œæœ›ASGç»´æŠ¤çš„å®žä¾‹æ•°é‡ï¼Œè€Œæœ€å°å’Œæœ€å¤§å¤§å°åˆ™å®šä¹‰äº†ASGå¯ä»¥è‡ªåŠ¨æ‰©å±•æˆ–ç¼©å‡çš„èŒƒå›´ã€‚</p><ul><li><strong>ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨</strong></li></ul><p>å¦‚æžœæ‚¨ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨ï¼ˆå¦‚AWS ELBï¼‰ï¼ŒASGå¯ä»¥ä¸Žä¹‹é›†æˆï¼Œç¡®ä¿æ–°å®žä¾‹è¢«å¹³è¡¡åœ°åˆ†é…åˆ°è´Ÿè½½å‡è¡¡å™¨åŽç«¯ã€‚</p><ul><li><strong>å®žä¾‹ç±»åž‹ä¸ŽAMIé€‰æ‹©</strong></li></ul><p>é€‰æ‹©é€‚å½“çš„å®žä¾‹ç±»åž‹å’ŒAMIå¯¹æ€§èƒ½å’Œæˆæœ¬è‡³å…³é‡è¦ã€‚ASGå…è®¸æ‚¨åœ¨å¯åŠ¨é…ç½®ä¸­å®šä¹‰è¿™äº›é€‰é¡¹ï¼Œä»¥ä¾¿æ ¹æ®éœ€æ±‚é€‰æ‹©ã€‚</p><ul><li><strong>è‡ªåŠ¨æ‰©å±•ç­–ç•¥ï¼šæ‰‹åŠ¨ã€å®šæ—¶å’ŒåŠ¨æ€</strong></li></ul><p>ASGæ”¯æŒå¤šç§è‡ªåŠ¨æ‰©å±•ç­–ç•¥ã€‚æ‚¨å¯ä»¥æ‰‹åŠ¨è®¾ç½®æ‰©å±•ç­–ç•¥ï¼Œå®šæ—¶è§¦å‘æ‰©å±•ï¼Œæˆ–æ ¹æ®åŠ¨æ€è§¦å‘æ¡ä»¶è‡ªåŠ¨è°ƒæ•´å®¹é‡ã€‚</p><h3 id="é«˜çº§ASGåŠŸèƒ½"><a href="#é«˜çº§ASGåŠŸèƒ½" class="headerlink" title="é«˜çº§ASGåŠŸèƒ½"></a>é«˜çº§ASGåŠŸèƒ½</h3><ul><li><strong>ç”Ÿå‘½å‘¨æœŸæŒ‚é’©ï¼ˆLifecycle Hooksï¼‰</strong></li></ul><p>ç”Ÿå‘½å‘¨æœŸæŒ‚é’©å…è®¸æ‚¨æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œï¼Œä¾‹å¦‚åœ¨å®žä¾‹å¯åŠ¨æˆ–ç»ˆæ­¢æ—¶å‘é€é€šçŸ¥æˆ–è¿è¡Œè„šæœ¬ã€‚</p><ul><li><strong>å®žä¾‹ç»ˆæ­¢ç­–ç•¥ï¼ˆInstance Termination Policiesï¼‰</strong></li></ul><p>ç»ˆæ­¢ç­–ç•¥å®šä¹‰äº†ASGåœ¨éœ€è¦ç¼©å‡å®¹é‡æ—¶åº”å¦‚ä½•é€‰æ‹©è¦ç»ˆæ­¢çš„å®žä¾‹ã€‚æ‚¨å¯ä»¥è‡ªå®šä¹‰ç»ˆæ­¢ç­–ç•¥ä»¥æ»¡è¶³ç‰¹å®šéœ€æ±‚ã€‚</p><ul><li><strong>é¢„æµ‹æ€§è‡ªåŠ¨æ‰©å±•ï¼ˆPredictive Scalingï¼‰</strong></li></ul><p>é¢„æµ‹æ€§è‡ªåŠ¨æ‰©å±•ä½¿ç”¨æœºå™¨å­¦ä¹ æ¥é¢„æµ‹å°†æ¥çš„è´Ÿè½½ï¼Œå¹¶ç›¸åº”åœ°è°ƒæ•´å®žä¾‹æ•°é‡ï¼Œä»¥å‡å°‘èµ„æºæµªè´¹å’Œæˆæœ¬ã€‚</p><ul><li><strong>æ··åˆå®žä¾‹ç­–ç•¥ï¼ˆMixed Instances Policyï¼‰</strong></li></ul><p>æ··åˆå®žä¾‹ç­–ç•¥å…è®¸ASGä½¿ç”¨å¤šç§å®žä¾‹ç±»åž‹ï¼ŒåŒ…æ‹¬On-Demandå’ŒSpotå®žä¾‹ï¼Œä»¥æé«˜æˆæœ¬æ•ˆç›Šã€‚</p><ul><li><strong>åœ¨ASGä¸­ä½¿ç”¨Spotå®žä¾‹</strong></li></ul><p>Spotå®žä¾‹æ˜¯æˆæœ¬è¾ƒä½Žä½†å¯ä¸­æ–­çš„å®žä¾‹ç±»åž‹ã€‚ASGå¯ä»¥ä½¿ç”¨Spotå®žä¾‹æ¥é™ä½Žæˆæœ¬ï¼ŒåŒæ—¶ä»ä¿æŒå¯ç”¨æ€§ã€‚</p><h3 id="é…ç½®AWS-Auto-Scaling-Group"><a href="#é…ç½®AWS-Auto-Scaling-Group" class="headerlink" title="é…ç½®AWS Auto Scaling Group"></a>é…ç½®AWS Auto Scaling Group</h3><ul><li><strong>åˆ›å»º Auto Scaling Group</strong></li></ul><p>åœ¨AWSæŽ§åˆ¶å°ä¸­åˆ›å»ºAuto Scaling Groupï¼ˆASGï¼‰æ˜¯ä¸€é¡¹ç®€å•ä½†é‡è¦çš„ä»»åŠ¡ã€‚é¦–å…ˆï¼Œç™»å½•åˆ°AWSç®¡ç†æŽ§åˆ¶å°ï¼Œç„¶åŽéµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>å¯¼èˆªåˆ°Auto ScalingæŽ§åˆ¶å°ã€‚</li><li>å•å‡»â€œåˆ›å»ºAuto Scalingç»„â€ã€‚</li><li>æŒ‡å®šASGçš„åç§°å’Œæè¿°ã€‚</li><li>é€‰æ‹©è¦ä½¿ç”¨çš„å¯åŠ¨é…ç½®ã€‚å¯åŠ¨é…ç½®å®šä¹‰äº†æ–°å®žä¾‹çš„é…ç½®ï¼ŒåŒ…æ‹¬AMIã€å®žä¾‹ç±»åž‹ã€å®‰å…¨ç»„ç­‰ã€‚</li><li>è®¾ç½®æœŸæœ›å®¹é‡ã€‚è¿™æ˜¯æ‚¨å¸Œæœ›ASGç»´æŠ¤çš„å®žä¾‹æ•°é‡ã€‚</li><li>é€‰æ‹©æœ€å°å’Œæœ€å¤§å¤§å°ã€‚æœ€å°å¤§å°æ˜¯ASGå¯ä»¥ç¼©å‡åˆ°çš„æœ€å°å®žä¾‹æ•°ï¼Œæœ€å¤§å¤§å°æ˜¯ASGå¯ä»¥æ‰©å±•åˆ°çš„æœ€å¤§å®žä¾‹æ•°ã€‚</li><li>é€‰æ‹©è¦ä½¿ç”¨çš„VPCã€‚</li><li>é…ç½®è´Ÿè½½å‡è¡¡ï¼ˆå¦‚æžœéœ€è¦ï¼‰ã€‚æ‚¨å¯ä»¥é€‰æ‹©å°†ASGä¸Žè´Ÿè½½å‡è¡¡å™¨ç›¸å…³è”ï¼Œä»¥åˆ†é…æµé‡ã€‚</li><li>é…ç½®å¥åº·æ£€æŸ¥ä»¥ç¡®ä¿å®žä¾‹çš„å¥åº·çŠ¶æ€ã€‚</li><li>è®¾ç½®é€šçŸ¥ï¼Œä»¥ä¾¿åœ¨ASGæ‰§è¡Œè‡ªåŠ¨æ‰©å±•æ—¶æŽ¥æ”¶é€šçŸ¥ã€‚</li><li>å®¡æŸ¥å’Œåˆ›å»ºASGã€‚</li></ol><ul><li><strong>å®šä¹‰å¯åŠ¨é…ç½®</strong></li></ul><p>å¯åŠ¨é…ç½®æ˜¯ASGåˆ›å»ºæ–°å®žä¾‹æ—¶ä½¿ç”¨çš„æ¨¡æ¿ã€‚æ‚¨å¯ä»¥åœ¨åˆ›å»ºASGæ—¶é€‰æ‹©çŽ°æœ‰çš„å¯åŠ¨é…ç½®æˆ–åˆ›å»ºæ–°çš„ã€‚å¯åŠ¨é…ç½®åŒ…æ‹¬ä»¥ä¸‹å…³é”®é€‰é¡¹ï¼š</p><ol><li>AMIï¼ˆAmazon Machine Imageï¼‰ï¼šé€‰æ‹©é€‚åˆæ‚¨åº”ç”¨ç¨‹åºçš„AMIã€‚è¿™æ˜¯æ–°å®žä¾‹çš„æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºåŸºç¡€ã€‚</li><li>å®žä¾‹ç±»åž‹ï¼šé€‰æ‹©å®žä¾‹çš„è§„æ ¼ï¼Œä»¥æ»¡è¶³æ€§èƒ½å’Œèµ„æºéœ€æ±‚ã€‚</li><li>å®‰å…¨ç»„ï¼šå®šä¹‰å®žä¾‹çš„ç½‘ç»œè®¿é—®ç­–ç•¥ï¼Œç¡®ä¿é€‚å½“çš„å®‰å…¨æ€§ã€‚</li><li>å­˜å‚¨å·ï¼šå®šä¹‰å®žä¾‹çš„æ ¹å·å’Œé™„åŠ å·ã€‚</li><li>ç”¨æˆ·æ•°æ®ï¼šå¯é€‰é¡¹ï¼Œå…è®¸æ‚¨æä¾›å¯åŠ¨è„šæœ¬æˆ–å…¶ä»–è‡ªå®šä¹‰é…ç½®ã€‚</li></ol><ul><li><strong>é…ç½®è‡ªåŠ¨æ‰©å±•ç­–ç•¥</strong></li></ul><p>è‡ªåŠ¨æ‰©å±•ç­–ç•¥å®šä¹‰äº†ASGä½•æ—¶ä»¥åŠå¦‚ä½•è°ƒæ•´å®žä¾‹æ•°é‡ã€‚åœ¨ASGä¸­ï¼Œæ‚¨å¯ä»¥é…ç½®ä»¥ä¸‹ç±»åž‹çš„ç­–ç•¥ï¼š</p><ol><li>ç›®æ ‡è·Ÿè¸ªç­–ç•¥ï¼šè®¾ç½®CPUåˆ©ç”¨çŽ‡ã€ç½‘ç»œæµé‡ç­‰æŒ‡æ ‡çš„ç›®æ ‡å€¼ã€‚ASGå°†è‡ªåŠ¨å¢žåŠ æˆ–å‡å°‘å®žä¾‹ä»¥ç»´æŒç›®æ ‡ã€‚</li><li>ç®€å•ç¼©æ”¾ç­–ç•¥ï¼šåŸºäºŽCloudWatchæŒ‡æ ‡ï¼ˆå¦‚CPUåˆ©ç”¨çŽ‡ï¼‰çš„é˜ˆå€¼è¿›è¡Œè‡ªåŠ¨ç¼©æ”¾ã€‚</li><li>å®šæ—¶æ‰©å±•ç­–ç•¥ï¼šæŒ‰è®¡åˆ’å®šæœŸå¢žåŠ æˆ–å‡å°‘å®žä¾‹æ•°é‡ã€‚é€‚ç”¨äºŽæŒ‰æ—¶é—´è¡¨çš„å·¥ä½œè´Ÿè½½ã€‚</li></ol><ul><li><strong>å…³è”è´Ÿè½½å‡è¡¡å™¨</strong></li></ul><p>å¦‚æžœæ‚¨çš„åº”ç”¨ç¨‹åºéœ€è¦è´Ÿè½½å‡è¡¡ï¼Œæ‚¨å¯ä»¥å°†ASGä¸ŽAWS Elastic Load Balancerï¼ˆELBï¼‰ç›¸å…³è”ã€‚è¿™æ ·ï¼ŒASGå°†è‡ªåŠ¨å°†æ–°å®žä¾‹æ³¨å†Œåˆ°è´Ÿè½½å‡è¡¡å™¨ï¼Œç¡®ä¿æµé‡å¹³è¡¡ã€‚</p><ul><li><strong>è®¾ç½®å¥åº·æ£€æŸ¥</strong></li></ul><p>å¥åº·æ£€æŸ¥æ˜¯ç¡®ä¿å®žä¾‹å¥åº·çš„å…³é”®ã€‚æ‚¨å¯ä»¥å®šä¹‰HTTPã€TCPæˆ–è‡ªå®šä¹‰å¥åº·æ£€æŸ¥æ¥ç›‘æŽ§å®žä¾‹ã€‚å¦‚æžœå®žä¾‹æ ‡è®°ä¸ºä¸å¥åº·ï¼ŒASGå°†è‡ªåŠ¨æ›¿æ¢å®ƒä»¬ã€‚</p><h3 id="å®žé™…åº”ç”¨åœºæ™¯"><a href="#å®žé™…åº”ç”¨åœºæ™¯" class="headerlink" title="å®žé™…åº”ç”¨åœºæ™¯"></a>å®žé™…åº”ç”¨åœºæ™¯</h3><p>AWS Auto Scaling Groupï¼ˆASGï¼‰åœ¨å„ç§åº”ç”¨åœºæ™¯ä¸­éƒ½å…·æœ‰å¹¿æ³›çš„ç”¨é€”ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„åº”ç”¨åœºæ™¯ï¼š</p><ul><li><strong>Webåº”ç”¨ç¨‹åº</strong></li></ul><p>Webåº”ç”¨ç¨‹åºé€šå¸¸ä¼šé¢ä¸´ä¸æ–­å˜åŒ–çš„æµé‡ã€‚ASGå¯å¸®åŠ©æ‚¨æ ¹æ®å®žé™…è¯·æ±‚é‡è‡ªåŠ¨æ‰©å±•æˆ–ç¼©å‡å®žä¾‹æ•°é‡ï¼Œä»¥ç¡®ä¿ç”¨æˆ·å§‹ç»ˆèŽ·å¾—ç¨³å®šçš„æ€§èƒ½ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥æ ¹æ®è¯·æ±‚çŽ‡ã€CPUåˆ©ç”¨çŽ‡æˆ–å…¶ä»–æ€§èƒ½æŒ‡æ ‡æ¥é…ç½®è‡ªåŠ¨æ‰©å±•ç­–ç•¥ã€‚</p><ul><li><strong>å¾®æœåŠ¡æž¶æž„</strong></li></ul><p>å¾®æœåŠ¡æž¶æž„å°†åº”ç”¨ç¨‹åºæ‹†åˆ†æˆå¤šä¸ªå¾®å°çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡éƒ½å¯ä»¥ç‹¬ç«‹æ‰©å±•ã€‚ASGä¸ºæ¯ä¸ªå¾®æœåŠ¡æä¾›å¼¹æ€§ï¼Œä½¿æ‚¨èƒ½å¤Ÿæ ¹æ®æ¯ä¸ªæœåŠ¡çš„è´Ÿè½½éœ€æ±‚æ¥åŠ¨æ€è°ƒæ•´å®žä¾‹æ•°é‡ã€‚è¿™æœ‰åŠ©äºŽç¡®ä¿æ•´ä½“ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚</p><ul><li><strong>æ‰¹å¤„ç†å¤„ç†</strong></li></ul><p>å¯¹äºŽéœ€è¦å¤„ç†å¤§é‡æ•°æ®æˆ–æ‰¹é‡ä½œä¸šçš„åœºæ™¯ï¼ŒASGå¯ä»¥å¸®åŠ©æ‚¨å®žçŽ°è‡ªåŠ¨åŒ–çš„æ‰©å±•å’Œç¼©å‡ã€‚æ‚¨å¯ä»¥æ ¹æ®ä½œä¸šé˜Ÿåˆ—çš„é•¿åº¦ã€å¤„ç†é€Ÿåº¦ç­‰æŒ‡æ ‡æ¥é…ç½®è‡ªåŠ¨æ‰©å±•ç­–ç•¥ï¼Œä»¥ç¡®ä¿ä½œä¸šèƒ½å¤ŸåŠæ—¶å®Œæˆã€‚</p><ul><li><strong>æ•°æ®åˆ†æž</strong></li></ul><p>æ•°æ®åˆ†æžå·¥ä½œè´Ÿè½½é€šå¸¸éœ€è¦å¤§é‡è®¡ç®—èµ„æºï¼Œä½†å…¶è´Ÿè½½å¯èƒ½åœ¨ä¸åŒæ—¶é—´æ®µå†…å˜åŒ–ã€‚ASGå…è®¸æ‚¨æ ¹æ®æ•°æ®åˆ†æžå·¥ä½œè´Ÿè½½çš„éœ€æ±‚æ¥åŠ¨æ€è°ƒæ•´å®žä¾‹æ•°é‡ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨æ•°æ®å¤„ç†é«˜å³°æœŸæ‰©å±•å®žä¾‹æ•°é‡ï¼Œå¹¶åœ¨éœ€æ±‚ä¸‹é™æ—¶è‡ªåŠ¨ç¼©å‡å®¹é‡ï¼Œä»¥ä¼˜åŒ–æˆæœ¬ã€‚</p><ul><li><strong>ç”µå­å•†åŠ¡å¹³å°</strong></li></ul><p>ç”µå­å•†åŠ¡å¹³å°åœ¨ç‰¹å®šæ—¶é—´æ®µå†…å¯èƒ½ä¼šé¢ä¸´å­£èŠ‚æ€§é«˜å³°ï¼Œå¦‚å‡æ—¥è´­ç‰©å­£ã€‚ä½¿ç”¨ASGï¼Œæ‚¨å¯ä»¥æ ¹æ®é”€å”®æ´»åŠ¨çš„é¢„æœŸæ¥è°ƒæ•´å®žä¾‹æ•°é‡ï¼Œä»¥åº”å¯¹æ½œåœ¨çš„æµé‡å¢žåŠ ã€‚è¿™æœ‰åŠ©äºŽç¡®ä¿ç”¨æˆ·åœ¨é«˜å³°æœŸé—´èŽ·å¾—æ— ç¼çš„è´­ç‰©ä½“éªŒã€‚</p><ul><li><strong>æ¸¸æˆæœåŠ¡å™¨</strong></li></ul><p>åœ¨çº¿æ¸¸æˆé€šå¸¸ä¼šæœ‰å¤§é‡çŽ©å®¶åŒæ—¶åœ¨çº¿ï¼Œå› æ­¤éœ€è¦å…·å¤‡é«˜åº¦å¯æ‰©å±•æ€§ã€‚ASGå¯ä»¥æ ¹æ®æ¸¸æˆæœåŠ¡å™¨çš„è´Ÿè½½æƒ…å†µæ¥è‡ªåŠ¨æ‰©å±•æˆ–ç¼©å‡å®žä¾‹æ•°é‡ï¼Œä»¥æ»¡è¶³çŽ©å®¶éœ€æ±‚ã€‚è¿™æœ‰åŠ©äºŽç¡®ä¿æ¸¸æˆçš„ç¨³å®šæ€§å’Œå“åº”é€Ÿåº¦ã€‚</p><ul><li><strong>ç§‘å­¦è®¡ç®—</strong></li></ul><p>ç§‘å­¦è®¡ç®—å·¥ä½œè´Ÿè½½éœ€è¦å¤§é‡è®¡ç®—èµ„æºæ¥æ‰§è¡Œå¤æ‚çš„è®¡ç®—ä»»åŠ¡ï¼Œä¾‹å¦‚æ¨¡æ‹Ÿã€æ•°æ®åˆ†æžå’Œæ¸²æŸ“ã€‚ASGå¯ä»¥å¸®åŠ©ç§‘å­¦ç ”ç©¶å›¢é˜Ÿåœ¨éœ€è¦æ—¶èŽ·å¾—é¢å¤–çš„è®¡ç®—èƒ½åŠ›ï¼Œä»¥åŠ é€Ÿç ”ç©¶è¿›ç¨‹ã€‚</p><p>è¿™äº›æ˜¯ä¸€äº›å¸¸è§çš„å®žé™…åº”ç”¨åœºæ™¯ï¼ŒASGçš„çµæ´»æ€§å’Œè‡ªåŠ¨åŒ–ç‰¹æ€§ä½¿å…¶æˆä¸ºå„ç§å·¥ä½œè´Ÿè½½çš„ç†æƒ³é€‰æ‹©ã€‚æ ¹æ®æ‚¨çš„ç‰¹å®šéœ€æ±‚ï¼Œæ‚¨å¯ä»¥è°ƒæ•´è‡ªåŠ¨æ‰©å±•ç­–ç•¥å’Œé…ç½®ï¼Œä»¥æ»¡è¶³ä¸åŒåº”ç”¨ç¨‹åºçš„è¦æ±‚ã€‚</p><h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>AWS Auto Scaling Groupï¼ˆASGï¼‰æ˜¯Cloudä¸­å®žçŽ°å¼¹æ€§è‡ªåŠ¨æ‰©å±•çš„é‡è¦å·¥å…·ï¼Œå®ƒä½¿æ‚¨èƒ½å¤Ÿæ ¹æ®éœ€æ±‚è‡ªåŠ¨è°ƒæ•´èµ„æºï¼ŒåŒæ—¶ä¼˜åŒ–èµ„æºä½¿ç”¨å’Œæˆæœ¬ã€‚é€šè¿‡æ·±å…¥äº†è§£ASGçš„æ ¸å¿ƒæ¦‚å¿µã€é…ç½®é€‰é¡¹ã€æœ€ä½³å®žè·µä»¥åŠå®žé™…åº”ç”¨åœºæ™¯ï¼Œæ‚¨å°†èƒ½å¤Ÿæž„å»ºå¯æ‰©å±•å’Œå…·æœ‰é€‚åº”æ€§çš„äº‘åŸºç¡€æž¶æž„ï¼Œä»¥åº”å¯¹ä¸æ–­å˜åŒ–çš„åº”ç”¨ç¨‹åºå’ŒæœåŠ¡éœ€æ±‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Elastic Load Balancer: CLB, ALB, NLB and GWLB</title>
      <link href="/2022/10/21/elastic-load-balancer-clb-alb-nlb-and-gwlb/"/>
      <url>/2022/10/21/elastic-load-balancer-clb-alb-nlb-and-gwlb/</url>
      
        <content type="html"><![CDATA[<h2 id="Classic-Load-Balancers-v1"><a href="#Classic-Load-Balancers-v1" class="headerlink" title="Classic Load Balancers (v1)"></a>Classic Load Balancers (v1)</h2><p><strong>Supports TCP (Layer 4), HTTP &amp; HTTPS (Layer 7)</strong></p><p><strong>Health checks are TCP or HTTP based</strong></p><p><strong>Fixed hostname XXX.region.elb.amazonaws.com</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-elb-clb.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-elb-clb.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Classic Load Balancer" style="width:600px;"/></div><span class="image-caption">AWS Classic Load Balancer</span></div><h2 id="Application-Load-Balancer-v2"><a href="#Application-Load-Balancer-v2" class="headerlink" title="Application Load Balancer (v2)"></a>Application Load Balancer (v2)</h2><p><strong>Application  load balancers is Layer 7 (HTTP)</strong></p><p><strong>Load balancing to multiple HTTP applications across machines (target groups)</strong></p><p><strong>Load balancing to multiple applications on the same machine (ex: containers)</strong></p><p><strong>Support for HTTP&#x2F;2 and WebSocket</strong></p><p><strong>Supports redirects (from HTTP to HTTPS for example)</strong></p><p><strong>Routing tables to different target groups:</strong></p><ol><li>Routing base on path in URL (example.com&#x2F;<strong>users</strong> &amp; example.com&#x2F;<strong>posts</strong>)</li><li>Routing base on hostname in URL (<strong>one</strong>.example.com &amp; <strong>other</strong>.example.com)</li><li>Routing base on Query String, Headers (example.com&#x2F;users?<strong>id&#x3D;123&amp;order&#x3D;false</strong>)</li></ol><span class='pbg danger'>ALB are a great fit for micro services & container-based application (example: Docker & Amazon ECS)</span><p>Has a port mapping feature to redirect to a dynamic port in ECS<br>In comparison, weâ€™d need multiple Classic Load Balancer per application</p><h3 id="ALB-v2-HTTP-Based-Traffic"><a href="#ALB-v2-HTTP-Based-Traffic" class="headerlink" title="ALB (v2) HTTP Based Traffic"></a>ALB (v2) HTTP Based Traffic</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-elb-alb-traffic.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-elb-alb-traffic.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Application Load Balancer Traffic" style="width:600px;"/></div><span class="image-caption">AWS Application Load Balancer Traffic</span></div><h3 id="ALB-v2-Target-Groups"><a href="#ALB-v2-Target-Groups" class="headerlink" title="ALB (v2) Target Groups"></a>ALB (v2) Target Groups</h3><p><strong>EC2 instances (can be managed by an Auto Scaling Group) - HTTP</strong></p><p><strong>ECS tasks (managed by ECS itself) - HTTP</strong></p><p><strong>Lambda functions - HTTP request is translated into a JSON event</strong></p><p><strong>IP Addresses - must be private IPs</strong></p><p><strong>ALB can route to multiple target groups</strong></p><p><strong>Health checks are at the target group level</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-elb-alb-targetgroup.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-elb-alb-targetgroup.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS ALB Query Strings/Parameters Routing" style="width:600px;"/></div><span class="image-caption">AWS ALB Query Strings/Parameters Routing</span></div><h2 id="Network-Load-Balancer-v2"><a href="#Network-Load-Balancer-v2" class="headerlink" title="Network Load Balancer (v2)"></a>Network Load Balancer (v2)</h2><p><strong>Network load balancers (Layer 4) allow to:</strong></p><ol><li>Forward TCP &amp; UDP traffic to your instances</li><li>Handle millions of request per seconds</li><li>Less latency ~ 100ms (vs 400 ms for ALB)</li></ol><p><strong>NLB has one static IP per AZ, and supports assigning Elastic IP(helpful for whitelisting specific IP)</strong></p><p><strong>NLB are used for extreme performance, TCP or UDP traffic</strong></p><p><strong>Not included in the AWS free tier</strong></p><h3 id="Network-Load-Balancer-v2-TCP-Layer-4-Based-Traffic"><a href="#Network-Load-Balancer-v2-TCP-Layer-4-Based-Traffic" class="headerlink" title="Network Load Balancer (v2) TCP (Layer 4) Based Traffic"></a>Network Load Balancer (v2) TCP (Layer 4) Based Traffic</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-elb-nlb-traffic.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-elb-nlb-traffic.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS NLB TCP Based Traffic" style="width:600px;"/></div><span class="image-caption">AWS NLB TCP Based Traffic</span></div><h3 id="Network-Load-Balancer-Target-Groups"><a href="#Network-Load-Balancer-Target-Groups" class="headerlink" title="Network Load Balancer - Target Groups"></a>Network Load Balancer - Target Groups</h3><p><strong>EC2 instances</strong></p><p><strong>IP Addresses - must be private IPs</strong></p><p><strong>Application Load Balancer</strong></p><p><strong>Health Checks support the TCP, HTTP and HTTPS protocols</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-elb-nlb-targetgroup.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-elb-nlb-targetgroup.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Network Load Balancer Target Group" style="width:600px;"/></div><span class="image-caption">AWS Network Load Balancer Target Group</span></div><h2 id="Gateway-Load-Balancer"><a href="#Gateway-Load-Balancer" class="headerlink" title="Gateway Load Balancer"></a>Gateway Load Balancer</h2><p><strong>Deploy, scale, and manage a fleet of 3rd party network virtual applications in AWS Example: Firewalls, Intrusion Detection and Prevention Systems, Deep Packet Inspect Inspection Systems, payload manipulation, â€¦</strong></p><p><strong>Operates at Layer 3 (Network Layer) - IP Packages</strong></p><p><strong>Combines the following fuctions:</strong></p><ol><li>Transparent Network Gateway - single entry&#x2F;exit for all traffic</li><li>Load Balancer - distributes traffic to your virtual applications</li><li>Uses the GENEVE protocol on port 6081</li></ol><h3 id="Gateway-Load-Balancer-Network-Layer-Layer-3-Based-Traffic"><a href="#Gateway-Load-Balancer-Network-Layer-Layer-3-Based-Traffic" class="headerlink" title="Gateway Load Balancer Network Layer (Layer 3) Based Traffic"></a>Gateway Load Balancer Network Layer (Layer 3) Based Traffic</h3><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-elb-gwlb.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-elb-gwlb.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Gateway Load Balancer Traffic" style="height:500px;"/></div><span class="image-caption">AWS Gateway Load Balancer Traffic</span></div>  <h3 id="Gateway-Load-Balancer-Target-Group"><a href="#Gateway-Load-Balancer-Target-Group" class="headerlink" title="Gateway Load Balancer - Target Group"></a>Gateway Load Balancer - Target Group</h3><p><strong>EC2 instances</strong></p><p><strong>IP Addresses - must be private IPs</strong></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-elb-gwlb-targetgroup.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-elb-gwlb-targetgroup.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS Gateway Load Balancer Target Group" style="width:600px;"/></div><span class="image-caption">AWS Gateway Load Balancer Target Group</span></div>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Elastic Load Balancing (ELB) Overview</title>
      <link href="/2022/10/17/elastic-load-balancing-elb-overview/"/>
      <url>/2022/10/17/elastic-load-balancing-elb-overview/</url>
      
        <content type="html"><![CDATA[<h2 class="bamboo-h " id="What is load balancingx8p24mblms">What is load balancing</h2><br/><p>Load Balances are servers that forward traffic to multiple servers (e.g., EC2 instances) downstream.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-elb-1.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-elb-1.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS ELB" style="width:600px;"/></div><span class="image-caption">AWS ELB</span></div><h2 class="bamboo-h " id="Why use a load balancing2cb3xz2fr18">Why use a load balancing</h2><br/><ul><li>Spread load across multiple downstream instances</li><li>Expose a single point of access (DNS) to your application</li><li>Seamlessly handle failures of downstream instances</li><li>Do regular health checks to your instances</li><li>Provide SSL termination (HTTPS) for your websites</li><li>Enforce stickiness with cookies</li><li>Hight availability across zones</li><li>Separate public traffic from private traffic</li></ul><h2 class="bamboo-h " id="Why use an Elastic Load Balancer2kmk61ie4eu">Why use an Elastic Load Balancer</h2><br/><ul><li>An Elastic Load Balancer is a managed load balancer<ul><li>AWS guarantees that it will be working</li><li>AWS takes care of upgrades, maintenance, hight availability</li><li>AWS provides only a few configuration knobs</li></ul></li><li>It costs less to setup your own load balancer but it will be a lot more effort on your end</li><li>It is integrarted with many AWS offerings&#x2F;services<ul><li>EC2, EC2 Auto Scaling Groups, Amazon ECS</li><li>AWS Certificate Manager (ACM), CloudWatch</li><li>Route 53, AWS WAF, AWS Global Accelerator</li></ul></li></ul><h2 class="bamboo-h " id="Health Checks2itiazwt004">Health Checks</h2><br/><ul><li>Health Checks are crucial for Load Balancers</li><li>They enable the load balancer to know if instances it forwards traffic to are available to reply to requests</li><li>The health check is done on a port and a route (&#x2F;health is common)</li><li>If the response is not 200 (OK), then the instance is unhealthy</li></ul><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-elb-health.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-elb-health.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS ELB Health Check" style="width:600px;"/></div><span class="image-caption">AWS ELB Health Check</span></div><h2 class="bamboo-h " id="Types of load balancer on AWSuydtb1vdt5">Types of load balancer on AWS</h2><br/><ul><li>AWS has 4 kinds of managed Load Balancers</li><li>Classic Load Balancer (v1 - old generation) - 2009 - CLB<ul><li>HTTP, HTTPS, TCP, SSL (secure TCP)</li></ul></li><li>Application Load Balancer (v2 - new generation) - 2016 - ALB<ul><li>HTTP, HTTPS, WebSocker</li></ul></li><li>Network Load Balancer (v2 - new generation) - 2017 - NLB<ul><li>TCP, TLC (secure TCP), UDP</li></ul></li><li>Gateway Load Balancer - 2020 - GWLB<ul><li>Operates at layer 3 (Network layer) - IP Protocol</li></ul></li><li>Overall, it is recommended to use the new generation load balancers as they provides more features</li><li>Some load balancers can be setup as internal (private) or external (public) ELBs</li></ul><h2 class="bamboo-h " id="Load Balancer Security Groupssmagrmgue5">Load Balancer Security Groups</h2><br/><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-elb-security.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-elb-security.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS ELB Security Group" style="width:600px;"/></div><span class="image-caption">AWS ELB Security Group</span></div>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS EBS vs AWS EFS - Understanding the Key Differences</title>
      <link href="/2022/09/21/aws-ebs-vs-aws-efs/"/>
      <url>/2022/09/21/aws-ebs-vs-aws-efs/</url>
      
        <content type="html"><![CDATA[<h2 class="bamboo-h " id="Introduction2xdxv267g9">Introduction</h2><br/><p>Amazon Web Services (AWS) offers a wide range of storage solutions to cater to the diverse needs of businesses and developers. Two popular options are <code>Amazon Elastic Block Store (EBS)</code> and <code>Amazon Elastic File System (EFS)</code>. While both provide storage capabilities within the AWS ecosystem, they serve different purposes and have distinct characteristics. In this blog post, we will explore the key differences between AWS EBS and AWS EFS to help you make an informed choice for your specific use case.</p><h2 class="bamboo-h " id="Amazon Elastic Block Store (EBS)1jdu6sgroti">Amazon Elastic Block Store (EBS)</h2><br/><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-ebs-efs-1.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-ebs-efs-1.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS EBS" style="width:400px;"/></div><span class="image-caption">AWS EBS</span></div><span class='pbg warning'>Amazon Elastic Block Store (EBS) is a block-level storage service that provides durable and high-performance storage volumes that can be attached to Amazon Elastic Compute Cloud (EC2) instances.</span>.<p>Here are some of the main characteristics and use cases of AWS EBS.</p><h4 class="bamboo-h " id="Block Storage23tlmqtn1uu">Block Storage</h4><br/><p>EBS provides block storage, which means it is best suited for scenarios where you need to store data at the block level, such as databases and applications that require direct access to disk devices.</p><h4 class="bamboo-h " id="Low-Latency Performance7z97sfeae50">Low-Latency Performance</h4><br/><p> EBS volumes offer low-latency, high-throughput performance, making them ideal for I&#x2F;O-intensive workloads where rapid data access is crucial.</p><h4 class="bamboo-h " id="Data Persistencenw36ph545s">Data Persistence</h4><br/><p> EBS volumes are persistent, meaning the data stored on them remains intact even when the associated EC2 instance is stopped or terminated. This is useful for maintaining critical data.</p><h4 class="bamboo-h " id="Availability and Redundancy1udesdvv8i6">Availability and Redundancy</h4><br/><p>EBS volumes can be replicated within a specific<br>Availability Zone (AZ) for redundancy, but they are not natively designed for cross-AZ or cross-region redundancy. For cross-AZ redundancy, you need to set up additional configurations.</p><h4 class="bamboo-h " id="Cost3llhaffzbyw">Cost</h4><br/><p>You pay for the provisioned capacity of the EBS volume, regardless of whether it is in use or not. This can make it cost-effective for certain use cases but might require careful capacity planning.</p><h2 class="bamboo-h " id="Amazon Elastic File System (EFS)1yx59q4bmui">Amazon Elastic File System (EFS)</h2><br/><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/aws/aws-ebs-efs-2.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-ebs-efs-2.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS EFS" style="width:400px;"/></div><span class="image-caption">AWS EFS</span></div><span class='pbg warning'>Amazon Elastic File System (EFS) is a fully managed</span> <p>Here are the key attributes and use cases of AWS EFS:</p><h4 class="bamboo-h " id="File Storage2pnvnjcm6pi">File Storage</h4><br/><p>EFS offers file-level storage, making it suitable for scenarios where multiple instances need shared access to the same data, such as web applications, content management systems, and shared repositories.</p><h4 class="bamboo-h " id="Scalability2accbfao2yx">Scalability</h4><br/><p>EFS is designed to scale automatically as your storage needs grow. It can handle a dynamic number of EC2 instances concurrently, making it a great choice for applications with varying workloads.</p><h4 class="bamboo-h " id="Cross-AZ and Cross-Region2fsq63xfq0x">Cross-AZ and Cross-Region</h4><br/><p>EFS provides built-in redundancy and can be accessed across multiple Availability Zones and even across regions. This ensures high availability and disaster recovery capabilities.</p><h4 class="bamboo-h " id="Pay-as-You-Go9ovg8xa2f74">Pay-as-You-Go</h4><br/><p>With EFS, you pay for the storage capacity you use, making it a cost-effective option for applications with fluctuating storage requirements.</p><h4 class="bamboo-h " id="Simplified Management2k8115otvkg">Simplified Management</h4><br/><p>EFS takes care of the underlying infrastructure and scaling, allowing you to focus on your applications without worrying about managing storage hardware.</p><h2 class="bamboo-h " id="Choosing Between EBS and EFS1wupbwg8kxu">Choosing Between EBS and EFS</h2><br/><p>To decide between AWS EBS and AWS EFS, consider the following factors:</p><h4 class="bamboo-h " id="Use Case85lkxt8ioa0">Use Case</h4><br/><p>Determine whether your application requires block-level storage (EBS) or file-level storage (EFS).</p><h4 class="bamboo-h " id="Performance Requirements19gbd811mih">Performance Requirements</h4><br/> <p>Assess your performance needs. EBS is often preferred for high-performance workloads, while EFS offers good performance for a wide range of applications.</p><h4 class="bamboo-h " id="Scalability5g4qgos16fs">Scalability</h4><br/><p>Consider whether your storage needs are likely to scale over time. EFS is designed for easy scalability.</p><h4 class="bamboo-h " id="Availability and Redundancycc3j0xg6ids">Availability and Redundancy</h4><br/> <p>If high availability and redundancy are crucial, EFS may be a better choice due to its built-in cross-AZ and cross-region capabilities.</p><h4 class="bamboo-h " id="Cost55g8exmwt0">Cost</h4><br/> <p>Evaluate your budget and cost considerations. EBS charges are based on provisioned capacity, while EFS charges are based on actual usage.</p><h2 class="bamboo-h " id="Conclusion1t0fuo2qpaa">Conclusion</h2><br/><p>In summary, AWS EBS and AWS EFS are both valuable storage services within the AWS ecosystem, but they serve different purposes and have distinct characteristics. <span class='pbg danger'>EBS is ideal for block-level storage with high-performance requirements and provides data persistence within a single Availability Zone</span>. On the other hand, <span class='pbg danger'>EFS is designed for scalable file-level storage</span>. Your choice between the two should be based on your specific use case and requirements. Understanding these differences is crucial for optimizing your AWS storage strategy and ensuring the best performance and cost-efficiency for your applications.</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS Elastic File System (EFS)ï¼šäº‘ä¸­çš„å¼¹æ€§æ–‡ä»¶å­˜å‚¨</title>
      <link href="/2022/08/13/the-elastic-file-system/"/>
      <url>/2022/08/13/the-elastic-file-system/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Cloudæ—¶ä»£ï¼Œæ•°æ®çš„ç®¡ç†å’Œå…±äº«è‡³å…³é‡è¦ã€‚<code>AWS Elastic File Systemï¼ˆEFSï¼‰</code>æ˜¯ Amazon Web Servicesï¼ˆAWSï¼‰æä¾›çš„ä¸€é¡¹äº‘å­˜å‚¨æœåŠ¡ï¼Œæ—¨åœ¨æ»¡è¶³ä¼ä¸šå’Œå¼€å‘è€…å¯¹å¯æ‰©å±•ã€é«˜å¯ç”¨æ€§æ–‡ä»¶å­˜å‚¨çš„éœ€æ±‚ã€‚æœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨ AWS EFS çš„ç‰¹ç‚¹ã€ä¼˜åŠ¿ã€ä½¿ç”¨æ¡ˆä¾‹ä»¥åŠå¦‚ä½•å¼€å§‹ä½¿ç”¨å®ƒã€‚</p><p><img src="/assets/images/aws/aws-efs.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-efs.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS EFS"></p><h2 class="bamboo-h " id="AWS EFS æ¦‚è§ˆ1v72com3ack">AWS EFS æ¦‚è§ˆ</h2><br/><span class='pbg danger'>AWS EFS æ˜¯ä¸€ç§æ‰˜ç®¡çš„ç½‘ç»œæ–‡ä»¶å­˜å‚¨æœåŠ¡ï¼Œæ—¨åœ¨æä¾›å¯æ‰©å±•ã€é«˜å¯ç”¨æ€§çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä»¥æ»¡è¶³å„ç§åº”ç”¨ç¨‹åºå’Œå·¥ä½œè´Ÿè½½çš„å­˜å‚¨éœ€æ±‚ã€‚</span> ä»¥ä¸‹æ˜¯ AWS EFS çš„å…³é”®ç‰¹ç‚¹ï¼š<p><strong>å…±äº«æ–‡ä»¶å­˜å‚¨</strong>ï¼šEFS å…è®¸å¤šä¸ª Amazon EC2 å®žä¾‹åŒæ—¶è®¿é—®ç›¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ”¯æŒå¤šç”¨æˆ·å’Œå¤šåº”ç”¨ç¨‹åºçš„å…±äº«æ–‡ä»¶è®¿é—®ã€‚</p><p><strong>è‡ªåŠ¨ä¼¸ç¼©</strong>ï¼šEFS è‡ªåŠ¨æ‰©å±•ä»¥é€‚åº”å®¹é‡å’Œåžåé‡çš„éœ€æ±‚ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚è¿™ä½¿å¾—å®ƒé€‚ç”¨äºŽä¸æ–­å˜åŒ–çš„å·¥ä½œè´Ÿè½½ã€‚</p><p><strong>é«˜å¯ç”¨æ€§</strong>ï¼šEFS æ–‡ä»¶ç³»ç»Ÿåœ¨å¤šä¸ªå¯ç”¨åŒºï¼ˆAvailability Zonesï¼‰å†…å¤åˆ¶æ•°æ®ï¼Œä»¥æä¾›é«˜å¯ç”¨æ€§å’Œå†—ä½™æ€§ã€‚è¿™æ„å‘³ç€å¦‚æžœä¸€ä¸ªå¯ç”¨åŒºå‘ç”Ÿæ•…éšœï¼Œæ–‡ä»¶ç³»ç»Ÿä»ç„¶å¯ç”¨ã€‚</p><p><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šEFS æä¾›å¼ºä¸€è‡´æ€§çš„æ•°æ®è®¿é—®ï¼Œç¡®ä¿å¤šä¸ªå®žä¾‹å¹¶å‘è®¿é—®æ—¶çš„æ•°æ®ä¸€è‡´æ€§ã€‚</p><p><strong>å¤šç§è®¿é—®åè®®</strong>ï¼šEFS æ”¯æŒå¤šç§æ–‡ä»¶è®¿é—®åè®®ï¼ŒåŒ…æ‹¬ NFSv4ã€NFSv3 å’Œ Amazon EFS æ–‡ä»¶ç³»ç»Ÿå®¢æˆ·ç«¯ã€‚</p><p><strong>å®‰å…¨æ€§</strong>ï¼šEFS æ–‡ä»¶ç³»ç»Ÿæ”¯æŒ Amazon VPCï¼ˆVirtual Private Cloudï¼‰ç½‘ç»œéš”ç¦»ï¼Œä»¥ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§å’Œéšç§æ€§ã€‚</p><p><img src="/assets/images/aws/aws-efs-ia.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-efs-ia.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS EFS IA"></p><h2 class="bamboo-h " id="AWS EFS çš„ä¼˜åŠ¿1aybi70xx5k">AWS EFS çš„ä¼˜åŠ¿</h2><br/><p>ä¸ºä»€ä¹ˆé€‰æ‹© AWS EFS ä½œä¸ºæ–‡ä»¶å­˜å‚¨è§£å†³æ–¹æ¡ˆ? ä»¥ä¸‹æ˜¯ä¸€äº›æ˜¾è‘—çš„ä¼˜åŠ¿ï¼š</p><p><strong>å¯æ‰©å±•æ€§</strong>ï¼šEFS è‡ªåŠ¨æ‰©å±•ï¼Œå› æ­¤æ‚¨ä¸å¿…æ‹…å¿ƒæ–‡ä»¶ç³»ç»Ÿçš„å®¹é‡é™åˆ¶ã€‚å®ƒå¯ä»¥æ ¹æ®éœ€è¦å¢žåŠ å­˜å‚¨ç©ºé—´ã€‚</p><p><strong>é«˜å¯ç”¨æ€§</strong>ï¼šEFS æä¾›å¤šå¯ç”¨åŒºéƒ¨ç½²ï¼Œä½¿æ–‡ä»¶ç³»ç»Ÿåœ¨å•ä¸ªå¯ç”¨åŒºæ•…éšœæ—¶ä¿æŒå¯ç”¨ï¼Œæé«˜äº†åº”ç”¨ç¨‹åºçš„å¯ç”¨æ€§ã€‚</p><p><strong>å…±äº«æ€§</strong>ï¼šå¤šä¸ª EC2 å®žä¾‹å¯ä»¥åŒæ—¶è®¿é—®åŒä¸€æ–‡ä»¶ç³»ç»Ÿï¼Œä½¿å…¶é€‚ç”¨äºŽéœ€è¦å¤šä¸ªå®žä¾‹ä¹‹é—´å…±äº«æ–‡ä»¶çš„åº”ç”¨ç¨‹åºã€‚</p><p><strong>å¼ºä¸€è‡´æ€§</strong>ï¼šEFS æä¾›å¼ºä¸€è‡´æ€§ï¼Œç¡®ä¿å¤šä¸ªå®žä¾‹å¹¶å‘å†™å…¥æˆ–è¯»å–æ–‡ä»¶æ—¶çš„æ•°æ®ä¸€è‡´æ€§ã€‚</p><p><strong>çµæ´»æ€§</strong>ï¼šæ‚¨å¯ä»¥æ ¹æ®éœ€æ±‚åˆ›å»ºå’Œç®¡ç†å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œæ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿå¯ä»¥æœ‰ä¸åŒçš„æƒé™å’Œè®¿é—®ç­–ç•¥ã€‚</p><h2 class="bamboo-h " id="AWS EFS çš„ä½¿ç”¨åœºæ™¯1s3g5pzai8j">AWS EFS çš„ä½¿ç”¨åœºæ™¯</h2><br/><p>AWS EFS é€‚ç”¨äºŽè®¸å¤šä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽï¼š</p><p><strong>Web æœåŠ¡å™¨</strong>ï¼šEFS å¯ç”¨äºŽå­˜å‚¨ Web æœåŠ¡å™¨çš„é™æ€å†…å®¹ã€æ—¥å¿—æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ï¼Œä»¥å®žçŽ°é«˜å¯ç”¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p><p><strong>å®¹å™¨åŒ–åº”ç”¨ç¨‹åº</strong>ï¼šå°†å®¹å™¨åŒ–åº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶å’Œæ•°æ®å­˜å‚¨åœ¨ EFS ä¸­ï¼Œä»¥ä¾¿å¤šä¸ªå®¹å™¨å®žä¾‹ä¹‹é—´å…±äº«ã€‚</p><p><strong>å¤§æ•°æ®åˆ†æž</strong>ï¼šEFS å¯ç”¨äºŽå­˜å‚¨å¤§æ•°æ®åˆ†æžå·¥ä½œè´Ÿè½½çš„è¾“å…¥æ•°æ®å’Œè¾“å‡ºç»“æžœï¼Œæ”¯æŒå¤šä¸ªåˆ†æžèŠ‚ç‚¹çš„å¹¶å‘è®¿é—®ã€‚</p><p><strong>åº”ç”¨ç¨‹åºå…±äº«</strong>ï¼šEFS ä½¿ä¸åŒåº”ç”¨ç¨‹åºä¹‹é—´å¯ä»¥è½»æ¾åœ°å…±äº«æ–‡ä»¶ï¼Œé€‚ç”¨äºŽå¾®æœåŠ¡æž¶æž„å’Œå¤šä¸ªåº”ç”¨ç¨‹åºå…±å­˜çš„æƒ…å†µã€‚</p><p><strong>å¼€å‘å’Œæµ‹è¯•çŽ¯å¢ƒ</strong>ï¼šå¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ EFS å­˜å‚¨å¼€å‘å’Œæµ‹è¯•çŽ¯å¢ƒçš„ä»£ç å’Œèµ„æºï¼Œç¡®ä¿ä¸€è‡´çš„å¼€å‘å’Œæµ‹è¯•æ•°æ®ã€‚</p><h2 class="bamboo-h " id="å¼€å§‹ä½¿ç”¨ AWS EFS2ehztqx8cub">å¼€å§‹ä½¿ç”¨ AWS EFS</h2><br/><p>è¦å¼€å§‹ä½¿ç”¨ AWS EFSï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><ol><li>ç™»å½• AWS æŽ§åˆ¶å°ï¼šä½¿ç”¨æ‚¨çš„ AWS å¸æˆ·ç™»å½• AWS ç®¡ç†æŽ§åˆ¶å°ã€‚</li><li>åˆ›å»º EFS æ–‡ä»¶ç³»ç»Ÿï¼šåœ¨ AWS æŽ§åˆ¶å°ä¸­å¯¼èˆªåˆ° EFS æœåŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶é…ç½®å­˜å‚¨å®¹é‡å’Œæƒé™ã€‚</li><li>è®¾ç½®è®¿é—®æƒé™ï¼šå®šä¹‰å“ªäº› EC2 å®žä¾‹å¯ä»¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åˆ†é…é€‚å½“çš„æƒé™ã€‚</li><li>å°†æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ° EC2 å®žä¾‹ï¼šåœ¨æ‚¨çš„ EC2 å®žä¾‹ä¸ŠæŒ‚è½½ EFS æ–‡ä»¶ç³»ç»Ÿï¼Œä½¿å®žä¾‹èƒ½å¤Ÿè®¿é—®å…±äº«æ–‡ä»¶ã€‚</li><li>å¼€å§‹ä½¿ç”¨ï¼šå°†æ‚¨çš„åº”ç”¨ç¨‹åºæˆ–å·¥ä½œè´Ÿè½½é…ç½®ä¸ºä½¿ç”¨æŒ‚è½½çš„ EFS æ–‡ä»¶ç³»ç»Ÿã€‚</li></ol><h2 class="bamboo-h " id="æ€»ç»“43x20nmn56m">æ€»ç»“</h2><br/><p>AWS Elastic File Systemï¼ˆEFSï¼‰æ˜¯ä¸€é¡¹å¼ºå¤§çš„äº‘æ–‡ä»¶å­˜å‚¨æœåŠ¡ï¼Œä¸ºå„ç§åº”ç”¨ç¨‹åºå’Œä¸šåŠ¡æä¾›å¯æ‰©å±•ï¼Œé«˜å¯èƒ½æ€§çš„æ–‡ä»¶å­˜å‚¨åŠŸèƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to Backup and Restore AWS EBS</title>
      <link href="/2022/07/19/how-to-backup-and-restore-aws-ebs/"/>
      <url>/2022/07/19/how-to-backup-and-restore-aws-ebs/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Amazon Web Servicesï¼ˆAWSï¼‰ä¸­ï¼Œ<code>Snapshot</code>æ˜¯ä¸€ç§å¤‡ä»½å’Œæ¢å¤Amazon Elastic Block Storeï¼ˆEBSï¼‰å·æ•°æ®çš„å…³é”®å·¥å…·ã€‚<br><img src="/assets/images/aws/aws-ebs-snapshot.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-ebs-snapshot.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS EBS Snapshot"></p><h2 class="bamboo-h " id="ä»€ä¹ˆæ˜¯Snapshot6igfdbt8280">ä»€ä¹ˆæ˜¯Snapshot</h2><br/><h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><p>Snapshotæ˜¯EBSå·çš„ç‚¹å¯¹ç‚¹å¤‡ä»½ï¼Œå®ƒè®°å½•äº†å·çš„ç‰¹å®šæ—¶åˆ»çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬æ•°æ®ã€é…ç½®å’Œå…ƒæ•°æ®ã€‚å¿«ç…§æ˜¯å­˜å‚¨åœ¨Amazon S3ä¸­çš„ï¼Œå› æ­¤å…·æœ‰é«˜å¯é æ€§å’ŒæŒä¹…æ€§ã€‚</p><h2 class="bamboo-h " id="ç‰¹ç‚¹å’ŒåŠŸèƒ½b1j0ji1ub6">ç‰¹ç‚¹å’ŒåŠŸèƒ½</h2><br/><h4 id="æŒä¹…æ€§"><a href="#æŒä¹…æ€§" class="headerlink" title="æŒä¹…æ€§"></a>æŒä¹…æ€§</h4><p>Snapshotæ˜¯æŒä¹…æ€§çš„ï¼Œä¸€æ—¦åˆ›å»ºï¼Œå®ƒä»¬ä¼šä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿åŽŸå§‹EBSå·è¢«åˆ é™¤ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><h4 id="å¢žé‡å¤‡ä»½"><a href="#å¢žé‡å¤‡ä»½" class="headerlink" title="å¢žé‡å¤‡ä»½"></a>å¢žé‡å¤‡ä»½</h4><p>å¿«ç…§ä»…æ•èŽ·è‡ªä¸Šä¸€ä¸ªå¿«ç…§ä»¥æ¥å‘ç”Ÿçš„æ›´æ”¹ï¼Œè¿™é™ä½Žäº†å¤‡ä»½çš„æˆæœ¬å’Œæ—¶é—´ã€‚</p><h4 id="å¿«é€Ÿåˆ›å»º"><a href="#å¿«é€Ÿåˆ›å»º" class="headerlink" title="å¿«é€Ÿåˆ›å»º"></a>å¿«é€Ÿåˆ›å»º</h4><p>Snapshotåˆ›å»ºé€šå¸¸éžå¸¸å¿«ï¼Œå› ä¸ºå®ƒåªä¼šè®°å½•å‘ç”Ÿçš„æ›´æ”¹ã€‚</p><h4 id="ç‰ˆæœ¬æŽ§åˆ¶"><a href="#ç‰ˆæœ¬æŽ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬æŽ§åˆ¶"></a>ç‰ˆæœ¬æŽ§åˆ¶</h4><p>å¯ä»¥åˆ›å»ºå¤šä¸ªå¿«ç…§ï¼Œå¹¶æ ¹æ®éœ€è¦è¿˜åŽŸåˆ°ä¸åŒçš„ç‰ˆæœ¬ï¼Œä»¥ä¾¿è¿›è¡Œæ•°æ®ç‰ˆæœ¬æŽ§åˆ¶å’ŒåŽ†å²è®°å½•ã€‚</p><h4 id="å¤åˆ¶åˆ°å…¶ä»–åŒºåŸŸ"><a href="#å¤åˆ¶åˆ°å…¶ä»–åŒºåŸŸ" class="headerlink" title="å¤åˆ¶åˆ°å…¶ä»–åŒºåŸŸ"></a>å¤åˆ¶åˆ°å…¶ä»–åŒºåŸŸ</h4><p>å¯ä»¥å°†Snapshotå¤åˆ¶åˆ°å…¶ä»–AWSåŒºåŸŸï¼Œä»¥å¢žåŠ æ•°æ®çš„å¯ç”¨æ€§å’Œç¾éš¾æ¢å¤é€‰é¡¹ã€‚</p><h4 id="åˆ›å»ºæ–°EBSå·"><a href="#åˆ›å»ºæ–°EBSå·" class="headerlink" title="åˆ›å»ºæ–°EBSå·"></a>åˆ›å»ºæ–°EBSå·</h4><p>å¯ä»¥ä½¿ç”¨Snapshotåˆ›å»ºæ–°çš„EBSå·ï¼Œè¿™å¯¹äºŽåœ¨ä¸åŒEC2å®žä¾‹ä¹‹é—´å…±äº«æ•°æ®éžå¸¸æœ‰ç”¨ã€‚</p><h4 id="è‡ªåŠ¨å¿«ç…§ç­–ç•¥"><a href="#è‡ªåŠ¨å¿«ç…§ç­–ç•¥" class="headerlink" title="è‡ªåŠ¨å¿«ç…§ç­–ç•¥"></a>è‡ªåŠ¨å¿«ç…§ç­–ç•¥</h4><p>å¯ä»¥è®¾ç½®è‡ªåŠ¨å¿«ç…§ç­–ç•¥ï¼Œä»¥å®šæœŸåˆ›å»ºå¿«ç…§ï¼Œä»Žè€Œå®žçŽ°è‡ªåŠ¨å¤‡ä»½ã€‚</p><h2 class="bamboo-h " id="å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨Snapshotrw393hubbd">å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨Snapshot</h2><br/><h4 id="åˆ›å»ºSnapshot"><a href="#åˆ›å»ºSnapshot" class="headerlink" title="åˆ›å»ºSnapshot"></a>åˆ›å»ºSnapshot</h4><p>åœ¨AWSç®¡ç†æŽ§åˆ¶å°ä¸Šï¼Œå¯ä»¥é€‰æ‹©è¦å¤‡ä»½çš„EBSå·ï¼Œç„¶åŽåˆ›å»ºSnapshotã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨AWSå‘½ä»¤è¡Œå·¥å…·æˆ–SDKæ¥åˆ›å»ºSnapshotã€‚</p><h4 id="å¤‡ä»½ç­–ç•¥"><a href="#å¤‡ä»½ç­–ç•¥" class="headerlink" title="å¤‡ä»½ç­–ç•¥"></a>å¤‡ä»½ç­–ç•¥</h4><p>å¯ä»¥é€‰æ‹©æ‰‹åŠ¨åˆ›å»ºSnapshotï¼Œä¹Ÿå¯ä»¥è®¾ç½®è‡ªåŠ¨å¿«ç…§ç­–ç•¥æ¥å®šæœŸå¤‡ä»½æ•°æ®ã€‚</p><h4 id="æ¢å¤æ•°æ®"><a href="#æ¢å¤æ•°æ®" class="headerlink" title="æ¢å¤æ•°æ®"></a>æ¢å¤æ•°æ®</h4><p>å¦‚æžœéœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨Snapshotè¿˜åŽŸæ•°æ®ã€‚å¯ä»¥åˆ›å»ºæ–°çš„EBSå·ï¼Œç„¶åŽä»Žå¿«ç…§è¿˜åŽŸæ•°æ®ï¼Œæˆ–è€…å°†å¿«ç…§ç›´æŽ¥é™„åŠ åˆ°çŽ°æœ‰EBSå·ä¸Šã€‚</p><h4 id="æ•°æ®ä¿æŠ¤"><a href="#æ•°æ®ä¿æŠ¤" class="headerlink" title="æ•°æ®ä¿æŠ¤"></a>æ•°æ®ä¿æŠ¤</h4><p>Snapshotæ˜¯æ•°æ®ä¿æŠ¤çš„å…³é”®ï¼Œå®ƒå¯ä»¥é˜²æ­¢å› æ•°æ®ä¸¢å¤±æˆ–æŸåè€Œå¼•å‘çš„ç¾éš¾æƒ…å†µã€‚</p><h4 id="æ•°æ®å¤åˆ¶å’Œè¿ç§»"><a href="#æ•°æ®å¤åˆ¶å’Œè¿ç§»" class="headerlink" title="æ•°æ®å¤åˆ¶å’Œè¿ç§»"></a>æ•°æ®å¤åˆ¶å’Œè¿ç§»</h4><p>å¯ä»¥å°†Snapshotå¤åˆ¶åˆ°å…¶ä»–AWSåŒºåŸŸæˆ–AWSè´¦æˆ·ï¼Œä»¥å®žçŽ°æ•°æ®å¤åˆ¶å’Œè¿ç§»ã€‚</p><h2 class="bamboo-h " id="å¿«ç…§çš„åº”ç”¨åœºæ™¯1iu855m10lf">å¿«ç…§çš„åº”ç”¨åœºæ™¯</h2><br/><h4 id="æ•°æ®å¤‡ä»½å’Œæ¢å¤"><a href="#æ•°æ®å¤‡ä»½å’Œæ¢å¤" class="headerlink" title="æ•°æ®å¤‡ä»½å’Œæ¢å¤"></a>æ•°æ®å¤‡ä»½å’Œæ¢å¤</h4><p>ä¸»è¦ç”¨äºŽå¤‡ä»½é‡è¦çš„æ•°æ®ï¼Œä»¥ä¾¿åœ¨æ•°æ®ä¸¢å¤±æˆ–æŸåæ—¶èƒ½å¤Ÿè¿…é€Ÿæ¢å¤ã€‚</p><h4 id="ç‚¹å¯¹ç‚¹å¤åˆ¶å’Œè¿ç§»"><a href="#ç‚¹å¯¹ç‚¹å¤åˆ¶å’Œè¿ç§»" class="headerlink" title="ç‚¹å¯¹ç‚¹å¤åˆ¶å’Œè¿ç§»"></a>ç‚¹å¯¹ç‚¹å¤åˆ¶å’Œè¿ç§»</h4><p>å¯ä»¥å°†å¿«ç…§å¤åˆ¶åˆ°ä¸åŒçš„ AWS åŒºåŸŸæˆ– AWS è´¦æˆ·ï¼Œä»¥å®žçŽ°æ•°æ®çš„å¤åˆ¶å’Œè¿ç§»ã€‚</p><h4 id="æµ‹è¯•å’Œå¼€å‘"><a href="#æµ‹è¯•å’Œå¼€å‘" class="headerlink" title="æµ‹è¯•å’Œå¼€å‘"></a>æµ‹è¯•å’Œå¼€å‘</h4><p>åˆ›å»ºå¿«ç…§å¯ä»¥å¸®åŠ©åœ¨ä¸å½±å“ç”Ÿäº§çŽ¯å¢ƒçš„æƒ…å†µä¸‹ä¸ºæµ‹è¯•å’Œå¼€å‘çŽ¯å¢ƒæä¾›å®žéªŒæ•°æ®ã€‚</p><h4 id="ç‰ˆæœ¬æŽ§åˆ¶å’Œæ•°æ®æ¢å¤"><a href="#ç‰ˆæœ¬æŽ§åˆ¶å’Œæ•°æ®æ¢å¤" class="headerlink" title="ç‰ˆæœ¬æŽ§åˆ¶å’Œæ•°æ®æ¢å¤"></a>ç‰ˆæœ¬æŽ§åˆ¶å’Œæ•°æ®æ¢å¤</h4><p>å¯ä»¥ä½¿ç”¨å¿«ç…§æ¥å®žçŽ°æ•°æ®ç‰ˆæœ¬æŽ§åˆ¶ï¼Œå…è®¸åœ¨ä¸åŒæ—¶é—´ç‚¹æ¢å¤åˆ°ä¸åŒçš„æ•°æ®çŠ¶æ€ã€‚</p><h4 id="æ•°æ®åˆ†æžå’ŒæŠ¥å‘Š"><a href="#æ•°æ®åˆ†æžå’ŒæŠ¥å‘Š" class="headerlink" title="æ•°æ®åˆ†æžå’ŒæŠ¥å‘Š"></a>æ•°æ®åˆ†æžå’ŒæŠ¥å‘Š</h4><p>å¯ä»¥åˆ›å»ºå¿«ç…§ä»¥ä¾¿è¿›è¡Œæ•°æ®åˆ†æžã€ç”ŸæˆæŠ¥å‘Šæˆ–ç”Ÿæˆæ•°æ®å‰¯æœ¬ä»¥ä¾›å…¶ä»–ç”¨é€”ä½¿ç”¨ã€‚</p><h2 class="bamboo-h " id="å¿«ç…§çš„å®šä»·5jht7jwht78">å¿«ç…§çš„å®šä»·</h2><br/><p>ä¼šè¢«æ”¶è´¹ç”¨äºŽåˆ›å»ºå’Œä¿ç•™å¿«ç…§çš„å­˜å‚¨ç©ºé—´ã€‚å¿«ç…§çš„ä»·æ ¼å–å†³äºŽå­˜å‚¨çš„æ•°æ®é‡ã€‚AWS è¿˜æä¾›äº†ä¸€äº›å®šä»·é€‰é¡¹ï¼Œå¦‚åˆ›å»ºå’Œä¿ç•™å¿«ç…§çš„é¢‘çŽ‡ã€‚å…·ä½“æŸ¥çœ‹ AWS å®˜æ–¹ç½‘ç«™çš„å®šä»·è¯¦æƒ…èŽ·å–æœ€æ–°ä¿¡æ¯ã€‚</p><h2 class="bamboo-h " id="æœ€ä½³å®žè·µå’Œæ³¨æ„äº‹é¡¹1dk9pcfvl14">æœ€ä½³å®žè·µå’Œæ³¨æ„äº‹é¡¹</h2><br/><h4 id="å®šæœŸåˆ›å»ºå¿«ç…§"><a href="#å®šæœŸåˆ›å»ºå¿«ç…§" class="headerlink" title="å®šæœŸåˆ›å»ºå¿«ç…§"></a>å®šæœŸåˆ›å»ºå¿«ç…§</h4><p>å»ºè®®å®šæœŸåˆ›å»ºå¿«ç…§ï¼Œä»¥ç¡®ä¿æ•°æ®çš„å®šæœŸå¤‡ä»½å’Œæ¢å¤èƒ½åŠ›ã€‚</p><h4 id="æ ‡è®°å’Œå‘½å"><a href="#æ ‡è®°å’Œå‘½å" class="headerlink" title="æ ‡è®°å’Œå‘½å"></a>æ ‡è®°å’Œå‘½å</h4><p>ä¸ºå¿«ç…§æä¾›æœ‰æ„ä¹‰çš„æ ‡è®°å’Œå‘½åï¼Œä»¥ä¾¿è½»æ¾è¯†åˆ«å’Œç®¡ç†ã€‚</p><h4 id="è‡ªåŠ¨åŒ–å¤‡ä»½ç­–ç•¥"><a href="#è‡ªåŠ¨åŒ–å¤‡ä»½ç­–ç•¥" class="headerlink" title="è‡ªåŠ¨åŒ–å¤‡ä»½ç­–ç•¥"></a>è‡ªåŠ¨åŒ–å¤‡ä»½ç­–ç•¥</h4><p>ä½¿ç”¨ AWS çš„è‡ªåŠ¨å¤‡ä»½ç­–ç•¥æ¥å®šæœŸåˆ›å»ºå¿«ç…§ï¼Œå‡å°‘äººå·¥å¹²é¢„ã€‚</p><h4 id="æ ¹æ®éœ€æ±‚è°ƒæ•´å¿«ç…§"><a href="#æ ¹æ®éœ€æ±‚è°ƒæ•´å¿«ç…§" class="headerlink" title="æ ¹æ®éœ€æ±‚è°ƒæ•´å¿«ç…§"></a>æ ¹æ®éœ€æ±‚è°ƒæ•´å¿«ç…§</h4><p>æ ¹æ®æ•°æ®çš„é‡è¦æ€§å’Œå˜åŒ–é¢‘çŽ‡ï¼Œè°ƒæ•´å¿«ç…§çš„ä¿ç•™ç­–ç•¥ã€‚</p><h4 id="ç›‘æŽ§å’Œè­¦æŠ¥"><a href="#ç›‘æŽ§å’Œè­¦æŠ¥" class="headerlink" title="ç›‘æŽ§å’Œè­¦æŠ¥"></a>ç›‘æŽ§å’Œè­¦æŠ¥</h4><p>è®¾ç½®ç›‘æŽ§å’Œè­¦æŠ¥ï¼Œä»¥ä¾¿åœ¨å¿«ç…§åˆ›å»ºæˆ–æ•°æ®ä¸¢å¤±æ—¶åŠæ—¶èŽ·å¾—é€šçŸ¥ã€‚</p><h2 class="bamboo-h " id="æ€»ç»“s40czr0jxn">æ€»ç»“</h2><br/><p>æ€»ä¹‹ï¼ŒAWS Snapshot ç”¨äºŽEBSå·å¤‡ä»½å’Œæ•°æ®ä¿æŠ¤çš„å…³é”®å·¥å…·ã€‚å®ƒå…·æœ‰é«˜åº¦çš„æŒä¹…æ€§å’Œå¯é æ€§ï¼Œå¹¶æ”¯æŒæ•°æ®ç‰ˆæœ¬æŽ§åˆ¶ã€æ¢å¤ã€å¤åˆ¶å’Œè¿ç§»ã€‚é€šè¿‡å®šæœŸåˆ›å»ºSnapshotï¼Œå¯ä»¥ç¡®ä¿æ•°æ®çš„å®‰å…¨æ€§å’Œå¯ç”¨æ€§</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Understanding AWS EC2 Instance Store</title>
      <link href="/2022/06/13/understanding-aws-ec2-instance-store/"/>
      <url>/2022/06/13/understanding-aws-ec2-instance-store/</url>
      
        <content type="html"><![CDATA[<p>Amazon Web Services (AWS) çš„å¼¹æ€§Cloudå®žä¾‹ï¼ˆEC2ï¼‰ä¸ºç”¨æˆ·æä¾›äº†å¤šç§å­˜å‚¨é€‰é¡¹ï¼Œå…¶ä¸­ä¹‹ä¸€æ˜¯å®žä¾‹å­˜å‚¨(<code>Instance Store</code>)ï¼Œä¹Ÿè¢«ç§°ä¸ºæœ¬åœ°å®žä¾‹å­˜å‚¨æˆ–çž¬æ€å­˜å‚¨ã€‚æœ¬æ–‡å°†æ·±å…¥ç ”ç©¶ AWS EC2 å®žä¾‹å­˜å‚¨ï¼ŒåŒ…æ‹¬å…¶å®šä¹‰ã€ç‰¹ç‚¹ã€ä½¿ç”¨åœºæ™¯ä»¥åŠæœ€ä½³å®žè·µã€‚</p><h2 class="bamboo-h " id="ä»€ä¹ˆæ˜¯ EC2 å®žä¾‹å­˜å‚¨ï¼Ÿgwylzq465xc">ä»€ä¹ˆæ˜¯ EC2 å®žä¾‹å­˜å‚¨ï¼Ÿ</h2><br/><div class="note info"><p>EC2 å®žä¾‹å­˜å‚¨æ˜¯ EC2 å®žä¾‹ä¸Šæä¾›çš„ä¸´æ—¶ã€æœ¬åœ°å­˜å‚¨é€‰é¡¹ã€‚è¿™äº›å­˜å‚¨å·æ˜¯ç‰©ç†å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚ç¡¬ç›˜é©±åŠ¨å™¨ï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œç›´æŽ¥è¿žæŽ¥åˆ°å®¿ä¸»å®žä¾‹ï¼Œè€Œä¸æ˜¯é€šè¿‡ç½‘ç»œè¿›è¡Œè®¿é—®ã€‚å®žä¾‹å­˜å‚¨é€šå¸¸æä¾›äº†éžå¸¸é«˜çš„æ€§èƒ½ï¼Œé€‚ç”¨äºŽéœ€è¦ä½Žå»¶è¿Ÿå’Œé«˜åžåé‡çš„å·¥ä½œè´Ÿè½½ã€‚</p></div><p><img src="/assets/images/aws/aws-ec2-instancestore-iops.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-ec2-instancestore-iops.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS EC2 Instance Store IOPS"></p><h2 class="bamboo-h " id="å®žä¾‹å­˜å‚¨çš„ç‰¹ç‚¹90rphp1dyh">å®žä¾‹å­˜å‚¨çš„ç‰¹ç‚¹</h2><br/><p><strong>ä¸´æ—¶æ€§</strong>ï¼šå®žä¾‹å­˜å‚¨æ˜¯ä¸´æ—¶çš„ï¼Œä¸Ž EC2 å®žä¾‹çš„ç”Ÿå‘½å‘¨æœŸç´§å¯†ç›¸è¿žã€‚å½“ EC2 å®žä¾‹åœæ­¢ã€ç»ˆæ­¢æˆ–å¤±è´¥æ—¶ï¼Œå­˜å‚¨ä¸­çš„æ•°æ®å°†ä¸å†å¯ç”¨ã€‚</p><p><strong>é«˜æ€§èƒ½</strong>ï¼šå®žä¾‹å­˜å‚¨é€šå¸¸æä¾›éžå¸¸é«˜çš„ I&#x2F;O æ€§èƒ½ï¼Œé€‚ç”¨äºŽéœ€è¦å¤§é‡è¯»å†™æ“ä½œçš„åº”ç”¨ç¨‹åºï¼Œå¦‚æ•°æ®åº“ç¼“å­˜æˆ–ä¸´æ—¶è®¡ç®—ã€‚</p><p><strong>ä½Žå»¶è¿Ÿ</strong>ï¼šç”±äºŽå®žä¾‹å­˜å‚¨ç›´æŽ¥è¿žæŽ¥åˆ°å®¿ä¸»å®žä¾‹ï¼Œå› æ­¤å…·æœ‰éžå¸¸ä½Žçš„è®¿é—®å»¶è¿Ÿï¼Œé€‚ç”¨äºŽå¯¹é€Ÿåº¦è¦æ±‚æžé«˜çš„å·¥ä½œè´Ÿè½½ã€‚</p><p><strong>ä¸åŒäºŽ Amazon EBS</strong>ï¼š<wavy>, ä¸Ž Amazon Elastic Block Storeï¼ˆEBSï¼‰ä¸åŒï¼Œå®žä¾‹å­˜å‚¨ä¸éœ€è¦é¢„é…ï¼Œä¹Ÿæ²¡æœ‰é¢å¤–çš„è´¹ç”¨ï¼Œä½†ç¼ºä¹ EBS æä¾›çš„æŒä¹…æ€§å’Œæ•°æ®å¤‡ä»½åŠŸèƒ½ã€‚</wavy></p><h2 class="bamboo-h " id="ä½¿ç”¨åœºæ™¯l3uwd96zzh">ä½¿ç”¨åœºæ™¯</h2><br/><p><strong>ç¼“å­˜å±‚</strong>ï¼šå®žä¾‹å­˜å‚¨é€‚ç”¨äºŽä¸´æ—¶æ•°æ®ï¼Œå¦‚ç¼“å­˜å±‚ã€‚é€šè¿‡å°†ç¼“å­˜å­˜å‚¨åœ¨å®žä¾‹å­˜å‚¨ä¸Šï¼Œå¯ä»¥æé«˜è¯»å–é€Ÿåº¦å’Œé™ä½ŽåŽç«¯å­˜å‚¨è´Ÿæ‹…ã€‚</p><p><strong>ä¸´æ—¶è®¡ç®—</strong>ï¼šå¯¹äºŽéœ€è¦æ‰§è¡Œå¤§è§„æ¨¡æ•°æ®å¤„ç†çš„ä»»åŠ¡ï¼Œå®žä¾‹å­˜å‚¨å¯ä»¥ç”¨ä½œä¸´æ—¶å·¥ä½œç©ºé—´ï¼Œä»¥åŠ é€Ÿè®¡ç®—è¿‡ç¨‹ã€‚</p><p><strong>æ—¥å¿—å­˜å‚¨</strong>ï¼šå¯¹äºŽéœ€è¦å¿«é€Ÿè®°å½•å¤§é‡æ—¥å¿—æ•°æ®çš„åº”ç”¨ç¨‹åºï¼Œå®žä¾‹å­˜å‚¨å¯ä»¥æä¾›é«˜æ€§èƒ½çš„æ—¥å¿—å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</p><h2 class="bamboo-h " id="æœ€ä½³å®žè·µama8hf5cyu8">æœ€ä½³å®žè·µ</h2><br/><p><strong>å¤‡ä»½é‡è¦æ•°æ®</strong>ï¼šç”±äºŽå®žä¾‹å­˜å‚¨æ˜¯ä¸´æ—¶æ€§çš„ï¼Œé‡è¦æ•°æ®éœ€è¦å¤‡ä»½åˆ°æŒä¹…æ€§å­˜å‚¨ï¼ˆå¦‚ Amazon EBS æˆ– Amazon S3ï¼‰ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚</p><p><strong>äº†è§£ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šåœ¨ä½¿ç”¨å®žä¾‹å­˜å‚¨æ—¶ï¼Œäº†è§£ EC2 å®žä¾‹çš„ç”Ÿå‘½å‘¨æœŸéžå¸¸é‡è¦ã€‚ç¡®ä¿å­˜å‚¨ä¸­çš„æ•°æ®ä¸ä¼šåœ¨å®žä¾‹ç»ˆæ­¢æ—¶ä¸¢å¤±ã€‚</p><p><strong>ç›‘æŽ§æ€§èƒ½</strong>ï¼šå®žä¾‹å­˜å‚¨é€šå¸¸æä¾›é«˜æ€§èƒ½ï¼Œä½†ä»ç„¶éœ€è¦ç›‘æŽ§å…¶æ€§èƒ½ä»¥ç¡®ä¿æ­£å¸¸è¿è¡Œã€‚</p><h2 class="bamboo-h " id="æ€»ç»“2mfm25pzn5s">æ€»ç»“</h2><br/><span class='pbg danger'>AWS EC2 å®žä¾‹å­˜å‚¨æ˜¯ä¸€ç§é€‚ç”¨äºŽéœ€è¦é«˜æ€§èƒ½å’Œä½Žå»¶è¿Ÿçš„ä¸´æ—¶æ•°æ®å­˜å‚¨çš„é€‰æ‹©ã€‚å°½ç®¡å®ƒä¸é€‚ç”¨äºŽæŒä¹…æ€§æ•°æ®å­˜å‚¨ï¼Œä½†åœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¦‚ç¼“å­˜ã€ä¸´æ—¶è®¡ç®—å’Œæ—¥å¿—å­˜å‚¨ï¼Œå®ƒå¯ä»¥æä¾›å“è¶Šçš„æ€§èƒ½å’Œæ•ˆçŽ‡</span>ã€‚ä½¿ç”¨å®žä¾‹å­˜å‚¨æ—¶ï¼Œè¯·è°¨è®°å­˜å‚¨ä¸´æ—¶æ€§è´¨ï¼Œå¹¶é‡‡å–é€‚å½“çš„å¤‡ä»½å’Œç›‘æŽ§æŽªæ–½ï¼Œä»¥ç¡®ä¿æ•°æ®çš„å¯ç”¨æ€§å’Œå®Œæ•´æ€§ã€‚]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>What is AWS EBS and how to use it</title>
      <link href="/2022/05/01/what-is-aws-ebs-and-how-to-use-it/"/>
      <url>/2022/05/01/what-is-aws-ebs-and-how-to-use-it/</url>
      
        <content type="html"><![CDATA[<p><code>Amazon Elastic Block Store (EBS)</code> æ˜¯ Amazon Web Services (AWS) æä¾›çš„ä¸€é¡¹å—å­˜å‚¨æœåŠ¡ï¼Œå®ƒå…è®¸ç”¨æˆ·åˆ›å»ºå’Œç®¡ç†æŒä¹…æ€§å—å­˜å‚¨å·ï¼Œå¹¶å°†è¿™äº›å·é™„åŠ åˆ° Amazon Elastic Compute Cloud (EC2) å®žä¾‹ä¸Šã€‚ä»¥ä¸‹æ˜¯å…³äºŽ AWS EBS çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç‰¹å¾ã€åŽŸç†å’Œä½¿ç”¨æ–¹æ³•ã€‚<br><img src="/assets/images/aws/aws-ebs-1.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-ebs-1.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AWS EBS"></p><h2 id="ç‰¹å¾å’ŒåŠŸèƒ½"><a href="#ç‰¹å¾å’ŒåŠŸèƒ½" class="headerlink" title="ç‰¹å¾å’ŒåŠŸèƒ½"></a>ç‰¹å¾å’ŒåŠŸèƒ½</h2><h4 id="æŒä¹…æ€§å­˜å‚¨"><a href="#æŒä¹…æ€§å­˜å‚¨" class="headerlink" title="æŒä¹…æ€§å­˜å‚¨"></a>æŒä¹…æ€§å­˜å‚¨</h4><p>EBS å·æ˜¯æŒä¹…æ€§çš„ï¼Œè¿™æ„å‘³ç€æ•°æ®åœ¨å·è¢«é™„åŠ åˆ° EC2 å®žä¾‹ä¸Šæ—¶ä¿æŒä¸å˜ã€‚å³ä½¿ EC2 å®žä¾‹åœæ­¢æˆ–ç»ˆæ­¢ï¼Œæ•°æ®ä»ç„¶ä¿ç•™åœ¨å·ä¸Šã€‚</p><h4 id="é«˜å¯ç”¨æ€§"><a href="#é«˜å¯ç”¨æ€§" class="headerlink" title="é«˜å¯ç”¨æ€§"></a>é«˜å¯ç”¨æ€§</h4><p>EBS å·ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°åŒä¸€å¯ç”¨æ€§åŒºåŸŸçš„å¤šä¸ªè®¾å¤‡ä¸Šï¼Œä»¥æé«˜å¯ç”¨æ€§å’Œæ•°æ®å†—ä½™ã€‚è¿™ç¡®ä¿äº†å·çš„æ•°æ®å¯é æ€§ã€‚</p><h4 id="ä¸æ–­ç”µçš„æ€§èƒ½"><a href="#ä¸æ–­ç”µçš„æ€§èƒ½" class="headerlink" title="ä¸æ–­ç”µçš„æ€§èƒ½"></a>ä¸æ–­ç”µçš„æ€§èƒ½</h4><p>EBS æä¾›ä¸æ–­ç”µçš„æ€§èƒ½ï¼Œå¯ä»¥æä¾›ä¸€è‡´çš„ä½Žå»¶è¿Ÿå’Œé«˜åžåé‡ï¼Œé€‚ç”¨äºŽå„ç§å·¥ä½œè´Ÿè½½ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€åº”ç”¨ç¨‹åºå’Œæ–‡ä»¶ç³»ç»Ÿã€‚</p><h4 id="å¤šç§å·ç±»åž‹"><a href="#å¤šç§å·ç±»åž‹" class="headerlink" title="å¤šç§å·ç±»åž‹"></a>å¤šç§å·ç±»åž‹</h4><p>EBS æä¾›ä¸åŒç±»åž‹çš„å·ï¼ŒåŒ…æ‹¬é€šç”¨ç”¨é€”ï¼ˆgp2ã€gp3ï¼‰ã€å—å­˜å‚¨ï¼ˆio1ã€io2ï¼‰ã€å†· HDD å­˜å‚¨ï¼ˆsc1ï¼‰å’Œç£ç›˜å­˜å‚¨ï¼ˆst1ï¼‰ã€‚æ¯ç§ç±»åž‹éƒ½é’ˆå¯¹ä¸åŒçš„æ€§èƒ½å’Œæˆæœ¬éœ€æ±‚è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p><h4 id="å¤§å°å’Œæ€§èƒ½çš„å¯æ‰©å±•æ€§"><a href="#å¤§å°å’Œæ€§èƒ½çš„å¯æ‰©å±•æ€§" class="headerlink" title="å¤§å°å’Œæ€§èƒ½çš„å¯æ‰©å±•æ€§"></a>å¤§å°å’Œæ€§èƒ½çš„å¯æ‰©å±•æ€§</h4><p>æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ EBS å·çš„å¤§å°å’Œæ€§èƒ½ï¼Œè€Œæ— éœ€åœæœºã€‚è¿™ç§å¯æ‰©å±•æ€§ä½¿æ‚¨èƒ½å¤Ÿé€‚åº”å˜åŒ–çš„å·¥ä½œè´Ÿè½½éœ€æ±‚ã€‚</p><h4 id="å¿«ç…§å’Œå¤‡ä»½"><a href="#å¿«ç…§å’Œå¤‡ä»½" class="headerlink" title="å¿«ç…§å’Œå¤‡ä»½"></a>å¿«ç…§å’Œå¤‡ä»½</h4><p>æ‚¨å¯ä»¥åˆ›å»º EBS å·çš„å¿«ç…§ï¼Œä»¥å¤‡ä»½æ•°æ®ï¼Œå¹¶å¯ä»¥ä½¿ç”¨è¿™äº›å¿«ç…§åˆ›å»ºæ–°çš„å·ã€‚è¿™å¯¹äºŽæ•°æ®æ¢å¤å’Œå¤‡ä»½éžå¸¸æœ‰ç”¨ã€‚<br><img src="/assets/images/aws/aws-ebs-attach.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-ebs-attach.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="EBS Attached to EC2"></p><h2 id="åŽŸç†"><a href="#åŽŸç†" class="headerlink" title="åŽŸç†"></a>åŽŸç†</h2><p>EBS åŸºäºŽäº‘ä¸Šè™šæ‹ŸåŒ–æŠ€æœ¯å®žçŽ°ï¼Œå…¶ä¸»è¦åŽŸç†å¦‚ä¸‹</p><h4 id="å—çº§åˆ«å­˜å‚¨"><a href="#å—çº§åˆ«å­˜å‚¨" class="headerlink" title="å—çº§åˆ«å­˜å‚¨"></a>å—çº§åˆ«å­˜å‚¨</h4><p>EBS å­˜å‚¨æ˜¯ä»¥å—çº§åˆ«ï¼ˆé€šå¸¸ä¸º 512KB æˆ– 1MBï¼‰æ¥ç®¡ç†çš„ã€‚æ¯ä¸ª EBS å·ç”±å¤šä¸ªå—ç»„æˆï¼Œè¿™äº›å—å¯ä»¥ç‹¬ç«‹è¯»å–å’Œå†™å…¥ã€‚</p><h4 id="åˆ†å¸ƒå¼å¤åˆ¶"><a href="#åˆ†å¸ƒå¼å¤åˆ¶" class="headerlink" title="åˆ†å¸ƒå¼å¤åˆ¶"></a>åˆ†å¸ƒå¼å¤åˆ¶</h4><p>EBS å·çš„æ•°æ®åœ¨åŒä¸€å¯ç”¨æ€§åŒºåŸŸå†…çš„å¤šä¸ªè®¾å¤‡ä¸Šè¿›è¡Œåˆ†å¸ƒå¼å¤åˆ¶ã€‚è¿™ç§å¤åˆ¶æé«˜äº†å¯ç”¨æ€§å’Œæ•°æ®å†—ä½™ã€‚</p><h4 id="å¼‚æ­¥æŒä¹…æ€§"><a href="#å¼‚æ­¥æŒä¹…æ€§" class="headerlink" title="å¼‚æ­¥æŒä¹…æ€§"></a>å¼‚æ­¥æŒä¹…æ€§</h4><p>EBS å¼‚æ­¥å°†æ•°æ®å†™å…¥æŒä¹…æ€§å­˜å‚¨ï¼Œä»¥ç¡®ä¿æ•°æ®æŒä¹…æ€§ã€‚è¿™æ„å‘³ç€æ•°æ®å†™å…¥å¯èƒ½ä¸ä¼šç«‹å³è¿”å›žæˆåŠŸï¼Œä½†åœ¨åŽç»­è¯»å–æ—¶æ•°æ®æ˜¯å¯é çš„ã€‚</p><h2 id="å¦‚ä½•ä½¿ç”¨-EBS"><a href="#å¦‚ä½•ä½¿ç”¨-EBS" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ EBS"></a>å¦‚ä½•ä½¿ç”¨ EBS</h2><h4 id="åˆ›å»º-EBS-å·"><a href="#åˆ›å»º-EBS-å·" class="headerlink" title="åˆ›å»º EBS å·"></a>åˆ›å»º EBS å·</h4><p>åœ¨ AWS æŽ§åˆ¶å°ä¸Šï¼Œæ‚¨å¯ä»¥åˆ›å»ºæ–°çš„ EBS å·ï¼Œé€‰æ‹©å·ç±»åž‹ã€å¤§å°å’Œå…¶ä»–é…ç½®é€‰é¡¹ã€‚</p><h4 id="é™„åŠ -EBS-å·"><a href="#é™„åŠ -EBS-å·" class="headerlink" title="é™„åŠ  EBS å·"></a>é™„åŠ  EBS å·</h4><p>åˆ›å»ºçš„ EBS å·å¯ä»¥é™„åŠ åˆ° EC2 å®žä¾‹ä¸Šã€‚æ‚¨å¯ä»¥é€‰æ‹©åœ¨å¯åŠ¨ EC2 å®žä¾‹æ—¶é™„åŠ å·ï¼Œæˆ–è€…åœ¨è¿è¡Œå®žä¾‹æ—¶æ·»åŠ å·ã€‚</p><h4 id="æ ¼å¼åŒ–å’ŒæŒ‚è½½"><a href="#æ ¼å¼åŒ–å’ŒæŒ‚è½½" class="headerlink" title="æ ¼å¼åŒ–å’ŒæŒ‚è½½"></a>æ ¼å¼åŒ–å’ŒæŒ‚è½½</h4><p>ä¸€æ—¦é™„åŠ åˆ° EC2 å®žä¾‹ï¼Œæ‚¨éœ€è¦åœ¨å®žä¾‹ä¸Šæ ¼å¼åŒ– EBS å·ï¼Œå¹¶å°†å…¶æŒ‚è½½åˆ°æ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œä»¥ä¾¿åœ¨å®žä¾‹ä¸Šä½¿ç”¨ã€‚</p><h4 id="ä½¿ç”¨å’Œç®¡ç†"><a href="#ä½¿ç”¨å’Œç®¡ç†" class="headerlink" title="ä½¿ç”¨å’Œç®¡ç†"></a>ä½¿ç”¨å’Œç®¡ç†</h4><p>ä¸€æ—¦ EBS å·é™„åŠ åˆ°å®žä¾‹ä¸Šï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸Šåˆ›å»ºã€è¯»å–å’Œå†™å…¥æ•°æ®ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨å¿«ç…§åŠŸèƒ½åˆ›å»ºå¤‡ä»½ã€‚</p><p><code>AWS EC2å¯åŠ¨é»˜è®¤ä½¿ç”¨çš„æ ¹å­˜å‚¨EBSåœ¨EC2ç»ˆæ­¢çš„æ—¶å€™ä¼šä¸€å¹¶åˆ æŽ‰ï¼Œè€Œé¢å¤–é™„åŠ çš„EBSå­˜å‚¨å—åˆ™ä¸ä¼šåˆ é™¤ã€‚EBSå­˜å‚¨å·åªèƒ½é™„åŠ åˆ°åŒä¸€ä¸ªå¯ç”¨åŒºçš„EC2å®žä¾‹ä¸Šã€‚</code><br><img src="/assets/images/aws/aws-ebs-root.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-ebs-root.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="EBS for AMI Root Volume"></p><p>EBS æ˜¯ AWS ä¸­çš„æ ¸å¿ƒå­˜å‚¨æœåŠ¡ï¼Œç”¨äºŽæŒä¹…æ€§æ•°æ®å­˜å‚¨å’Œæ‰©å±•å­˜å‚¨æ€§èƒ½ã€‚å®ƒé€‚ç”¨äºŽå„ç§åº”ç”¨ç¨‹åºå’Œå·¥ä½œè´Ÿè½½ï¼Œä»Žæ•°æ®åº“åˆ°æ–‡ä»¶å­˜å‚¨ã€‚é€šè¿‡äº†è§£ EBS çš„ç‰¹ç‚¹å’ŒåŽŸç†ï¼Œæ‚¨å¯ä»¥æ›´å¥½åœ°é…ç½®å’Œç®¡ç†æ‚¨çš„äº‘å­˜å‚¨éœ€æ±‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»€ä¹ˆæ˜¯AWS EC2 Hibernation</title>
      <link href="/2022/04/08/shen-me-shi-aws-ec2-hibernation/"/>
      <url>/2022/04/08/shen-me-shi-aws-ec2-hibernation/</url>
      
        <content type="html"><![CDATA[<p><code>EC2 Hibernation</code> æ˜¯ Amazon Elastic Compute Cloud (EC2) æœåŠ¡çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå®ƒå…è®¸æ‚¨å°† EC2 å®žä¾‹ä»Žè¿è¡ŒçŠ¶æ€è½¬æ¢ä¸ºä¼‘çœ çŠ¶æ€ï¼Œç„¶åŽå†æ¬¡å”¤é†’å®ƒï¼Œè€Œä¸ä¼šä¸¢å¤±å®žä¾‹çš„å†…å­˜ä¸­çš„æ•°æ®ã€‚è¿™ä¸ªåŠŸèƒ½éžå¸¸é€‚åˆé‚£äº›éœ€è¦ä¿æŒåº”ç”¨ç¨‹åºçŠ¶æ€æˆ–é•¿æ—¶é—´è¿è¡Œè¿›ç¨‹çš„å·¥ä½œè´Ÿè½½ã€‚<br><img src="/assets/images/aws/aws-ec2-hibernation-flow.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-ec2-hibernation-flow.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"><br>è¿™é‡Œè¯¦ç»†è¯´æ˜Ž EC2 Hibernation çš„<strong>å·¥ä½œåŽŸç†</strong></p><span id="more"></span><h3 id="å·¥ä½œåŽŸç†"><a href="#å·¥ä½œåŽŸç†" class="headerlink" title="å·¥ä½œåŽŸç†"></a>å·¥ä½œåŽŸç†</h3><p><strong>1.å¯ç”¨ Hibernationï¼š</strong> è¦ä½¿ç”¨ EC2 Hibernationï¼Œé¦–å…ˆéœ€è¦åœ¨ EC2 å®žä¾‹ä¸Šå¯ç”¨å®ƒã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨æ”¯æŒ Hibernation çš„å®žä¾‹ç±»åž‹ï¼Œå¹¶åœ¨å¯åŠ¨æ—¶å¯ç”¨ Hibernation é€‰é¡¹æ¥å®Œæˆã€‚å¹¶ä¸”EBSå·å¿…é¡»è¦å¼€å¯åŠ å¯†ã€‚<br><img src="/assets/images/aws/aws-ec2-hibernation-enable.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-ec2-hibernation-enable.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p><strong>2.åˆ›å»º Hibernation å¿«ç…§ï¼š</strong> åœ¨å¯ç”¨ Hibernation åŽï¼ŒEC2 å®žä¾‹çš„å†…å­˜çŠ¶æ€å°†è¢«å®šæœŸä¿å­˜åˆ° Amazon Elastic Block Store (EBS) å·ä¸Šçš„ Hibernation å¿«ç…§ä¸­ã€‚è¿™ç¡®ä¿äº†åœ¨å®žä¾‹ä¼‘çœ æ—¶ä¸ä¼šä¸¢å¤±å†…å­˜ä¸­çš„æ•°æ®ã€‚</p><p><strong>3.ä¼‘çœ å®žä¾‹ï¼š</strong> ä¸€æ—¦ Hibernation å¯ç”¨å¹¶åˆ›å»ºäº†å¿«ç…§ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œ hibernate å‘½ä»¤æˆ–ä½¿ç”¨ AWS ç®¡ç†æŽ§åˆ¶å°å°†å®žä¾‹è½¬æ¢ä¸ºä¼‘çœ çŠ¶æ€ã€‚åœ¨ä¼‘çœ æœŸé—´ï¼Œå®žä¾‹çš„çŠ¶æ€å’Œæ•°æ®å°†ä¿å­˜åœ¨ EBS å·ä¸Šã€‚</p><p><strong>4.å”¤é†’å®žä¾‹ï¼š</strong> å½“æ‚¨å¸Œæœ›æ¢å¤å®žä¾‹çš„è¿è¡ŒçŠ¶æ€æ—¶ï¼Œåªéœ€æ‰§è¡Œå”¤é†’å‘½ä»¤æˆ–ä½¿ç”¨æŽ§åˆ¶å°ï¼ŒEC2 å®žä¾‹å°†ä»Ž Hibernation å¿«ç…§ä¸­è¿˜åŽŸå†…å­˜çŠ¶æ€ï¼Œå¹¶ç»§ç»­è¿è¡Œã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><p>EC2 Hibernation å¯ä»¥åº”ç”¨äºŽå¤šç§ä½¿ç”¨åœºæ™¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽï¼š</p><p><strong>é•¿æ—¶é—´è¿è¡Œçš„è¿›ç¨‹ï¼š</strong> å¦‚æžœæ‚¨çš„ EC2 å®žä¾‹è¿è¡Œæœ‰çŠ¶æ€çš„åº”ç”¨ç¨‹åºæˆ–é•¿æ—¶é—´è¿è¡Œçš„è¿›ç¨‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Hibernation å°†å®žä¾‹ä¼‘çœ ï¼Œä»¥èŠ‚çœè®¡ç®—æˆæœ¬ï¼Œè€Œæ— éœ€ä¸­æ–­åº”ç”¨ç¨‹åºã€‚</p><p><strong>å·¥ä½œè´Ÿè½½ä¿æŒçŠ¶æ€ï¼š</strong> æŸäº›å·¥ä½œè´Ÿè½½éœ€è¦ä¿æŒçŠ¶æ€ï¼Œä¾‹å¦‚å†…å­˜ä¸­çš„ä¼šè¯æ•°æ®æˆ–æ•°æ®åº“è¿žæŽ¥ã€‚é€šè¿‡ Hibernationï¼Œæ‚¨å¯ä»¥åœ¨éœ€è¦æ—¶æ¢å¤å·¥ä½œè´Ÿè½½ï¼Œè€Œæ— éœ€é‡æ–°åˆ›å»ºçŠ¶æ€ã€‚</p><p><strong>æˆæœ¬ä¼˜åŒ–ï¼š</strong> å¯¹äºŽä¸éœ€è¦å…¨å¤©å€™è¿è¡Œçš„å·¥ä½œè´Ÿè½½ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Hibernation åœ¨é—²ç½®æ—¶é™ä½Žæˆæœ¬ï¼Œç„¶åŽåœ¨éœ€è¦æ—¶å¿«é€Ÿæ¢å¤ã€‚</p><p><strong>å®žä¾‹ç»´æŠ¤ï¼š</strong> åœ¨ EC2 å®žä¾‹éœ€è¦è¿›è¡Œæ“ä½œç³»ç»Ÿæ›´æ–°æˆ–å…¶ä»–ç»´æŠ¤æ“ä½œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Hibernation å°†å®žä¾‹ä¼‘çœ ï¼Œç„¶åŽåœ¨å®Œæˆç»´æŠ¤åŽå”¤é†’å®ƒï¼Œä»¥å‡å°‘ç»´æŠ¤æœŸé—´çš„åœæœºæ—¶é—´ã€‚</p><p>&#x3D;&#x3D;è¯·æ³¨æ„&#x3D;&#x3D;ï¼Œ<u>ä¸æ˜¯æ‰€æœ‰çš„ EC2 å®žä¾‹ç±»åž‹éƒ½æ”¯æŒ Hibernation</u>ï¼Œæ‚¨éœ€è¦é€‰æ‹©æ”¯æŒè¯¥åŠŸèƒ½çš„å®žä¾‹ç±»åž‹å¹¶å¯ç”¨å®ƒã€‚æ­¤å¤–ï¼Œ<u>ä½¿ç”¨ Hibernation å¯èƒ½ä¼šäº§ç”Ÿé¢å¤–çš„ EBS å­˜å‚¨è´¹ç”¨ï¼Œå› ä¸ºéœ€è¦å­˜å‚¨ Hibernation å¿«ç…§</u>ã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨ Hibernation æ—¶ï¼Œéœ€è¦æƒè¡¡æˆæœ¬å’Œæ€§èƒ½éœ€æ±‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS EC2çš„ä¸»è¦ç‰¹ç‚¹å’Œå·¥ä½œæ–¹å¼ä»¥åŠè®¡è´¹æ¨¡å¼</title>
      <link href="/2022/03/02/aws-ec2de-xiang-xi-jie-shao-he-ji-fei-mo-shi/"/>
      <url>/2022/03/02/aws-ec2de-xiang-xi-jie-shao-he-ji-fei-mo-shi/</url>
      
        <content type="html"><![CDATA[<p>Amazon Elastic Compute Cloudï¼ˆAmazon EC2ï¼‰æ˜¯Amazon Web Servicesï¼ˆAWSï¼‰æä¾›çš„ä¸€é¡¹åŸºäºŽäº‘çš„å¯ä¼¸ç¼©æ€§ã€å¼¹æ€§ã€å®‰å…¨æ€§å’Œç›‘æŽ§çš„è®¡ç®—æœåŠ¡ï¼Œå®ƒå…è®¸ç”¨æˆ·ç§Ÿç”¨è™šæ‹ŸæœåŠ¡å™¨ï¼ˆç§°ä¸ºEC2å®žä¾‹ï¼‰æ¥è¿è¡Œåº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬ä»Žä¸»è¦ç‰¹ç‚¹ï¼Œå·¥ä½œæ–¹å¼ä»¥åŠè®¡ä»·æ¨¡å¼æ¥ä»‹ç»ä¸‹EC2<br><img src="/assets/images/aws/aws-ec2-intro.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-ec2-intro.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><span id="more"></span><h3 id="ä¸»è¦ç‰¹ç‚¹"><a href="#ä¸»è¦ç‰¹ç‚¹" class="headerlink" title="ä¸»è¦ç‰¹ç‚¹"></a>ä¸»è¦ç‰¹ç‚¹</h3><p><strong>å¯ä¼¸ç¼©æ€§ (Scalability)</strong><br>EC2 å…è®¸ç”¨æˆ·æ ¹æ®éœ€è¦å¿«é€Ÿæ‰©å±•æˆ–ç¼©å‡å®žä¾‹æ•°é‡ã€‚è¿™ç§å¯ä¼¸ç¼©æ€§ä½¿æ‚¨èƒ½å¤Ÿé€‚åº”ä¸æ–­å˜åŒ–çš„å·¥ä½œè´Ÿè½½ï¼Œç¡®ä¿æ‚¨çš„åº”ç”¨ç¨‹åºå§‹ç»ˆå…·å¤‡æ‰€éœ€çš„è®¡ç®—èµ„æºã€‚</p><p><strong>å¤šæ ·æ€§çš„å®žä¾‹ç±»åž‹ (Diverse Instance Types)</strong><br>AWS æä¾›å¤šç§ä¸åŒç±»åž‹çš„ EC2 å®žä¾‹ï¼Œä»¥æ»¡è¶³å„ç§è®¡ç®—éœ€æ±‚ã€‚è¿™äº›ç±»åž‹åŒ…æ‹¬è®¡ç®—ä¼˜åŒ–ã€å†…å­˜ä¼˜åŒ–ã€å­˜å‚¨ä¼˜åŒ–ã€GPU å®žä¾‹ç­‰ï¼Œæ¯ç§ç±»åž‹éƒ½é’ˆå¯¹ä¸åŒç±»åž‹çš„å·¥ä½œè´Ÿè½½è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p><p><strong>å¼¹æ€§IPåœ°å€ (Elastic IP Addresses)</strong><br>æ‚¨å¯ä»¥åˆ†é…å¼¹æ€§ IP åœ°å€ç»™ EC2 å®žä¾‹ï¼Œç¡®ä¿å³ä½¿å®žä¾‹åœæ­¢å’Œé‡æ–°å¯åŠ¨ï¼ŒIP åœ°å€ä¹Ÿèƒ½ä¿æŒä¸å˜ã€‚è¿™æœ‰åŠ©äºŽç¡®ä¿åº”ç”¨ç¨‹åºçš„è¿žé€šæ€§ã€‚</p><p><strong>å®‰å…¨ç»„å’Œç½‘ç»œ ACL (Security Groups and Network ACLs)</strong><br>EC2 å…è®¸æ‚¨é…ç½®å®‰å…¨ç»„å’Œç½‘ç»œ ACLï¼Œä»¥æŽ§åˆ¶å®žä¾‹çš„å…¥ç«™å’Œå‡ºç«™æµé‡ã€‚è¿™æä¾›äº†ä¸€å±‚ç½‘ç»œå®‰å…¨æ€§ï¼Œä»¥ç¡®ä¿åªæœ‰æŽˆæƒçš„æµé‡å¯ä»¥è®¿é—®å®žä¾‹ã€‚</p><p><strong>Amazon Machine Images (AMIs)</strong><br>AMIs æ˜¯è™šæ‹Ÿæœºé•œåƒï¼ŒåŒ…å«äº†æ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºå’Œé…ç½®ä¿¡æ¯ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ ‡å‡† AMIs æˆ–åˆ›å»ºè‡ªå®šä¹‰ AMIs æ¥å¯åŠ¨ EC2 å®žä¾‹ï¼Œä»Žè€Œç®€åŒ–éƒ¨ç½²ã€‚</p><p><strong>å¤šä¸ªæ“ä½œç³»ç»Ÿæ”¯æŒ (Multiple OS Support)</strong><br>EC2 æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬å„ç§ Linux å‘è¡Œç‰ˆã€Windows Server å’Œå…¶ä»–æ“ä½œç³»ç»Ÿã€‚è¿™ä½¿æ‚¨å¯ä»¥é€‰æ‹©é€‚åˆæ‚¨åº”ç”¨ç¨‹åºçš„æ“ä½œç³»ç»Ÿã€‚</p><p><strong>è‡ªåŠ¨åŒ–å’Œæ‰˜ç®¡é€‰é¡¹ (Automation and Managed Options)</strong><br>EC2 å®žä¾‹å¯ä»¥ä¸Žå…¶ä»– AWS æœåŠ¡é›†æˆï¼Œå¦‚ AWS Auto Scalingã€Elastic Load Balancing å’Œ AWS Elastic Beanstalkï¼Œä»¥å®žçŽ°è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œæ‰˜ç®¡ã€‚</p><p><strong>ç›‘æŽ§å’Œè­¦æŠ¥ (Monitoring and Alerts)</strong><br>EC2 å®žä¾‹é›†æˆäº† Amazon CloudWatchï¼Œå¯ç›‘æŽ§å®žä¾‹çš„æ€§èƒ½å’ŒçŠ¶æ€ï¼Œå¹¶é…ç½®è­¦æŠ¥ä»¥åŠè‡ªåŠ¨å“åº”æ€§èƒ½é—®é¢˜ã€‚</p><p><strong>å¯é æ€§å’Œå®¹é”™æ€§ (Reliability and Fault Tolerance)</strong><br>EC2 æä¾›é«˜å¯ç”¨æ€§å’Œå®¹é”™æ€§ï¼Œå®žä¾‹å¯ä»¥åœ¨ä¸åŒçš„å¯ç”¨æ€§åŒºåŸŸå’Œå¯ç”¨æ€§åŸŸä¸­è¿è¡Œï¼Œä»¥ç¡®ä¿æœåŠ¡çš„è¿žç»­æ€§ã€‚</p><p><strong>èº«ä»½å’Œè®¿é—®ç®¡ç† (Identity and Access Management)</strong><br>EC2 å®žä¾‹å¯ä»¥ä¸Ž AWS Identity and Access Management (IAM) é›†æˆï¼Œä»¥è¿›è¡Œèº«ä»½éªŒè¯å’ŒæŽˆæƒï¼Œä½¿æ‚¨èƒ½å¤ŸæŽ§åˆ¶å¯¹å®žä¾‹å’Œèµ„æºçš„è®¿é—®æƒé™ã€‚</p><p><strong>å¤šç§å®šä»·é€‰é¡¹ (Pricing Options)</strong><br>EC2 æä¾›å¤šç§ä¸åŒçš„å®šä»·é€‰é¡¹ï¼ŒåŒ…æ‹¬æŒ‰éœ€å®žä¾‹ã€é¢„ç•™å®žä¾‹ã€å®šæœŸå®žä¾‹ã€Spot å®žä¾‹ç­‰ï¼Œä»¥æ»¡è¶³ä¸åŒçš„é¢„ç®—å’Œä½¿ç”¨éœ€æ±‚ã€‚</p><h3 id="å·¥ä½œæ–¹å¼ï¼š"><a href="#å·¥ä½œæ–¹å¼ï¼š" class="headerlink" title="å·¥ä½œæ–¹å¼ï¼š"></a>å·¥ä½œæ–¹å¼ï¼š</h3><p><strong>é€‰æ‹©å®žä¾‹ç±»åž‹</strong><br>åœ¨ä½¿ç”¨ EC2 ä¹‹å‰ï¼Œæ‚¨é¦–å…ˆéœ€è¦é€‰æ‹©é€‚åˆæ‚¨å·¥ä½œè´Ÿè½½éœ€æ±‚çš„ EC2 å®žä¾‹ç±»åž‹ã€‚ä¸åŒç±»åž‹çš„å®žä¾‹æä¾›ä¸åŒçš„è®¡ç®—ã€å†…å­˜ã€å­˜å‚¨å’Œç½‘ç»œæ€§èƒ½ã€‚æ‚¨å¯ä»¥æ ¹æ®æ‚¨çš„éœ€æ±‚æ¥é€‰æ‹©ã€‚</p><p><strong>å¯åŠ¨å®žä¾‹</strong><br>ä¸€æ—¦é€‰æ‹©äº†å®žä¾‹ç±»åž‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Amazon Machine Imageï¼ˆAMIï¼‰å¯åŠ¨ EC2 å®žä¾‹ã€‚AMI æ˜¯ä¸€ä¸ªé¢„é…ç½®çš„è™šæ‹Ÿæœºé•œåƒï¼Œå®ƒåŒ…å«äº†æ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºå’Œé…ç½®ä¿¡æ¯ã€‚æ‚¨å¯ä»¥é€‰æ‹© AWS æä¾›çš„æ ‡å‡† AMIï¼Œä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰ AMIã€‚</p><p><strong>å®‰å…¨ç»„å’Œå¯†é’¥å¯¹</strong><br>åœ¨å¯åŠ¨å®žä¾‹æ—¶ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªå®‰å…¨ç»„ï¼Œè¿™äº›å®‰å…¨ç»„å®šä¹‰äº†å®žä¾‹çš„å…¥ç«™å’Œå‡ºç«™æµé‡è§„åˆ™ï¼Œä»¥ç¡®ä¿å®‰å…¨æ€§ã€‚æ‚¨è¿˜å¯ä»¥é€‰æ‹©å¯†é’¥å¯¹ï¼Œä»¥ä¾¿å®‰å…¨åœ°è®¿é—®æ‚¨çš„ EC2 å®žä¾‹ã€‚</p><p><strong>è¿è¡Œå®žä¾‹</strong><br>ä¸€æ—¦å®žä¾‹å¯åŠ¨ï¼Œå®ƒå°†åœ¨ AWS çš„æ•°æ®ä¸­å¿ƒä¸­çš„ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œã€‚æ‚¨å¯ä»¥é€šè¿‡ SSHï¼ˆå¯¹äºŽ Linux å®žä¾‹ï¼‰æˆ– RDPï¼ˆå¯¹äºŽ Windows å®žä¾‹ï¼‰ç­‰è¿œç¨‹åè®®è¿žæŽ¥åˆ°å®žä¾‹ã€‚</p><p><strong>ç®¡ç†å®žä¾‹</strong><br>ä¸€æ—¦è¿è¡Œï¼Œæ‚¨å¯ä»¥éšæ—¶ç®¡ç† EC2 å®žä¾‹ã€‚è¿™åŒ…æ‹¬å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€ç»ˆæ­¢å®žä¾‹ï¼Œä»¥åŠæ›´æ”¹å®žä¾‹çš„é…ç½®ï¼Œå¦‚è°ƒæ•´å®žä¾‹å¤§å°ã€æ·»åŠ å­˜å‚¨å·ç­‰ã€‚</p><p><strong>å­˜å‚¨å’Œå¿«ç…§</strong><br>EC2 å®žä¾‹é€šå¸¸é™„å¸¦ Elastic Block Storeï¼ˆEBSï¼‰å·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›å·æ¥å­˜å‚¨æ•°æ®ã€‚æ‚¨è¿˜å¯ä»¥åˆ›å»º EBS å¿«ç…§ï¼Œä»¥å¤‡ä»½æ•°æ®æˆ–å¤åˆ¶æ•°æ®åˆ°å…¶ä»–åœ°æ–¹ã€‚</p><p><strong>ç›‘æŽ§å’Œä¼¸ç¼©</strong><br>AWS æä¾›äº† Amazon CloudWatchï¼Œå®ƒå¯ä»¥ç”¨äºŽç›‘è§† EC2 å®žä¾‹çš„æ€§èƒ½æŒ‡æ ‡ï¼Œå¦‚ CPU ä½¿ç”¨çŽ‡ã€ç½‘ç»œæµé‡ç­‰ã€‚æ‚¨å¯ä»¥è®¾ç½®è­¦æŠ¥ä»¥å“åº”æ€§èƒ½é—®é¢˜ï¼Œå¹¶æ ¹æ®éœ€è¦é…ç½®è‡ªåŠ¨ä¼¸ç¼©ç­–ç•¥ï¼Œä»¥è‡ªåŠ¨è°ƒæ•´å®žä¾‹æ•°é‡ã€‚</p><p><strong>å®‰å…¨æ€§å’Œèº«ä»½éªŒè¯</strong><br>EC2 å®žä¾‹å¯ä»¥ä¸Ž AWS Identity and Access Managementï¼ˆIAMï¼‰é›†æˆï¼Œä»¥å®žçŽ°èº«ä»½éªŒè¯å’ŒæŽˆæƒã€‚æ‚¨å¯ä»¥ä¸ºå®žä¾‹åˆ†é… IAM è§’è‰²ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥è®¿é—®å…¶ä»– AWS æœåŠ¡æˆ–èµ„æºï¼Œè€Œæ— éœ€ç¡¬ç¼–ç çš„å‡­æ®ã€‚</p><h3 id="è®¡è´¹æ¨¡å¼"><a href="#è®¡è´¹æ¨¡å¼" class="headerlink" title="è®¡è´¹æ¨¡å¼"></a>è®¡è´¹æ¨¡å¼</h3><p><strong>æŒ‰éœ€å®žä¾‹ (On-Demand Instances)</strong><br>æŒ‰éœ€å®žä¾‹æ˜¯ä¸€ç§çµæ´»çš„è®¡è´¹æ–¹å¼ï¼Œæ‚¨åªéœ€ä¸ºæ‚¨å®žé™…ä½¿ç”¨çš„è®¡ç®—èµ„æºä»˜è´¹ï¼Œæ²¡æœ‰é•¿æœŸåˆåŒæˆ–é¢„ä»˜è´¹ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥éšæ—¶å¯åŠ¨æˆ–åœæ­¢å®žä¾‹ï¼Œåªæ”¯ä»˜å®žé™…çš„è¿è¡Œæ—¶é—´ã€‚</p><p>é€‚ç”¨äºŽéœ€è¦çµæ´»æ€§çš„å·¥ä½œè´Ÿè½½ï¼Œå¦‚å¼€å‘å’Œæµ‹è¯•ã€ä¸´æ—¶å·¥ä½œè´Ÿè½½ã€çªå‘æ€§å·¥ä½œè´Ÿè½½ã€‚</p><p><strong>é¢„ç•™å®žä¾‹ (Reserved Instances)</strong><br>é¢„ç•™å®žä¾‹æ˜¯ä¸€ç§åˆåŒåˆ¶åº¦ï¼Œæ‚¨æå‰æ”¯ä»˜ä¸€å®šè´¹ç”¨ï¼ŒèŽ·å¾—å¯¹ç‰¹å®šå®žä¾‹ç±»åž‹çš„ä¸€å®šæ—¶æœŸå†…çš„æŠ˜æ‰£ï¼Œé€šå¸¸ä¸º1å¹´æˆ–3å¹´ã€‚è¿™é€šå¸¸æ¯”æŒ‰éœ€å®žä¾‹æ›´ç»æµŽã€‚</p><p>é€‚ç”¨äºŽé•¿æœŸå·¥ä½œè´Ÿè½½ï¼Œå¯ä»¥é¢„æµ‹çš„ã€ç¨³å®šçš„ä½¿ç”¨æƒ…å†µï¼Œä¾‹å¦‚ç”Ÿäº§æœåŠ¡å™¨ã€‚</p><p><strong>å¯ç”¨æ€§åŒºåŸŸä¿ç•™å®žä¾‹ (Reserved Instances for Availability Zones)</strong><br>è¿™æ˜¯é¢„ç•™å®žä¾‹çš„ä¸€ç§å˜ç§ï¼Œå…è®¸æ‚¨ä¸ºç‰¹å®šçš„å¯ç”¨æ€§åŒºåŸŸï¼ˆAZï¼‰è´­ä¹°é¢„ç•™å®¹é‡ã€‚è¿™å¯¹äºŽéœ€è¦åœ¨ç‰¹å®šåŒºåŸŸå†…ä¿ç•™å®¹é‡çš„åº”ç”¨ç¨‹åºéžå¸¸æœ‰ç”¨ã€‚</p><p>é€‚ç”¨äºŽéœ€è¦ç¡®ä¿åœ¨ç‰¹å®šå¯ç”¨æ€§åŒºåŸŸå†…æ‹¥æœ‰è®¡ç®—èµ„æºçš„å·¥ä½œè´Ÿè½½ã€‚</p><p><strong>å¯è°ƒæ•´å®žä¾‹ (Convertible Reserved Instances)</strong><br>è¿™æ˜¯ä¸€ç§é¢„ç•™å®žä¾‹ï¼Œå…è®¸åœ¨åˆåŒæœŸå†…æ›´æ”¹å®žä¾‹ç±»åž‹ï¼Œä»¥é€‚åº”ä¸åŒçš„å·¥ä½œè´Ÿè½½éœ€æ±‚ã€‚</p><p>é€‚ç”¨äºŽå·¥ä½œè´Ÿè½½éœ€æ±‚å¯èƒ½ä¼šå˜åŒ–çš„æƒ…å†µï¼Œä½†ä»ç„¶å¸Œæœ›èŽ·å¾—æŠ˜æ‰£ã€‚</p><p><strong>å®šæœŸå®žä¾‹ (Scheduled Instances)</strong><br>å®šæœŸå®žä¾‹å…è®¸æ‚¨æŒ‰é¢„å®šçš„æ—¶é—´å¯åŠ¨ EC2 å®žä¾‹ã€‚æ‚¨å¯ä»¥åœ¨æ¯å¤©çš„ç‰¹å®šæ—¶é—´ã€æ¯å‘¨æŸä¸ªæ—¶é—´æˆ–å…¶ä»–é¢„å®šæ—¶é—´å¯åŠ¨å®žä¾‹ã€‚</p><p>é€‚ç”¨äºŽå‘¨æœŸæ€§çš„ã€é¢„å®šçš„å·¥ä½œè´Ÿè½½ï¼Œå¦‚æ¯å¤©å¤‡ä»½ã€æ‰¹å¤„ç†å¤„ç†ç­‰ã€‚</p><p><strong>æ‰¹é‡å®žä¾‹ (Spot Instances)</strong><br>Spot å®žä¾‹åŸºäºŽç«žä»·å®šä»·æ¨¡å¼ï¼Œæ‚¨å¯ä»¥è®¾å®šæ„¿æ„æ”¯ä»˜çš„ä»·æ ¼ï¼Œå½“å¸‚åœºä»·æ ¼ä½ŽäºŽæ‚¨çš„å‡ºä»·æ—¶ï¼Œæ‚¨å¯ä»¥èŽ·å¾—å®žä¾‹ã€‚ä½†å®ƒä»¬å¯èƒ½éšæ—¶è¢«ç»ˆæ­¢ã€‚</p><p>é€‚ç”¨äºŽå¯ä»¥å®¹å¿å®žä¾‹éšæ—¶ä¸­æ–­çš„å·¥ä½œè´Ÿè½½ï¼Œå¦‚å¤§è§„æ¨¡æ•°æ®åˆ†æžå’Œæ¸²æŸ“ä»»åŠ¡ã€‚</p><p><strong>Dedicated Hostsï¼ˆä¸“ç”¨ä¸»æœºï¼‰</strong><br>ä¸“ç”¨ä¸»æœºå…è®¸æ‚¨åœ¨ AWS çš„ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œ EC2 å®žä¾‹ï¼Œè¿™äº›æœåŠ¡å™¨ä¸“é—¨ä¸ºæ‚¨çš„è´¦æˆ·ä¿ç•™ã€‚è¿™æä¾›äº†ç¡¬ä»¶çº§åˆ«çš„éš”ç¦»ï¼Œé€‚ç”¨äºŽå…·æœ‰ç‰¹æ®Šåˆè§„æ€§è¦æ±‚çš„å·¥ä½œè´Ÿè½½ã€‚</p><p>é€‚ç”¨äºŽéœ€è¦ç¡¬ä»¶éš”ç¦»çš„å·¥ä½œè´Ÿè½½ï¼Œä¾‹å¦‚åˆè§„æ€§è¦æ±‚éžå¸¸é«˜çš„åº”ç”¨ç¨‹åºï¼Œæˆ–è€…éœ€è¦å°†è®¸å¤šå®žä¾‹éƒ¨ç½²åˆ°åŒä¸€ç‰©ç†æœåŠ¡å™¨ä¸Šçš„åœºæ™¯ã€‚</p><p><strong>Dedicated Instancesï¼ˆä¸“ç”¨å®žä¾‹ï¼‰</strong><br>ä¸“ç”¨å®žä¾‹æ˜¯ EC2 å®žä¾‹ï¼Œå®ƒä»¬åœ¨å…±äº«çš„ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œä½†åªä¸Žæ‚¨çš„è´¦æˆ·ä¸­çš„å…¶ä»–å®žä¾‹å…±äº«ã€‚è¿™æä¾›äº†å®žä¾‹çº§åˆ«çš„éš”ç¦»ã€‚</p><p>é€‚ç”¨äºŽéœ€è¦å®žä¾‹çº§åˆ«éš”ç¦»çš„å·¥ä½œè´Ÿè½½ï¼Œä½†ä¸éœ€è¦ç‰©ç†ä¸»æœºçº§åˆ«çš„éš”ç¦»çš„åœºæ™¯ã€‚</p><p><strong>Free Tierï¼ˆå…è´¹å±‚çº§ï¼‰</strong><br>AWS æä¾›äº†ä¸€å®šç¨‹åº¦çš„å…è´¹ä½¿ç”¨ï¼Œå³å…è´¹å±‚çº§ï¼Œå¯¹äºŽæ–°ç”¨æˆ·ä»¥åŠAWSè´¦æˆ·ä¸­çš„æŸäº›æœåŠ¡å’Œèµ„æºï¼Œæä¾›æœ‰é™çš„å…è´¹é¢åº¦ï¼Œé€šå¸¸ä¸º12ä¸ªæœˆã€‚è¿™æ˜¯ç”¨äºŽå­¦ä¹ ã€è¯•éªŒå’Œå°åž‹é¡¹ç›®çš„å¥½æ–¹æ³•ï¼Œä»¥é™ä½Žæˆæœ¬ã€‚</p><p>é€‚ç”¨äºŽå­¦ä¹  AWSã€å¼€å‘å’Œæµ‹è¯•å°åž‹åº”ç”¨ç¨‹åºï¼Œæˆ–è€…åˆæœŸçš„å°è§„æ¨¡é¡¹ç›®ã€‚</p><p>è¿™äº›è®¡è´¹æ¨¡å¼ä¸ºä¸åŒçš„ä½¿ç”¨æƒ…å†µæä¾›äº†å„ç§é€‰æ‹©ã€‚æ‚¨å¯ä»¥æ ¹æ®æ‚¨çš„éœ€æ±‚å’Œé¢„ç®—æ¥é€‰æ‹©é€‚åˆæ‚¨çš„æ¨¡å¼ã€‚è¯·æ³¨æ„ï¼ŒAWSå®šæœŸæ›´æ–°å…¶ä»·æ ¼å’Œè®¡è´¹æ¨¡å¼ï¼Œå› æ­¤å»ºè®®æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ä»¥èŽ·å–æœ€æ–°çš„ä¿¡æ¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS IAMåŽŸç†ä»¥åŠå¦‚ä½•ä½¿ç”¨</title>
      <link href="/2022/02/17/aws-iamyuan-li-yi-ji-ru-he-shi-yong/"/>
      <url>/2022/02/17/aws-iamyuan-li-yi-ji-ru-he-shi-yong/</url>
      
        <content type="html"><![CDATA[<p>AWS Identity and Access Managementï¼ˆ<code>IAM</code>ï¼‰æ˜¯Amazon Web Servicesï¼ˆAWSï¼‰æä¾›çš„èº«ä»½å’Œè®¿é—®ç®¡ç†æœåŠ¡ï¼Œç”¨äºŽå®‰å…¨åœ°ç®¡ç†å¯¹AWSèµ„æºçš„è®¿é—®æƒé™ã€‚IAMä½¿æ‚¨èƒ½å¤Ÿç²¾ç»†æŽ§åˆ¶ç”¨æˆ·ã€ç»„ã€è§’è‰²ç­‰å®žä½“å¯¹AWSæœåŠ¡å’Œèµ„æºçš„è®¿é—®æƒé™ï¼Œä»¥ç¡®ä¿å®‰å…¨æ€§å’Œåˆè§„æ€§ã€‚</p><h3 id="IAMçš„åŽŸç†"><a href="#IAMçš„åŽŸç†" class="headerlink" title="IAMçš„åŽŸç†"></a>IAMçš„åŽŸç†</h3><p>IAMåŸºäºŽä¸€äº›æ ¸å¿ƒæ¦‚å¿µï¼š</p><p><strong>ç”¨æˆ·ï¼ˆUsersï¼‰ï¼š</strong> ä»£è¡¨å®žé™…çš„ä¸ªäººç”¨æˆ·ï¼Œå¯ä»¥åˆ†é…å®‰å…¨å‡­è¯ï¼ˆå¦‚è®¿é—®å¯†é’¥ã€å¯†ç ï¼‰æ¥è®¿é—®AWSèµ„æºã€‚<br><img src="/assets/images/aws/aws-iam-users.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-iam-users.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><span id="more"></span><p><strong>ç»„ï¼ˆGroupsï¼‰ï¼š</strong> ç”¨äºŽå°†ä¸€ç»„ç”¨æˆ·ç»„åˆåœ¨ä¸€èµ·ï¼Œå¹¶å°†ä¸€ç»„æƒé™åˆ†é…ç»™è¯¥ç»„ï¼Œä»Žè€Œç®€åŒ–æƒé™ç®¡ç†ã€‚<br><img src="/assets/images/aws/aws-iam-groups.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-iam-groups.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p><strong>è§’è‰²ï¼ˆRolesï¼‰ï¼š</strong> ç±»ä¼¼äºŽç”¨æˆ·ï¼Œä½†ä¸æ˜¯ç›´æŽ¥åˆ†é…ç»™äººï¼Œè€Œæ˜¯åˆ†é…ç»™AWSèµ„æºï¼ˆä¾‹å¦‚EC2å®žä¾‹ï¼‰ã€‚è§’è‰²å¯ä»¥ç”¨äºŽä¸´æ—¶æŽˆæƒã€‚<br><img src="/assets/images/aws/aws-iam-roles.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-iam-roles.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p><strong>æƒé™ç­–ç•¥ï¼ˆPermissions Policiesï¼‰ï¼š</strong><br>å®šä¹‰äº†ç”¨æˆ·ã€ç»„æˆ–è§’è‰²å¯ä»¥æ‰§è¡Œçš„ç‰¹å®šæ“ä½œçš„æƒé™ã€‚AWSæä¾›äº†è®¸å¤šé¢„å®šä¹‰çš„æƒé™ç­–ç•¥ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰ç­–ç•¥ã€‚<br><img src="/assets/images/aws/aws-iam-policies.webp" class="lazyload placeholder" data-srcset="/assets/images/aws/aws-iam-policies.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><h3 id="å¦‚ä½•ä½¿ç”¨IAM"><a href="#å¦‚ä½•ä½¿ç”¨IAM" class="headerlink" title="å¦‚ä½•ä½¿ç”¨IAM"></a>å¦‚ä½•ä½¿ç”¨IAM</h3><p><strong>åˆ›å»ºç”¨æˆ·å’Œç»„ï¼š</strong> åœ¨IAMä¸­ï¼Œæ‚¨å¯ä»¥åˆ›å»ºç”¨æˆ·ï¼Œå¹¶å°†ç”¨æˆ·ç»„åˆæˆç»„ã€‚ç„¶åŽï¼Œä¸ºç”¨æˆ·åˆ†é…å®‰å…¨å‡­è¯å’Œæƒé™ã€‚</p><p><strong>å®šä¹‰å’Œåˆ†é…æƒé™ï¼š</strong> æ‚¨å¯ä»¥ä½¿ç”¨AWSæä¾›çš„é¢„å®šä¹‰æƒé™ç­–ç•¥ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰ç­–ç•¥ï¼Œç„¶åŽå°†è¿™äº›ç­–ç•¥é™„åŠ åˆ°ç”¨æˆ·ã€ç»„æˆ–è§’è‰²ä¸Šï¼Œä»¥æŽ§åˆ¶ä»–ä»¬å¯¹èµ„æºçš„è®¿é—®ã€‚</p><p><strong>ä½¿ç”¨è§’è‰²ï¼š</strong> å¦‚æžœæ‚¨çš„åº”ç”¨ç¨‹åºéœ€è¦è®¿é—®AWSæœåŠ¡ï¼Œå¯ä»¥åˆ›å»ºè§’è‰²ï¼Œå¹¶å°†è¿™äº›è§’è‰²é™„åŠ åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºæˆ–æœåŠ¡ä¸­ã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥é¿å…å°†æ•æ„Ÿçš„å‡­è¯åµŒå…¥åˆ°åº”ç”¨ç¨‹åºä»£ç ä¸­ã€‚</p><p><strong>å¤šå› ç´ è®¤è¯ï¼ˆMFAï¼‰ï¼š</strong> æ‚¨å¯ä»¥å¯ç”¨å¤šå› ç´ è®¤è¯æ¥å¢žåŠ è´¦æˆ·çš„å®‰å…¨æ€§ï¼Œè¦æ±‚ç”¨æˆ·åœ¨ç™»å½•æ—¶æä¾›é¢å¤–çš„èº«ä»½éªŒè¯ä¿¡æ¯ã€‚</p><p><strong>è®¿é—®å®¡è®¡ï¼š</strong> IAMæä¾›äº†æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œå¯è®°å½•ç”¨æˆ·åœ¨AWSèµ„æºä¸Šæ‰§è¡Œçš„æ“ä½œï¼Œä»¥ä¾¿è¿›è¡Œå®¡è®¡å’Œå®‰å…¨åˆ†æžã€‚</p><h3 id="æœ€ä½³å®žè·µ"><a href="#æœ€ä½³å®žè·µ" class="headerlink" title="æœ€ä½³å®žè·µ"></a>æœ€ä½³å®žè·µ</h3><p>åœ¨ä½¿ç”¨IAMæ—¶ï¼Œå»ºè®®é‡‡ç”¨ä»¥ä¸‹æœ€ä½³å®žè·µï¼Œä¾‹å¦‚ï¼š</p><p><strong>æœ€å°æƒé™åŽŸåˆ™ï¼š</strong> ä¸ºç”¨æˆ·å’Œè§’è‰²æä¾›æ‰€éœ€çš„æœ€å°æƒé™ï¼Œä»¥å‡å°‘æ½œåœ¨çš„å®‰å…¨é£Žé™©ã€‚</p><p><strong>ä½¿ç”¨èº«ä»½æä¾›å•†ï¼š</strong> å°†èº«ä»½æä¾›å•†ï¼ˆå¦‚ä¼ä¸šç›®å½•ï¼‰ä¸ŽIAMé›†æˆï¼Œä»¥ä¾¿é›†ä¸­ç®¡ç†ç”¨æˆ·å’Œæƒé™ã€‚</p><p><strong>å®šæœŸå®¡æŸ¥æƒé™ï¼š</strong> å®šæœŸå®¡æŸ¥ç”¨æˆ·ã€ç»„å’Œè§’è‰²çš„æƒé™ï¼Œç¡®ä¿æƒé™ä¿æŒæœ€æ–°ä¸”åˆè§„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Cloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud </tag>
            
            <tag> AWS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆIaCå·¥å…·Terraform vs Pulumi</title>
      <link href="/2021/07/13/iac-tools-terraform-vs-pulumi/"/>
      <url>/2021/07/13/iac-tools-terraform-vs-pulumi/</url>
      
        <content type="html"><![CDATA[<p><code>åŸºç¡€æž¶æž„å³ä»£ç ï¼ˆInfrastructure as Code, IaCï¼‰</code>æ˜¯ä¸€ç§ç®¡ç†å’Œæä¾›è®¡ç®—åŸºç¡€æž¶æž„çš„æ–¹å¼, å®ƒä½¿å¾—åŸºç¡€æž¶æž„çš„åˆ›å»ºã€ä¿®æ”¹å’Œç®¡ç†å˜å¾—æ›´åŠ é«˜æ•ˆã€‚<code>Terraform</code>å’Œ<code>Pulumi</code>æ˜¯ä¸¤ä¸ªæµè¡Œçš„IaCå·¥å…·, å„è‡ªå…·æœ‰ç‹¬ç‰¹çš„å·¥ä½œåŽŸç†å’Œä¼˜åŠ¿ã€‚</p><h2 id="Terraform"><a href="#Terraform" class="headerlink" title="Terraform"></a>Terraform</h2><h3 id="å·¥ä½œåŽŸç†"><a href="#å·¥ä½œåŽŸç†" class="headerlink" title="å·¥ä½œåŽŸç†"></a>å·¥ä½œåŽŸç†</h3><p>Terraformæ˜¯ç”±<code>HashiCorp</code>å¼€å‘çš„å¼€æºIaCå·¥å…·ã€‚å®ƒä½¿ç”¨ä¸€ç§<code>å£°æ˜Žæ€§é…ç½®è¯­è¨€ï¼ˆHashiCorp Configuration Language, HCLï¼‰</code>æ¥å®šä¹‰åŸºç¡€æž¶æž„çš„çŠ¶æ€ã€‚ä¸æ˜¯å®Œå…¨å¼€æºçš„ã€‚æœ‰ä»¥ä¸‹ç‰¹å¾:</p><p><strong>å£°æ˜Žå¼é…ç½®</strong>: ç”¨æˆ·é€šè¿‡HCLç¼–å†™é…ç½®æ–‡ä»¶, æè¿°æ‰€éœ€çš„åŸºç¡€æž¶æž„çŠ¶æ€ã€‚ç”¨æˆ·å¹¶ä¸éœ€è¦å…³å¿ƒå¦‚ä½•å®žçŽ°è¿™äº›çŠ¶æ€çš„ç»†èŠ‚ã€‚<br><strong>æ‰§è¡Œè®¡åˆ’</strong>: è¿è¡Œ<code>terraform plan</code>å‘½ä»¤æ—¶, Terraformä¼šè¯»å–é…ç½®æ–‡ä»¶å’Œå½“å‰çš„åŸºç¡€æž¶æž„çŠ¶æ€, å¹¶ç”Ÿæˆä¸€ä¸ªæ‰§è¡Œè®¡åˆ’, æŒ‡å‡ºå°†è¦æ‰§è¡Œçš„æ“ä½œ, ä»¥ä½¿å½“å‰çŠ¶æ€è½¬å˜ä¸ºæœŸæœ›çŠ¶æ€ã€‚<br><strong>åº”ç”¨æ›´æ”¹</strong>: è¿è¡Œ<code>terraform apply</code>å‘½ä»¤åŽ, Terraformå°†æ ¹æ®æ‰§è¡Œè®¡åˆ’å®žé™…åˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤èµ„æºã€‚<br><strong>çŠ¶æ€ç®¡ç†</strong>: Terraformä¼šç»´æŠ¤ä¸€ä¸ªçŠ¶æ€æ–‡ä»¶ï¼ˆterraform.tfstateï¼‰, ç”¨äºŽè®°å½•å½“å‰åŸºç¡€æž¶æž„çš„çŠ¶æ€ã€‚æ­¤æ–‡ä»¶ä½¿Terraformèƒ½å¤Ÿè¯†åˆ«å“ªäº›èµ„æºå·²ç»å­˜åœ¨ã€å“ªäº›èµ„æºéœ€è¦åˆ›å»ºæˆ–æ›´æ–°ã€‚<br><strong>å›¾å½¢åŒ–ä¾èµ–å…³ç³»</strong>: Terraformä¼šè‡ªåŠ¨å¤„ç†èµ„æºä¹‹é—´çš„ä¾èµ–å…³ç³», ä»Žè€Œç¡®ä¿ä»¥æ­£ç¡®çš„é¡ºåºåˆ›å»ºå’Œæ›´æ–°èµ„æºã€‚</p><h3 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h3><p><strong>å¹³å°æ— å…³æ€§</strong>: æ”¯æŒå¤šç§äº‘æœåŠ¡æä¾›å•†ï¼ˆ<code>AWS</code>ã€<code>Azure</code>ã€<code>GCP</code>ç­‰ï¼‰, ç”¨æˆ·å¯ä»¥ä½¿ç”¨ç›¸åŒçš„å·¥å…·ç®¡ç†ä¸åŒå¹³å°çš„èµ„æºã€‚<br><strong>æ¨¡å—åŒ–</strong>: Terraformæ”¯æŒæ¨¡å—åŒ–, ç”¨æˆ·å¯ä»¥å°†å¸¸ç”¨çš„èµ„æºé…ç½®å°è£…æˆæ¨¡å—, æé«˜é‡ç”¨æ€§ã€‚<br><strong>ç¤¾åŒºæ”¯æŒ</strong>: æ‹¥æœ‰ä¸°å¯Œçš„ç¤¾åŒºå’Œå¤§é‡çš„ç¬¬ä¸‰æ–¹æ¨¡å—, æ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹ã€‚</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>Terraformåˆ›å»ºAWS S3 Bucketçš„ç¤ºä¾‹ä»£ç :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">provider &quot;aws&quot; &#123;</span><br><span class="line">  region = &quot;us-east-1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_s3_bucket&quot; &quot;my_bucket&quot; &#123;</span><br><span class="line">  bucket = &quot;my-unique-bucket-name&quot;</span><br><span class="line">  acl    = &quot;private&quot;</span><br><span class="line"></span><br><span class="line">  tags = &#123;</span><br><span class="line">    Name        = &quot;My S3 Bucket&quot;</span><br><span class="line">    Environment = &quot;Dev&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Initialize Terraform project. This sets up the backend, downloads necessary providers, etc.</span></span><br><span class="line">terraform init</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run a Terraform plan to preview the changes that will be made to the infrastructure.</span></span><br><span class="line"><span class="comment"># This step is a dry-run that shows what will happen when you actually apply the changes.</span></span><br><span class="line">terraform plan</span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply the planned changes to the infrastructure.</span></span><br><span class="line"><span class="comment"># This step will actually create, update, or delete resources to match the configuration.</span></span><br><span class="line"><span class="comment"># It will show a preview of these actions and ask for confirmation before proceeding.</span></span><br><span class="line">terraform apply</span><br><span class="line"></span><br><span class="line"><span class="comment"># Destroy the infrastructure.</span></span><br><span class="line"><span class="comment"># This step will delete all resources that were created by Terraform.</span></span><br><span class="line">terraform destroy</span><br></pre></td></tr></table></figure><h2 id="Pulumi"><a href="#Pulumi" class="headerlink" title="Pulumi"></a>Pulumi</h2><h3 id="å·¥ä½œåŽŸç†-1"><a href="#å·¥ä½œåŽŸç†-1" class="headerlink" title="å·¥ä½œåŽŸç†"></a>å·¥ä½œåŽŸç†</h3><p>Pulumiæ˜¯ä¸€ä¸ªçŽ°ä»£åŒ–çš„IaCå·¥å…·, å…è®¸ç”¨æˆ·ä½¿ç”¨å¤šç§ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚<code>JavaScript</code>ã€<code>Python</code>ã€<code>Go</code>å’Œ<code>C#</code>, <code>Java</code>ï¼‰æˆ–è€…æ ‡è®°è¯­è¨€<code>YAML</code>æ¥å®šä¹‰åŸºç¡€æž¶æž„ã€‚æ˜¯å®Œå…¨å¼€æºçš„ï¼Œä¸ŽTerraformçš„å£°æ˜Žæ€§æ–¹æ³•ä¸åŒ, Pulumié‡‡ç”¨äº†<code>å‘½ä»¤å¼ç¼–ç¨‹æ¨¡åž‹</code>ã€‚</p><p><strong>å‘½ä»¤å¼ç¼–ç¨‹</strong>: ç”¨æˆ·ä½¿ç”¨ç¼–ç¨‹è¯­è¨€ç¼–å†™ä»£ç , é€šè¿‡æž„å»ºé€»è¾‘å’ŒæŽ§åˆ¶æµæ¥æè¿°åŸºç¡€æž¶æž„çš„åˆ›å»ºè¿‡ç¨‹ã€‚ä¾‹å¦‚, å¯ä»¥ä½¿ç”¨æ¡ä»¶è¯­å¥å’Œå¾ªçŽ¯æ¥åŠ¨æ€åœ°ç”Ÿæˆèµ„æºã€‚<br><strong>Pulumi CLI</strong>: é€šè¿‡Pulumi CLI, ç”¨æˆ·å¯ä»¥è¿è¡Œ<code>pulumi up</code>å‘½ä»¤æ¥é¢„è§ˆå’Œåº”ç”¨æ›´æ”¹ã€‚Pulumiä¼šåˆ†æžä»£ç å¹¶ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ã€‚<br><strong>çŠ¶æ€ç®¡ç†</strong>: Pulumiå°†çŠ¶æ€å­˜å‚¨åœ¨äº‘ä¸­ï¼ˆå¦‚AWS S3ï¼‰æˆ–æœ¬åœ°, ä»¥ä¾¿è·Ÿè¸ªåŸºç¡€æž¶æž„çš„å½“å‰çŠ¶æ€ã€‚<br><strong>å®žæ—¶æ›´æ–°</strong>: Pulumiæ”¯æŒå®žæ—¶æ›´æ–°, å½“åŸºç¡€æž¶æž„å‘ç”Ÿå˜åŒ–æ—¶, ç”¨æˆ·å¯ä»¥ç«‹å³çœ‹åˆ°å½±å“, å¹¶è¿…é€Ÿå“åº”ã€‚</p><h3 id="ä¼˜åŠ¿-1"><a href="#ä¼˜åŠ¿-1" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h3><p><strong>çµæ´»æ€§</strong>: pulumiæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€, å…è®¸ç”¨æˆ·ä½¿ç”¨ç†Ÿæ‚‰çš„ç¼–ç¨‹å·¥å…·å’Œåº“ã€‚<br><strong>å¯é‡ç”¨æ€§</strong>: å¯ä»¥é€šè¿‡å‡½æ•°å’Œç±»ç­‰ç¼–ç¨‹ç‰¹æ€§æé«˜åŸºç¡€æž¶æž„ä»£ç çš„å¯é‡ç”¨æ€§å’Œç»„ç»‡æ€§ã€‚<br><strong>åŠ¨æ€é…ç½®</strong>: èƒ½å¤Ÿåˆ©ç”¨ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ€§, åŠ¨æ€ç”Ÿæˆå’Œé…ç½®èµ„æº, ä½¿å¾—åŸºç¡€æž¶æž„ç®¡ç†æ›´åŠ çµæ´»ã€‚</p><h3 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>Pulumiåˆ›å»ºAWS S3 Bucketçš„ç¤ºä¾‹ä»£ç :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> aws = <span class="built_in">require</span>(<span class="string">&quot;@pulumi/aws&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªS3 Bucket</span></span><br><span class="line"><span class="keyword">const</span> bucket = <span class="keyword">new</span> aws.<span class="property">s3</span>.<span class="title class_">Bucket</span>(<span class="string">&quot;my-bucket&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">acl</span>: <span class="string">&quot;private&quot;</span>,  <span class="comment">// è®¾ç½®è®¿é—®æŽ§åˆ¶åˆ—è¡¨</span></span><br><span class="line">    <span class="attr">tags</span>: &#123;</span><br><span class="line">        <span class="title class_">Name</span>: <span class="string">&quot;My S3 Bucket&quot;</span>,</span><br><span class="line">        <span class="title class_">Environment</span>: <span class="string">&quot;Dev&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºBucketçš„åå­—å’ŒURL</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">bucketName</span> = bucket.<span class="property">id</span>;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">bucketUrl</span> = bucket.<span class="property">websiteEndpoint</span>;</span><br></pre></td></tr></table></figure><h3 id="Command-1"><a href="#Command-1" class="headerlink" title="Command"></a>Command</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># create a new Pulumi project</span></span><br><span class="line">pulumi new</span><br><span class="line"></span><br><span class="line"><span class="comment"># preview the changes that will be made to the infrastructure</span></span><br><span class="line">pulumi preview</span><br><span class="line"></span><br><span class="line"><span class="comment"># apply the changes to the infrastructure</span></span><br><span class="line">pulumi up</span><br><span class="line"></span><br><span class="line"><span class="comment"># destroy the infrastructure</span></span><br><span class="line">pulumi destroy</span><br></pre></td></tr></table></figure><h2 id="Terraformä¸ŽPulumiçš„æ¯”è¾ƒ"><a href="#Terraformä¸ŽPulumiçš„æ¯”è¾ƒ" class="headerlink" title="Terraformä¸ŽPulumiçš„æ¯”è¾ƒ"></a>Terraformä¸ŽPulumiçš„æ¯”è¾ƒ</h2><table><thead><tr><th>ç‰¹æ€§</th><th>Terraform</th><th>Pulumi</th></tr></thead><tbody><tr><td>é…ç½®è¯­è¨€</td><td>HCLï¼ˆå£°æ˜Žæ€§ï¼‰</td><td>å¤šç§ç¼–ç¨‹è¯­è¨€ï¼ˆå‘½ä»¤å¼ï¼‰</td></tr><tr><td>å­¦ä¹ æ›²çº¿</td><td>ç›¸å¯¹è¾ƒä½Ž, æ˜“äºŽä¸Šæ‰‹</td><td>ä¾èµ–äºŽç†Ÿæ‚‰çš„ç¼–ç¨‹è¯­è¨€, å­¦ä¹ æ›²çº¿è¾ƒé«˜</td></tr><tr><td>çŠ¶æ€ç®¡ç†</td><td>çŠ¶æ€æ–‡ä»¶ï¼ˆterraform.tfstateï¼‰, æ”¯æŒè¿œç¨‹å­˜å‚¨</td><td>çŠ¶æ€å­˜å‚¨åœ¨äº‘ä¸­æˆ–æœ¬åœ°, æ”¯æŒæ›´çµæ´»çš„çŠ¶æ€ç®¡ç†</td></tr><tr><td>ç¤¾åŒºä¸Žæ¨¡å—</td><td>æ‹¥æœ‰ä¸°å¯Œçš„æ¨¡å—å’Œç¤¾åŒºæ”¯æŒ</td><td>ç¤¾åŒºç›¸å¯¹è¾ƒå°, æ¨¡å—æ”¯æŒè¾ƒå°‘</td></tr><tr><td>èµ„æºä¾èµ–ç®¡ç†</td><td>è‡ªåŠ¨å¤„ç†èµ„æºä¹‹é—´çš„ä¾èµ–å…³ç³»</td><td>éœ€è¦æ‰‹åŠ¨ç®¡ç†ä¾èµ–å…³ç³»</td></tr><tr><td>åŠ¨æ€ç‰¹æ€§</td><td>å—é™äºŽå£°æ˜Žæ€§é…ç½®, åŠ¨æ€é…ç½®è¾ƒä¸ºå›°éš¾</td><td>ä½¿ç”¨ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ€§, æ”¯æŒåŠ¨æ€ç”Ÿæˆå’Œé…ç½®</td></tr><tr><td>å¯é‡ç”¨æ€§</td><td>æ”¯æŒæ¨¡å—åŒ–</td><td>é«˜åº¦å¯é‡ç”¨æ€§, åˆ©ç”¨ç¼–ç¨‹è¯­è¨€ç‰¹æ€§</td></tr></tbody></table><h3 id="é€‰æ‹©Terraform"><a href="#é€‰æ‹©Terraform" class="headerlink" title="é€‰æ‹©Terraform:"></a>é€‰æ‹©Terraform:</h3><ul><li>å¦‚æžœå›¢é˜Ÿå¯¹å£°æ˜Žæ€§è¯­è¨€ï¼ˆå¦‚HCLï¼‰æ›´ç†Ÿæ‚‰, å¹¶ä¸”å¸Œæœ›å¿«é€Ÿä¸Šæ‰‹ã€‚</li><li>éœ€è¦ä¸°å¯Œçš„ç¤¾åŒºæ”¯æŒå’Œæˆç†Ÿçš„æ¨¡å—ã€‚</li><li>å¯¹åŸºç¡€æž¶æž„çš„å®šä¹‰ä¸éœ€è¦å¤æ‚çš„é€»è¾‘ã€‚</li></ul><h3 id="é€‰æ‹©Pulumi"><a href="#é€‰æ‹©Pulumi" class="headerlink" title="é€‰æ‹©Pulumi:"></a>é€‰æ‹©Pulumi:</h3><ul><li>å¦‚æžœå›¢é˜Ÿæ›´ç†Ÿæ‚‰ç¼–ç¨‹è¯­è¨€, å¹¶å¸Œæœ›åˆ©ç”¨çŽ°æœ‰çš„ç¼–ç¨‹æŠ€èƒ½ã€‚</li><li>éœ€è¦åŠ¨æ€ç”ŸæˆåŸºç¡€æž¶æž„é…ç½®, æˆ–è€…å¸Œæœ›å®žçŽ°å¤æ‚çš„é€»è¾‘ã€‚</li><li>å¸Œæœ›åœ¨IaCä¸­å……åˆ†åˆ©ç”¨ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ€§ï¼ˆå¦‚å‡½æ•°ã€ç±»ã€æ¨¡å—ï¼‰ã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>Terraform</code>å’Œ<code>Pulumi</code>éƒ½æ˜¯å¼ºå¤§çš„<code>IaCå·¥å…·</code>, å„æœ‰ä¼˜åŠ£ã€‚Terraformä»¥å…¶ç®€å•æ˜“ç”¨å’Œå¹¿æ³›çš„ç¤¾åŒºæ”¯æŒè€Œå—åˆ°æ¬¢è¿Ž, è€ŒPulumiåˆ™å› å…¶çµæ´»æ€§å’Œå¯¹å¤šç§ç¼–ç¨‹è¯­è¨€çš„æ”¯æŒè€Œé€æ¸å´­éœ²å¤´è§’ã€‚é€‰æ‹©å“ªç§å·¥å…·å¯ä»¥ä»Žå›¢é˜Ÿçš„æŠ€èƒ½ã€é¡¹ç›®éœ€æ±‚å’Œæœªæ¥çš„ç»´æŠ¤ç­–ç•¥æ–¹é¢æ¥ç»¼åˆè€ƒè™‘ã€‚æ›´å¤šè¯¦ç»†åŒºåˆ«å¯ä»¥å‚è§<code>pulumi</code>å®˜ç½‘å¯¹æ¯”æ–‡ç« <a href="https://www.pulumi.com/docs/iac/concepts/vs/terraform/">https://www.pulumi.com/docs/iac/concepts/vs/terraform/</a></p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pulumi </tag>
            
            <tag> Terraform </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ç»´æŠ¤æ­£åœ¨è¿è¡Œçš„ Kubernetes èŠ‚ç‚¹</title>
      <link href="/2021/06/28/how-to-maintan-the-running-node-in-kubernetes/"/>
      <url>/2021/06/28/how-to-maintan-the-running-node-in-kubernetes/</url>
      
        <content type="html"><![CDATA[<p><code>Kubernetes</code> é›†ç¾¤ä¸­çš„èŠ‚ç‚¹å¯ä»¥åˆ†ä¸ºä¸¤ç§ç±»åž‹ï¼š</p><ul><li>ä¸»èŠ‚ç‚¹ï¼šä¸»èŠ‚ç‚¹æ˜¯ Kubernetes é›†ç¾¤çš„æŽ§åˆ¶èŠ‚ç‚¹ï¼Œè´Ÿè´£ç®¡ç†é›†ç¾¤çš„æŽ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¦‚ API æœåŠ¡å™¨ã€è°ƒåº¦å™¨ã€æŽ§åˆ¶å™¨ç®¡ç†å™¨ç­‰ã€‚</li><li>å·¥ä½œèŠ‚ç‚¹ï¼šå·¥ä½œèŠ‚ç‚¹æ˜¯ Kubernetes é›†ç¾¤çš„å·¥ä½œèŠ‚ç‚¹ï¼Œè´Ÿè´£è¿è¡Œå®¹å™¨åŒ–çš„åº”ç”¨ã€‚</li></ul><p>å½“èŠ‚ç‚¹å‡ºçŽ°æ•…éšœæ—¶ï¼Œé›†ç¾¤ä¼šè‡ªåŠ¨å°†å…¶ä»Žå·¥ä½œèŠ‚ç‚¹ä¸­ç§»é™¤ï¼Œå¹¶å°†å…¶ä¸Šçš„å®¹å™¨è°ƒåº¦åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤<code>kubectl get nodes</code>æŸ¥çœ‹é›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„çŠ¶æ€ã€‚</p><p>ä½†æ˜¯æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ç»´æŠ¤æ­£åœ¨è¿è¡Œçš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚ï¼šå‡çº§èŠ‚ç‚¹çš„å†…æ ¸æˆ–æ“ä½œç³»ç»Ÿï¼Œ ä¿®å¤èŠ‚ç‚¹ä¸Šçš„è½¯ä»¶åŒ…ç­‰ç­‰ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†ä¸å½±å“æ­£åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œçš„åº”ç”¨ï¼Œåœ¨åº”ç”¨æ— æ„ŸçŸ¥çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹èŠ‚ç‚¹è¿›è¡Œç»´æŠ¤ã€‚ä¸»è¦é€šè¿‡ä½¿ç”¨ä»¥ä¸‹ä¸‰ä¸ªå‘½ä»¤æ¥å®žçŽ°ï¼š</p><ul><li><code>kubectl cordon &lt;node-name&gt;</code>ï¼šå°†èŠ‚ç‚¹æ ‡è®°ä¸ºä¸å¯è°ƒåº¦ã€‚</li><li><code>kubectl drain &lt;node-name&gt;</code>ï¼šå°†èŠ‚ç‚¹ä¸Šçš„å·¥ä½œè´Ÿè½½è½¬ç§»åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šã€‚</li><li><code>kubectl uncordon &lt;node-name&gt;</code>ï¼šå°†èŠ‚ç‚¹æ ‡è®°ä¸ºå¯è°ƒåº¦ã€‚</li></ul><p>æˆ‘ä»¬è¿™é‡Œç”¨minikubeæ¥åšç¤ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬è¦ç»´æŠ¤æ­£åœ¨è¿è¡Œçš„minikubeèŠ‚ç‚¹ã€‚é¦–å…ˆï¼ŒæŸ¥çœ‹èŠ‚ç‚¹çš„çŠ¶æ€ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get nodes -o wide</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-maintain-node.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-maintain-node.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes Get Nodes"/></div><span class="image-caption">Kubernetes Get Nodes</span></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒminikubeèŠ‚ç‚¹çš„çŠ¶æ€æ˜¯<code>Ready</code>ï¼Œå³èŠ‚ç‚¹å¤„äºŽæ­£å¸¸çŠ¶æ€ã€‚</p><h2 id="kubectl-cordon"><a href="#kubectl-cordon" class="headerlink" title="kubectl cordon"></a>kubectl cordon</h2><p><code>kubectl cordon</code>çš„ä½œç”¨æ˜¯å°†èŠ‚ç‚¹æ ‡è®°ä¸ºä¸å¯è°ƒåº¦ã€‚è¿™æ„å‘³ç€ä¸ä¼šåœ¨è¯¥èŠ‚ç‚¹ä¸Šè°ƒåº¦æ–°çš„Podï¼Œä½†çŽ°æœ‰çš„Podå°†ç»§ç»­è¿è¡Œã€‚å½“æˆ‘ä»¬å‡†å¤‡å¯¹èŠ‚ç‚¹è¿›è¡Œç»´æŠ¤æˆ–å‡çº§æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤ï¼Œæš‚æ—¶ä¸æƒ³é©±é€ä»»ä½•çŽ°æœ‰çš„Podã€‚</p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡æ­¤å‘½ä»¤å°†èŠ‚ç‚¹æ ‡è®°ä¸ºä¸å¯è°ƒåº¦ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl cordon minikube</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-maintain-cordon.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-maintain-cordon.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes Cordon Node"/></div><span class="image-caption">Kubernetes Cordon Node</span></div><p>å†æ¬¡æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€æ—¶ï¼Œå‘çŽ°èŠ‚ç‚¹çŠ¶æ€ä»Ž<code>Ready</code>å˜æˆäº†<code>Ready,SchedulingDisabled</code>ã€‚è¿™æ„å‘³ç€èŠ‚ç‚¹å·²ç»è¢«æ ‡è®°ä¸ºä¸å¯è°ƒåº¦ï¼Œä½†æ˜¯å…¶ä¸­å·²è°ƒåº¦çš„Podsä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œã€‚</p><h2 id="kubectl-drain"><a href="#kubectl-drain" class="headerlink" title="kubectl drain"></a>kubectl drain</h2><p><code>kubectl drain</code>çš„ä½œç”¨æ˜¯å®‰å…¨åœ°ä»ŽèŠ‚ç‚¹ä¸­é©±é€æ‰€æœ‰<code>Pod</code>, è¯¥å‘½ä»¤å°†é¦–å…ˆå°†èŠ‚ç‚¹æ ‡è®°ä¸ºä¸å¯è°ƒåº¦ï¼ˆcordonï¼‰ï¼Œç„¶åŽå°è¯•é©±é€å…¶ä¸Šçš„æ‰€æœ‰Podï¼Œç¡®ä¿å®ƒä»¬è¢«ç»ˆæ­¢æˆ–é‡æ–°è°ƒåº¦åˆ°å…¶ä»–èŠ‚ç‚¹ï¼ˆå¦‚æžœå®ƒä»¬æ˜¯å‰¯æœ¬é›†ã€éƒ¨ç½²æˆ–å…¶ä»–æŽ§åˆ¶å™¨çš„ä¸€éƒ¨åˆ†ï¼‰, ç‰¹åˆ«é€‚ç”¨äºŽåº”ç”¨æ›´æ–°æˆ–è¿›è¡Œç¡¬ä»¶ç»´æŠ¤æ—¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl drain minikube</span><br></pre></td></tr></table></figure><p>å¦‚ä½•èŠ‚ç‚¹ä¸Šæœ‰daemonsetå’Œlocal storageä½¿ç”¨ï¼Œç›´æŽ¥æ‰§è¡Œä¸Šè¿°çš„å‘½ä»¤æ—¶ä¼šå‡ºçŽ°å¦‚ä¸‹é”™è¯¯.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">error: unable to drain node &quot;minikube&quot; due to error:[cannot delete DaemonSet-managed Pods (use --ignore-daemonsets to ignore): kube-system/kube-proxy-jsdtq,</span><br><span class="line">cannot delete Pods with local storage (use --delete-emptydir-data to override): kube-system/metrics-server-c74bf77d6-9wpx5]</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-maintain-drain-failure.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-maintain-drain-failure.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes Drain Node Error"/></div><span class="image-caption">Kubernetes Drain Node Error</span></div><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>--ignore-daemonsets</code>å‚æ•°æ¥å¿½ç•¥daemonsetï¼Œå¹¶ä½¿ç”¨<code>--delete-emptydir-data</code>å‚æ•°æ¥åˆ é™¤èŠ‚ç‚¹ä¸Šçš„local storageã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl drain minikube --ignore-daemonsets --delete-emptydir-data</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-maintain-drain-success.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-maintain-drain-success.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes Drain Node Success"/></div><span class="image-caption">Kubernetes Drain Node Success</span></div><p>æ­¤æ—¶ï¼ŒèŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰Podéƒ½å·²è¢«é©±é€ï¼Œä½†èŠ‚ç‚¹ä»ç„¶å¤„äºŽ<code>Ready,SchedulingDisabled</code>çŠ¶æ€ã€‚ æŸ¥çœ‹Podsçš„è¿è¡ŒçŠ¶æ€ï¼ŒPodsçš„çŠ¶æ€å·²ç»ä»ŽRunningå˜æˆäº†PendingçŠ¶æ€ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-maintain-drain-status.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-maintain-drain-status.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes Drain Node Status"/></div><span class="image-caption">Kubernetes Drain Node Status</span></div><p>åœ¨è¿™ä¸ªæ­¥éª¤ä¹‹åŽï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹èŠ‚ç‚¹è¿›è¡Œç»´æŠ¤ï¼Œæ¯”å¦‚å‡çº§å†…æ ¸æˆ–æ“ä½œç³»ç»Ÿï¼Œä¿®å¤è½¯ä»¶åŒ…ç­‰ã€‚å½“ç»´æŠ¤å®ŒæˆåŽï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å‘½ä»¤<code>kubectl uncordon</code>å°†èŠ‚ç‚¹æ ‡è®°ä¸ºå¯è°ƒåº¦ï¼Œå…è®¸æ–°çš„Podåœ¨å…¶ä¸Šè¿›è¡Œè°ƒåº¦ã€‚</p><h2 id="kubectl-uncordon"><a href="#kubectl-uncordon" class="headerlink" title="kubectl uncordon"></a>kubectl uncordon</h2><p><code>kubectl uncordon</code>çš„ä½œç”¨æ˜¯å°†å…ˆå‰å·²è¢«æ ‡è®°ä¸ºä¸å¯è°ƒåº¦çš„èŠ‚ç‚¹é‡æ–°æ ‡è®°ä¸ºå¯è°ƒåº¦ï¼Œå…è®¸æ–°çš„Podåœ¨å…¶ä¸Šè¿›è¡Œè°ƒåº¦ã€‚è¿™æ„å‘³ç€åœ¨è¯¥èŠ‚ç‚¹ä¸Šå¯ä»¥è°ƒåº¦æ–°çš„Podã€‚å½“ç»´æŠ¤å®ŒæˆåŽï¼Œå¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤å°†èŠ‚ç‚¹æ ‡è®°ä¸ºå¯è°ƒåº¦ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl uncordon minikube</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-maintain-uncordon.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-maintain-uncordon.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes Uncordon Node"/></div><span class="image-caption">Kubernetes Uncordon Node</span></div><p>ä»Žä¸Šé¢å¯ä»¥çœ‹å‡ºï¼ŒèŠ‚ç‚¹å·²ç»æ¢å¤æˆäº†<code>Ready</code>çŠ¶æ€ï¼Œå¯ä»¥æ­£å¸¸è°ƒåº¦Podã€‚å¹¶ä¸”Podçš„çŠ¶æ€ä¹Ÿä»Ž<code>Pending</code>å˜æˆäº†<code>Running</code>ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ä¸Šè¿°ä¸‰ä¸ªå‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ­£åœ¨è¿è¡Œçš„KubernetesèŠ‚ç‚¹è¿›è¡Œç»´æŠ¤ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡å‘½ä»¤<code>kubectl cordon</code>å°†èŠ‚ç‚¹æ ‡è®°ä¸ºä¸å¯è°ƒåº¦ï¼Œç„¶åŽé€šè¿‡å‘½ä»¤<code>kubectl drain</code>å°†èŠ‚ç‚¹ä¸Šçš„å·¥ä½œè´Ÿè½½è½¬ç§»åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šã€‚æœ€åŽï¼Œæˆ‘ä»¬é€šè¿‡å‘½ä»¤<code>kubectl uncordon</code>å°†èŠ‚ç‚¹æ ‡è®°ä¸ºå¯è°ƒåº¦ï¼Œå…è®¸æ–°çš„Podåœ¨å…¶ä¸Šè¿›è¡Œè°ƒåº¦ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸å½±å“æ­£åœ¨è¿è¡Œçš„åº”ç”¨çš„æƒ…å†µä¸‹ï¼Œå¯¹èŠ‚ç‚¹è¿›è¡Œç»´æŠ¤ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud Native </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes æš´éœ² Service ç»™å¤–éƒ¨è®¿é—®</title>
      <link href="/2021/06/09/kubernetes-expose-service/"/>
      <url>/2021/06/09/kubernetes-expose-service/</url>
      
        <content type="html"><![CDATA[<p>åœ¨çŽ°ä»£çš„å®¹å™¨åŒ–åº”ç”¨éƒ¨ç½²ä¸­ï¼Œ<code>Kubernetes</code> å·²ç»æˆä¸ºäº†ä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚å®ƒæä¾›äº†ä¸€ç§é«˜æ•ˆçš„æ–¹å¼æ¥ç®¡ç†å’Œç¼–æŽ’å®¹å™¨åŒ–çš„åº”ç”¨ã€‚åœ¨ Kubernetes ä¸­ï¼Œ<code>Service</code> æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒå®šä¹‰äº†ä¸€ç§è®¿é—®ä¸€ç»„ <code>Pod</code> çš„ç­–ç•¥ï¼Œé€šå¸¸è¢«ç§°ä¸ºå¾®æœåŠ¡ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç» Kubernetes ä¸­çš„ Service æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å°†å…¶æš´éœ²å‡ºæ¥ï¼Œä»¥åŠå¤–éƒ¨å¦‚ä½•è®¿é—®è¿™äº›æœåŠ¡ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Serviceï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Serviceï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Serviceï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Serviceï¼Ÿ</h2><p>åœ¨ Kubernetes ä¸­ï¼ŒService æ˜¯ä¸€ç§æŠ½è±¡ï¼Œå®ƒå®šä¹‰äº†ä¸€ç»„ Pod çš„é€»è¾‘é›†åˆå’Œä¸€ä¸ªè®¿é—®å®ƒä»¬çš„ç­–ç•¥ã€‚Service é€šè¿‡æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆLabel Selectorï¼‰æ¥ç¡®å®šå®ƒæ‰€æœåŠ¡çš„ Podã€‚<span class='pbg danger'>æ¯ä¸ª Service éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ IP åœ°å€å’Œç«¯å£ï¼Œè¿™ä½¿å¾—å³ä½¿ Pod çš„ IP åœ°å€å‘ç”Ÿå˜åŒ–ï¼Œå®¢æˆ·ç«¯ä¹Ÿèƒ½é€šè¿‡ Service ç¨³å®šåœ°è®¿é—®åˆ°è¿™äº› Podã€‚</span></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-service.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-service.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes Service" style="width:800px;"/></div><span class="image-caption">Kubernetes Service</span></div><h2 id="Service-çš„ä½œç”¨"><a href="#Service-çš„ä½œç”¨" class="headerlink" title="Service çš„ä½œç”¨"></a>Service çš„ä½œç”¨</h2><p>Service çš„ä½œç”¨ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li>è´Ÿè½½å‡è¡¡ï¼šService æä¾›äº†ä¸€ç§è´Ÿè½½å‡è¡¡çš„ç­–ç•¥ï¼Œé€šè¿‡å®ƒå¯ä»¥å°†æµé‡åˆ†å‘åˆ°å¤šä¸ª Podã€‚</li><li>æœåŠ¡å‘çŽ°ï¼šService æä¾›äº†ä¸€ç§æœåŠ¡å‘çŽ°çš„æœºåˆ¶ï¼Œä½¿å¾—å®¢æˆ·ç«¯åº”ç”¨èƒ½å¤Ÿé€šè¿‡åå­—æ¥è®¿é—®æœåŠ¡ã€‚</li><li>å‘½åç©ºé—´éš”ç¦»ï¼šService ä½¿å¾— Pod å’Œ Service èƒ½å¤Ÿè¢«éš”ç¦»åˆ°ä¸åŒçš„å‘½åç©ºé—´ä¸­ï¼Œä»Žè€Œå®žçŽ°æ›´ç»†ç²’åº¦çš„æƒé™æŽ§åˆ¶ã€‚</li><li>è·¨é›†ç¾¤æœåŠ¡ï¼šService æä¾›äº†ä¸€ç§è·¨é›†ç¾¤æœåŠ¡çš„èƒ½åŠ›ï¼Œä½¿å¾—åº”ç”¨èƒ½å¤Ÿè¢«éƒ¨ç½²åˆ°ä¸åŒçš„ Kubernetes é›†ç¾¤ä¸­ã€‚</li></ol><h2 id="Service-çš„ç±»åž‹"><a href="#Service-çš„ç±»åž‹" class="headerlink" title="Service çš„ç±»åž‹"></a>Service çš„ç±»åž‹</h2><p>Kubernetes æä¾›äº†å‡ ç§ä¸åŒç±»åž‹çš„ Serviceï¼Œä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ï¼š</p><h3 id="ClusterIP"><a href="#ClusterIP" class="headerlink" title="ClusterIP"></a>ClusterIP</h3><p>è¿™æ˜¯é»˜è®¤çš„ Service ç±»åž‹ï¼Œå®ƒä¸º Service åˆ†é…ä¸€ä¸ªé›†ç¾¤å†…çš„ IP åœ°å€ã€‚è¿™ç§ç±»åž‹çš„ Service åªèƒ½åœ¨é›†ç¾¤å†…éƒ¨è®¿é—®ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-service-clusterip.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-service-clusterip.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes ClusterIP Service" style="width:600px;"/></div><span class="image-caption">Kubernetes ClusterIP Service</span></div><h3 id="NodePort"><a href="#NodePort" class="headerlink" title="NodePort"></a>NodePort</h3><p>è¿™ç§ç±»åž‹çš„ Service ä¼šåœ¨æ¯ä¸ªèŠ‚ç‚¹çš„ IP ä¸Šæ‰“å¼€ä¸€ä¸ªç‰¹å®šçš„ç«¯å£ï¼Œå¹¶å°†è¯¥ç«¯å£çš„æµé‡è½¬å‘åˆ° Serviceã€‚è¿™æ ·ï¼Œå¤–éƒ¨å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡èŠ‚ç‚¹çš„ IP å’Œè¿™ä¸ªç«¯å£æ¥è®¿é—® Serviceã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-service-nodeport.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-service-nodeport.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes NodePort Service" style="width:600px;"/></div><span class="image-caption">Kubernetes NodePort Service</span></div><h3 id="LoadBalancer"><a href="#LoadBalancer" class="headerlink" title="LoadBalancer"></a>LoadBalancer</h3><p>è¿™ç§ç±»åž‹çš„ Service ä¼šåœ¨äº‘æä¾›å•†ï¼ˆå¦‚ AWSã€GCP æˆ– Azureï¼‰ä¸Šåˆ›å»ºä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼Œå¹¶å°†æµé‡è½¬å‘åˆ° Serviceã€‚è´Ÿè½½å‡è¡¡å™¨ä¼šä¸º Service åˆ†é…ä¸€ä¸ªå¤–éƒ¨ IP åœ°å€ï¼Œå¤–éƒ¨å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è¿™ä¸ª IP åœ°å€è®¿é—® Serviceã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-service-loadbalancer.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-service-loadbalancer.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes LoadBalancer Service" style="width:600px;"/></div><span class="image-caption">Kubernetes LoadBalancer Service</span></div><h3 id="ExternalName-Ingress"><a href="#ExternalName-Ingress" class="headerlink" title="ExternalName - Ingress"></a>ExternalName - Ingress</h3><p>è¿™ç§ç±»åž‹çš„ Service é€šè¿‡è¿”å›žä¸€ä¸ª CNAME è®°å½•ï¼Œå°† Service æ˜ å°„åˆ°ä¸€ä¸ªå¤–éƒ¨çš„ DNS åç§°ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-service-external-name-ingress.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-service-external-name-ingress.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes ExternalName Ingress Service" style="width:800px;"/></div><span class="image-caption">Kubernetes ExternalName Ingress Service</span></div><h2 id="æš´éœ²-Service"><a href="#æš´éœ²-Service" class="headerlink" title="æš´éœ² Service"></a>æš´éœ² Service</h2><h3 id="yaml-æ–‡ä»¶æ–¹å¼1"><a href="#yaml-æ–‡ä»¶æ–¹å¼1" class="headerlink" title="yaml æ–‡ä»¶æ–¹å¼1"></a>yaml æ–‡ä»¶æ–¹å¼1</h3><p>è¦æš´éœ²ä¸€ä¸ª Serviceï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª Service çš„ YAML æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ NodePort Service çš„ç¤ºä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">my-app</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8080</span></span><br><span class="line">      <span class="attr">nodePort:</span> <span class="number">30007</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º my-service çš„ Serviceï¼Œå®ƒçš„ç±»åž‹æ˜¯ NodePortã€‚è¿™ä¸ª Service ä¼šé€‰æ‹©æ‰€æœ‰å¸¦æœ‰æ ‡ç­¾ app&#x3D;my-app çš„ Podï¼Œå¹¶å°†ç«¯å£ 80 çš„æµé‡è½¬å‘åˆ° Pod çš„ç«¯å£ 8080ã€‚èŠ‚ç‚¹ä¸Šçš„ç«¯å£ 30007 ä¼šè¢«æ‰“å¼€ï¼Œå¤–éƒ¨å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡èŠ‚ç‚¹çš„ IP å’Œè¿™ä¸ªç«¯å£æ¥è®¿é—® Serviceã€‚</p><h3 id="kubectl-å‘½ä»¤æ–¹å¼"><a href="#kubectl-å‘½ä»¤æ–¹å¼" class="headerlink" title="kubectl å‘½ä»¤æ–¹å¼"></a>kubectl å‘½ä»¤æ–¹å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl expose deployment my-deployment --port=80 --target-port=8080 --<span class="built_in">type</span>=NodePort --name=my-service</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„å‘½ä»¤ä¸­ï¼Œä½¿ç”¨ <code>kubectl expose</code> å‘½ä»¤æ¥æš´éœ²ä¸€ä¸ª Deployment çš„ Serviceã€‚æˆ‘ä»¬æŒ‡å®šäº† Deployment çš„åç§° my-deploymentï¼Œç«¯å£ 80ï¼Œç›®æ ‡ç«¯å£ 8080ï¼ŒService ç±»åž‹ä¸º NodePortï¼ŒService åç§°ä¸º my-serviceã€‚</p><h2 id="å¤–éƒ¨å¦‚ä½•è®¿é—®-Service"><a href="#å¤–éƒ¨å¦‚ä½•è®¿é—®-Service" class="headerlink" title="å¤–éƒ¨å¦‚ä½•è®¿é—® Service"></a>å¤–éƒ¨å¦‚ä½•è®¿é—® Service</h2><p>æ ¹æ® Service çš„ç±»åž‹ï¼Œå¤–éƒ¨è®¿é—®çš„æ–¹å¼ä¹Ÿä¼šæœ‰æ‰€ä¸åŒï¼š</p><p><strong>NodePort</strong>ï¼šå¤–éƒ¨å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡èŠ‚ç‚¹çš„ IP åœ°å€å’Œ NodePort æŒ‡å®šçš„ç«¯å£æ¥è®¿é—® Serviceã€‚ä¾‹å¦‚ï¼Œå¦‚æžœèŠ‚ç‚¹çš„ IP åœ°å€æ˜¯ 192.168.1.100ï¼ŒNodePort æ˜¯ 30007ï¼Œé‚£ä¹ˆå¤–éƒ¨å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ <a href="http://192.168.1.100:30007/">http://192.168.1.100:30007</a> æ¥è®¿é—® Serviceã€‚</p><p><strong>LoadBalancer</strong>ï¼šå¤–éƒ¨å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è´Ÿè½½å‡è¡¡å™¨åˆ†é…çš„å¤–éƒ¨ IP åœ°å€æ¥è®¿é—® Serviceã€‚ä¾‹å¦‚ï¼Œå¦‚æžœè´Ÿè½½å‡è¡¡å™¨åˆ†é…çš„ IP åœ°å€æ˜¯ 52.10.10.10ï¼Œé‚£ä¹ˆå¤–éƒ¨å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ <a href="http://52.10.10.10/">http://52.10.10.10</a> æ¥è®¿é—® Serviceã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Kubernetes ä¸­çš„ Service æä¾›äº†ä¸€ç§çµæ´»ä¸”å¼ºå¤§çš„æ–¹å¼æ¥ç®¡ç†å’Œè®¿é—®ä¸€ç»„ Podã€‚é€šè¿‡ä¸åŒçš„ Service ç±»åž‹ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹å¼æ¥æš´éœ²å’Œè®¿é—®è¿™äº›æœåŠ¡ã€‚æ— è®ºæ˜¯é€šè¿‡ NodePort è¿˜æ˜¯ LoadBalancerï¼ŒKubernetes éƒ½èƒ½ç¡®ä¿æˆ‘ä»¬çš„åº”ç”¨èƒ½å¤Ÿè¢«ç¨³å®šä¸”é«˜æ•ˆåœ°è®¿é—®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud Native </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes Network Policy Podä¹‹é—´çš„ç½‘ç»œç­–ç•¥é€šä¿¡</title>
      <link href="/2021/05/17/how-to-set-up-network-policy-to-allow-access-pods-of-namespace-from-another-namespace-in-kubernetes/"/>
      <url>/2021/05/17/how-to-set-up-network-policy-to-allow-access-pods-of-namespace-from-another-namespace-in-kubernetes/</url>
      
        <content type="html"><![CDATA[<h2 id="Network-Policy-ä»‹ç»"><a href="#Network-Policy-ä»‹ç»" class="headerlink" title="Network Policy ä»‹ç»"></a>Network Policy ä»‹ç»</h2><p><code>Kubernetes</code>çš„<code>Network Policy</code>æ˜¯ç”¨äºŽå®šä¹‰å’ŒæŽ§åˆ¶Podä¹‹é—´é€šä¿¡çš„ä¸€ç§æœºåˆ¶ã€‚å®ƒå¯ä»¥è®©æ‚¨å®šä¹‰ç½‘ç»œç­–ç•¥ï¼ŒæŒ‡å®šå“ªäº›Podå¯ä»¥ä¸Žå…¶ä»–Podé€šä¿¡ï¼Œä»¥åŠå…è®¸çš„é€šä¿¡æ–¹å¼ã€‚å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨MySQL Podä¸­åˆ›å»ºä¸€ä¸ªNetwork Policyï¼Œä»…å…è®¸æ¥è‡ªHelloApp Podçš„æµé‡è®¿é—®åŽç«¯MySQLæ•°æ®åº“ï¼Œæ‹’ç»Rogue Podçš„è®¿é—®ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-network-policy.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-network-policy.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:800px;"/></div></div><h3 id="ä½œç”¨ï¼š"><a href="#ä½œç”¨ï¼š" class="headerlink" title="ä½œç”¨ï¼š"></a>ä½œç”¨ï¼š</h3><ol><li><p><strong>ç½‘ç»œéš”ç¦»å’Œå®‰å…¨æ€§å¢žå¼º</strong>ï¼š<br>  å…è®¸å®žçŽ°å¾®æœåŠ¡æž¶æž„ä¸­çš„ç½‘ç»œéš”ç¦»ï¼Œç¡®ä¿åªæœ‰ç»è¿‡æŽˆæƒçš„Podå¯ä»¥ç›¸äº’é€šä¿¡ã€‚<br>  å‡å°‘äº†æ”»å‡»é¢ï¼Œæé«˜äº†é›†ç¾¤çš„å®‰å…¨æ€§ï¼Œé˜²æ­¢æœªç»æŽˆæƒçš„è®¿é—®å’Œä¿¡æ¯æ³„æ¼ã€‚</p></li><li><p><strong>ç»†ç²’åº¦çš„ç½‘ç»œæµé‡æŽ§åˆ¶</strong>ï¼š<br>  å¯ä»¥å®šä¹‰ç»†è‡´çš„è§„åˆ™ï¼Œä¾‹å¦‚å…è®¸ä»Žä¸€ä¸ªæ ‡ç­¾é€‰æ‹©å™¨çš„Podé€šä¿¡åˆ°å¦ä¸€ä¸ªæ ‡ç­¾é€‰æ‹©å™¨çš„Podï¼Œæˆ–è€…é™åˆ¶æ¥è‡ªç‰¹å®šIPåœ°å€èŒƒå›´çš„æµé‡ã€‚<br>  æ”¯æŒçš„è§„åˆ™åŒ…æ‹¬å…è®¸&#x2F;æ‹’ç»ç‰¹å®šåè®®ï¼ˆå¦‚TCPã€UDPï¼‰ã€ç«¯å£å·æˆ–IPå—ä¹‹é—´çš„é€šä¿¡ã€‚</p></li><li><p><strong>éµå¾ªæœ€å°æƒé™åŽŸåˆ™</strong>ï¼š<br>  å¯ä»¥æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€æ±‚è®¾ç½®æœ€å°å¿…è¦çš„è®¿é—®æƒé™ï¼Œé˜²æ­¢ä¸å¿…è¦çš„ç½‘ç»œè®¿é—®å’Œæµé‡ã€‚</p></li><li><p><strong>ä¼˜åŒ–ç½‘ç»œæ€§èƒ½</strong>ï¼š<br>  é€šè¿‡å‡å°‘ä¸å¿…è¦çš„ç½‘ç»œæµé‡ï¼Œæœ‰åŠ©äºŽæé«˜ç½‘ç»œæ€§èƒ½å’Œèµ„æºåˆ©ç”¨çŽ‡ã€‚</p></li></ol><h3 id="ä½¿ç”¨åœºæ™¯ï¼š"><a href="#ä½¿ç”¨åœºæ™¯ï¼š" class="headerlink" title="ä½¿ç”¨åœºæ™¯ï¼š"></a>ä½¿ç”¨åœºæ™¯ï¼š</h3><ul><li><strong>å¤šç§Ÿæˆ·çŽ¯å¢ƒ</strong>ï¼šåœ¨å¤šä¸ªå›¢é˜Ÿæˆ–é¡¹ç›®å…±äº«åŒä¸€ä¸ªKubernetesé›†ç¾¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨Network Policyæ¥ç¡®ä¿å½¼æ­¤ä¹‹é—´çš„éš”ç¦»å’Œå®‰å…¨ã€‚</li><li><strong>ç¬¦åˆæ³•è§„è¦æ±‚</strong>ï¼šæœ‰ä¸€äº›å›½å®¶çš„æ³•è§„è¦æ±‚é’ˆå¯¹ç‰¹å®šçš„ç³»ç»Ÿéœ€è¦ç½‘ç»œéš”ç¦»å’Œæ•°æ®ä¿æŠ¤ã€‚</li><li><strong>å¾®æœåŠ¡æž¶æž„</strong>ï¼šåœ¨å¾®æœåŠ¡æž¶æž„ä¸­ï¼Œä¸åŒæœåŠ¡ä¹‹é—´çš„é€šä¿¡éœ€è¦ç²¾ç»†æŽ§åˆ¶ï¼Œåªå…è®¸å…·æœ‰ç‰¹å®šæ ‡ç­¾çš„æœåŠ¡ä¹‹é—´è¿›è¡ŒHTTPé€šä¿¡ï¼ŒåŒæ—¶é™åˆ¶å…¶ä»–é€šä¿¡ç±»åž‹æˆ–æœåŠ¡ï¼ŒNetwork Policyæä¾›äº†è¿™ç§èƒ½åŠ›ã€‚</li><li><strong>æ•°æ®ä¿æŠ¤</strong>ï¼šä¿æŠ¤åŒ…å«æ•æ„Ÿä¿¡æ¯çš„Podï¼Œç¡®ä¿åªæœ‰æŽˆæƒçš„æœåŠ¡å¯ä»¥è®¿é—®è¿™äº›Podã€‚ä¹Ÿå¯ä»¥é™åˆ¶æ¥è‡ªç‰¹å®šIPåœ°å€æˆ–IPåœ°å€èŒƒå›´çš„æµé‡è®¿é—®é›†ç¾¤ä¸­çš„Podã€‚</li></ul><h2 id="å®žæˆ˜"><a href="#å®žæˆ˜" class="headerlink" title="å®žæˆ˜"></a>å®žæˆ˜</h2><h3 id="ç›¸åŒå‘½åç©ºé—´çš„Podè®¿é—®"><a href="#ç›¸åŒå‘½åç©ºé—´çš„Podè®¿é—®" class="headerlink" title="ç›¸åŒå‘½åç©ºé—´çš„Podè®¿é—®"></a>ç›¸åŒå‘½åç©ºé—´çš„Podè®¿é—®</h3><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½åç©ºé—´<code>my-app-ns</code>å’Œä¸¤ä¸ªPodæ¥æ¼”ç¤ºNetwork Policyçš„ä½¿ç”¨. é¦–å…ˆåˆ›å»ºä¸¤ä¸ªPodï¼Œåˆ†åˆ«æ˜¯<code>app1 Pod</code>å’Œ<code>app2 Pod</code>ã€‚<code>image</code>è¿™é‡Œéƒ½ä½¿ç”¨<code>nginx</code>é•œåƒæ¥æ¼”ç¤ºï¼Œå®žé™…ä¸Šå¯ä»¥æ˜¯ä»»ä½•éœ€è¦é€šä¿¡çš„å®¹å™¨ã€‚æœ¬åœ°çŽ¯å¢ƒnginxé•œåƒä¹‹å‰å·²ç»ä¸‹è½½å¥½äº†ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ã€‚æˆ‘ä»¬è¿™é‡Œé‡ç‚¹æ˜¯Network Policyçš„åˆ›å»ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºmy-app-nså‘½åç©ºé—´</span></span><br><span class="line">kubectl create namespace my-app-ns</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºHelloApp Pod</span></span><br><span class="line">kubectl -n my-app-ns run app1 --image=nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºMySQL Pod</span></span><br><span class="line">kubectl -n my-app-ns run app2 --image=nginx</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-network-policy-app1-app2.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-network-policy-app1-app2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>åˆ›å»ºNetwork Policyï¼Œå…è®¸<code>app1 Pod</code>è®¿é—®<code>app2 Pod</code>ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ä½¿ç”¨å‘½ä»¤åˆ›å»ºæ—¶è‡ªåŠ¨æ·»åŠ çš„<code>label</code>æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªPodåˆ›å»ºä¸€ä¸ªæ–°çš„æ ‡ç­¾ã€‚æŸ¥çœ‹Podçš„æ ‡ç­¾å¯ä»¥ä½¿ç”¨<code>kubectl get pod --show-labels</code>å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pod -n my-app-ns --show-labels</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-network-policy-pod-show-labels.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-network-policy-pod-show-labels.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>å¦‚ä¸‹å›¾ï¼Œåˆ›å»ºPodæ—¶å·²ç»æ·»åŠ äº†æ ‡ç­¾<code>run=app1</code>å’Œ<code>run=app2</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º<code>app1 Pod</code>åˆ›å»ºä¸€ä¸ªæ–°çš„æ ‡ç­¾<code>app=app1-access</code>ï¼Œå¹¶ä¸º<code>app2 Pod</code>åˆ›å»ºä¸€ä¸ªæ–°çš„æ ‡ç­¾<code>app=app2-access</code>ã€‚ç»™å·²å­˜åœ¨çš„Podæ·»åŠ <code>label</code>æ ‡ç­¾ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl label pod app1 app=app1-access -n my-app-ns</span><br><span class="line">kubectl label pod app2 app=app2-access -n my-app-ns</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-network-policy-label-app1-app2.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-network-policy-label-app1-app2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>åˆ›å»ºNetwork Policyï¼Œå…è®¸<code>app1-access</code>æ ‡ç­¾çš„Podè®¿é—®<code>app2-access</code>æ ‡ç­¾çš„Podã€‚åˆ›å»ºä¸€ä¸ªåä¸º<code>allow-app1-access-app2.yaml</code>çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">NetworkPolicy</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">allow-app1-access-app2</span> <span class="comment"># ç½‘ç»œç­–ç•¥åç§°</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">my-app-ns</span> <span class="comment"># å‘½åç©ºé—´</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">podSelector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">app2-access</span> <span class="comment"># é€‰æ‹©å™¨ï¼ŒåŒ¹é…app2-accessæ ‡ç­¾çš„Pod</span></span><br><span class="line">  <span class="attr">ingress:</span> <span class="comment"># å…è®¸çš„å…¥ç«™æµé‡</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">from:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">podSelector:</span></span><br><span class="line">        <span class="attr">matchLabels:</span></span><br><span class="line">          <span class="attr">app:</span> <span class="string">app1-access</span> <span class="comment"># å…è®¸æ¥è‡ªapp1-accessæ ‡ç­¾çš„Podçš„æµé‡</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>kubectl apply -f &lt;yaml-file&gt;</code> å‘½ä»¤åˆ›å»ºNetwork Policyã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f allow-app1-access-app2.yaml</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-network-policy-create.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-network-policy-create.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>ä¸Šé¢æ˜¾ç¤ºçš„<code>allow-app1-access-app2.yaml</code>æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º<code>allow-app1-access-app2</code>çš„ç½‘ç»œç­–ç•¥ï¼Œå®ƒå…è®¸<code>app1-access</code>æ ‡ç­¾çš„Podè®¿é—®<code>app2-access</code>æ ‡ç­¾çš„Podçš„ä»»æ„ç«¯å£å·ã€‚çŽ°åœ¨æˆ‘ä»¬æ›´æ–°ä¸‹<code>Network Policy</code>ä»…å…è®¸app1è®¿é—®app2çš„80ç«¯å£ï¼Œæ›´æ–°yamlæ–‡ä»¶<code>allow-app1-access-app2.yaml</code>çš„æ–‡ä»¶ï¼Œåœ¨<code>ingress</code>ä¸‹æ·»åŠ <code>port</code>å­—æ®µï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">NetworkPolicy</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">allow-app1-access-app2-port80</span> <span class="comment"># ç½‘ç»œç­–ç•¥åç§°</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">my-app-ns</span> <span class="comment"># å‘½åç©ºé—´</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">podSelector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">app2-access</span> <span class="comment"># é€‰æ‹©å™¨ï¼ŒåŒ¹é…app2-accessæ ‡ç­¾çš„Pod</span></span><br><span class="line">  <span class="attr">ingress:</span> <span class="comment"># å…è®¸çš„å…¥ç«™æµé‡</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">from:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">podSelector:</span></span><br><span class="line">        <span class="attr">matchLabels:</span></span><br><span class="line">          <span class="attr">app:</span> <span class="string">app1-access</span> <span class="comment"># å…è®¸æ¥è‡ªapp1-accessæ ‡ç­¾çš„Podçš„æµé‡</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">80</span> <span class="comment"># å…è®¸çš„ç«¯å£å·</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span> <span class="comment"># å…è®¸çš„åè®®</span></span><br></pre></td></tr></table></figure><p>é‡æ–°æ‰§è¡Œ<code>kubectl apply -f &lt;yaml-file&gt;</code>å‘½ä»¤æ›´æ–°Network Policyã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f allow-app1-access-app2.yaml</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>kubectl describe networkpolicy</code>å‘½ä»¤æŸ¥çœ‹Network Policyçš„è¯¦ç»†ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl describe networkpolicy allow-app1-access-app2 -n my-app-ns</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-network-policy-port.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-network-policy-port.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±åˆ›å»ºäº†ä¸€ä¸ªåœ¨åŒä¸€ä¸ªå‘½ä»¤ç©ºé—´<code>my-app-ns</code>ä¸­ï¼Œå…è®¸<code>app1-access</code>æ ‡ç­¾çš„Podè®¿é—®<code>app2-access</code>æ ‡ç­¾çš„Podçš„<code>80</code>ç«¯å£çš„Network Policyã€‚</p><h3 id="ä¸åŒå‘½åç©ºé—´çš„Podè®¿é—®"><a href="#ä¸åŒå‘½åç©ºé—´çš„Podè®¿é—®" class="headerlink" title="ä¸åŒå‘½åç©ºé—´çš„Podè®¿é—®"></a>ä¸åŒå‘½åç©ºé—´çš„Podè®¿é—®</h3><p>çŽ°åœ¨æˆ‘ä»¬æ¥æ¼”ç¤ºä¸åŒå‘½åç©ºé—´çš„Podè®¿é—®ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½åç©ºé—´<code>my-app-ns2</code>å’Œä¸€ä¸ªåä¸º<code>app3</code>çš„<code>Pod</code>ï¼Œ <code>app3</code> Podå’Œ<code>app1</code>ï¼Œ<code>app2</code> Podåœ¨ä¸åŒçš„å‘½åç©ºé—´ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…è®¸å‘½ä»¤ç©ºé—´<code>my-app-ns2</code>ä¸­çš„<code>app3</code> Podè®¿é—®å‘½ä»¤ç©ºé—´<code>my-app-ns</code>ä¸­çš„ä»»ä½•podã€‚è®¿é—®ç«¯å£å·ä¸º9000</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºmy-app-ns2å‘½åç©ºé—´</span></span><br><span class="line">kubectl create namespace my-app-ns2</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºapp3 Pod</span></span><br><span class="line">kubectl -n my-app-ns2 run app3 --image=nginx</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-network-policy-app3.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-network-policy-app3.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>æˆ‘ä»¬ä¸º<code>app3</code> Podåˆ›å»ºä¸€ä¸ªæ–°çš„æ ‡ç­¾<code>app=app3-access</code>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl label pod app3 app=app3-access -n my-app-ns2</span><br></pre></td></tr></table></figure><p>åˆ›å»ºNetwork Policyï¼Œå…è®¸<code>app3-access</code>æ ‡ç­¾çš„Podè®¿é—®<code>app2-access</code>æ ‡ç­¾çš„Podã€‚åˆ›å»ºä¸€ä¸ªåä¸º<code>allow-ns2-app3-access-ns-apps.yaml</code>çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">NetworkPolicy</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">allow-ns2-app3-access-ns-apps</span> <span class="comment"># ç½‘ç»œç­–ç•¥åç§°</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">my-app-ns</span> <span class="comment"># è¢«è®¿é—®çš„å‘½åç©ºé—´</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">podSelector:</span> &#123;&#125; <span class="comment"># é€‰æ‹©å™¨ï¼ŒåŒ¹é…è¢«è®¿é—®å‘½ä»¤ç©ºé—´çš„æ‰€æœ‰Pod</span></span><br><span class="line">  <span class="attr">ingress:</span> <span class="comment"># å…è®¸çš„å…¥ç«™æµé‡</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">from:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">namespaceSelector:</span></span><br><span class="line">        <span class="attr">matchLabels:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">my-app-ns2</span> <span class="comment"># å…è®¸æ¥è‡ªmy-app-ns2å‘½åç©ºé—´çš„Podçš„æµé‡</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">podSelector:</span></span><br><span class="line">        <span class="attr">matchLabels:</span></span><br><span class="line">          <span class="attr">app:</span> <span class="string">app3-access</span> <span class="comment"># å…è®¸æ¥è‡ªapp3-accessæ ‡ç­¾çš„Podçš„æµé‡</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">9000</span> <span class="comment"># å…è®¸çš„ç«¯å£å·</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span> <span class="comment"># å…è®¸çš„åè®®</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>kubectl apply -f &lt;yaml-file&gt;</code> å‘½ä»¤åˆ›å»ºNetwork Policyã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºNetwork Policy</span></span><br><span class="line">kubectl apply -f allow-ns2-app3-access-ns-apps.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹Network Policy</span></span><br><span class="line">kubectl describe networkpolicy allow-ns2-app3-access-ns-apps -n my-app-ns</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-network-policy-access-ns-pods.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-network-policy-access-ns-pods.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>ä¸Šé¢ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå…è®¸<code>my-app-ns2</code>å‘½åç©ºé—´ä¸­çš„<code>app3-access</code>æ ‡ç­¾çš„Podè®¿é—®<code>my-app-ns</code>å‘½åç©ºé—´ä¸­æ‰€æœ‰çš„Podï¼Œå…è®¸çš„ç«¯å£å·æ˜¯<code>9000</code>çš„Network Policyã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬å°±åˆ›å»ºäº†ä¸€ä¸ªå…è®¸ä¸åŒå‘½åç©ºé—´çš„Podè®¿é—®å¦ä¸€ä¸ªå‘½åç©ºé—´çš„Podçš„Network Policyã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Kubernetesçš„Network Policyæä¾›äº†ä¸€ç§å¼ºå¤§çš„æ–¹å¼æ¥ç®¡ç†å’Œä¿æŠ¤æ‚¨çš„å®¹å™¨åŒ–åº”ç”¨ç¨‹åºä¹‹é—´çš„ç½‘ç»œé€šä¿¡ã€‚é€šè¿‡å®šä¹‰ç½‘ç»œç­–ç•¥ï¼Œå¯ä»¥å®žçŽ°å¾®æœåŠ¡æž¶æž„ä¸­çš„ç½‘ç»œéš”ç¦»ï¼Œç¡®ä¿åªæœ‰ç»è¿‡æŽˆæƒçš„Podå¯ä»¥ç›¸äº’é€šä¿¡ã€‚åŒæ—¶ï¼Œè¿˜å¯ä»¥é™åˆ¶æ¥è‡ªç‰¹å®šIPåœ°å€èŒƒå›´çš„æµé‡è®¿é—®é›†ç¾¤ä¸­çš„Podï¼Œä¿æŠ¤åŒ…å«æ•æ„Ÿä¿¡æ¯çš„Podï¼Œç¡®ä¿åªæœ‰æŽˆæƒçš„æœåŠ¡å¯ä»¥è®¿é—®è¿™äº›Podã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud Native </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Metrics API not available in Kubernetes minikube</title>
      <link href="/2021/05/03/metrics-api-not-available-in-kubernetes-minikube/"/>
      <url>/2021/05/03/metrics-api-not-available-in-kubernetes-minikube/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>å½“å®Œæˆå®‰è£…<code>minikube</code>å¹¶å¯åŠ¨é›†ç¾¤åŽï¼Œå¦‚æžœæˆ‘ä»¬ç›´æŽ¥ä½¿ç”¨<code>kubectl top</code>å‘½ä»¤åŽ»æŸ¥çœ‹nodeçš„èµ„æºä¿¡æ¯ï¼Œä¼šæç¤º<code>metrics-server</code>æœåŠ¡ä¸å¯ç”¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl top node</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-metrics-api-not-available.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-metrics-api-not-available.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œ<code>minikube</code>æ˜¯ä¸è‡ªå¸¦<code>metrics-server</code>çš„ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚ </p><h3 id="Step-1ï¼š-æŸ¥çœ‹metrics-serverçš„Podæ˜¯å¦å­˜åœ¨"><a href="#Step-1ï¼š-æŸ¥çœ‹metrics-serverçš„Podæ˜¯å¦å­˜åœ¨" class="headerlink" title="Step 1ï¼š æŸ¥çœ‹metrics-serverçš„Podæ˜¯å¦å­˜åœ¨"></a>Step 1ï¼š æŸ¥çœ‹metrics-serverçš„Podæ˜¯å¦å­˜åœ¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods -n kube-system </span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œè¿™ä¸ªå‘½ä»¤åŽå‘çŽ°æ²¡æœ‰<code>metrics-server</code>çš„Podå­˜åœ¨ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-metrics-server-not-exist.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-metrics-server-not-exist.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h3 id="Step-2ï¼š-å®‰è£…metrics-server"><a href="#Step-2ï¼š-å®‰è£…metrics-server" class="headerlink" title="Step 2ï¼š å®‰è£…metrics-server"></a>Step 2ï¼š å®‰è£…metrics-server</h3><p>æ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…<code>metrics-server</code>ç»„ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml</span><br></pre></td></tr></table></figure><p>å®‰è£…å®ŒæˆåŽï¼Œæ‰§è¡Œ<code>kubectl top node</code>å‘½ä»¤ï¼Œä»ç„¶æç¤º<code>Metrics API not available</code>ã€‚ é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹<code>metrics-server</code>çš„deploymentçŠ¶æ€:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl -n kube-system get deployment metrics-server</span><br></pre></td></tr></table></figure><p><code>READY</code>çŠ¶æ€ä¸º<code>0/1</code>ï¼Œè¡¨ç¤º<code>metrics-server</code>ç»„ä»¶æœªæ­£å¸¸è¿è¡Œã€‚ </p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-metrics-server-install.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-metrics-server-install.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹<code>metrics-server</code>çš„logæ—¥å¿—ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl -n kube-system logs deployment/metrics-server</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-metrics-server-logs.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-metrics-server-logs.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>æœåŠ¡å™¨æ—¥å¿—ä¸­æ˜¾ç¤º<code>metrics-server</code>ç»„ä»¶å¯åŠ¨å¤±è´¥ï¼ŒåŽŸå› æ˜¯<code>failed to verify certificate</code>ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ”¹<code>metrics-server</code>ç»„ä»¶çš„å¯åŠ¨å‚æ•°ï¼Œæ·»åŠ <code>--kubelet-insecure-tls</code>å‚æ•°ï¼Œä»¥è·³è¿‡è¯ä¹¦éªŒè¯ã€‚å°†ä¸‹é¢çš„<code>command</code>å‚æ•°æ·»åŠ åˆ°<code>metrics-server</code>çš„<code>Deployment</code>ä¸­ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">command:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">/metrics-server</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">--kubelet-insecure-tls</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">--kubelet-preferred-address-types=InternalIP</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†<code>metrics-server</code>çš„component.yamlæ–‡ä»¶ä¸‹è½½ä¸‹æ¥ç„¶åŽæ·»åŠ ä¸Šé¢çš„å‚æ•°.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml -o components.yaml</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘<code>components.yaml</code>æ–‡ä»¶ï¼Œæ‰¾åˆ°<code>metrics-server</code>çš„<code>Deployment</code>éƒ¨åˆ†ï¼Œæ·»åŠ ä¸Šé¢çš„å‚æ•°ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">k8s-app:</span> <span class="string">metrics-server</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">metrics-server</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kube-system</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">k8s-app:</span> <span class="string">metrics-server</span></span><br><span class="line">  <span class="attr">strategy:</span></span><br><span class="line">    <span class="attr">rollingUpdate:</span></span><br><span class="line">      <span class="attr">maxUnavailable:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">k8s-app:</span> <span class="string">metrics-server</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">args:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--cert-dir=/tmp</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--secure-port=10250</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--kubelet-use-node-status-port</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--metric-resolution=15s</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">registry.k8s.io/metrics-server/metrics-server:v0.7.1</span></span><br><span class="line">        <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">        <span class="attr">command:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/metrics-server</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--kubelet-insecure-tls</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--kubelet-preferred-address-types=InternalIP</span></span><br><span class="line">        <span class="attr">livenessProbe:</span></span><br><span class="line">          <span class="attr">failureThreshold:</span> <span class="number">3</span></span><br><span class="line">          <span class="attr">httpGet:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/livez</span></span><br><span class="line">            <span class="attr">port:</span> <span class="string">https</span></span><br><span class="line">            <span class="attr">scheme:</span> <span class="string">HTTPS</span></span><br><span class="line">          <span class="attr">periodSeconds:</span> <span class="number">10</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">metrics-server</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">10250</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">https</span></span><br><span class="line">          <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">  <span class="string">.................</span></span><br></pre></td></tr></table></figure><p>ä¿å­˜æ–‡ä»¶ï¼Œç„¶åŽè¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…<code>metrics-server</code>ç»„ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f components.yaml</span><br></pre></td></tr></table></figure><h3 id="Step-3-Stop-minikube"><a href="#Step-3-Stop-minikube" class="headerlink" title="Step 3: Stop minikube"></a>Step 3: Stop minikube</h3><p>å®‰è£…å®Œ<code>metrics-server</code>ç»„ä»¶åŽï¼Œéœ€è¦åœæ­¢<code>minikube</code>é›†ç¾¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minikube stop</span><br></pre></td></tr></table></figure><h3 id="Step-4-Start-minikube"><a href="#Step-4-Start-minikube" class="headerlink" title="Step 4: Start minikube"></a>Step 4: Start minikube</h3><p>å¯åŠ¨<code>minikube</code>é›†ç¾¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minikube start</span><br></pre></td></tr></table></figure><h3 id="Step-5-æ£€æŸ¥-metrics-serverçš„çŠ¶æ€"><a href="#Step-5-æ£€æŸ¥-metrics-serverçš„çŠ¶æ€" class="headerlink" title="Step 5: æ£€æŸ¥ metrics-serverçš„çŠ¶æ€"></a>Step 5: æ£€æŸ¥ metrics-serverçš„çŠ¶æ€</h3><p>æ‰§è¡Œ<code>kubectl top node</code>å‘½ä»¤ï¼ŒæŸ¥çœ‹nodeçš„èµ„æºä¿¡æ¯ã€‚å¯ä»¥çœ‹åˆ°è¿™æ¬¡å°±è¿è¡Œæ­£å¸¸äº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl top node</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-metrics-server-available.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-metrics-server-available.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>minikube</code>é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸è‡ªå¸¦<code>metrics-server</code>ç»„ä»¶çš„ï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚å®‰è£…å®ŒæˆåŽï¼Œéœ€è¦åœæ­¢<code>minikube</code>é›†ç¾¤ï¼Œç„¶åŽå¯åŠ¨é›†ç¾¤ï¼Œæ‰èƒ½æ­£å¸¸ä½¿ç”¨<code>kubectl top</code>å‘½ä»¤æŸ¥çœ‹nodeçš„èµ„æºä¿¡æ¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud Native </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes Deployment çš„ä¼¸ç¼©æ€§</title>
      <link href="/2021/04/12/kubernetes-scale-deployment/"/>
      <url>/2021/04/12/kubernetes-scale-deployment/</url>
      
        <content type="html"><![CDATA[<p><code>Kubernetes</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å®¹å™¨ç¼–æŽ’å¹³å°ï¼Œå¹¿æ³›åº”ç”¨äºŽå„ç§è§„æ¨¡çš„<code>äº‘åŽŸç”Ÿåº”ç”¨</code>ã€‚åœ¨ Kubernetes ä¸­ï¼Œ<code>Deployment</code> æ˜¯ä¸€ç§ç”¨äºŽç®¡ç†åº”ç”¨å®žä¾‹çš„é«˜çº§èµ„æºå¯¹è±¡ã€‚é€šè¿‡è°ƒæ•´ Deployment çš„å‰¯æœ¬æ•°é‡ï¼Œå¯ä»¥è½»æ¾å®žçŽ°åº”ç”¨çš„ä¼¸ç¼©æ€§ï¼Œä»¥æ»¡è¶³ä¸åŒçš„è´Ÿè½½éœ€æ±‚ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨ Kubernetes ä¸­ä½¿ç”¨ kubectl scale å‘½ä»¤æ¥ä¼¸ç¼© Deploymentã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Deploymentï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Deploymentï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Deploymentï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Deploymentï¼Ÿ</h2><p>åœ¨ Kubernetes ä¸­ï¼ŒDeployment æ˜¯ä¸€ç§æŽ§åˆ¶å™¨ï¼Œç”¨äºŽç®¡ç† Pod çš„ç”Ÿå‘½å‘¨æœŸã€‚å®ƒå®šä¹‰äº†åº”ç”¨çš„æœŸæœ›çŠ¶æ€ï¼Œå¹¶ç¡®ä¿é›†ç¾¤ä¸­çš„å®žé™…çŠ¶æ€ä¸ŽæœŸæœ›çŠ¶æ€ä¿æŒä¸€è‡´ã€‚Deployment çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ul><li><strong>æ»šåŠ¨æ›´æ–°</strong>ï¼šé€æ­¥æ›¿æ¢æ—§ç‰ˆæœ¬çš„ Podï¼Œä»¥å®žçŽ°æ— ç¼çš„åº”ç”¨æ›´æ–°ã€‚</li><li><strong>å›žæ»š</strong>ï¼šåœ¨æ›´æ–°è¿‡ç¨‹ä¸­å‡ºçŽ°é—®é¢˜æ—¶ï¼Œå¯ä»¥å¿«é€Ÿå›žæ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬ã€‚</li><li><strong>å‰¯æœ¬ç®¡ç†</strong>ï¼šè‡ªåŠ¨è°ƒæ•´ Pod çš„å‰¯æœ¬æ•°é‡ï¼Œä»¥æ»¡è¶³åº”ç”¨çš„è´Ÿè½½éœ€æ±‚ã€‚</li></ul><h2 id="å¦‚ä½•ä¼¸ç¼©-Deploymentï¼Ÿ"><a href="#å¦‚ä½•ä¼¸ç¼©-Deploymentï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¼¸ç¼© Deploymentï¼Ÿ"></a>å¦‚ä½•ä¼¸ç¼© Deploymentï¼Ÿ</h2><p>ä¼¸ç¼© Deployment çš„ä¸»è¦ç›®çš„æ˜¯æ ¹æ®åº”ç”¨çš„è´Ÿè½½æƒ…å†µè°ƒæ•´ Pod çš„å‰¯æœ¬æ•°é‡ã€‚åœ¨ Kubernetes ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>kubectl scale</code> å‘½ä»¤æ¥å®žçŽ°è¿™ä¸€ç›®æ ‡ã€‚</p><h3 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl scale deployment &lt;deployment-name&gt; --replicas=&lt;number-of-replicas&gt;</span><br></pre></td></tr></table></figure><ul><li><code>&lt;deployment-name&gt;</code>ï¼šDeployment åç§°ã€‚</li><li><code>&lt;number-of-replicas&gt;</code>ï¼šå‰¯æœ¬æ•°é‡ã€‚</li></ul><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p>é¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªdeploymentï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create deployment my-deployment --image=kicbase/echo-server:1.0 </span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-create-deployment.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-create-deployment.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>ä»ŽçŽ°åœ¨çš„æˆªå›¾ä¸­ï¼Œçœ‹åˆ°çš„æ˜¯ç›®å‰åªæœ‰1ä¸ªå‰¯æœ¬ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°†å…¶ä¼¸ç¼©åˆ° 3 ä¸ªå‰¯æœ¬ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl scale deployment my-deployment --replicas=3</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸Šè¿°å‘½ä»¤åŽï¼ŒKubernetes å°†è‡ªåŠ¨åˆ›å»º 2 ä¸ªæ–°çš„ Podï¼Œä½¿æ€»å‰¯æœ¬æ•°é‡è¾¾åˆ° 3 ä¸ªã€‚å¦‚ä¸‹å›¾</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-scale-deployment.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-scale-deployment.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>å¯ä»¥çœ‹åˆ°ï¼ŒKubernetes å·²ç»åˆ›å»ºäº† 2 ä¸ªæ–°çš„ Podï¼Œå¹¶å°†å®ƒä»¬åŠ å…¥åˆ° Deployment çš„ç®¡ç†ä¹‹ä¸‹ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æŽ¥ç¼–è¾‘ Deployment çš„é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å…¶ <code>spec.replicas</code> å­—æ®µï¼Œæ¯”å¦‚æˆ‘çŽ°åœ¨å¯ä»¥å°† <code>my-deployment</code> çš„å‰¯æœ¬æ•°é‡ä¿®æ”¹ä¸º 5ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl edit deployment my-deployment</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢ä¸ªå‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥ç¼–è¾‘ <code>my-deployment</code> çš„é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å…¶ <code>spec.replicas</code> å­—æ®µä¸º 5ã€‚å¦‚ä¸‹å›¾</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-edit-deployment.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-edit-deployment.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼ŒKubernetes å°±ä¼šæ ¹æ®æ–°çš„å‰¯æœ¬æ•°é‡ï¼Œåˆ›å»ºæ–°çš„ Podï¼Œå¹¶å°†å®ƒä»¬åŠ å…¥åˆ° Deployment çš„ç®¡ç†ä¹‹ä¸‹ã€‚å¦‚ä¸‹å›¾</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-edit-deployment-2.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-edit-deployment-2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="è‡ªåŠ¨ä¼¸ç¼©"><a href="#è‡ªåŠ¨ä¼¸ç¼©" class="headerlink" title="è‡ªåŠ¨ä¼¸ç¼©"></a>è‡ªåŠ¨ä¼¸ç¼©</h2><p>é™¤äº†æ‰‹åŠ¨ä¼¸ç¼©å¤–ï¼ŒKubernetes è¿˜æ”¯æŒ<code>è‡ªåŠ¨ä¼¸ç¼©ï¼ˆHorizontal Pod Autoscalerï¼ŒHPAï¼‰</code>ã€‚<code>HPA</code> å¯ä»¥æ ¹æ® <code>CPU</code> ä½¿ç”¨çŽ‡ç­‰æŒ‡æ ‡è‡ªåŠ¨è°ƒæ•´ <code>Deployment</code> çš„å‰¯æœ¬æ•°é‡ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªåˆ›å»º HPA çš„ç¤ºä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">autoscaling/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">HorizontalPodAutoscaler</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-deployment-hpa</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">scaleTargetRef:</span></span><br><span class="line">    <span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line">    <span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">my-deployment</span></span><br><span class="line">  <span class="attr">minReplicas:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">maxReplicas:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">targetCPUUtilizationPercentage:</span> <span class="number">50</span></span><br></pre></td></tr></table></figure><p>å°†ä¸Šè¿° YAML æ–‡ä»¶ä¿å­˜ä¸º hpa.yamlï¼Œç„¶åŽä½¿ç”¨ <code>kubectl apply</code> å‘½ä»¤åˆ›å»º HPAï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f hpa.yaml</span><br></pre></td></tr></table></figure><p>åˆ›å»º HPA åŽï¼ŒKubernetes å°†æ ¹æ® CPU ä½¿ç”¨çŽ‡è‡ªåŠ¨è°ƒæ•´ my-deployoment Deployment çš„å‰¯æœ¬æ•°é‡ï¼Œä½¿å…¶åœ¨ 2 åˆ° 5 ä¸ªå‰¯æœ¬ä¹‹é—´åŠ¨æ€å˜åŒ–ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-hpa-deployment.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-hpa-deployment.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ <code>kubectl scale</code> å‘½ä»¤å’Œ <code>Horizontal Pod Autoscaler</code>ï¼ŒKubernetes æä¾›äº†çµæ´»ä¸”å¼ºå¤§çš„ä¼¸ç¼©æœºåˆ¶ï¼Œä½¿åº”ç”¨èƒ½å¤Ÿæ ¹æ®è´Ÿè½½æƒ…å†µè‡ªåŠ¨è°ƒæ•´èµ„æºåˆ†é…ã€‚è¿™ä¸ä»…æé«˜äº†åº”ç”¨çš„å¯ç”¨æ€§å’Œæ€§èƒ½ï¼Œè¿˜ä¼˜åŒ–äº†èµ„æºåˆ©ç”¨çŽ‡ã€‚æ— è®ºæ˜¯<code>æ‰‹åŠ¨ä¼¸ç¼©</code>è¿˜æ˜¯<code>è‡ªåŠ¨ä¼¸ç¼©</code>ï¼ŒKubernetes éƒ½èƒ½æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ï¼Œä¸ºäº‘åŽŸç”Ÿåº”ç”¨çš„éƒ¨ç½²å’Œç®¡ç†æä¾›äº†æžå¤§çš„ä¾¿åˆ©ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud Native </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesæƒé™ç®¡ç†ä¹‹ServiceAccount</title>
      <link href="/2021/03/22/kubernetes-cluster-role-for-service-account/"/>
      <url>/2021/03/22/kubernetes-cluster-role-for-service-account/</url>
      
        <content type="html"><![CDATA[<p>åœ¨<code>Kubernetes</code>ä¸­ï¼Œ<code>ServiceAccount</code> æ˜¯ä¸€ç§ç”¨äºŽä¸º<code>Pod</code>ä¸­çš„è¿›ç¨‹æä¾›èº«ä»½æ ‡è¯†çš„å¯¹è±¡ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å…è®¸è¿™äº›è¿›ç¨‹ä¸Ž<code>Kubernetes API</code>è¿›è¡Œäº¤äº’ï¼Œä»Žè€Œå®žçŽ°å„ç§<code>è‡ªåŠ¨åŒ–ä»»åŠ¡</code>ã€‚</p><h2 id="ServiceAccount"><a href="#ServiceAccount" class="headerlink" title="ServiceAccount"></a>ServiceAccount</h2><p>ServiceAccountçš„ä¸»è¦ä½œç”¨åŒ…æ‹¬ï¼š</p><ul><li><p><strong>èº«ä»½éªŒè¯</strong>ï¼šå½“Podä¸­çš„è¿›ç¨‹éœ€è¦ä¸ŽKubernetes APIæœåŠ¡å™¨é€šä¿¡æ—¶ï¼ŒServiceAccountæä¾›äº†èº«ä»½éªŒè¯æœºåˆ¶ã€‚æ¯ä¸ªServiceAccountéƒ½æœ‰ä¸€ä¸ªå…³è”çš„Secretï¼ˆåŒ…å«ä¸€ä¸ªTokenï¼‰ï¼Œè¿™ä¸ªTokenå¯ä»¥ç”¨æ¥éªŒè¯Podçš„èº«ä»½ã€‚</p></li><li><p><strong>æŽˆæƒ</strong>ï¼šServiceAccountå¯ä»¥ä¸Ž<code>Role</code>æˆ–<code>ClusterRole</code>ç»‘å®šï¼Œé€šè¿‡RoleBindingæˆ–ClusterRoleBindingæ¥å®šä¹‰æƒé™ã€‚è¿™æ ·ï¼ŒPodä¸­çš„è¿›ç¨‹å°±å¯ä»¥æ ¹æ®å…¶ServiceAccountçš„æƒé™æ¥æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚</p></li><li><p><strong>è‡ªåŠ¨åŒ–ä»»åŠ¡</strong>ï¼šé€šè¿‡ServiceAccountï¼ŒPodå¯ä»¥è‡ªåŠ¨æ‰§è¡Œå„ç§ä»»åŠ¡ï¼Œä¾‹å¦‚èŽ·å–é›†ç¾¤çŠ¶æ€ã€ç®¡ç†èµ„æºã€éƒ¨ç½²åº”ç”¨ç­‰, ä¹Ÿå¯å°†å…¶ç”¨äºŽCI&#x2F;CDæµç¨‹ã€‚</p></li></ul><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨<code>Kubernetes</code>ä¸­çš„<code>ServiceAccount</code>ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªåˆ›å»ºServiceAccountçš„yamlæ–‡ä»¶å®šä¹‰çš„ç¤ºä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-serviceaccount</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºè¿™ä¸ªServiceAccountåŽï¼Œä½ å¯ä»¥å°†å…¶åˆ†é…ç»™Podï¼Œä»¥ä¾¿Podä¸­çš„è¿›ç¨‹å¯ä»¥ä½¿ç”¨è¿™ä¸ªServiceAccountæ¥ä¸ŽKubernetes APIè¿›è¡Œäº¤äº’ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-pod</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">serviceAccountName:</span> <span class="string">my-serviceaccount</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">my-container</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œexample-pod ä½¿ç”¨ example-serviceaccount æ¥è¿›è¡Œèº«ä»½éªŒè¯å’ŒæŽˆæƒï¼Œè¿›è€Œå¯ä»¥ä¸ŽKubernetes APIæœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒKubernetesçš„ServiceAccountä¸ºPodä¸­çš„è¿›ç¨‹æä¾›äº†ä¸€ç§å®‰å…¨ä¸”çµæ´»çš„æ–¹å¼æ¥ä¸Žé›†ç¾¤è¿›è¡Œäº¤äº’ã€‚</p><h2 id="Cluster-Role"><a href="#Cluster-Role" class="headerlink" title="Cluster Role"></a>Cluster Role</h2><p>åœ¨<code>Kubernetes</code>ä¸­ï¼Œ<code>ClusterRoleï¼ˆé›†ç¾¤è§’è‰²ï¼‰</code>æ˜¯ä¸€ç§èµ„æºï¼Œç”¨äºŽå®šä¹‰é›†ç¾¤èŒƒå›´å†…çš„æƒé™ã€‚å®ƒå…è®¸ç®¡ç†å‘˜å®šä¹‰å“ªäº›æ“ä½œå¯ä»¥åœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ‰§è¡Œï¼Œä¾‹å¦‚ç®¡ç†èŠ‚ç‚¹ã€èŽ·å–æ‰€æœ‰å‘½åç©ºé—´çš„èµ„æºç­‰ã€‚</p><p><code>ClusterRole</code>å¯ä»¥é€šè¿‡Kubernetesçš„YAMLå®šä¹‰æ–‡ä»¶æ¥åˆ›å»ºçš„ã€‚ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤æ¥åˆ›å»ºï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ClusterRoleçš„å®šä¹‰ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-clusterrole</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;Pods&quot;</span>, <span class="string">&quot;Deployments&quot;</span>, <span class="string">&quot;Services&quot;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>, <span class="string">&quot;create&quot;</span>, <span class="string">&quot;update&quot;</span>, <span class="string">&quot;delete&quot;</span>]</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç¤ºä¾‹ClusterRoleå®šä¹‰äº†ä¸€ä¸ªåä¸º my-clusterrole çš„è§’è‰²ï¼Œå…è®¸å¯¹é›†ç¾¤ä¸­çš„â€Podsâ€, â€œDeploymentsâ€å’Œâ€Servicesâ€èµ„æºæ‰§è¡Œgetã€listã€watchã€createã€updateå’Œdeleteæ“ä½œã€‚</p><p><code>ClusterRole</code>å¯ä»¥ä¸Ž<code>ServiceAccount</code>ç»‘å®šï¼Œä»¥ä¾¿æŽˆäºˆ<code>ServiceAccount</code>ç‰¹å®šçš„æƒé™ã€‚<code>ClusterRoleBinding</code>å®šä¹‰äº†<code>ClusterRole</code>ä¸Ž<code>ServiceAccount</code>ä¹‹é—´çš„ç»‘å®šå…³ç³»ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-clusterrolebinding</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-serviceaccount</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-clusterrole</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç¤ºä¾‹ClusterRoleBindingå°†åä¸º my-serviceaccount çš„ServiceAccountä¸Žåä¸º my-clusterrole çš„ClusterRoleç»‘å®šã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º<code>ServiceAccount</code>åˆ†é…ç‰¹å®šçš„<code>ClusterRole</code>ï¼Œä»¥ä¾¿æŽˆäºˆå…¶ç‰¹å®šçš„æƒé™ã€‚è¿™æ ·ï¼Œ<code>ServiceAccount</code>å°±å¯ä»¥åœ¨æ•´ä¸ªé›†ç¾¤ä¸­æ‰§è¡Œå„ç§è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œè€Œæ— éœ€ä¸ºæ¯ä¸ªPodéƒ½åˆ›å»ºç‰¹å®šçš„æƒé™ã€‚</p><h2 id="kubectlå‘½ä»¤è¡Œåˆ›å»ºç¤ºä¾‹"><a href="#kubectlå‘½ä»¤è¡Œåˆ›å»ºç¤ºä¾‹" class="headerlink" title="kubectlå‘½ä»¤è¡Œåˆ›å»ºç¤ºä¾‹"></a>kubectlå‘½ä»¤è¡Œåˆ›å»ºç¤ºä¾‹</h2><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»º<code>ServiceAccount</code>ã€<code>ClusterRole</code>å’Œ<code>ClusterRoleBinding</code>çš„ç¤ºä¾‹ï¼š</p><ol><li><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªåä¸ºmy-namespaceçš„namespaceï¼ˆå‘½åç©ºé—´ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create namespace my-namespace</span><br></pre></td></tr></table></figure></li><li><p>æŽ¥ç€æˆ‘ä»¬åœ¨è¿™ä¸ªå‘½åç©ºé—´ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºmy-serviceaccountçš„ServiceAccountï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl -n my-namespace create serviceaccount my-serviceaccount</span><br></pre></td></tr></table></figure></li><li><p>ç„¶åŽå†åˆ›å»ºä¸€ä¸ªåä¸ºmy-clusterroleçš„ClusterRoleï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create clusterrole my-clusterrole --verb=get,list,watch,create,update,delete --resource=pods,deployments,services</span><br></pre></td></tr></table></figure></li><li><p>æœ€åŽåˆ›å»ºä¸€ä¸ªåä¸ºmy-clusterrolebindingçš„ClusterRoleBindingï¼Œå°†å‘½åç©ºé—´my-namespaceä¸­çš„my-serviceaccountä¸Žmy-clusterroleç»‘å®š:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl -n my-namespace create clusterrolebinding my-clusterrolebinding --clusterrole=my-clusterrole --serviceaccount=my-namespace:my-serviceaccount</span><br></pre></td></tr></table></figure></li></ol><p>ä»¥ä¸‹æ˜¯æ‰§è¡Œå‘½ä»¤çš„æˆªå›¾ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-clusterrolebinding.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-clusterrolebinding.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><h2 id="kubectlå‘½ä»¤è¡ŒæŸ¥çœ‹ç¤ºä¾‹"><a href="#kubectlå‘½ä»¤è¡ŒæŸ¥çœ‹ç¤ºä¾‹" class="headerlink" title="kubectlå‘½ä»¤è¡ŒæŸ¥çœ‹ç¤ºä¾‹"></a>kubectlå‘½ä»¤è¡ŒæŸ¥çœ‹ç¤ºä¾‹</h2><ol><li><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹namespaceçš„è¯¦ç»†ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get namespace my-namespace</span><br></pre></td></tr></table></figure><p>è¾“å‡ºåº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NAME           STATUS   AGE</span><br><span class="line">my-namespace   Active   1m</span><br></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ª<code>ServiceAccount</code>çš„è¯¦ç»†ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl -n my-namespace get serviceaccount my-serviceaccount</span><br></pre></td></tr></table></figure><p>è¾“å‡ºåº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NAME                SECRETS   AGE</span><br><span class="line">my-serviceaccount   0         1m</span><br></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ª<code>ClusterRole</code>çš„è¯¦ç»†ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get clusterrole my-clusterrole</span><br></pre></td></tr></table></figure><p>è¾“å‡ºåº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NAME            AGE</span><br><span class="line">my-clusterrole   1m</span><br></pre></td></tr></table></figure></li><li><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ª<code>ClusterRoleBinding</code>çš„è¯¦ç»†ä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl -n my-namespace get clusterrolebinding my-clusterrolebinding</span><br></pre></td></tr></table></figure><p>è¾“å‡ºåº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NAME                   ROLE                          AGE</span><br><span class="line">my-clusterrolebinding   ClusterRole/my-clusterrole   1m</span><br></pre></td></tr></table></figure></li></ol><p>ä¸‹é¢å°±æ˜¯æ•´ä¸ªè¿‡ç¨‹çš„æˆªå›¾ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-describe-clusterrolebinding.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-describe-clusterrolebinding.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±åˆ›å»ºäº†ä¸€ä¸ªåä¸ºmy-serviceaccountçš„<code>ServiceAccount</code>ï¼Œå®ƒä¸Žåä¸ºmy-clusterroleçš„<code>ClusterRole</code>ç»‘å®šï¼Œå¹¶æŽˆäºˆäº†å®ƒåœ¨my-namespaceå‘½åç©ºé—´ä¸­æ‰§è¡Œå„ç§è‡ªåŠ¨åŒ–ä»»åŠ¡çš„æƒé™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud Native </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesä¹‹RBACæŽˆæƒæ¨¡åž‹</title>
      <link href="/2021/03/02/kubernetes-rbac/"/>
      <url>/2021/03/02/kubernetes-rbac/</url>
      
        <content type="html"><![CDATA[<p><code>Kubernetes</code>ä¸­çš„<code>RBACï¼ˆRole-Based Access Controlï¼‰</code>æ˜¯ä¸€ç§å¼ºå¤§çš„æŽˆæƒæ¨¡åž‹ï¼Œç”¨äºŽç®¡ç†å¯¹é›†ç¾¤èµ„æºçš„è®¿é—®æƒé™ã€‚RBACå…è®¸é›†ç¾¤ç®¡ç†å‘˜å®šä¹‰è°å¯ä»¥æ‰§è¡Œå“ªäº›æ“ä½œï¼ˆä¾‹å¦‚åˆ›å»ºã€æŸ¥çœ‹ã€ä¿®æ”¹æˆ–åˆ é™¤èµ„æºï¼‰ï¼Œå¹¶åœ¨èµ„æºçº§åˆ«è¿›è¡Œç²¾ç¡®çš„æŽ§åˆ¶ã€‚ä»¥ä¸‹æ˜¯å¯¹Kubernetes RBACæŽˆæƒæ¨¡åž‹çš„ç†è§£ï¼š</p><h2 id="RBAC-æ ¸å¿ƒæ¦‚å¿µ"><a href="#RBAC-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="RBAC æ ¸å¿ƒæ¦‚å¿µ"></a>RBAC æ ¸å¿ƒæ¦‚å¿µ</h2><p>åœ¨Kubernetesä¸­ï¼ŒRBACåŸºäºŽå››ä¸ªæ ¸å¿ƒå¯¹è±¡ï¼š<code>Role</code>ã€<code>ClusterRole</code>ã€<code>RoleBinding</code>å’Œ<code>ClusterRoleBinding</code>ã€‚ä¸‹é¢å°†å¯¹è¿™äº›å¯¹è±¡è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-rbac.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-rbac.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Kubernetes RBAC" style="width:600px;"/></div><span class="image-caption">Kubernetes RBAC</span></div><h3 id="Roleå’ŒClusterRoleï¼š"><a href="#Roleå’ŒClusterRoleï¼š" class="headerlink" title="Roleå’ŒClusterRoleï¼š"></a>Roleå’ŒClusterRoleï¼š</h3><ul><li><strong>Role</strong>ï¼šç”¨äºŽå®šä¹‰åœ¨<em>å‘½åç©ºé—´ï¼ˆNamespaceï¼‰</em>çº§åˆ«çš„æƒé™ã€‚å®ƒåŒ…å«ä¸€ç»„è§„åˆ™ï¼Œè§„å®šäº†ç”¨æˆ·ã€ç”¨æˆ·ç»„æˆ–æœåŠ¡è´¦å·åœ¨ç‰¹å®šå‘½åç©ºé—´å†…å¯ä»¥è®¿é—®çš„èµ„æºç±»åž‹åŠå…¶æ“ä½œæƒé™ã€‚</li><li><strong>ClusterRole</strong>ï¼šç±»ä¼¼äºŽRoleï¼Œä½†æ˜¯ä½œç”¨äºŽæ•´ä¸ª<em>é›†ç¾¤ï¼ˆClusterï¼‰</em>ã€‚ClusterRoleå®šä¹‰äº†é›†ç¾¤èŒƒå›´å†…çš„æƒé™ï¼Œä¸å—å‘½åç©ºé—´é™åˆ¶ã€‚</li></ul><h3 id="RoleBindingå’ŒClusterRoleBindingï¼š"><a href="#RoleBindingå’ŒClusterRoleBindingï¼š" class="headerlink" title="RoleBindingå’ŒClusterRoleBindingï¼š"></a>RoleBindingå’ŒClusterRoleBindingï¼š</h3><ul><li><strong>RoleBinding</strong>ï¼šç”¨äºŽå°†ç‰¹å®šçš„Roleç»‘å®šåˆ°ç”¨æˆ·ã€ç”¨æˆ·ç»„æˆ–æœåŠ¡è´¦å·ï¼Œä»Žè€Œèµ‹äºˆå®ƒä»¬å®šä¹‰çš„æƒé™ã€‚RoleBindingåœ¨å‘½åç©ºé—´å†…ç”Ÿæ•ˆã€‚</li><li><strong>ClusterRoleBinding</strong>ï¼šç±»ä¼¼äºŽRoleBindingï¼Œä½†æ˜¯ä½œç”¨äºŽæ•´ä¸ªé›†ç¾¤ï¼Œç”¨äºŽå°†ClusterRoleç»‘å®šåˆ°ç”¨æˆ·ã€ç”¨æˆ·ç»„æˆ–æœåŠ¡è´¦å·ã€‚</li></ul><h2 id="RBAC-å·¥ä½œæµç¨‹"><a href="#RBAC-å·¥ä½œæµç¨‹" class="headerlink" title="RBAC å·¥ä½œæµç¨‹"></a>RBAC å·¥ä½œæµç¨‹</h2><p>Kubernetesä¸­çš„RBACå·¥ä½œæµç¨‹é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p>åˆ›å»ºè§’è‰²å’Œé›†ç¾¤è§’è‰²ï¼š<br>é¦–å…ˆï¼Œé›†ç¾¤ç®¡ç†å‘˜éœ€è¦å®šä¹‰æ‰€éœ€çš„Roleå’ŒClusterRoleã€‚è¿™äº›è§’è‰²ä¼šåˆ—å‡ºå…è®¸çš„<code>APIæ“ä½œ</code>ï¼ˆå¦‚getã€listã€watchã€createã€updateã€deleteç­‰ï¼‰å’Œ<code>èµ„æºç±»åž‹</code>ï¼ˆå¦‚podsã€servicesã€deploymentsç­‰ï¼‰ã€‚</p></li><li><p>ç»‘å®šè§’è‰²ï¼š<br>æŽ¥ä¸‹æ¥ï¼Œç®¡ç†å‘˜éœ€è¦åˆ›å»ºRoleBindingæˆ–ClusterRoleBindingæ¥å°†è¿™äº›è§’è‰²ä¸Žå®žé™…çš„ç”¨æˆ·ã€ç”¨æˆ·ç»„æˆ–æœåŠ¡è´¦å·è¿›è¡Œç»‘å®šã€‚ç»‘å®šå¯ä»¥åŸºäºŽåç§°ç©ºé—´ï¼ˆå¯¹äºŽRoleBindingï¼‰æˆ–æ•´ä¸ªé›†ç¾¤ï¼ˆå¯¹äºŽClusterRoleBindingï¼‰ã€‚</p></li><li><p>éªŒè¯æƒé™ï¼š<br>å½“ç”¨æˆ·æˆ–æœåŠ¡è´¦å·å°è¯•æ‰§è¡Œæ“ä½œæ—¶ï¼ŒKuberneteså°†æ ¹æ®å…¶ç»‘å®šçš„è§’è‰²æ¥éªŒè¯å…¶æƒé™ã€‚å¦‚æžœæƒé™ä¸è¶³ï¼Œæ“ä½œå°†è¢«æ‹’ç»ã€‚</p></li></ol><h2 id="RBAC-çš„ä¼˜åŠ¿å’Œæœ€ä½³å®žè·µ"><a href="#RBAC-çš„ä¼˜åŠ¿å’Œæœ€ä½³å®žè·µ" class="headerlink" title="RBAC çš„ä¼˜åŠ¿å’Œæœ€ä½³å®žè·µ"></a>RBAC çš„ä¼˜åŠ¿å’Œæœ€ä½³å®žè·µ</h2><p>RBACæ¨¡åž‹åœ¨Kubernetesä¸­å…·æœ‰å‡ ä¸ªæ˜¾è‘—çš„ä¼˜åŠ¿å’Œæœ€ä½³å®žè·µï¼š</p><ul><li><strong>æœ€å°æƒé™åŽŸåˆ™</strong>ï¼šåº”è¯¥ä¸ºæ¯ä¸ªç”¨æˆ·ã€æœåŠ¡è´¦å·æˆ–åº”ç”¨ç¨‹åºåˆ†é…æœ€å°å¿…éœ€çš„æƒé™ï¼Œä»¥å‡å°‘æ½œåœ¨çš„å®‰å…¨é£Žé™©ã€‚</li><li><strong>å‘½åç©ºé—´éš”ç¦»</strong>ï¼šé€šè¿‡ä½¿ç”¨Roleå’ŒRoleBindingï¼Œå¯ä»¥åœ¨ä¸åŒçš„å‘½åç©ºé—´å†…å¯¹ç›¸åŒçš„ç”¨æˆ·æˆ–æœåŠ¡è´¦å·åˆ†é…ä¸åŒçš„æƒé™ï¼Œå®žçŽ°èµ„æºçš„ç»†ç²’åº¦æŽ§åˆ¶å’Œéš”ç¦»ã€‚</li><li><strong>é›†ç¾¤èŒƒå›´æŽ§åˆ¶</strong>ï¼šå¯¹äºŽéœ€è¦åœ¨æ•´ä¸ªé›†ç¾¤å†…å…±äº«çš„æƒé™ï¼Œå¯ä»¥ä½¿ç”¨ClusterRoleå’ŒClusterRoleBindingï¼Œç¡®ä¿ä¸€è‡´çš„æŽˆæƒç®¡ç†ã€‚</li><li><strong>å®¡è®¡å’Œç›‘æŽ§</strong>ï¼šRBACå¯ä»¥å¸®åŠ©ç®¡ç†å‘˜è·Ÿè¸ªå’Œå®¡è®¡ç”¨æˆ·åŠæœåŠ¡è´¦å·çš„<code>æ“ä½œåŽ†å²</code>ï¼Œæé«˜å®‰å…¨æ€§å’Œåˆè§„æ€§ã€‚</li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Kubernetesä¸­çš„RBACæ˜¯ä¸€ä¸ªçµæ´»ä¸”å¼ºå¤§çš„æŽˆæƒæ¨¡åž‹ï¼Œå®ƒé€šè¿‡Roleã€ClusterRoleã€RoleBindingå’ŒClusterRoleBindingè¿™å››ä¸ªæ ¸å¿ƒå¯¹è±¡ï¼Œä¸ºç®¡ç†å‘˜æä¾›äº†ç²¾ç¡®å’Œå¯æ‰©å±•çš„æƒé™ç®¡ç†åŠŸèƒ½ã€‚åˆç†é…ç½®RBACå¯ä»¥å¸®åŠ©ä¿æŠ¤é›†ç¾¤å…å—æœªç»æŽˆæƒçš„è®¿é—®å’Œæ½œåœ¨çš„å®‰å…¨å¨èƒã€‚å› æ­¤ï¼Œç†è§£å’Œæ­£ç¡®é…ç½®RBACæ˜¯ä½¿ç”¨Kubernetesç®¡ç†å®‰å…¨æ€§çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud Native </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥ç†è§£ Kubernetes ä¸­çš„å¸¸è§èµ„æºç±»åž‹</title>
      <link href="/2021/02/15/deep-understanding-the-resource-type-of-the-kubernetes/"/>
      <url>/2021/02/15/deep-understanding-the-resource-type-of-the-kubernetes/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ <code>Kubernetes</code> ä¸­ï¼Œèµ„æºç±»åž‹è¢«ç§°ä¸º <code>kind</code>ï¼Œæ¯ç§ kind å¯¹åº”ç€ Kubernetes API ä¸­çš„ä¸€ä¸ªç‰¹å®šå¯¹è±¡ã€‚äº†è§£å’Œæ­£ç¡®ä½¿ç”¨è¿™äº›èµ„æºç±»åž‹å¯¹äºŽæœ‰æ•ˆç®¡ç†å’Œéƒ¨ç½²åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å‡ ç§å¸¸è§çš„ Kubernetes èµ„æºç±»åž‹ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„ä½œç”¨ã€ç¤ºä¾‹å’Œé€‚ç”¨åœºæ™¯ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-kind.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-kind.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:800px;"/></div></div><h2 id="1-Pod"><a href="#1-Pod" class="headerlink" title="1. Pod"></a>1. Pod</h2><p><strong>ä½œç”¨ï¼š</strong><br><code>Pod</code> æ˜¯ Kubernetes ä¸­<code>æœ€åŸºæœ¬çš„éƒ¨ç½²å•å…ƒ</code>ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ã€‚å®ƒä»¬å…±äº«å­˜å‚¨ã€ç½‘ç»œå’Œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸã€‚<code>Pod</code> æ˜¯ä¸´æ—¶æ€§çš„å®žä¾‹ï¼Œå¯ä»¥éšç€èŠ‚ç‚¹çš„é‡æ–°è°ƒåº¦è€Œæ¶ˆå¤±ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-pod</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">nginx:latest</span></span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å•ä¸ªå®¹å™¨çš„åº”ç”¨ç¨‹åºéƒ¨ç½²ã€‚</li><li>å¤šä¸ªç´§å¯†è€¦åˆçš„å®¹å™¨éœ€è¦å…±äº«èµ„æºå’Œç½‘ç»œæ ˆçš„æƒ…å†µã€‚</li></ul><h2 id="2-Service"><a href="#2-Service" class="headerlink" title="2. Service"></a>2. Service</h2><p><strong>ä½œç”¨ï¼š</strong><br><code>Service</code> å®šä¹‰äº†ä¸€ç»„é€»è¾‘ä¸Šç›¸åŒçš„ Pod çš„è®¿é—®æ–¹å¼ã€‚å®ƒä¸ºè¿™äº› Pod æä¾›äº†ç¨³å®šçš„ç½‘ç»œåœ°å€å’Œä¸€ä¸ªæ’å®šçš„DNSåç§°ï¼Œä»¥åŠè´Ÿè½½å‡è¡¡è®¿é—®è¿™äº› Pod çš„èƒ½åŠ›ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>åœ¨é›†ç¾¤å†…éƒ¨æˆ–é›†ç¾¤å¤–éƒ¨æš´éœ²åº”ç”¨ç¨‹åºã€‚</li><li>æä¾›è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘çŽ°èƒ½åŠ›ã€‚</li><li>å®žçŽ°åº”ç”¨ç¨‹åºçš„é«˜å¯ç”¨å’Œå¼¹æ€§ä¼¸ç¼©ã€‚</li></ul><h2 id="3-Deployment"><a href="#3-Deployment" class="headerlink" title="3. Deployment"></a>3. Deployment</h2><p><strong>ä½œç”¨ï¼š</strong><br><code>Deployment</code> æ˜¯ Kubernetes ä¸­ç”¨æ¥ç®¡ç†ä¸€ä¸ªå¯æ‰©å±•çš„ Pod é›†åˆï¼Œå®ƒä»¬å…±äº«é…ç½®ã€‚Deployment æŽ§åˆ¶ Pod çš„åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤ç­–ç•¥ï¼Œæ”¯æŒ<code>æ»šåŠ¨æ›´æ–°</code>å’Œ<code>ç‰ˆæœ¬å›žé€€</code>ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-deployment</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">nginx:latest</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>éƒ¨ç½²å’Œç®¡ç†å¤šä¸ªç›¸åŒçš„ Podã€‚</li><li>è‡ªåŠ¨æ‰©å®¹å’Œç¼©å®¹ã€‚</li><li>ç®¡ç†åº”ç”¨ç¨‹åºçš„éƒ¨ç½²å’Œæ‰©å±•ã€‚</li><li>å®žçŽ°åº”ç”¨ç¨‹åºçš„æ— ç¼æ›´æ–°å’Œå›žæ»šã€‚</li></ul><h2 id="4-Namespace"><a href="#4-Namespace" class="headerlink" title="4. Namespace"></a>4. Namespace</h2><p><strong>ä½œç”¨ï¼š</strong><br><code>Namespace</code> æ˜¯ Kubernetes ä¸­çš„ä¸€ä¸ªé€»è¾‘éš”ç¦»çš„æ¦‚å¿µï¼Œå®ƒå¯ä»¥ç”¨æ¥å°†èµ„æºåˆ’åˆ†åˆ°ä¸åŒçš„é¡¹ç›®ã€å›¢é˜Ÿæˆ–çŽ¯å¢ƒä¸­ã€‚<code>Namespace</code> æä¾›äº†ä¸€ç§å¤šç§Ÿæˆ·çš„æ–¹å¼æ¥å°†é›†ç¾¤ä¸­çš„èµ„æºåˆ’åˆ†ä¸ºå¤šä¸ªè™šæ‹Ÿåˆ†ç»„ã€‚æ¯ä¸ª Namespace æä¾›äº†å¯¹èµ„æºçš„ç‹¬ç«‹éš”ç¦»å’Œå‘½åèŒƒå›´ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Namespace</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">development</span></span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å®žçŽ°èµ„æºçš„é€»è¾‘åˆ†ç»„ï¼Œä½¿å¾—ä¸åŒå›¢é˜Ÿæˆ–é¡¹ç›®å¯ä»¥å…±äº«åŒä¸€ä¸ªé›†ç¾¤ã€‚</li><li>å®žçŽ°èµ„æºçš„éš”ç¦», å°†ä¸åŒçŽ¯å¢ƒï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰çš„èµ„æºéš”ç¦»å¼€æ¥ã€‚</li><li>å®žçŽ°å¤šå›¢é˜Ÿæˆ–å¤šé¡¹ç›®åœ¨åŒä¸€ä¸ªé›†ç¾¤å†…éƒ¨çš„èµ„æºç®¡ç†å’Œéš”ç¦»ã€‚</li></ul><h2 id="5-ConfigMap"><a href="#5-ConfigMap" class="headerlink" title="5. ConfigMap"></a>5. ConfigMap</h2><p><strong>ä½œç”¨ï¼š</strong><br><code>ConfigMap</code> ç”¨æ¥å°†é…ç½®æ•°æ®ä¸Žåº”ç”¨ç¨‹åºåˆ†ç¦»ã€‚å®ƒå¯ä»¥å­˜å‚¨æ–‡æœ¬æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ <code>Volume</code> æˆ–<code>çŽ¯å¢ƒå˜é‡</code>æ³¨å…¥åˆ° Pod ä¸­ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-config</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">nginx.conf:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    server &#123;</span></span><br><span class="line"><span class="string">      listen 80;</span></span><br><span class="line"><span class="string">      server_name localhost;</span></span><br><span class="line"><span class="string">      location / &#123;</span></span><br><span class="line"><span class="string">        root /usr/share/nginx/html;</span></span><br><span class="line"><span class="string">        index index.html;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å­˜å‚¨åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯, å°†åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯åˆ†ç¦»å‡ºæ¥ï¼Œæ”¯æŒåŠ¨æ€é…ç½®ã€‚</li><li>å®žçŽ°åº”ç”¨ç¨‹åºçš„é…ç½®ç®¡ç†, æä¾›ç»Ÿä¸€çš„é…ç½®ä¸­å¿ƒ, é™ä½Žé…ç½®ç®¡ç†çš„å¤æ‚åº¦</li><li>ä¸Žåº”ç”¨ç¨‹åºä»£ç åˆ†ç¦»é…ç½®ï¼Œä½¿é…ç½®æ›´æ˜“äºŽç®¡ç†å’Œæ›´æ–°ã€‚</li></ul><h2 id="6-Secret"><a href="#6-Secret" class="headerlink" title="6. Secret"></a>6. Secret</h2><p><strong>ä½œç”¨ï¼š</strong><br><code>Secret</code> ç”¨æ¥å­˜å‚¨æ•æ„Ÿæ•°æ®ï¼Œå¦‚å¯†ç ã€API å¯†é’¥ç­‰ã€‚å®ƒä»¥åŠ å¯†æ–¹å¼å­˜å‚¨ï¼Œå¹¶ä¸”å¯ä»¥ä»¥å®‰å…¨çš„æ–¹å¼è¢« Pod ä½¿ç”¨. <code>Secret</code>å¯ä»¥è¢«ç”¨æ¥ä¿å­˜ Docker é•œåƒã€ç§æœ‰é•œåƒä»“åº“çš„å¯†ç ã€TLS è¯ä¹¦ç­‰ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-secret</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">YWRtaW4=</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">MWYyZDFlMmU2N2Rm</span></span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>å­˜å‚¨å’Œç®¡ç†æ•æ„Ÿæ•°æ®ï¼Œå¦‚æ•°æ®åº“å¯†ç ã€TLS è¯ä¹¦ç­‰ã€‚</li><li>å°†æ•æ„Ÿæ•°æ®ä»¥å®‰å…¨çš„æ–¹å¼æ³¨å…¥åˆ° Pod ä¸­ã€‚</li></ul><h2 id="7-PersistentVolume"><a href="#7-PersistentVolume" class="headerlink" title="7. PersistentVolume"></a>7. PersistentVolume</h2><p><strong>ä½œç”¨ï¼š</strong><br><code>PersistentVolume (PV)</code> æ˜¯é›†ç¾¤ä¸­ç”±ç®¡ç†å‘˜é™æ€é…ç½®çš„å­˜å‚¨èµ„æº, å®ƒå¯ä»¥ç”¨æ¥æŒä¹…åŒ–å­˜å‚¨åº”ç”¨ç¨‹åºçš„æ•°æ®, ä¾› Pod ä½¿ç”¨ã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pv-1</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">capacity:</span></span><br><span class="line">    <span class="attr">storage:</span> <span class="string">5Gi</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteOnce</span></span><br><span class="line">  <span class="attr">persistentVolumeReclaimPolicy:</span> <span class="string">Recycle</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">slow</span></span><br></pre></td></tr></table></figure><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>æŒä¹…åŒ–å­˜å‚¨åº”ç”¨ç¨‹åºçš„æ•°æ®ï¼Œå¦‚æ•°æ®åº“æ–‡ä»¶ã€‚</li><li>ä¿è¯æ•°æ®æŒä¹…æ€§å’Œæ•°æ®çš„è·¨ Pod ä½¿ç”¨ã€‚</li></ul><h2 id="8-PersistentVolumeClaim"><a href="#8-PersistentVolumeClaim" class="headerlink" title="8. PersistentVolumeClaim"></a>8. PersistentVolumeClaim</h2><p><strong>ä½œç”¨ï¼š</strong><br><code>PersistentVolumeClaim (PVC)</code> æ˜¯ <code>Pod</code> å¯¹ <code>PersistentVolume</code> çš„è¯·æ±‚, ç”¨äºŽèŽ·å–æŒä¹…åŒ–å­˜å‚¨èµ„æºã€‚å®ƒå¯ä»¥ç”¨æ¥åŠ¨æ€ç”³è¯· PV èµ„æº, ä¾› Pod ä½¿ç”¨ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-pvc</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteOnce</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">storage:</span> <span class="string">1Gi</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ç†è§£å’Œæœ‰æ•ˆä½¿ç”¨è¿™äº› <code>Kubernetes</code> èµ„æºç±»åž‹ï¼Œå¯ä»¥æ›´å¥½åœ°ç®¡ç†å’Œéƒ¨ç½²å®¹å™¨åŒ–åº”ç”¨ç¨‹åºã€‚æ¯ç§èµ„æºç±»åž‹éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä½œç”¨å’Œä½¿ç”¨åœºæ™¯ï¼Œæ ¹æ®å®žé™…éœ€æ±‚å’Œéƒ¨ç½²ç­–ç•¥é€‰æ‹©åˆé€‚çš„èµ„æºç±»åž‹æ˜¯éžå¸¸é‡è¦çš„ã€‚Kubernetes çš„çµæ´»æ€§å’Œå¼ºå¤§çš„ç®¡ç†èƒ½åŠ›ä½¿å¾—å®ƒæˆä¸ºçŽ°ä»£äº‘åŽŸç”Ÿåº”ç”¨éƒ¨ç½²å’Œç®¡ç†çš„é¦–é€‰å¹³å°ä¹‹ä¸€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud Native </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes - çŽ°ä»£å®¹å™¨ç¼–æŽ’å¹³å°</title>
      <link href="/2021/01/03/kubernetes-a-modern-container-orchestration-platform/"/>
      <url>/2021/01/03/kubernetes-a-modern-container-orchestration-platform/</url>
      
        <content type="html"><![CDATA[<p><code>Kubernetesï¼ˆç®€ç§°ä¸ºK8sï¼‰</code>æ˜¯ä¸€ä¸ªå¼€æºçš„<code>å®¹å™¨ç¼–æŽ’å¹³å°</code>ï¼Œå®ƒä»¥è‡ªåŠ¨åŒ–å®¹å™¨éƒ¨ç½²ã€æ‰©å±•å’Œæ“ä½œä¸ºç›®æ ‡ï¼Œæ˜¯çŽ°ä»£<code>äº‘åŽŸç”Ÿ</code>åº”ç”¨çš„é‡è¦åŸºçŸ³ã€‚æˆ‘ä»¬å°†æŽ¢è®¨ä¸‹Kubernetesçš„èµ·æºã€æ•´ä½“æž¶æž„ã€æ ¸å¿ƒç»„ä»¶åŠå…¶å·¥ä½œåŽŸç†ï¼Œå…¨é¢ç†è§£è¿™ä¸€å¼ºå¤§å·¥å…·çš„ä½œç”¨ä¸Žè¿ä½œæ–¹å¼ã€‚</p><h2 id="èµ·æº"><a href="#èµ·æº" class="headerlink" title="èµ·æº"></a>èµ·æº</h2><p>Kubernetesé¡¹ç›®æœ€åˆç”±<code>Google</code>åœ¨2014å¹´å‘å¸ƒï¼Œå¹¶ä¸”è¿…é€Ÿå¼€æºåŒ–ã€‚å…¶çµæ„Ÿæ¥è‡ªäºŽGoogleå†…éƒ¨çš„Borgç³»ç»Ÿï¼ŒBorgç³»ç»Ÿç”¨äºŽç®¡ç†Googleçš„å¤§è§„æ¨¡åº”ç”¨ç¨‹åºå®¹å™¨åŒ–ï¼Œå®žçŽ°äº†é«˜æ•ˆçš„èµ„æºç®¡ç†å’Œä»»åŠ¡è°ƒåº¦ã€‚Kubernetesçš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªå¼€æ”¾ã€çµæ´»å’Œå¯ç§»æ¤çš„å®¹å™¨ç¼–æŽ’è§£å†³æ–¹æ¡ˆï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´è½»æ¾åœ°éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†å®¹å™¨åŒ–åº”ç”¨ã€‚</p><h2 id="Kubernetesçš„æ•´ä½“æž¶æž„"><a href="#Kubernetesçš„æ•´ä½“æž¶æž„" class="headerlink" title="Kubernetesçš„æ•´ä½“æž¶æž„"></a>Kubernetesçš„æ•´ä½“æž¶æž„</h2><p>Kubernetesçš„æž¶æž„è®¾è®¡éžå¸¸æ¨¡å—åŒ–å’Œåˆ†å¸ƒå¼ï¼Œæ ¸å¿ƒè®¾è®¡ç†å¿µåŒ…æ‹¬å¯æ‰©å±•æ€§ã€è‡ªåŠ¨åŒ–ã€å£°æ˜Žå¼é…ç½®å’Œè‡ªæ„ˆèƒ½åŠ›ã€‚ä¸‹å›¾ä¸ºKubernetesçš„æž¶æž„å›¾ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/k8s/k8s-architecture.png" class="lazyload placeholder" data-srcset="/assets/images/k8s/k8s-architecture.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="High Level Architecture of Kubernetes" style="width:800px;"/></div><span class="image-caption">High Level Architecture of Kubernetes</span></div><p>Kubernetesçš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼Œä¸»è¦æœ‰<code>æŽ§åˆ¶å¹³é¢ï¼ˆControl Planeï¼‰</code>ä¹Ÿå°±æ˜¯MasterèŠ‚ç‚¹å’ŒèŠ‚ç‚¹ï¼ˆNodeï¼‰ä¸¤å¤§éƒ¨åˆ†ã€‚</p><h3 id="MasterèŠ‚ç‚¹"><a href="#MasterèŠ‚ç‚¹" class="headerlink" title="MasterèŠ‚ç‚¹"></a>MasterèŠ‚ç‚¹</h3><ul><li><strong>kube-apiserver</strong>: Kubernetesçš„APIæœåŠ¡å™¨ï¼Œä½œä¸ºæ‰€æœ‰æ“ä½œçš„å…¥å£ï¼Œè´Ÿè´£æŽ¥æ”¶å’Œå¤„ç†æ¥è‡ªç”¨æˆ·æˆ–å…¶ä»–ç»„ä»¶çš„APIè¯·æ±‚ã€‚</li><li><strong>kube-controller-manager</strong>: å„ç§æŽ§åˆ¶å™¨çš„é›†åˆï¼Œè´Ÿè´£ç®¡ç†é›†ç¾¤çŠ¶æ€ã€èŠ‚ç‚¹æŽ§åˆ¶å’Œå·¥ä½œè´Ÿè½½çš„è°ƒåº¦ã€‚</li><li><strong>kube-scheduler</strong>: è´Ÿè´£å°†æ–°åˆ›å»ºçš„Podè°ƒåº¦åˆ°é›†ç¾¤å†…çš„èŠ‚ç‚¹ä¸Šï¼Œæ ¹æ®èµ„æºéœ€æ±‚å’Œçº¦æŸæ¡ä»¶é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹ã€‚</li><li><strong>etcd</strong>: åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ç³»ç»Ÿï¼Œç”¨äºŽä¿å­˜é›†ç¾¤çš„çŠ¶æ€å’Œé…ç½®ä¿¡æ¯ï¼Œä½œä¸ºæ•´ä¸ªKubernetesé›†ç¾¤çš„åŽç«¯æ•°æ®åº“ã€‚</li></ul><h3 id="èŠ‚ç‚¹ï¼ˆNodeï¼‰"><a href="#èŠ‚ç‚¹ï¼ˆNodeï¼‰" class="headerlink" title="èŠ‚ç‚¹ï¼ˆNodeï¼‰"></a>èŠ‚ç‚¹ï¼ˆNodeï¼‰</h3><ul><li><strong>kubelet</strong>: è¿è¡Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ä»£ç†æœåŠ¡ï¼Œè´Ÿè´£ä¸ŽMasterèŠ‚ç‚¹é€šä¿¡ï¼Œå¹¶ç®¡ç†èŠ‚ç‚¹ä¸Šçš„Podç”Ÿå‘½å‘¨æœŸã€‚</li><li><strong>kube-proxy</strong>: è´Ÿè´£ä¸ºServiceæä¾›ç½‘ç»œä»£ç†å’Œè´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œå®žçŽ°é›†ç¾¤å†…éƒ¨æœåŠ¡çš„è®¿é—®ã€‚</li></ul><p>é™¤äº†ä¸Šé¢çš„ä¸€äº›æ ¸å¿ƒç»„ä»¶å¤–ï¼Œè¿˜æœ‰<code>kubectl</code>å‘½ä»¤è¡Œå·¥å…·ã€ç½‘ç»œæ’ä»¶ã€å®¹å™¨è¿è¡Œæ—¶ï¼ˆå¦‚Dockerã€Containerdï¼‰ç­‰ã€‚<br>-<strong>kubectl</strong>: Kuberneteså‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºŽä¸Žé›†ç¾¤è¿›è¡Œäº¤äº’ã€‚<br>-<strong>ç½‘ç»œæ’ä»¶</strong>: è´Ÿè´£ä¸ºPodæä¾›ç½‘ç»œè¿žæŽ¥å’ŒæœåŠ¡å‘çŽ°ï¼Œä¾‹å¦‚Flannelã€Calicoç­‰ã€‚<br>-<strong>å®¹å™¨è¿è¡Œæ—¶</strong>: è´Ÿè´£è¿è¡Œå’Œç®¡ç†å®¹å™¨ï¼Œä¾‹å¦‚Dockerã€Containerdç­‰ã€‚</p><h2 id="Kubernetesçš„å·¥ä½œåŽŸç†"><a href="#Kubernetesçš„å·¥ä½œåŽŸç†" class="headerlink" title="Kubernetesçš„å·¥ä½œåŽŸç†"></a>Kubernetesçš„å·¥ä½œåŽŸç†</h2><p>Kubernetesé€šè¿‡ä¸€ç³»åˆ—çš„æŽ§åˆ¶å¾ªçŽ¯ï¼ˆcontrol loopsï¼‰å’Œå£°æ˜Žå¼APIæ¥ç®¡ç†å’Œè°ƒåº¦å®¹å™¨åŒ–åº”ç”¨ã€‚å…¶å·¥ä½œåŽŸç†å¯ä»¥ç®€è¿°ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><p><strong>å®šä¹‰èµ„æºå¯¹è±¡</strong>: ç”¨æˆ·ä½¿ç”¨Kubernetesæä¾›çš„APIå®šä¹‰åº”ç”¨ç¨‹åºçš„æ‰€éœ€çŠ¶æ€ï¼Œä¾‹å¦‚<code>Pod</code>ã€<code>Service</code>ã€<code>Deployment</code>ç­‰ã€‚</p></li><li><p><strong>APIæœåŠ¡å™¨å¤„ç†è¯·æ±‚</strong>: æ‰€æœ‰çš„ç®¡ç†æ“ä½œé€šè¿‡<code>kube-apiserver</code>å¤„ç†ï¼Œ<code>kube-apiserver</code>æŽ¥æ”¶åˆ°APIè¯·æ±‚åŽå°†æ“ä½œå­˜å‚¨åˆ°etcdä¸­ï¼Œå¹¶æ›´æ–°é›†ç¾¤çŠ¶æ€ã€‚</p></li><li><p><strong>æŽ§åˆ¶å™¨ç®¡ç†å™¨ç›‘æŽ§çŠ¶æ€</strong>: <code>kube-controller-manager</code>ä¸­çš„å„ç§æŽ§åˆ¶å™¨ï¼ˆå¦‚ReplicaSetæŽ§åˆ¶å™¨ã€DeploymentæŽ§åˆ¶å™¨ï¼‰å®šæœŸæ£€æŸ¥å½“å‰é›†ç¾¤çŠ¶æ€ï¼Œç¡®ä¿å®žé™…çŠ¶æ€ä¸ŽæœŸæœ›çŠ¶æ€ä¸€è‡´ã€‚</p></li><li><p><strong>è°ƒåº¦å™¨é€‰æ‹©èŠ‚ç‚¹</strong>: å½“æœ‰æ–°çš„Podéœ€è¦è°ƒåº¦æ—¶ï¼Œ<code>kube-scheduler</code>æ ¹æ®è°ƒåº¦ç®—æ³•é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹ï¼Œå¹¶å°†Podåˆ†é…åˆ°è¯¥èŠ‚ç‚¹ä¸Šã€‚</p></li><li><p><strong>èŠ‚ç‚¹ä¸Šçš„kubeletç®¡ç†Pod</strong>: æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„<code>kubelet</code>æ ¹æ®MasterèŠ‚ç‚¹ä¸‹å‘çš„<code>Pod</code>æ¸…å•ï¼Œé€šè¿‡å®¹å™¨è¿è¡Œæ—¶ï¼ˆå¦‚Dockerã€Containerdï¼‰è¿è¡Œå’Œç›‘æŽ§Podä¸­çš„å®¹å™¨ã€‚</p></li><li><p><strong>ç½‘ç»œä»£ç†è´Ÿè´£æœåŠ¡è®¿é—®</strong>: <code>kube-proxy</code>åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šç»´æŠ¤ç€<code>Service</code>å’Œ<code>Pod</code> IPçš„æ˜ å°„å…³ç³»ï¼Œä¸ºServiceæä¾›é›†ç¾¤å†…éƒ¨è´Ÿè½½å‡è¡¡å’Œè®¿é—®ã€‚</p></li></ol><p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒKubernetesæä¾›äº†é«˜åº¦è‡ªåŠ¨åŒ–çš„å®¹å™¨ç¼–æŽ’èƒ½åŠ›ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºŽåº”ç”¨ç¨‹åºçš„å¼€å‘å’Œä¸šåŠ¡é€»è¾‘ï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚åŸºç¡€è®¾æ–½çš„ç®¡ç†å’Œç»´æŠ¤ã€‚</p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•åœ¨Kubernetesé›†ç¾¤ä¸Šéƒ¨ç½²ä¸¤ä¸ªnginxå®¹å™¨ï¼Œå¹¶ä¸”ä½¿å…¶å¯ä»¥ä»Žå¤–éƒ¨è®¿é—®ã€‚</p><h3 id="1-åˆ›å»ºnginx-Deployment"><a href="#1-åˆ›å»ºnginx-Deployment" class="headerlink" title="1. åˆ›å»ºnginx Deployment"></a>1. åˆ›å»ºnginx Deployment</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªDeploymentèµ„æºï¼Œç”¨æ¥æè¿°nginxå®¹å™¨çš„éƒ¨ç½²å’Œè¿è¡Œè§„åˆ™ã€‚æˆ‘ä»¬æŒ‡å®šäº†ä¸€ä¸ªPodæ¨¡æ¿ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªnginxå®¹å™¨, å¹¶è®¾ç½®å‰¯æœ¬æ•°ä¸º2ï¼Œè¡¨ç¤ºæˆ‘ä»¬å¸Œæœ›è¿è¡Œä¸¤ä¸ªnginxå®žä¾‹ã€‚ è¯¥å®¹å™¨ä½¿ç”¨nginx:latesté•œåƒï¼Œå¹¶åœ¨å®¹å™¨å†…éƒ¨æ‰“å¼€äº†80ç«¯å£ç”¨äºŽHTTPæœåŠ¡ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-deployment</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">2</span>  <span class="comment"># æŒ‡å®šå‰¯æœ¬æ•°ä¸º2ä¸ª</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx</span>  <span class="comment"># é€‰æ‹©å¸¦æœ‰æ ‡ç­¾&quot;app: nginx&quot;çš„Pod</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx</span>  <span class="comment"># ç»™Podæ‰“ä¸Šæ ‡ç­¾&quot;app: nginx&quot;</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:latest</span>  <span class="comment"># ä½¿ç”¨nginxé•œåƒ</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span>  <span class="comment"># å®¹å™¨å†…éƒ¨ç›‘å¬ç«¯å£80</span></span><br></pre></td></tr></table></figure><h3 id="2-æš´éœ²nginxæœåŠ¡"><a href="#2-æš´éœ²nginxæœåŠ¡" class="headerlink" title="2. æš´éœ²nginxæœåŠ¡"></a>2. æš´éœ²nginxæœåŠ¡</h3><p>æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªServiceèµ„æºæ¥å…¬å¼€nginxå®¹å™¨ï¼Œä½¿å…¶å¯ä»¥ä»Žé›†ç¾¤å¤–éƒ¨è®¿é—®ã€‚æˆ‘ä»¬é€‰æ‹©æ ‡ç­¾ä¸ºâ€app: nginxâ€çš„Podæ¥æä¾›æœåŠ¡ã€‚é€šè¿‡è®¾ç½®type: LoadBalancerï¼ŒKuberneteså°†æ ¹æ®äº‘æä¾›å•†çš„æ”¯æŒè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨ï¼Œå¹¶åˆ†é…ä¸€ä¸ªå¤–éƒ¨IPåœ°å€æˆ–DNSåæ¥è®¿é—®nginxæœåŠ¡ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx</span>  <span class="comment"># åŒ¹é…æ ‡ç­¾ä¸º&quot;app: nginx&quot;çš„Pod</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span>  <span class="comment"># Serviceç«¯å£ï¼Œé›†ç¾¤å†…éƒ¨è®¿é—®ç«¯å£</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">80</span>  <span class="comment"># Podä¸­nginxå®¹å™¨çš„ç«¯å£</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">LoadBalancer</span>  <span class="comment"># æŒ‡å®šServiceç±»åž‹ä¸ºLoadBalancerï¼Œç”¨äºŽå¤–éƒ¨æš´éœ²</span></span><br></pre></td></tr></table></figure><h3 id="3-Kuberneteså·¥ä½œæµç¨‹æ¦‚è¿°"><a href="#3-Kuberneteså·¥ä½œæµç¨‹æ¦‚è¿°" class="headerlink" title="3. Kuberneteså·¥ä½œæµç¨‹æ¦‚è¿°"></a>3. Kuberneteså·¥ä½œæµç¨‹æ¦‚è¿°</h3><p>åœ¨éƒ¨ç½²nginxå®¹å™¨å¹¶æš´éœ²å¤–éƒ¨è®¿é—®çš„è¿‡ç¨‹ä¸­ï¼ŒKubernetesçš„å„ä¸ªç»„ä»¶æ‰®æ¼”äº†ä¸åŒçš„è§’è‰²ï¼š</p><ul><li>APIæœåŠ¡å™¨ (kube-apiserver)ï¼šæŽ¥æ”¶åˆ°Deploymentå’ŒServiceçš„å®šä¹‰è¯·æ±‚ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°etcdä¸­ã€‚</li><li>è°ƒåº¦å™¨ (kube-scheduler)ï¼šæ ¹æ®Podçš„è°ƒåº¦éœ€æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹æ¥è¿è¡Œnginx Podã€‚</li><li>æŽ§åˆ¶å™¨ç®¡ç†å™¨ (kube-controller-manager)ï¼šç›‘æŽ§Deploymentèµ„æºï¼Œç¡®ä¿è¿è¡Œç€æŒ‡å®šæ•°é‡çš„nginx Podå‰¯æœ¬ã€‚</li><li>etcdï¼šä½œä¸ºåŽç«¯æ•°æ®åº“å­˜å‚¨æ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€å’Œé…ç½®ä¿¡æ¯ã€‚</li><li>kubeletï¼šåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œå¹¶ç›‘æŽ§nginx Podã€‚</li><li>kube-proxyï¼šè´Ÿè´£åœ¨é›†ç¾¤å†…éƒ¨å®žçŽ°Serviceçš„è´Ÿè½½å‡è¡¡å’Œè®¿é—®è§„åˆ™ã€‚</li></ul><h2 id="æœ€åŽ"><a href="#æœ€åŽ" class="headerlink" title="æœ€åŽ"></a>æœ€åŽ</h2><p>Kubernetesä½œä¸ºçŽ°ä»£å®¹å™¨ç¼–æŽ’å¹³å°çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œé€šè¿‡å…¶æ¨¡å—åŒ–çš„æž¶æž„å’Œå¼ºå¤§çš„è‡ªåŠ¨åŒ–èƒ½åŠ›ï¼Œä¸ºäº‘åŽŸç”Ÿåº”ç”¨çš„éƒ¨ç½²å’Œè¿ç»´å¸¦æ¥äº†é©å‘½æ€§çš„å˜åŒ–ã€‚æ·±å…¥ç†è§£Kubernetesçš„èµ·æºã€æž¶æž„å’Œå·¥ä½œåŽŸç†ï¼Œéžå¸¸æœ‰åŠ©äºŽæˆ‘ä»¬å¼€å‘å’Œè¿ç»´äººå‘˜æ›´å¥½åœ°åˆ©ç”¨è¿™ä¸€æŠ€æœ¯ï¼Œæž„å»ºå¯é ã€å¯æ‰©å±•å’Œé«˜æ•ˆçš„äº‘åŽŸç”Ÿåº”ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cloud Native </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åˆ†æžä¸­çš„ä¸­ä½æ•°ç»å¯¹åå·®ï¼ˆMADï¼‰</title>
      <link href="/2020/11/03/data-analysis-mad/"/>
      <url>/2020/11/03/data-analysis-mad/</url>
      
        <content type="html"><![CDATA[<p><strong>Median Absolute Deviation (MAD)<strong>ï¼Œå³</strong>ä¸­ä½æ•°ç»å¯¹åå·®</strong>ï¼Œæ˜¯ä¸€ç§ç”¨äºŽè¡¡é‡æ•°æ®åˆ†æ•£ç¨‹åº¦æˆ–æ•°æ®é›†ä¸­çš„å¼‚å¸¸å€¼çš„æ–¹æ³•ã€‚å®ƒæ˜¯ä¸€ç§ç¨³å¥çš„ç»Ÿè®¡é‡ï¼Œå°¤å…¶åœ¨é¢å¯¹å™ªå£°å’Œå¼‚å¸¸å€¼æ—¶ï¼Œæ¯”æ ‡å‡†å·®ç­‰æ–¹æ³•æ›´åŠ ç¨³å¥ï¼Œèƒ½æ›´å¥½åœ°åæ˜ æ•°æ®çš„æ•´ä½“å˜åŠ¨ã€‚</p><h2 id="MADçš„è®¡ç®—æ­¥éª¤"><a href="#MADçš„è®¡ç®—æ­¥éª¤" class="headerlink" title="MADçš„è®¡ç®—æ­¥éª¤"></a>MADçš„è®¡ç®—æ­¥éª¤</h2><ol><li><p><strong>è®¡ç®—æ•°æ®çš„ä¸­ä½æ•°ï¼ˆMedianï¼‰</strong>ï¼š</p><ul><li>é¦–å…ˆï¼Œè®¡ç®—æ•°æ®é›†çš„ä¸­ä½æ•°ï¼ˆå³æ‰€æœ‰æ•°æ®æŽ’åºåŽä¸­é—´çš„å€¼ï¼‰ã€‚</li><li>å¯¹äºŽå¶æ•°ä¸ªæ•°æ®ï¼Œä¸­ä½æ•°é€šå¸¸å–ä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚</li></ul></li><li><p><strong>è®¡ç®—æ¯ä¸ªæ•°æ®ç‚¹çš„ç»å¯¹åå·®ï¼ˆAbsolute Deviationï¼‰</strong>ï¼š</p><ul><li>å¯¹æ•°æ®é›†ä¸­çš„æ¯ä¸ªæ•°æ®ç‚¹ï¼Œè®¡ç®—å®ƒä¸Žä¸­ä½æ•°çš„å·®çš„ç»å¯¹å€¼ï¼š<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.564ex;" xmlns="http://www.w3.org/2000/svg" width="25.48ex" height="2.261ex" role="img" focusable="false" viewBox="0 -750 11262 999.5" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-4-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-4-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-4-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJX-4-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-4-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-4-TEX-N-4D" d="M132 622Q125 629 121 631T105 634T62 637H29V683H135Q221 683 232 682T249 675Q250 674 354 398L458 124L562 398Q666 674 668 675Q671 681 683 682T781 683H887V637H854Q814 636 803 634T785 622V61Q791 51 802 49T854 46H887V0H876Q855 3 736 3Q605 3 596 0H585V46H618Q660 47 669 49T688 61V347Q688 424 688 461T688 546T688 613L687 632Q454 14 450 7Q446 1 430 1T410 7Q409 9 292 316L176 624V606Q175 588 175 543T175 463T175 356L176 86Q187 50 261 46H278V0H269Q254 3 154 3Q52 3 37 0H29V46H46Q78 48 98 56T122 69T132 86V622Z"></path><path id="MJX-4-TEX-N-65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z"></path><path id="MJX-4-TEX-N-64" d="M376 495Q376 511 376 535T377 568Q377 613 367 624T316 637H298V660Q298 683 300 683L310 684Q320 685 339 686T376 688Q393 689 413 690T443 693T454 694H457V390Q457 84 458 81Q461 61 472 55T517 46H535V0Q533 0 459 -5T380 -11H373V44L365 37Q307 -11 235 -11Q158 -11 96 50T34 215Q34 315 97 378T244 442Q319 442 376 393V495ZM373 342Q328 405 260 405Q211 405 173 369Q146 341 139 305T131 211Q131 155 138 120T173 59Q203 26 251 26Q322 26 373 103V342Z"></path><path id="MJX-4-TEX-N-69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z"></path><path id="MJX-4-TEX-N-61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z"></path><path id="MJX-4-TEX-N-6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">ç»</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">å¯¹</text><text data-variant="normal" transform="translate(2000,0) scale(1,-1)" font-size="884px" font-family="serif">å</text><text data-variant="normal" transform="translate(3000,0) scale(1,-1)" font-size="884px" font-family="serif">å·®</text></g><g data-mml-node="mo" transform="translate(4277.8,0)"><use data-c="3D" xlink:href="#MJX-4-TEX-N-3D"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(5333.6,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-4-TEX-N-7C"></use></g></g><g data-mml-node="msub" transform="translate(5611.6,0)"><g data-mml-node="mi"><use data-c="1D465" xlink:href="#MJX-4-TEX-I-1D465"></use></g><g data-mml-node="mi" transform="translate(605,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-4-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(6732.7,0)"><use data-c="2212" xlink:href="#MJX-4-TEX-N-2212"></use></g><g data-mml-node="mtext" transform="translate(7733,0)"><use data-c="4D" xlink:href="#MJX-4-TEX-N-4D"></use><use data-c="65" xlink:href="#MJX-4-TEX-N-65" transform="translate(917,0)"></use><use data-c="64" xlink:href="#MJX-4-TEX-N-64" transform="translate(1361,0)"></use><use data-c="69" xlink:href="#MJX-4-TEX-N-69" transform="translate(1917,0)"></use><use data-c="61" xlink:href="#MJX-4-TEX-N-61" transform="translate(2195,0)"></use><use data-c="6E" xlink:href="#MJX-4-TEX-N-6E" transform="translate(2695,0)"></use></g><g data-mml-node="mo" transform="translate(10984,0) translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-4-TEX-N-7C"></use></g></g></g></svg></mjx-container>å…¶ä¸­ï¼Œ<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.357ex;" xmlns="http://www.w3.org/2000/svg" width="2.034ex" height="1.357ex" role="img" focusable="false" viewBox="0 -442 899 599.8" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-3-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJX-3-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D465" xlink:href="#MJX-3-TEX-I-1D465"></use></g><g data-mml-node="mi" transform="translate(605,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-3-TEX-I-1D456"></use></g></g></g></g></svg></mjx-container>æ˜¯æ•°æ®é›†ä¸­çš„æ¯ä¸ªæ•°æ®ç‚¹ã€‚</li></ul></li><li><p><strong>è®¡ç®—è¿™äº›ç»å¯¹åå·®çš„ä¸­ä½æ•°</strong>ï¼š</p><ul><li>ç„¶åŽï¼Œå¯¹è¿™äº›ç»å¯¹åå·®å€¼è¿›è¡ŒæŽ’åºï¼Œæ‰¾åˆ°å®ƒä»¬çš„ä¸­ä½æ•°ï¼Œè¿™ä¸ªä¸­ä½æ•°å³ä¸º<strong>ä¸­ä½æ•°ç»å¯¹åå·®ï¼ˆMADï¼‰</strong>ã€‚</li></ul><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="31.045ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 13722 1000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-2-TEX-N-4D" d="M132 622Q125 629 121 631T105 634T62 637H29V683H135Q221 683 232 682T249 675Q250 674 354 398L458 124L562 398Q666 674 668 675Q671 681 683 682T781 683H887V637H854Q814 636 803 634T785 622V61Q791 51 802 49T854 46H887V0H876Q855 3 736 3Q605 3 596 0H585V46H618Q660 47 669 49T688 61V347Q688 424 688 461T688 546T688 613L687 632Q454 14 450 7Q446 1 430 1T410 7Q409 9 292 316L176 624V606Q175 588 175 543T175 463T175 356L176 86Q187 50 261 46H278V0H269Q254 3 154 3Q52 3 37 0H29V46H46Q78 48 98 56T122 69T132 86V622Z"></path><path id="MJX-2-TEX-N-41" d="M255 0Q240 3 140 3Q48 3 39 0H32V46H47Q119 49 139 88Q140 91 192 245T295 553T348 708Q351 716 366 716H376Q396 715 400 709Q402 707 508 390L617 67Q624 54 636 51T687 46H717V0H708Q699 3 581 3Q458 3 437 0H427V46H440Q510 46 510 64Q510 66 486 138L462 209H229L209 150Q189 91 189 85Q189 72 209 59T259 46H264V0H255ZM447 255L345 557L244 256Q244 255 345 255H447Z"></path><path id="MJX-2-TEX-N-44" d="M130 622Q123 629 119 631T103 634T60 637H27V683H228Q399 682 419 682T461 676Q504 667 546 641T626 573T685 470T708 336Q708 210 634 116T442 3Q429 1 228 0H27V46H60Q102 47 111 49T130 61V622ZM593 338Q593 439 571 501T493 602Q439 637 355 637H322H294Q238 637 234 628Q231 624 231 344Q231 62 232 59Q233 49 248 48T339 46H350Q456 46 515 95Q561 133 577 191T593 338Z"></path><path id="MJX-2-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-2-TEX-N-65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z"></path><path id="MJX-2-TEX-N-64" d="M376 495Q376 511 376 535T377 568Q377 613 367 624T316 637H298V660Q298 683 300 683L310 684Q320 685 339 686T376 688Q393 689 413 690T443 693T454 694H457V390Q457 84 458 81Q461 61 472 55T517 46H535V0Q533 0 459 -5T380 -11H373V44L365 37Q307 -11 235 -11Q158 -11 96 50T34 215Q34 315 97 378T244 442Q319 442 376 393V495ZM373 342Q328 405 260 405Q211 405 173 369Q146 341 139 305T131 211Q131 155 138 120T173 59Q203 26 251 26Q322 26 373 103V342Z"></path><path id="MJX-2-TEX-N-69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z"></path><path id="MJX-2-TEX-N-61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z"></path><path id="MJX-2-TEX-N-6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-2-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-2-TEX-N-7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"></path><path id="MJX-2-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJX-2-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-2-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-2-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><use data-c="4D" xlink:href="#MJX-2-TEX-N-4D"></use><use data-c="41" xlink:href="#MJX-2-TEX-N-41" transform="translate(917,0)"></use><use data-c="44" xlink:href="#MJX-2-TEX-N-44" transform="translate(1667,0)"></use></g><g data-mml-node="mo" transform="translate(2708.8,0)"><use data-c="3D" xlink:href="#MJX-2-TEX-N-3D"></use></g><g data-mml-node="mtext" transform="translate(3764.6,0)"><use data-c="4D" xlink:href="#MJX-2-TEX-N-4D"></use><use data-c="65" xlink:href="#MJX-2-TEX-N-65" transform="translate(917,0)"></use><use data-c="64" xlink:href="#MJX-2-TEX-N-64" transform="translate(1361,0)"></use><use data-c="69" xlink:href="#MJX-2-TEX-N-69" transform="translate(1917,0)"></use><use data-c="61" xlink:href="#MJX-2-TEX-N-61" transform="translate(2195,0)"></use><use data-c="6E" xlink:href="#MJX-2-TEX-N-6E" transform="translate(2695,0)"></use></g><g data-mml-node="mo" transform="translate(7015.6,0)"><use data-c="28" xlink:href="#MJX-2-TEX-N-28"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7404.6,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-2-TEX-N-7C"></use></g></g><g data-mml-node="msub" transform="translate(7682.6,0)"><g data-mml-node="mi"><use data-c="1D465" xlink:href="#MJX-2-TEX-I-1D465"></use></g><g data-mml-node="mi" transform="translate(605,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-2-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(8803.7,0)"><use data-c="2212" xlink:href="#MJX-2-TEX-N-2212"></use></g><g data-mml-node="mtext" transform="translate(9804,0)"><use data-c="4D" xlink:href="#MJX-2-TEX-N-4D"></use><use data-c="65" xlink:href="#MJX-2-TEX-N-65" transform="translate(917,0)"></use><use data-c="64" xlink:href="#MJX-2-TEX-N-64" transform="translate(1361,0)"></use><use data-c="69" xlink:href="#MJX-2-TEX-N-69" transform="translate(1917,0)"></use><use data-c="61" xlink:href="#MJX-2-TEX-N-61" transform="translate(2195,0)"></use><use data-c="6E" xlink:href="#MJX-2-TEX-N-6E" transform="translate(2695,0)"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(13055,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="7C" xlink:href="#MJX-2-TEX-N-7C"></use></g></g><g data-mml-node="mo" transform="translate(13333,0)"><use data-c="29" xlink:href="#MJX-2-TEX-N-29"></use></g></g></g></svg></mjx-container></li></ol><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨MADï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨MADï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨MADï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨MADï¼Ÿ</h2><ol><li><p><strong>ç¨³å¥æ€§</strong>ï¼šMADæ˜¯ä¸€ä¸ª<strong>ç¨³å¥ç»Ÿè®¡é‡</strong>ï¼Œæ„å‘³ç€å®ƒå¯¹å¼‚å¸¸å€¼ï¼ˆoutliersï¼‰ä¸æ•æ„Ÿã€‚åœ¨æ•°æ®ä¸­å­˜åœ¨å¼‚å¸¸å€¼æ—¶ï¼Œæ ‡å‡†å·®å’Œæ–¹å·®ç­‰ç»Ÿè®¡é‡å¯èƒ½ä¼šå—åˆ°æžå¤§å½±å“ï¼Œè€ŒMADç›¸å¯¹æ›´åŠ ç¨³å®šã€‚</p></li><li><p><strong>å¯¹å¼‚å¸¸å€¼çš„æ•æ„Ÿåº¦ä½Ž</strong>ï¼šå¦‚æžœæ•°æ®ä¸­æœ‰æžç«¯å€¼ï¼Œæ ‡å‡†å·®ä¼šè¢«è¿™äº›å¼‚å¸¸å€¼æ‹‰å¤§ï¼Œä»Žè€Œå½±å“åˆ†æ•£åº¦çš„åº¦é‡ï¼›è€ŒMADé€šè¿‡ä½¿ç”¨ä¸­ä½æ•°æ¥å‡å°‘äº†è¿™ç§å½±å“ï¼Œä½¿å…¶æ›´åŠ é€‚ç”¨äºŽä¸å¯¹ç§°æˆ–æœ‰ååˆ†å¸ƒçš„æ•°æ®ã€‚</p></li><li><p><strong>é€‚ç”¨äºŽéžæ­£æ€åˆ†å¸ƒ</strong>ï¼šæ ‡å‡†å·®çš„å‡è®¾æ˜¯æ•°æ®åˆ†å¸ƒè¿‘ä¼¼æ­£æ€ï¼Œè€ŒMADä¸ä¾èµ–äºŽæ•°æ®åˆ†å¸ƒï¼Œå› æ­¤å®ƒèƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†éžæ­£æ€æˆ–åæ€æ•°æ®ã€‚</p></li></ol><h2 id="Pythonç¤ºä¾‹"><a href="#Pythonç¤ºä¾‹" class="headerlink" title="Pythonç¤ºä¾‹"></a>Pythonç¤ºä¾‹</h2><p>è¿˜æ˜¯ä»¥å­¦ç”Ÿçš„æˆç»©æ¥ä¸¾ä¾‹ï¼Œå‡è®¾æœ‰ä¸€ç»„æ•°æ®é›†å¦‚ä¸‹ï¼Œæˆ‘ä»¬è¦è®¡ç®—MADçš„å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡è®¾æœ‰ä¸€ç»„æ•°æ®é›†</span></span><br><span class="line">data = [<span class="number">80</span>, <span class="number">85</span>, <span class="number">90</span>, <span class="number">92</span>, <span class="number">85</span>, <span class="number">88</span>, <span class="number">75</span>, <span class="number">78</span>, <span class="number">92</span>, <span class="number">95</span>, <span class="number">100</span>, <span class="number">85</span>, <span class="number">92</span>, <span class="number">88</span>, <span class="number">85</span>, <span class="number">200</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—ä¸­ä½æ•°</span></span><br><span class="line">median = np.median(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Median:&quot;</span>, median)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—æ¯ä¸ªæ•°æ®ç‚¹çš„ç»å¯¹åå·®</span></span><br><span class="line">absolute_deviation = np.<span class="built_in">abs</span>(data - median)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Absolute Deviation:&quot;</span>, absolute_deviation)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—ç»å¯¹åå·®çš„ä¸­ä½æ•°</span></span><br><span class="line">mad = np.median(absolute_deviation)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;MAD:&quot;</span>, mad)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æžœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Median: 88.0</span><br><span class="line">Absolute Deviation: [8 3 2 4 3 0 13 10 4 7 12 3 4 0 3 112]</span><br><span class="line">MAD: 4.0</span><br></pre></td></tr></table></figure><h2 id="MADçš„åº”ç”¨"><a href="#MADçš„åº”ç”¨" class="headerlink" title="MADçš„åº”ç”¨"></a>MADçš„åº”ç”¨</h2><ol><li><p><strong>å¼‚å¸¸å€¼æ£€æµ‹</strong>ï¼šMADé€šå¸¸ç”¨äºŽå¼‚å¸¸å€¼æ£€æµ‹ã€‚å½“æ•°æ®ç‚¹çš„ç»å¯¹åå·®å¤§äºŽä¸€å®šå€æ•°çš„MADæ—¶ï¼Œé€šå¸¸å¯ä»¥è®¤ä¸ºè¯¥æ•°æ®ç‚¹æ˜¯ä¸€ä¸ªå¼‚å¸¸å€¼ã€‚æ¯”å¦‚ï¼Œå¦‚æžœæŸä¸ªæ•°æ®ç‚¹çš„ç»å¯¹åå·®å¤§äºŽ3å€MADï¼Œå°±å¯ä»¥è®¤ä¸ºå®ƒæ˜¯å¼‚å¸¸å€¼ã€‚</p></li><li><p><strong>ç¨³å¥çš„æ ‡å‡†å·®æ›¿ä»£å“</strong>ï¼šåœ¨æ•°æ®åˆ†æžä¸­ï¼Œå¦‚æžœæ‹…å¿ƒæ•°æ®ä¸­æœ‰å¼‚å¸¸å€¼ï¼Œä½¿ç”¨MADå¯ä»¥ä½œä¸ºæ ‡å‡†å·®çš„æ›¿ä»£å“æ¥è¡¡é‡æ•°æ®çš„æ³¢åŠ¨æ€§å’Œç¦»æ•£ç¨‹åº¦ã€‚</p></li><li><p><strong>æ•°æ®é¢„å¤„ç†</strong>ï¼šåœ¨æœºå™¨å­¦ä¹ å’Œç»Ÿè®¡å»ºæ¨¡ä¸­ï¼Œä½¿ç”¨MADå¯ä»¥å¸®åŠ©å‘çŽ°å¹¶å‰”é™¤å¼‚å¸¸æ•°æ®ï¼Œé¿å…å®ƒä»¬å¯¹æ¨¡åž‹è®­ç»ƒäº§ç”Ÿè´Ÿé¢å½±å“ã€‚</p></li><li><p><strong>å›žå½’åˆ†æžå’Œå¥å£®ç»Ÿè®¡</strong>ï¼šMADä¹Ÿå¸¸å¸¸åº”ç”¨äºŽå¥å£®å›žå½’åˆ†æžä¸­ï¼Œç”¨äºŽå¤„ç†æ•°æ®ä¸­çš„å¼‚å¸¸ç‚¹ï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®é›†å«æœ‰æžç«¯å€¼æˆ–å™ªå£°æ—¶ã€‚</p></li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><strong>Median Absolute Deviation (MAD)</strong> æ˜¯ä¸€ç§é€šè¿‡ä¸­ä½æ•°è¡¡é‡æ•°æ®ç¦»æ•£ç¨‹åº¦çš„æ–¹æ³•ï¼Œå®ƒå¯¹å¼‚å¸¸å€¼çš„æŠµæŠ—åŠ›è¾ƒå¼ºï¼Œé€‚ç”¨äºŽå«æœ‰å™ªå£°å’Œå¼‚å¸¸å€¼çš„æ•°æ®ã€‚ç›¸æ¯”äºŽæ ‡å‡†å·®ï¼ŒMADèƒ½å¤Ÿæä¾›æ›´ä¸ºç¨³å¥çš„åˆ†æ•£åº¦åº¦é‡ï¼Œå¹¿æ³›åº”ç”¨äºŽå¼‚å¸¸å€¼æ£€æµ‹ã€ç¨³å¥å›žå½’åˆ†æžå’Œæ•°æ®é¢„å¤„ç†ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Data Analysis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Data Analysis </tag>
            
            <tag> Math </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç†è§£æ•°æ®åˆ†æžä¸­çš„å››åˆ†ä½æ•° (Quartile Method)</title>
      <link href="/2020/10/09/data-analysis-quartile/"/>
      <url>/2020/10/09/data-analysis-quartile/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æ•°æ®åˆ†æžä¸­ï¼Œç†è§£æ•°æ®çš„åˆ†å¸ƒç‰¹å¾è‡³å…³é‡è¦ã€‚<code>å››åˆ†ä½æ³•ï¼ˆQuartile Methodï¼‰</code>æ˜¯åˆ†æžæ•°æ®åˆ†å¸ƒçš„ä¸€ç§åŸºç¡€æ–¹æ³•ï¼Œå®ƒé€šè¿‡å°†æ•°æ®é›†åˆ’åˆ†ä¸ºå››ä¸ªç›¸ç­‰çš„éƒ¨åˆ†ï¼Œå¸®åŠ©æˆ‘ä»¬æ­ç¤ºæ•°æ®çš„é›†ä¸­è¶‹åŠ¿å’Œç¦»æ•£ç¨‹åº¦ã€‚å››åˆ†ä½æ³•ç‰¹åˆ«é€‚åˆå¤„ç†å¼‚å¸¸å€¼å’Œéžå¯¹ç§°åˆ†å¸ƒçš„æ•°æ®é›†ã€‚</p><p>æœ¬æ–‡å°†æ·±å…¥ä»‹ç»å››åˆ†ä½æ³•çš„æ ¸å¿ƒæ¦‚å¿µï¼šç¬¬ä¸€å››åˆ†ä½æ•° (Q1)ã€ç¬¬äºŒå››åˆ†ä½æ•° (Q2)ã€ç¬¬ä¸‰å››åˆ†ä½æ•° (Q3)ã€å››åˆ†ä½è· (IQR)ï¼Œå¹¶é€šè¿‡ Python ä»£ç ç¤ºä¾‹è¯´æ˜Žå¦‚ä½•è®¡ç®—è¿™äº›ç»Ÿè®¡é‡ï¼ŒåŒæ—¶å±•ç¤ºå¦‚ä½•é€šè¿‡ç®±åž‹å›¾å¯è§†åŒ–è¿™äº›æ•°æ®ç‰¹å¾ã€‚</p><h2 id="å››åˆ†ä½æ•°-Quartile"><a href="#å››åˆ†ä½æ•°-Quartile" class="headerlink" title="å››åˆ†ä½æ•° (Quartile)"></a>å››åˆ†ä½æ•° (Quartile)</h2><p>å››åˆ†ä½æ•°æ˜¯å°†æŽ’åºåŽçš„æ•°æ®é›†åˆ’åˆ†ä¸ºå››ä¸ªç›¸ç­‰çš„éƒ¨ã€‚å…·ä½“å¦‚ä¸‹:</p><p><strong>ç¬¬ä¸€å››åˆ†ä½æ•°</strong> (First Quartile, Q1)ï¼šæ•°æ®é›†ä¸­çš„ç¬¬ 25% ä½ç½®ï¼Œè¡¨ç¤ºæ•°æ®ä¸­æœ‰ 25% çš„æ•°æ®å°äºŽ Q1ã€‚å®ƒæ˜¯æ•°æ®çš„ç¬¬ 25 ç™¾åˆ†ä½æ•°ã€‚</p><p><strong>ç¬¬äºŒå››åˆ†ä½æ•°</strong> (Second Quartile, Q2)ï¼šæ•°æ®é›†çš„ä¸­ä½æ•°ï¼Œè¡¨ç¤º 50% çš„æ•°æ®å°äºŽ Q2ï¼Œ50% çš„æ•°æ®å¤§äºŽ Q2ï¼Œä¹Ÿå«æ•°æ®çš„ç¬¬ 50 ç™¾åˆ†ä½æ•°ã€‚</p><p><strong>ç¬¬ä¸‰å››åˆ†ä½æ•°</strong> (Third Quartile, Q3)ï¼šæ•°æ®é›†ä¸­çš„ç¬¬ 75% ä½ç½®ï¼Œè¡¨ç¤ºæ•°æ®ä¸­æœ‰ 75% çš„æ•°æ®å°äºŽ Q3ã€‚</p><p><strong>å››åˆ†ä½è·</strong> (Interquartile Range, IQR)ï¼Œå®ƒæ˜¯ Q3 å’Œ Q1 ä¹‹é—´çš„å·®å€¼ï¼Œç”¨æ¥è¡¡é‡æ•°æ®çš„åˆ†æ•£ç¨‹åº¦ï¼š</p><blockquote><p>IQR &#x3D; Q3 - Q1</p></blockquote><p>å››åˆ†ä½è·å¯¹äºŽè¯†åˆ«å¼‚å¸¸å€¼éžå¸¸æœ‰å¸®åŠ©ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ¤æ–­å“ªäº›æ•°æ®ç‚¹å¯èƒ½æ˜¯æžç«¯å€¼ã€‚</p><p>æ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹å­¦ç”Ÿæˆç»©åˆ†æ•°çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">80, 85, 90, 92, 85, 88, 75, 78, 92, 95, 100, 85, 92, 88, 85, 200</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨Pythonè®¡ç®—å››åˆ†ä½æ•°å’Œå››åˆ†ä½è·ï¼Œ Python ä¸­çš„<code>numpy</code>åº“æä¾›äº† <code>percentile</code> å‡½æ•°æ¥è®¡ç®—å››åˆ†ä½æ•°ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">data = [<span class="number">80</span>, <span class="number">85</span>, <span class="number">90</span>, <span class="number">92</span>, <span class="number">85</span>, <span class="number">88</span>, <span class="number">75</span>, <span class="number">78</span>, <span class="number">92</span>, <span class="number">95</span>, <span class="number">100</span>, <span class="number">85</span>, <span class="number">92</span>, <span class="number">88</span>, <span class="number">85</span>, <span class="number">200</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—ç¬¬ä¸€å››åˆ†ä½æ•°</span></span><br><span class="line">Q1 = np.percentile(data, <span class="number">25</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Q1 = <span class="subst">&#123;Q1&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—ç¬¬äºŒå››åˆ†ä½æ•°,ç¬¬äºŒå››åˆ†ä½æ•°å°±æ˜¯ä¸­ä½æ•°,ä¹Ÿå¯ä»¥ä½¿ç”¨ `np.median(data)`</span></span><br><span class="line">Q2 = np.percentile(data, <span class="number">50</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Q2 = <span class="subst">&#123;Q2&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—ç¬¬ä¸‰å››åˆ†ä½æ•°</span></span><br><span class="line">Q3 = np.percentile(data, <span class="number">75</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Q3 = <span class="subst">&#123;Q3&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—å››åˆ†ä½è·</span></span><br><span class="line">IQR = Q3 - Q1</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;IQR = <span class="subst">&#123;IQR&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æžœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Q1 = 85.0</span><br><span class="line">Q2 = 88.0</span><br><span class="line">Q3 = 92.0</span><br><span class="line">IQR = 7.0</span><br></pre></td></tr></table></figure><h3 id="å››åˆ†ä½æ•°çš„åº”ç”¨"><a href="#å››åˆ†ä½æ•°çš„åº”ç”¨" class="headerlink" title="å››åˆ†ä½æ•°çš„åº”ç”¨"></a>å››åˆ†ä½æ•°çš„åº”ç”¨</h3><h4 id="æ•°æ®åˆ†å¸ƒåˆ†æž"><a href="#æ•°æ®åˆ†å¸ƒåˆ†æž" class="headerlink" title="æ•°æ®åˆ†å¸ƒåˆ†æž"></a>æ•°æ®åˆ†å¸ƒåˆ†æž</h4><p>å››åˆ†ä½æ•°èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿäº†è§£æ•°æ®çš„åˆ†å¸ƒæƒ…å†µã€‚å¯¹äºŽä¸€äº›<strong>éžæ­£æ€åˆ†å¸ƒ</strong>çš„å¤æ‚æ•°æ®é›†ï¼Œå››åˆ†ä½æ•°æ¯”å‡å€¼å’Œæ ‡å‡†å·®æ›´èƒ½å‡†ç¡®åœ°åæ˜ æ•°æ®çš„çœŸå®žæƒ…å†µã€‚</p><h4 id="è¯†åˆ«å¼‚å¸¸å€¼"><a href="#è¯†åˆ«å¼‚å¸¸å€¼" class="headerlink" title="è¯†åˆ«å¼‚å¸¸å€¼"></a>è¯†åˆ«å¼‚å¸¸å€¼</h4><p>é€šè¿‡è®¡ç®— IQRï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä»¥ä¸‹è§„åˆ™è¯†åˆ«å¼‚å¸¸å€¼ï¼š</p><blockquote><p>å¦‚æžœæ•°æ®å°äºŽ <strong>Q1 âˆ’ 1.5 x IQR</strong>ï¼Œåˆ™è§†ä¸ºä½ŽäºŽæ­£å¸¸èŒƒå›´çš„å¼‚å¸¸å€¼ã€‚<br>å¦‚æžœæ•°æ®å¤§äºŽ <strong>Q3 + 1.5 Ã— IQR</strong>ï¼Œåˆ™è§†ä¸ºé«˜äºŽæ­£å¸¸èŒƒå›´çš„å¼‚å¸¸å€¼ã€‚</p></blockquote><p>ä¸‹é¢ä½¿ç”¨è¿™ä¸ªæ–¹å¼æ¥æ‰¾å‡ºä¸Šé¢å­¦ç”Ÿæˆç»©ä¸­çš„å¼‚å¸¸å€¼, <code>Python</code>ä»£ç å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®—å¼‚å¸¸å€¼</span></span><br><span class="line">lower_bound = Q1 - <span class="number">1.5</span> * IQR</span><br><span class="line">upper_bound = Q3 + <span class="number">1.5</span> * IQR</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¾å‡ºå¼‚å¸¸å€¼</span></span><br><span class="line">outliers = [x <span class="keyword">for</span> x <span class="keyword">in</span> data <span class="keyword">if</span> x &lt; lower_bound <span class="keyword">or</span> x &gt; upper_bound]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;å¼‚å¸¸å€¼ (Outliers): <span class="subst">&#123;outliers&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æžœå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¼‚å¸¸å€¼ (Outliers): [200]</span><br></pre></td></tr></table></figure><h4 id="æ•°æ®å¯è§†åŒ–"><a href="#æ•°æ®å¯è§†åŒ–" class="headerlink" title="æ•°æ®å¯è§†åŒ–"></a>æ•°æ®å¯è§†åŒ–</h4><p><code>ç®±åž‹å›¾ï¼ˆBoxplotï¼‰</code>æ˜¯ä¸€ç§é€šè¿‡å±•ç¤ºå››åˆ†ä½æ•°å’Œæ•°æ®åˆ†å¸ƒçš„å›¾å½¢åŒ–å·¥å…·ã€‚å®ƒèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿè¯†åˆ«æ•°æ®çš„é›†ä¸­è¶‹åŠ¿ã€åˆ†æ•£ç¨‹åº¦ä»¥åŠæ½œåœ¨çš„å¼‚å¸¸å€¼ã€‚</p><h2 id="ç®±åž‹å›¾-BoxPlot"><a href="#ç®±åž‹å›¾-BoxPlot" class="headerlink" title="ç®±åž‹å›¾ (BoxPlot)"></a>ç®±åž‹å›¾ (BoxPlot)</h2><p><code>ç®±åž‹å›¾</code>æ˜¯ä¸€ç§å¸¸ç”¨çš„å›¾è¡¨ï¼Œå®ƒèƒ½å¤Ÿç›´è§‚åœ°å‘ˆçŽ°æ•°æ®åˆ†å¸ƒçš„å½¢æ€ï¼Œæ˜¯åŸºäºŽå››åˆ†ä½æ³•çš„ä¸€ç§æœ‰æ•ˆå¯è§†åŒ–æ–¹å¼ã€‚å¯è§†åŒ–å››åˆ†ä½æ³•éœ€è¦ä½¿ç”¨Pythonçš„ <code>matplotlib</code> åº“ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»˜åˆ¶ç®±åž‹å›¾</span></span><br><span class="line">plt.boxplot(data)</span><br><span class="line">plt.title(<span class="string">&#x27;Student Score Boxplot&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;data&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Score&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>plt.boxplot()</code>å‡½æ•°ç»˜åˆ¶ç®±åž‹å›¾ï¼Œå®ƒä¼šè‡ªåŠ¨è®¡ç®—å¹¶æ˜¾ç¤ºæ•°æ®çš„å››åˆ†ä½æ•°ã€å¼‚å¸¸å€¼ä»¥åŠæ•°æ®çš„åˆ†å¸ƒæƒ…å†µã€‚</p><p>è¾“å‡ºç»“æžœå¦‚ä¸‹ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/data-analysis/student-score-boxplot.png" class="lazyload placeholder" data-srcset="/assets/images/data-analysis/student-score-boxplot.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>ä¸Šé¢çš„ç®±åž‹å›¾çš„å†…å®¹åŒ…æ‹¬å¦‚ä¸‹ï¼š</p><p><strong>ç®±ä½“</strong>ï¼šè¡¨ç¤ºä»Ž Q1 åˆ° Q3 çš„èŒƒå›´ï¼Œå³æ•°æ®ä¸­ 50% çš„å€¼ã€‚<br><strong>ä¸­ä½çº¿</strong>ï¼šç®±ä½“å†…çš„çº¿è¡¨ç¤º Q2ï¼ˆä¸­ä½æ•°ï¼‰ï¼Œå³æ•°æ®çš„ä¸­é—´å€¼ã€‚<br><strong>é¡»</strong>ï¼šç®±ä½“å¤–éƒ¨çš„çº¿è¡¨ç¤ºæ•°æ®çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼ŒæŽ’é™¤äº†å¼‚å¸¸å€¼ã€‚<br><strong>å¼‚å¸¸å€¼</strong>ï¼šä»»ä½•è¶…å‡º Q1âˆ’1.5Ã—IQR æˆ– Q3+1.5Ã—IQR èŒƒå›´çš„æ•°æ®ç‚¹å°†æ˜¾ç¤ºä¸ºå•ç‹¬çš„ç‚¹ã€‚</p><p>æ‰€ä»¥ä»Žä¸Šé¢çš„ç®±åž‹å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå­¦ç”Ÿçš„æˆç»©åˆ†å¸ƒéžå¸¸é›†ä¸­ï¼Œæ•°æ®é›†ä¸­ä½æ•°ä¸º 88ï¼Œå››åˆ†ä½æ•°åˆ†åˆ«ä¸º 85 å’Œ 92ï¼ŒIQR ä¸º 7ã€‚å¹¶ä¸”å¼‚å¸¸å€¼æ˜¯200åˆ†ï¼Œå®ƒä½äºŽ Q3+1.5Ã—IQR ä¹‹å¤–ï¼Œå› æ­¤å¯ä»¥è§†ä¸ºå¼‚å¸¸å€¼ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ¦‚æ‹¬ä¸‹æ¥å°±æ˜¯ï¼š</p><ol><li>å››åˆ†ä½æ³•æ˜¯åˆ†æžæ•°æ®åˆ†å¸ƒçš„ä¸€ç§åŸºç¡€æ–¹æ³•ï¼Œå®ƒé€šè¿‡å°†æ•°æ®é›†åˆ’åˆ†ä¸ºå››ä¸ªç›¸ç­‰çš„éƒ¨åˆ†ï¼Œå¸®åŠ©æˆ‘ä»¬æ­ç¤ºæ•°æ®çš„é›†ä¸­è¶‹åŠ¿å’Œç¦»æ•£ç¨‹åº¦ã€‚</li><li>å››åˆ†ä½æ•°æ˜¯å°†æŽ’åºåŽçš„æ•°æ®é›†åˆ’åˆ†ä¸ºå››ä¸ªç›¸ç­‰çš„éƒ¨ã€‚</li><li>å››åˆ†ä½æ•°èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿäº†è§£æ•°æ®çš„åˆ†å¸ƒæƒ…å†µã€‚å¯¹äºŽä¸€äº›éžæ­£æ€åˆ†å¸ƒçš„å¤æ‚æ•°æ®é›†ï¼Œå››åˆ†ä½æ•°æ¯”å‡å€¼å’Œæ ‡å‡†å·®æ›´èƒ½å‡†ç¡®åœ°åæ˜ æ•°æ®çš„çœŸå®žæƒ…å†µã€‚</li><li>ç®±åž‹å›¾æ˜¯ä¸€ç§å¸¸ç”¨çš„å›¾è¡¨ï¼Œå®ƒèƒ½å¤Ÿç›´è§‚åœ°å‘ˆçŽ°æ•°æ®åˆ†å¸ƒçš„å½¢æ€ï¼Œæ˜¯åŸºäºŽå››åˆ†ä½æ³•çš„ä¸€ç§æœ‰æ•ˆå¯è§†åŒ–æ–¹å¼ã€‚</li><li>ç®±åž‹å›¾èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿè¯†åˆ«æ•°æ®çš„é›†ä¸­è¶‹åŠ¿ã€åˆ†æ•£ç¨‹åº¦ä»¥åŠæ½œåœ¨çš„å¼‚å¸¸å€¼ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> Data Analysis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Data Analysis </tag>
            
            <tag> Math </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç†è§£æ•°æ®åˆ†æžä¸­çš„Z-scoreï¼ˆæ ‡å‡†åˆ†æ•°ï¼‰</title>
      <link href="/2020/09/18/data-analysis-z-score-for-outliers/"/>
      <url>/2020/09/18/data-analysis-z-score-for-outliers/</url>
      
        <content type="html"><![CDATA[<h1 id="Z-scoreï¼ˆæ ‡å‡†åˆ†æ•°ï¼‰"><a href="#Z-scoreï¼ˆæ ‡å‡†åˆ†æ•°ï¼‰" class="headerlink" title="Z-scoreï¼ˆæ ‡å‡†åˆ†æ•°ï¼‰"></a>Z-scoreï¼ˆæ ‡å‡†åˆ†æ•°ï¼‰</h1><p><strong>Z-score</strong>ï¼ˆæ ‡å‡†åˆ†æ•°ï¼‰æ˜¯æ•°æ®åˆ†æžä¸­å¸¸ç”¨çš„ä¸€ä¸ªæ ‡å‡†åŒ–æŒ‡æ ‡ï¼Œç”¨äºŽè¡¡é‡æŸä¸ªæ•°æ®ç‚¹ä¸Žå…¶æ‰€åœ¨æ•°æ®é›†çš„å¹³å‡å€¼ä¹‹é—´çš„åç¦»ç¨‹åº¦ã€‚å…·ä½“è€Œè¨€ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªæ•°æ®ç‚¹è·ç¦»æ•°æ®é›†å‡å€¼çš„æ ‡å‡†å·®æ•°å€¼ã€‚Z-score è®¡ç®—çš„åŸºæœ¬åŽŸç†æ˜¯å°†æ•°æ®ç‚¹è½¬åŒ–ä¸ºæ ‡å‡†åŒ–å€¼ï¼Œä»Žè€Œä¾¿äºŽæ¯”è¾ƒä¸åŒæ•°æ®é›†ä¸­çš„æ•°æ®ç‚¹ã€‚</p><h2 id="Z-scoreçš„è®¡ç®—å…¬å¼"><a href="#Z-scoreçš„è®¡ç®—å…¬å¼" class="headerlink" title="Z-scoreçš„è®¡ç®—å…¬å¼"></a>Z-scoreçš„è®¡ç®—å…¬å¼</h2><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.798ex;" xmlns="http://www.w3.org/2000/svg" width="9.221ex" height="3.006ex" role="img" focusable="false" viewBox="0 -975.7 4075.5 1328.5" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-2-TEX-I-1D44D" d="M58 8Q58 23 64 35Q64 36 329 334T596 635L586 637Q575 637 512 637H500H476Q442 637 420 635T365 624T311 598T266 548T228 469Q227 466 226 463T224 458T223 453T222 450L221 448Q218 443 202 443Q185 443 182 453L214 561Q228 606 241 651Q249 679 253 681Q256 683 487 683H718Q723 678 723 675Q723 673 717 649Q189 54 188 52L185 49H274Q369 50 377 51Q452 60 500 100T579 247Q587 272 590 277T603 282H607Q628 282 628 271Q547 5 541 2Q538 0 300 0H124Q58 0 58 8Z"></path><path id="MJX-2-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-2-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path><path id="MJX-2-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-2-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path><path id="MJX-2-TEX-I-1D70E" d="M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D44D" xlink:href="#MJX-2-TEX-I-1D44D"></use></g><g data-mml-node="mo" transform="translate(1000.8,0)"><use data-c="3D" xlink:href="#MJX-2-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(2056.6,0)"><g data-mml-node="mrow" transform="translate(220,492.7) scale(0.707)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-2-TEX-I-1D44B"></use></g><g data-mml-node="mo" transform="translate(852,0)"><use data-c="2212" xlink:href="#MJX-2-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1630,0)"><use data-c="1D707" xlink:href="#MJX-2-TEX-I-1D707"></use></g></g><g data-mml-node="mi" transform="translate(807.6,-345) scale(0.707)"><use data-c="1D70E" xlink:href="#MJX-2-TEX-I-1D70E"></use></g><rect width="1779" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container><p>å…¶ä¸­ï¼š</p><blockquote> <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.928ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 852 683" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-1-TEX-I-1D44B"></use></g></g></g></svg></mjx-container>ï¼šå•ä¸ªæ•°æ®ç‚¹çš„å€¼ã€‚</blockquote><blockquote> <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.489ex;" xmlns="http://www.w3.org/2000/svg" width="1.364ex" height="1.489ex" role="img" focusable="false" viewBox="0 -442 603 658" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D707" xlink:href="#MJX-1-TEX-I-1D707"></use></g></g></g></svg></mjx-container>ï¼šæ•°æ®é›†çš„å‡å€¼ï¼ˆå¹³å‡å€¼ï¼‰ã€‚</blockquote><blockquote> <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.292ex" height="1ex" role="img" focusable="false" viewBox="0 -431 571 442" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D70E" d="M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70E" xlink:href="#MJX-1-TEX-I-1D70E"></use></g></g></g></svg></mjx-container>ï¼šæ•°æ®é›†çš„æ ‡å‡†å·®ã€‚</blockquote><h3 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h3><ul><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.489ex;" xmlns="http://www.w3.org/2000/svg" width="6.058ex" height="2.034ex" role="img" focusable="false" viewBox="0 -683 2677.4 899" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path><path id="MJX-1-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-1-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-1-TEX-I-1D44B"></use></g><g data-mml-node="mo" transform="translate(1074.2,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(2074.4,0)"><use data-c="1D707" xlink:href="#MJX-1-TEX-I-1D707"></use></g></g></g></svg></mjx-container>ï¼šè¡¨ç¤ºæ•°æ®ç‚¹ <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.928ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 852 683" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-1-TEX-I-1D44B"></use></g></g></g></svg></mjx-container> ä¸Žæ•°æ®é›†å‡å€¼ <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.489ex;" xmlns="http://www.w3.org/2000/svg" width="1.364ex" height="1.489ex" role="img" focusable="false" viewBox="0 -442 603 658" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D707" xlink:href="#MJX-1-TEX-I-1D707"></use></g></g></g></svg></mjx-container> çš„åå·®ï¼Œæˆ–ç§°ä¸ºè¯¥æ•°æ®ç‚¹ä¸Žå‡å€¼çš„å·®å¼‚ã€‚</li><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.292ex" height="1ex" role="img" focusable="false" viewBox="0 -431 571 442" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D70E" d="M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70E" xlink:href="#MJX-1-TEX-I-1D70E"></use></g></g></g></svg></mjx-container>ï¼šæ ‡å‡†å·®ï¼Œè¡¡é‡æ•°æ®é›†çš„ç¦»æ•£ç¨‹åº¦ã€‚æ ‡å‡†å·®è¶Šå¤§ï¼Œè¯´æ˜Žæ•°æ®ç‚¹ä¹‹é—´çš„å·®å¼‚è¶Šå¤§ï¼›æ ‡å‡†å·®è¶Šå°ï¼Œè¯´æ˜Žæ•°æ®ç‚¹ä¹‹é—´çš„å·®å¼‚è¶Šå°ã€‚</li></ul><h2 id="Z-score-çš„æ„ä¹‰"><a href="#Z-score-çš„æ„ä¹‰" class="headerlink" title="Z-score çš„æ„ä¹‰"></a>Z-score çš„æ„ä¹‰</h2><p>Z-score çš„æ„ä¹‰ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><strong>Z-score &#x3D; 0</strong>ï¼šè¡¨ç¤ºæ•°æ®ç‚¹ä¸Žå‡å€¼å®Œå…¨ä¸€è‡´ã€‚</li><li><strong>Z-score &gt; 0</strong>ï¼šè¡¨ç¤ºæ•°æ®ç‚¹å¤§äºŽå‡å€¼ï¼Œå³ä½äºŽå‡å€¼å³ä¾§ã€‚</li><li><strong>Z-score &lt; 0</strong>ï¼šè¡¨ç¤ºæ•°æ®ç‚¹å°äºŽå‡å€¼ï¼Œå³ä½äºŽå‡å€¼å·¦ä¾§ã€‚</li><li><strong>Z-score çš„ç»å¯¹å€¼è¾ƒå¤§</strong>ï¼šè¡¨ç¤ºæ•°æ®ç‚¹è·ç¦»å‡å€¼è¾ƒè¿œï¼Œç¦»ç¾¤ç‚¹çš„å¯èƒ½æ€§è¾ƒå¤§ï¼›ä¾‹å¦‚ï¼Œ<span class='pbg danger'>Z-score å¤§äºŽ 3 æˆ–å°äºŽ -3 çš„æ•°æ®ç‚¹é€šå¸¸è¢«è®¤ä¸ºæ˜¯å¼‚å¸¸å€¼ã€‚</span></li></ul><h2 id="Z-score-çš„ä¸»è¦åº”ç”¨"><a href="#Z-score-çš„ä¸»è¦åº”ç”¨" class="headerlink" title="Z-score çš„ä¸»è¦åº”ç”¨"></a>Z-score çš„ä¸»è¦åº”ç”¨</h2><ol><li><p><strong>æ ‡å‡†åŒ–æ•°æ®</strong>ï¼šé€šè¿‡ Z-score å¯ä»¥å°†æ•°æ®æ ‡å‡†åŒ–ï¼Œä½¿å¾—ä¸åŒé‡çº²ã€ä¸åŒèŒƒå›´çš„æ•°æ®å…·æœ‰å¯æ¯”æ€§ã€‚ä¾‹å¦‚ï¼Œåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œè®¸å¤šç®—æ³•ï¼ˆå¦‚ KNNã€SVMï¼‰å¯¹æ•°æ®çš„å°ºåº¦æ•æ„Ÿï¼Œå› æ­¤éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ã€‚</p></li><li><p><strong>å¼‚å¸¸å€¼æ£€æµ‹</strong>ï¼šZ-score å¯ä»¥ç”¨æ¥è¯†åˆ«æ•°æ®ä¸­çš„å¼‚å¸¸å€¼ã€‚é€šå¸¸ï¼Œå½“ Z-score çš„ç»å¯¹å€¼å¤§äºŽ 3 æ—¶ï¼Œè®¤ä¸ºè¯¥æ•°æ®ç‚¹ä¸ºå¼‚å¸¸å€¼ï¼ˆç¦»ç¾¤ç‚¹ï¼‰ã€‚</p></li><li><p><strong>æ¯”è¾ƒä¸åŒæ•°æ®é›†</strong>ï¼šå¦‚æžœä¸¤ä¸ªæ•°æ®é›†å…·æœ‰ä¸åŒçš„å‡å€¼å’Œæ ‡å‡†å·®ï¼Œå¯ä»¥ä½¿ç”¨ Z-score å¯¹å®ƒä»¬è¿›è¡Œæ¯”è¾ƒï¼Œä¾¿äºŽåˆ¤æ–­å“ªä¸ªæ•°æ®ç‚¹åœ¨å…¶å„è‡ªæ•°æ®é›†ä¸­çš„ä½ç½®æ›´åŠ åç¦»å‡å€¼ã€‚</p></li></ol><h2 id="ä¸¾ä¸ªä¾‹å­"><a href="#ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«å­¦ç”Ÿæˆç»©çš„æ•°æ®é›† [80, 85, 90, 92, 85, 88, 75, 78, 92, 95, 100, 85, 92, 88, 85, 200]ã€‚æˆ‘ä»¬å¸Œæœ›è®¡ç®—æ•°æ®ç‚¹ 200 çš„ Z-scoreï¼Œå¹¶åˆ¤æ–­å®ƒæ˜¯å¦ä¸ºå¼‚å¸¸å€¼ã€‚</p><h3 id="æ•°å­¦è®¡ç®—å…¬å¼"><a href="#æ•°å­¦è®¡ç®—å…¬å¼" class="headerlink" title="æ•°å­¦è®¡ç®—å…¬å¼"></a>æ•°å­¦è®¡ç®—å…¬å¼</h3><ol><li><p><strong>è®¡ç®—å‡å€¼</strong> <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.489ex;" xmlns="http://www.w3.org/2000/svg" width="1.364ex" height="1.489ex" role="img" focusable="false" viewBox="0 -442 603 658" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D707" xlink:href="#MJX-1-TEX-I-1D707"></use></g></g></g></svg></mjx-container>ï¼š</p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.816ex;" xmlns="http://www.w3.org/2000/svg" width="67.757ex" height="2.798ex" role="img" focusable="false" viewBox="0 -876 29948.6 1236.5" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-1-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-1-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-1-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-1-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-1-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-1-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-1-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-1-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D707" xlink:href="#MJX-1-TEX-I-1D707"></use></g><g data-mml-node="mo" transform="translate(880.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(1936.6,0)"><g data-mml-node="mrow" transform="translate(220,398) scale(0.707)"><g data-mml-node="mn"><use data-c="38" xlink:href="#MJX-1-TEX-N-38"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(1000,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(1778,0)"><use data-c="38" xlink:href="#MJX-1-TEX-N-38"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(2778,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(3556,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(4556,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(5334,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="32" xlink:href="#MJX-1-TEX-N-32" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(6334,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(7112,0)"><use data-c="38" xlink:href="#MJX-1-TEX-N-38"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(8112,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(8890,0)"><use data-c="38" xlink:href="#MJX-1-TEX-N-38"></use><use data-c="38" xlink:href="#MJX-1-TEX-N-38" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(9890,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(10668,0)"><use data-c="37" xlink:href="#MJX-1-TEX-N-37"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(11668,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(12446,0)"><use data-c="37" xlink:href="#MJX-1-TEX-N-37"></use><use data-c="38" xlink:href="#MJX-1-TEX-N-38" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(13446,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(14224,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="32" xlink:href="#MJX-1-TEX-N-32" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(15224,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(16002,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(17002,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(17780,0)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(1000,0)"></use></g><g data-mml-node="mo" transform="translate(19280,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(20058,0)"><use data-c="38" xlink:href="#MJX-1-TEX-N-38"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(21058,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(21836,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="32" xlink:href="#MJX-1-TEX-N-32" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(22836,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(23614,0)"><use data-c="38" xlink:href="#MJX-1-TEX-N-38"></use><use data-c="38" xlink:href="#MJX-1-TEX-N-38" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(24614,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(25392,0)"><use data-c="38" xlink:href="#MJX-1-TEX-N-38"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(26392,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(27170,0)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(1000,0)"></use></g></g><g data-mml-node="mn" transform="translate(10002.8,-345) scale(0.707)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use><use data-c="36" xlink:href="#MJX-1-TEX-N-36" transform="translate(500,0)"></use></g><rect width="20472.8" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(22927.1,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(23982.9,0)"><g data-mml-node="mn" transform="translate(220,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(500,0)"></use><use data-c="31" xlink:href="#MJX-1-TEX-N-31" transform="translate(1000,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(1500,0)"></use></g><g data-mml-node="mn" transform="translate(573.6,-345) scale(0.707)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use><use data-c="36" xlink:href="#MJX-1-TEX-N-36" transform="translate(500,0)"></use></g><rect width="1614.2" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(26114.9,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(27170.6,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="34" xlink:href="#MJX-1-TEX-N-34" transform="translate(500,0)"></use><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E" transform="translate(1000,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(1278,0)"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(1778,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(2278,0)"></use></g></g></g></svg></mjx-container></li><li><p><strong>è®¡ç®—æ ‡å‡†å·®</strong> <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.292ex" height="1ex" role="img" focusable="false" viewBox="0 -431 571 442" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D70E" d="M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70E" xlink:href="#MJX-1-TEX-I-1D70E"></use></g></g></g></svg></mjx-container>ï¼š<br>æ ‡å‡†å·®çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -1.09ex;" xmlns="http://www.w3.org/2000/svg" width="31.86ex" height="4.208ex" role="img" focusable="false" viewBox="0 -1378.2 14082.2 1860" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D70E" d="M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z"></path><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1-TEX-LO-221A" d="M1001 1150Q1017 1150 1020 1132Q1020 1127 741 244L460 -643Q453 -650 436 -650H424Q423 -647 423 -645T421 -640T419 -631T415 -617T408 -594T399 -560T385 -512T367 -448T343 -364T312 -259L203 119L138 41L111 67L212 188L264 248L472 -474L983 1140Q988 1150 1001 1150Z"></path><path id="MJX-1-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-1-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-1-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path><path id="MJX-1-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-1-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-1-TEX-N-22EF" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250ZM525 250Q525 274 542 292T585 310Q609 310 627 294T646 251Q646 226 629 208T586 190T543 207T525 250ZM972 250Q972 274 989 292T1032 310Q1056 310 1074 294T1093 251Q1093 226 1076 208T1033 190T990 207T972 250Z"></path><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70E" xlink:href="#MJX-1-TEX-I-1D70E"></use></g><g data-mml-node="mo" transform="translate(848.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="msqrt" transform="translate(1904.6,0)"><g transform="translate(1020,0)"><g data-mml-node="mfrac"><g data-mml-node="mrow" transform="translate(220,516.8) scale(0.707)"><g data-mml-node="mo"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"></use></g><g data-mml-node="msub" transform="translate(389,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-1-TEX-I-1D44B"></use></g><g data-mml-node="mn" transform="translate(861,-150) scale(0.707)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use></g></g><g data-mml-node="mo" transform="translate(1653.6,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(2431.6,0)"><use data-c="1D707" xlink:href="#MJX-1-TEX-I-1D707"></use></g><g data-mml-node="msup" transform="translate(3034.6,0)"><g data-mml-node="mo"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"></use></g><g data-mml-node="mn" transform="translate(422,289) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(3860.1,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(4638.1,0)"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"></use></g><g data-mml-node="msub" transform="translate(5027.1,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-1-TEX-I-1D44B"></use></g><g data-mml-node="mn" transform="translate(861,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(6291.7,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(7069.7,0)"><use data-c="1D707" xlink:href="#MJX-1-TEX-I-1D707"></use></g><g data-mml-node="msup" transform="translate(7672.7,0)"><g data-mml-node="mo"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"></use></g><g data-mml-node="mn" transform="translate(422,289) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(8498.2,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(9276.2,0)"><use data-c="22EF" xlink:href="#MJX-1-TEX-N-22EF"></use></g><g data-mml-node="mo" transform="translate(10448.2,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(11226.2,0)"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"></use></g><g data-mml-node="msub" transform="translate(11615.2,0)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-1-TEX-I-1D44B"></use></g><g data-mml-node="mi" transform="translate(861,-150) scale(0.707)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"></use></g></g><g data-mml-node="mo" transform="translate(12950.5,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(13728.5,0)"><use data-c="1D707" xlink:href="#MJX-1-TEX-I-1D707"></use></g><g data-mml-node="msup" transform="translate(14331.5,0)"><g data-mml-node="mo"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"></use></g><g data-mml-node="mn" transform="translate(422,289) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g></g></g><g data-mml-node="mi" transform="translate(5366.7,-345) scale(0.707)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"></use></g><rect width="10917.6" height="60" x="120" y="220"></rect></g></g><g data-mml-node="mo" transform="translate(0,168.2)"><use data-c="221A" xlink:href="#MJX-1-TEX-LO-221A"></use></g><rect width="11157.6" height="60" x="1020" y="1258.2"></rect></g></g></g></svg></mjx-container><p>ä»£å…¥æ•°æ®é›†è®¡ç®—ï¼š</p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -1.099ex;" xmlns="http://www.w3.org/2000/svg" width="75.933ex" height="4.208ex" role="img" focusable="false" viewBox="0 -1374.3 33562.5 1860" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D70E" d="M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z"></path><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1-TEX-LO-221A" d="M1001 1150Q1017 1150 1020 1132Q1020 1127 741 244L460 -643Q453 -650 436 -650H424Q423 -647 423 -645T421 -640T419 -631T415 -617T408 -594T399 -560T385 -512T367 -448T343 -364T312 -259L203 119L138 41L111 67L212 188L264 248L472 -474L983 1140Q988 1150 1001 1150Z"></path><path id="MJX-1-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-1-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-1-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-1-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-1-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path><path id="MJX-1-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-1-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-1-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-1-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-1-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-1-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-1-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-1-TEX-N-2248" d="M55 319Q55 360 72 393T114 444T163 472T205 482Q207 482 213 482T223 483Q262 483 296 468T393 413L443 381Q502 346 553 346Q609 346 649 375T694 454Q694 465 698 474T708 483Q722 483 722 452Q722 386 675 338T555 289Q514 289 468 310T388 357T308 404T224 426Q164 426 125 393T83 318Q81 289 69 289Q55 289 55 319ZM55 85Q55 126 72 159T114 210T163 238T205 248Q207 248 213 248T223 249Q262 249 296 234T393 179L443 147Q502 112 553 112Q609 112 649 141T694 220Q694 249 708 249T722 217Q722 153 675 104T555 55Q514 55 468 76T388 123T308 170T224 192Q164 192 125 159T83 84Q80 55 69 55Q55 55 55 85Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70E" xlink:href="#MJX-1-TEX-I-1D70E"></use></g><g data-mml-node="mo" transform="translate(848.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="msqrt" transform="translate(1904.6,0)"><g transform="translate(1020,0)"><g data-mml-node="mfrac"><g data-mml-node="mrow" transform="translate(220,516.8) scale(0.707)"><g data-mml-node="mo"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(389,0)"><use data-c="38" xlink:href="#MJX-1-TEX-N-38"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(1389,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2167,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="34" xlink:href="#MJX-1-TEX-N-34" transform="translate(500,0)"></use><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E" transform="translate(1000,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(1278,0)"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(1778,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(2278,0)"></use></g><g data-mml-node="msup" transform="translate(4945,0)"><g data-mml-node="mo"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"></use></g><g data-mml-node="mn" transform="translate(422,289) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(5770.6,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(6548.6,0)"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(6937.6,0)"><use data-c="38" xlink:href="#MJX-1-TEX-N-38"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(7937.6,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(8715.6,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="34" xlink:href="#MJX-1-TEX-N-34" transform="translate(500,0)"></use><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E" transform="translate(1000,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(1278,0)"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(1778,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(2278,0)"></use></g><g data-mml-node="msup" transform="translate(11493.6,0)"><g data-mml-node="mo"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"></use></g><g data-mml-node="mn" transform="translate(422,289) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(12319.1,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(13097.1,0)"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(13486.1,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(14486.1,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(15264.1,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="34" xlink:href="#MJX-1-TEX-N-34" transform="translate(500,0)"></use><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E" transform="translate(1000,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(1278,0)"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(1778,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(2278,0)"></use></g><g data-mml-node="msup" transform="translate(18042.1,0)"><g data-mml-node="mo"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"></use></g><g data-mml-node="mn" transform="translate(422,289) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(18867.7,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(19645.7,0)"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(20034.7,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="32" xlink:href="#MJX-1-TEX-N-32" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(21034.7,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(21812.7,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="34" xlink:href="#MJX-1-TEX-N-34" transform="translate(500,0)"></use><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E" transform="translate(1000,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(1278,0)"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(1778,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(2278,0)"></use></g><g data-mml-node="msup" transform="translate(24590.7,0)"><g data-mml-node="mo"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"></use></g><g data-mml-node="mn" transform="translate(422,289) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(25416.2,0)"><use data-c="2B" xlink:href="#MJX-1-TEX-N-2B"></use></g><g data-mml-node="mo" transform="translate(26194.2,0)"><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E"></use></g><g data-mml-node="mo" transform="translate(26472.2,0)"><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E"></use></g><g data-mml-node="mo" transform="translate(26750.2,0)"><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E"></use></g><g data-mml-node="mo" transform="translate(27028.2,0)"><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E"></use></g></g><g data-mml-node="mn" transform="translate(9520.7,-345) scale(0.707)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use><use data-c="36" xlink:href="#MJX-1-TEX-N-36" transform="translate(500,0)"></use></g><rect width="19508.4" height="60" x="120" y="220"></rect></g></g><g data-mml-node="mo" transform="translate(0,164.3)"><use data-c="221A" xlink:href="#MJX-1-TEX-LO-221A"></use></g><rect width="19748.4" height="60" x="1020" y="1254.3"></rect></g><g data-mml-node="mo" transform="translate(22950.7,0)"><g data-mml-node="text"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="text" transform="translate(778,0)"><use data-c="2248" xlink:href="#MJX-1-TEX-N-2248"></use></g></g><g data-mml-node="mn" transform="translate(24784.5,0)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(500,0)"></use><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E" transform="translate(1000,0)"></use><use data-c="39" xlink:href="#MJX-1-TEX-N-39" transform="translate(1278,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(1778,0)"></use><use data-c="39" xlink:href="#MJX-1-TEX-N-39" transform="translate(2278,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(2778,0)"></use><use data-c="31" xlink:href="#MJX-1-TEX-N-31" transform="translate(3278,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(3778,0)"></use><use data-c="31" xlink:href="#MJX-1-TEX-N-31" transform="translate(4278,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(4778,0)"></use><use data-c="39" xlink:href="#MJX-1-TEX-N-39" transform="translate(5278,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(5778,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(6278,0)"></use><use data-c="38" xlink:href="#MJX-1-TEX-N-38" transform="translate(6778,0)"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(7278,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(7778,0)"></use><use data-c="36" xlink:href="#MJX-1-TEX-N-36" transform="translate(8278,0)"></use></g></g></g></svg></mjx-container></li><li><p><strong>è®¡ç®— Z-score</strong>ï¼š</p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.816ex;" xmlns="http://www.w3.org/2000/svg" width="50.153ex" height="3.023ex" role="img" focusable="false" viewBox="0 -975.7 22167.6 1336.2" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-I-1D44D" d="M58 8Q58 23 64 35Q64 36 329 334T596 635L586 637Q575 637 512 637H500H476Q442 637 420 635T365 624T311 598T266 548T228 469Q227 466 226 463T224 458T223 453T222 450L221 448Q218 443 202 443Q185 443 182 453L214 561Q228 606 241 651Q249 679 253 681Q256 683 487 683H718Q723 678 723 675Q723 673 717 649Q189 54 188 52L185 49H274Q369 50 377 51Q452 60 500 100T579 247Q587 272 590 277T603 282H607Q628 282 628 271Q547 5 541 2Q538 0 300 0H124Q58 0 58 8Z"></path><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1-TEX-I-1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"></path><path id="MJX-1-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-1-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path><path id="MJX-1-TEX-I-1D70E" d="M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z"></path><path id="MJX-1-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-1-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-1-TEX-N-39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z"></path><path id="MJX-1-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-1-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-1-TEX-N-33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"></path><path id="MJX-1-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-1-TEX-N-35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z"></path><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-1-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D44D" xlink:href="#MJX-1-TEX-I-1D44D"></use></g><g data-mml-node="mo" transform="translate(1000.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(2056.6,0)"><g data-mml-node="mrow" transform="translate(220,492.7) scale(0.707)"><g data-mml-node="mi"><use data-c="1D44B" xlink:href="#MJX-1-TEX-I-1D44B"></use></g><g data-mml-node="mo" transform="translate(852,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1630,0)"><use data-c="1D707" xlink:href="#MJX-1-TEX-I-1D707"></use></g></g><g data-mml-node="mi" transform="translate(807.6,-345) scale(0.707)"><use data-c="1D70E" xlink:href="#MJX-1-TEX-I-1D70E"></use></g><rect width="1779" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(4353.3,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(5409.1,0)"><g data-mml-node="mrow" transform="translate(1535.9,398) scale(0.707)"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(500,0)"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(1000,0)"></use></g><g data-mml-node="mo" transform="translate(1500,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2278,0)"><use data-c="39" xlink:href="#MJX-1-TEX-N-39"></use><use data-c="34" xlink:href="#MJX-1-TEX-N-34" transform="translate(500,0)"></use><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E" transform="translate(1000,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(1278,0)"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(1778,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(2278,0)"></use></g></g><g data-mml-node="mn" transform="translate(220,-345) scale(0.707)"><use data-c="32" xlink:href="#MJX-1-TEX-N-32"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(500,0)"></use><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E" transform="translate(1000,0)"></use><use data-c="39" xlink:href="#MJX-1-TEX-N-39" transform="translate(1278,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(1778,0)"></use><use data-c="39" xlink:href="#MJX-1-TEX-N-39" transform="translate(2278,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(2778,0)"></use><use data-c="31" xlink:href="#MJX-1-TEX-N-31" transform="translate(3278,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(3778,0)"></use><use data-c="31" xlink:href="#MJX-1-TEX-N-31" transform="translate(4278,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(4778,0)"></use><use data-c="39" xlink:href="#MJX-1-TEX-N-39" transform="translate(5278,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(5778,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(6278,0)"></use><use data-c="38" xlink:href="#MJX-1-TEX-N-38" transform="translate(6778,0)"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(7278,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(7778,0)"></use><use data-c="36" xlink:href="#MJX-1-TEX-N-36" transform="translate(8278,0)"></use></g><rect width="6407" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(12333.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(13389.6,0)"><use data-c="33" xlink:href="#MJX-1-TEX-N-33"></use><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E" transform="translate(500,0)"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(778,0)"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(1278,0)"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(1778,0)"></use><use data-c="37" xlink:href="#MJX-1-TEX-N-37" transform="translate(2278,0)"></use><use data-c="38" xlink:href="#MJX-1-TEX-N-38" transform="translate(2778,0)"></use><use data-c="33" xlink:href="#MJX-1-TEX-N-33" transform="translate(3278,0)"></use><use data-c="39" xlink:href="#MJX-1-TEX-N-39" transform="translate(3778,0)"></use><use data-c="35" xlink:href="#MJX-1-TEX-N-35" transform="translate(4278,0)"></use><use data-c="30" xlink:href="#MJX-1-TEX-N-30" transform="translate(4778,0)"></use><use data-c="34" xlink:href="#MJX-1-TEX-N-34" transform="translate(5278,0)"></use><use data-c="31" xlink:href="#MJX-1-TEX-N-31" transform="translate(5778,0)"></use><use data-c="36" xlink:href="#MJX-1-TEX-N-36" transform="translate(6278,0)"></use><use data-c="32" xlink:href="#MJX-1-TEX-N-32" transform="translate(6778,0)"></use><use data-c="38" xlink:href="#MJX-1-TEX-N-38" transform="translate(7278,0)"></use><use data-c="34" xlink:href="#MJX-1-TEX-N-34" transform="translate(7778,0)"></use><use data-c="32" xlink:href="#MJX-1-TEX-N-32" transform="translate(8278,0)"></use></g></g></g></svg></mjx-container></li></ol><h3 id="Python-ä»£ç "><a href="#Python-ä»£ç " class="headerlink" title="Python ä»£ç "></a>Python ä»£ç </h3><p>åœ¨Pythonä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>numpy</code> å’Œ <code>scipy</code> åº“æ¥è®¡ç®— Z-scoreã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ•°æ®é›†ï¼šä¸€ç»„å­¦ç”Ÿæˆç»©ï¼Œå…¶ä¸­åŒ…æ‹¬å¼‚å¸¸å€¼200</span></span><br><span class="line">data = [<span class="number">80</span>, <span class="number">85</span>, <span class="number">90</span>, <span class="number">92</span>, <span class="number">85</span>, <span class="number">88</span>, <span class="number">75</span>, <span class="number">78</span>, <span class="number">92</span>, <span class="number">95</span>, <span class="number">100</span>, <span class="number">85</span>, <span class="number">92</span>, <span class="number">88</span>, <span class="number">85</span>, <span class="number">200</span>]</span><br></pre></td></tr></table></figure><p>è®¡ç®—æ•°æ®é›†çš„å‡å€¼å’Œæ ‡å‡†å·®å’ŒZ-scoreï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®—å‡å€¼</span></span><br><span class="line">mean = np.mean(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å‡å€¼ (Mean)ï¼š&quot;</span>, mean)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—æ ‡å‡†å·®</span></span><br><span class="line">std = np.std(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;æ ‡å‡†å·® (Standard Deviation):&quot;</span>, std)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®— Z-score</span></span><br><span class="line">z_scores = stats.zscore(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;200æ•°å€¼çš„Z-score:&quot;</span>, z_scores[-<span class="number">1</span>])</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å‡å€¼ (Mean): 94.375</span><br><span class="line">æ ‡å‡†å·® (Standard Deviation): 27.959513139538036</span><br><span class="line">200æ•°å€¼çš„Z-score: 3.7777839504162842</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œæ•°æ®ç‚¹ 200 çš„ Z-score ä¸º 3.7777839504162842ï¼ŒæŒ‰ç…§ Z-score çš„å®šä¹‰ï¼Œå®ƒä½äºŽæ•°æ®é›†çš„å³ä¾§ï¼Œè·ç¦»å‡å€¼è¾ƒè¿œ <code>ï¼ˆ Z-score å¤§äºŽ3æˆ–è€…å°äºŽ-3 ï¼‰</code>ï¼Œå› æ­¤è¢«è®¤ä¸ºæ˜¯å¼‚å¸¸å€¼ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>Z-score</code> æ˜¯è¡¡é‡æ•°æ®ç‚¹ç›¸å¯¹äºŽæ•°æ®é›†å¹³å‡æ°´å¹³åå·®ç¨‹åº¦çš„æ ‡å‡†åŒ–æŒ‡æ ‡ï¼Œå¹¿æ³›åº”ç”¨äºŽ<code>æ•°æ®é¢„å¤„ç†</code>ã€<code>å¼‚å¸¸å€¼æ£€æµ‹</code>ä»¥åŠ<code>ç»Ÿè®¡åˆ†æž</code>ç­‰é¢†åŸŸã€‚é€šè¿‡ Z-scoreï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸åŒè§„æ¨¡ã€ä¸åŒå•ä½çš„æ•°æ®è½¬æ¢ä¸ºç›¸åŒçš„æ ‡å‡†å°ºåº¦ï¼Œæ–¹ä¾¿è¿›è¡Œæ¯”è¾ƒå’Œè¿›ä¸€æ­¥åˆ†æžã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Data Analysis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Data Analysis </tag>
            
            <tag> Math </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯¦è§£æ•°æ®åˆ†æžä¸­çš„æ–¹å·®ï¼Œæ ‡å‡†å·®å’Œå¼‚å¸¸å€¼çš„ä½¿ç”¨</title>
      <link href="/2020/09/03/data-analysis-standard-deviation-variance-outliers/"/>
      <url>/2020/09/03/data-analysis-standard-deviation-variance-outliers/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æ•°æ®åˆ†æžä¸­ï¼Œ<code>æ–¹å·®ï¼ˆVarianceï¼‰</code>ã€<code>æ ‡å‡†å·®ï¼ˆStandard Deviationï¼‰</code>å’Œ<code>å¼‚å¸¸å€¼ï¼ˆOutliersï¼‰</code>æ˜¯åˆ†æžæ•°æ®åˆ†å¸ƒå’Œå˜å¼‚æ€§çš„é‡è¦ç»Ÿè®¡å·¥å…·ã€‚ç†è§£è¿™äº›æ¦‚å¿µï¼Œå¹¶èƒ½å¤Ÿæœ‰æ•ˆåœ°åº”ç”¨å®ƒä»¬ï¼Œå¯¹äºŽ<code>æ•°æ®æ¸…æ´—</code>ã€æŽ¢ç´¢æ€§æ•°æ®åˆ†æžï¼ˆEDAï¼‰ä»¥åŠ<code>æž„å»ºå‡†ç¡®çš„é¢„æµ‹æ¨¡åž‹</code>è‡³å…³é‡è¦ã€‚</p><h2 id="æ–¹å·®ï¼ˆVarianceï¼‰"><a href="#æ–¹å·®ï¼ˆVarianceï¼‰" class="headerlink" title="æ–¹å·®ï¼ˆVarianceï¼‰"></a>æ–¹å·®ï¼ˆVarianceï¼‰</h2><p>æ–¹å·®æ˜¯åæ˜ æ•°æ®é›†ä¸­å„æ•°æ®ç‚¹ä¸Žæ•°æ®å‡å€¼ä¹‹é—´å·®å¼‚çš„ä¸€ä¸ªé‡è¦æŒ‡æ ‡ã€‚å®ƒçš„å¤§å°å¯ä»¥ç”¨æ¥è¡¡é‡æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ã€‚å…·ä½“æ¥è¯´ï¼Œæ–¹å·®è¶Šå¤§ï¼Œæ•°æ®çš„å˜åŠ¨è¶Šå¤§ï¼Œåä¹‹åˆ™è¶Šå°ã€‚</p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.798ex;" xmlns="http://www.w3.org/2000/svg" width="28.177ex" height="2.755ex" role="img" focusable="false" viewBox="0 -864.9 12454.1 1217.7" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-3-TEX-N-56" d="M114 620Q113 621 110 624T107 627T103 630T98 632T91 634T80 635T67 636T48 637H19V683H28Q46 680 152 680Q273 680 294 683H305V637H284Q223 634 223 620Q223 618 313 372T404 126L490 358Q575 588 575 597Q575 616 554 626T508 637H503V683H512Q527 680 627 680Q718 680 724 683H730V637H723Q648 637 627 596Q627 595 515 291T401 -14Q396 -22 382 -22H374H367Q353 -22 348 -14Q346 -12 231 303Q114 617 114 620Z"></path><path id="MJX-3-TEX-N-61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z"></path><path id="MJX-3-TEX-N-72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z"></path><path id="MJX-3-TEX-N-69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z"></path><path id="MJX-3-TEX-N-6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-3-TEX-N-63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path><path id="MJX-3-TEX-N-65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z"></path><path id="MJX-3-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-3-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-3-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-3-TEX-SO-2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"></path><path id="MJX-3-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-3-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-3-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJX-3-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-3-TEX-I-1D707" d="M58 -216Q44 -216 34 -208T23 -186Q23 -176 96 116T173 414Q186 442 219 442Q231 441 239 435T249 423T251 413Q251 401 220 279T187 142Q185 131 185 107V99Q185 26 252 26Q261 26 270 27T287 31T302 38T315 45T327 55T338 65T348 77T356 88T365 100L372 110L408 253Q444 395 448 404Q461 431 491 431Q504 431 512 424T523 412T525 402L449 84Q448 79 448 68Q448 43 455 35T476 26Q485 27 496 35Q517 55 537 131Q543 151 547 152Q549 153 557 153H561Q580 153 580 144Q580 138 575 117T555 63T523 13Q510 0 491 -8Q483 -10 467 -10Q446 -10 429 -4T402 11T385 29T376 44T374 51L368 45Q362 39 350 30T324 12T288 -4T246 -11Q199 -11 153 12L129 -85Q108 -167 104 -180T92 -202Q76 -216 58 -216Z"></path><path id="MJX-3-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-3-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><use data-c="56" xlink:href="#MJX-3-TEX-N-56"></use><use data-c="61" xlink:href="#MJX-3-TEX-N-61" transform="translate(750,0)"></use><use data-c="72" xlink:href="#MJX-3-TEX-N-72" transform="translate(1250,0)"></use><use data-c="69" xlink:href="#MJX-3-TEX-N-69" transform="translate(1642,0)"></use><use data-c="61" xlink:href="#MJX-3-TEX-N-61" transform="translate(1920,0)"></use><use data-c="6E" xlink:href="#MJX-3-TEX-N-6E" transform="translate(2420,0)"></use><use data-c="63" xlink:href="#MJX-3-TEX-N-63" transform="translate(2976,0)"></use><use data-c="65" xlink:href="#MJX-3-TEX-N-65" transform="translate(3420,0)"></use></g><g data-mml-node="mo" transform="translate(4141.8,0)"><use data-c="3D" xlink:href="#MJX-3-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(5197.6,0)"><g data-mml-node="mn" transform="translate(255.4,394) scale(0.707)"><use data-c="31" xlink:href="#MJX-3-TEX-N-31"></use></g><g data-mml-node="mi" transform="translate(220,-345) scale(0.707)"><use data-c="1D45B" xlink:href="#MJX-3-TEX-I-1D45B"></use></g><rect width="624.3" height="60" x="120" y="220"></rect></g><g data-mml-node="munderover" transform="translate(6228.5,0)"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-3-TEX-SO-2211"></use></g><g data-mml-node="TeXAtom" transform="translate(1089,477.1) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-3-TEX-I-1D45B"></use></g></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D456" xlink:href="#MJX-3-TEX-I-1D456"></use></g><g data-mml-node="mo" transform="translate(345,0)"><use data-c="3D" xlink:href="#MJX-3-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1123,0)"><use data-c="31" xlink:href="#MJX-3-TEX-N-31"></use></g></g></g><g data-mml-node="mo" transform="translate(8515.1,0)"><use data-c="28" xlink:href="#MJX-3-TEX-N-28"></use></g><g data-mml-node="msub" transform="translate(8904.1,0)"><g data-mml-node="mi"><use data-c="1D465" xlink:href="#MJX-3-TEX-I-1D465"></use></g><g data-mml-node="mi" transform="translate(605,-150) scale(0.707)"><use data-c="1D456" xlink:href="#MJX-3-TEX-I-1D456"></use></g></g><g data-mml-node="mo" transform="translate(10025.3,0)"><use data-c="2212" xlink:href="#MJX-3-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(11025.5,0)"><use data-c="1D707" xlink:href="#MJX-3-TEX-I-1D707"></use></g><g data-mml-node="msup" transform="translate(11628.5,0)"><g data-mml-node="mo"><use data-c="29" xlink:href="#MJX-3-TEX-N-29"></use></g><g data-mml-node="mn" transform="translate(422,363) scale(0.707)"><use data-c="32" xlink:href="#MJX-3-TEX-N-32"></use></g></g></g></g></svg></mjx-container><blockquote><p><code>x_i</code>ä¸ºæ•°æ®é›†ä¸­çš„æ¯ä¸ªæ•°æ®ç‚¹ï¼Œ<br><code>Î¼</code> ä¸ºæ•°æ®é›†çš„å‡å€¼ï¼Œ<br><code>n</code> ä¸ºæ•°æ®çš„æ€»ä¸ªæ•°ã€‚<br>æ–¹å·®å°±æ˜¯æ‰€æœ‰æ•°æ®ç‚¹ä¸Žå‡å€¼çš„å·®å€¼çš„å¹³æ–¹çš„å¹³å‡å€¼ã€‚</p></blockquote><p>æ–¹å·®è®¡ç®—æ—¶ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªæ•°æ®ç‚¹ä¸Žå‡å€¼çš„å·®å€¼è¿›è¡Œå¹³æ–¹ï¼Œç„¶åŽæ±‚å¹³å‡ã€‚æ–¹å·®çš„å•ä½æ˜¯åŽŸå§‹æ•°æ®å•ä½çš„å¹³æ–¹ï¼Œå› æ­¤æœ‰æ—¶å®ƒçš„è§£é‡Šæ„ä¹‰ä¸å¦‚æ ‡å‡†å·®ç›´è§‚ã€‚</p><h2 id="æ ‡å‡†å·®ï¼ˆStandard-Deviationï¼‰"><a href="#æ ‡å‡†å·®ï¼ˆStandard-Deviationï¼‰" class="headerlink" title="æ ‡å‡†å·®ï¼ˆStandard Deviationï¼‰"></a>æ ‡å‡†å·®ï¼ˆStandard Deviationï¼‰</h2><p>æ ‡å‡†å·®æ˜¯æ–¹å·®çš„å¹³æ–¹æ ¹ã€‚ä¸Žæ–¹å·®ä¸åŒï¼Œæ ‡å‡†å·®çš„å•ä½ä¸ŽåŽŸå§‹æ•°æ®ç›¸åŒï¼Œå› æ­¤æ›´æ˜“äºŽç†è§£ã€‚æ ‡å‡†å·®è¶Šå¤§ï¼Œè¯´æ˜Žæ•°æ®çš„æ³¢åŠ¨æ€§è¶Šå¤§ï¼›æ ‡å‡†å·®è¶Šå°ï¼Œåˆ™è¯´æ˜Žæ•°æ®è¾ƒä¸ºé›†ä¸­ã€‚</p><p>æ ‡å‡†å·®çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.231ex;" xmlns="http://www.w3.org/2000/svg" width="32.902ex" height="2.398ex" role="img" focusable="false" viewBox="0 -958 14542.6 1060" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-2-TEX-N-53" d="M55 507Q55 590 112 647T243 704H257Q342 704 405 641L426 672Q431 679 436 687T446 700L449 704Q450 704 453 704T459 705H463Q466 705 472 699V462L466 456H448Q437 456 435 459T430 479Q413 605 329 646Q292 662 254 662Q201 662 168 626T135 542Q135 508 152 480T200 435Q210 431 286 412T370 389Q427 367 463 314T500 191Q500 110 448 45T301 -21Q245 -21 201 -4T140 27L122 41Q118 36 107 21T87 -7T78 -21Q76 -22 68 -22H64Q61 -22 55 -16V101Q55 220 56 222Q58 227 76 227H89Q95 221 95 214Q95 182 105 151T139 90T205 42T305 24Q352 24 386 62T420 155Q420 198 398 233T340 281Q284 295 266 300Q261 301 239 306T206 314T174 325T141 343T112 367T85 402Q55 451 55 507Z"></path><path id="MJX-2-TEX-N-74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z"></path><path id="MJX-2-TEX-N-61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z"></path><path id="MJX-2-TEX-N-6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-2-TEX-N-64" d="M376 495Q376 511 376 535T377 568Q377 613 367 624T316 637H298V660Q298 683 300 683L310 684Q320 685 339 686T376 688Q393 689 413 690T443 693T454 694H457V390Q457 84 458 81Q461 61 472 55T517 46H535V0Q533 0 459 -5T380 -11H373V44L365 37Q307 -11 235 -11Q158 -11 96 50T34 215Q34 315 97 378T244 442Q319 442 376 393V495ZM373 342Q328 405 260 405Q211 405 173 369Q146 341 139 305T131 211Q131 155 138 120T173 59Q203 26 251 26Q322 26 373 103V342Z"></path><path id="MJX-2-TEX-N-72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z"></path><path id="MJX-2-TEX-N-20" d=""></path><path id="MJX-2-TEX-N-44" d="M130 622Q123 629 119 631T103 634T60 637H27V683H228Q399 682 419 682T461 676Q504 667 546 641T626 573T685 470T708 336Q708 210 634 116T442 3Q429 1 228 0H27V46H60Q102 47 111 49T130 61V622ZM593 338Q593 439 571 501T493 602Q439 637 355 637H322H294Q238 637 234 628Q231 624 231 344Q231 62 232 59Q233 49 248 48T339 46H350Q456 46 515 95Q561 133 577 191T593 338Z"></path><path id="MJX-2-TEX-N-65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z"></path><path id="MJX-2-TEX-N-76" d="M338 431Q344 429 422 429Q479 429 503 431H508V385H497Q439 381 423 345Q421 341 356 172T288 -2Q283 -11 263 -11Q244 -11 239 -2Q99 359 98 364Q93 378 82 381T43 385H19V431H25L33 430Q41 430 53 430T79 430T104 429T122 428Q217 428 232 431H240V385H226Q187 384 184 370Q184 366 235 234L286 102L377 341V349Q377 363 367 372T349 383T335 385H331V431H338Z"></path><path id="MJX-2-TEX-N-69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z"></path><path id="MJX-2-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-2-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-2-TEX-N-221A" d="M95 178Q89 178 81 186T72 200T103 230T169 280T207 309Q209 311 212 311H213Q219 311 227 294T281 177Q300 134 312 108L397 -77Q398 -77 501 136T707 565T814 786Q820 800 834 800Q841 800 846 794T853 782V776L620 293L385 -193Q381 -200 366 -200Q357 -200 354 -197Q352 -195 256 15L160 225L144 214Q129 202 113 190T95 178Z"></path><path id="MJX-2-TEX-N-56" d="M114 620Q113 621 110 624T107 627T103 630T98 632T91 634T80 635T67 636T48 637H19V683H28Q46 680 152 680Q273 680 294 683H305V637H284Q223 634 223 620Q223 618 313 372T404 126L490 358Q575 588 575 597Q575 616 554 626T508 637H503V683H512Q527 680 627 680Q718 680 724 683H730V637H723Q648 637 627 596Q627 595 515 291T401 -14Q396 -22 382 -22H374H367Q353 -22 348 -14Q346 -12 231 303Q114 617 114 620Z"></path><path id="MJX-2-TEX-N-63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><use data-c="53" xlink:href="#MJX-2-TEX-N-53"></use><use data-c="74" xlink:href="#MJX-2-TEX-N-74" transform="translate(556,0)"></use><use data-c="61" xlink:href="#MJX-2-TEX-N-61" transform="translate(945,0)"></use><use data-c="6E" xlink:href="#MJX-2-TEX-N-6E" transform="translate(1445,0)"></use><use data-c="64" xlink:href="#MJX-2-TEX-N-64" transform="translate(2001,0)"></use><use data-c="61" xlink:href="#MJX-2-TEX-N-61" transform="translate(2557,0)"></use><use data-c="72" xlink:href="#MJX-2-TEX-N-72" transform="translate(3057,0)"></use><use data-c="64" xlink:href="#MJX-2-TEX-N-64" transform="translate(3449,0)"></use><use data-c="20" xlink:href="#MJX-2-TEX-N-20" transform="translate(4005,0)"></use><use data-c="44" xlink:href="#MJX-2-TEX-N-44" transform="translate(4255,0)"></use><use data-c="65" xlink:href="#MJX-2-TEX-N-65" transform="translate(5019,0)"></use><use data-c="76" xlink:href="#MJX-2-TEX-N-76" transform="translate(5463,0)"></use><use data-c="69" xlink:href="#MJX-2-TEX-N-69" transform="translate(5991,0)"></use><use data-c="61" xlink:href="#MJX-2-TEX-N-61" transform="translate(6269,0)"></use><use data-c="74" xlink:href="#MJX-2-TEX-N-74" transform="translate(6769,0)"></use><use data-c="69" xlink:href="#MJX-2-TEX-N-69" transform="translate(7158,0)"></use><use data-c="6F" xlink:href="#MJX-2-TEX-N-6F" transform="translate(7436,0)"></use><use data-c="6E" xlink:href="#MJX-2-TEX-N-6E" transform="translate(7936,0)"></use></g><g data-mml-node="mo" transform="translate(8769.8,0)"><use data-c="3D" xlink:href="#MJX-2-TEX-N-3D"></use></g><g data-mml-node="msqrt" transform="translate(9825.6,0)"><g transform="translate(853,0)"><g data-mml-node="mtext"><use data-c="56" xlink:href="#MJX-2-TEX-N-56"></use><use data-c="61" xlink:href="#MJX-2-TEX-N-61" transform="translate(750,0)"></use><use data-c="72" xlink:href="#MJX-2-TEX-N-72" transform="translate(1250,0)"></use><use data-c="69" xlink:href="#MJX-2-TEX-N-69" transform="translate(1642,0)"></use><use data-c="61" xlink:href="#MJX-2-TEX-N-61" transform="translate(1920,0)"></use><use data-c="6E" xlink:href="#MJX-2-TEX-N-6E" transform="translate(2420,0)"></use><use data-c="63" xlink:href="#MJX-2-TEX-N-63" transform="translate(2976,0)"></use><use data-c="65" xlink:href="#MJX-2-TEX-N-65" transform="translate(3420,0)"></use></g></g><g data-mml-node="mo" transform="translate(0,98)"><use data-c="221A" xlink:href="#MJX-2-TEX-N-221A"></use></g><rect width="3864" height="60" x="853" y="838"></rect></g></g></g></svg></mjx-container><blockquote><p>æ–¹å·®çš„å¹³æ–¹æ ¹å³ä¸ºæ ‡å‡†å·®ã€‚</p></blockquote><h3 id="æ ‡å‡†å·®ä¸Žæ–¹å·®çš„å…³ç³»"><a href="#æ ‡å‡†å·®ä¸Žæ–¹å·®çš„å…³ç³»" class="headerlink" title="æ ‡å‡†å·®ä¸Žæ–¹å·®çš„å…³ç³»"></a>æ ‡å‡†å·®ä¸Žæ–¹å·®çš„å…³ç³»</h3><p>æ ‡å‡†å·®å’Œæ–¹å·®éƒ½ç”¨æ¥æè¿°æ•°æ®çš„ç¦»æ•£ç¨‹åº¦ã€‚æ ‡å‡†å·®æ¯”æ–¹å·®æ›´å¸¸ç”¨ï¼Œå› ä¸ºå®ƒçš„å•ä½ä¸Žæ•°æ®æœ¬èº«ä¸€è‡´ï¼Œè§£é‡Šèµ·æ¥æ›´åŠ ç›´è§‚ã€‚</p><h2 id="å¼‚å¸¸å€¼ï¼ˆOutliersï¼‰"><a href="#å¼‚å¸¸å€¼ï¼ˆOutliersï¼‰" class="headerlink" title="å¼‚å¸¸å€¼ï¼ˆOutliersï¼‰"></a>å¼‚å¸¸å€¼ï¼ˆOutliersï¼‰</h2><p>å¼‚å¸¸å€¼æ˜¯æŒ‡åœ¨æ•°æ®é›†ä¸­è¿œç¦»å…¶ä»–æ•°æ®ç‚¹çš„å€¼ã€‚å¼‚å¸¸å€¼çš„å­˜åœ¨å¾€å¾€æ˜¯ç”±äºŽæ•°æ®å½•å…¥é”™è¯¯ã€æµ‹é‡è¯¯å·®ï¼Œæˆ–è€…æ•°æ®æœ¬èº«å­˜åœ¨æžç«¯æ³¢åŠ¨ã€‚å¼‚å¸¸å€¼ä¼šå½±å“æ•°æ®çš„åˆ†å¸ƒï¼Œè¿›è€Œå½±å“æ•°æ®åˆ†æžç»“æžœï¼Œå°¤å…¶æ˜¯å‡å€¼ã€æ–¹å·®å’Œæ ‡å‡†å·®ç­‰ç»Ÿè®¡é‡ã€‚</p><h3 id="å¦‚ä½•è¯†åˆ«å¼‚å¸¸å€¼"><a href="#å¦‚ä½•è¯†åˆ«å¼‚å¸¸å€¼" class="headerlink" title="å¦‚ä½•è¯†åˆ«å¼‚å¸¸å€¼"></a>å¦‚ä½•è¯†åˆ«å¼‚å¸¸å€¼</h3><p>å¸¸ç”¨çš„å¼‚å¸¸å€¼æ£€æµ‹æ–¹æ³•æœ‰ï¼š</p><p><strong>ç®±çº¿å›¾æ³•ï¼ˆBoxplotï¼‰</strong>ï¼šé€šè¿‡è®¡ç®—å››åˆ†ä½æ•°å’Œå››åˆ†ä½è·ï¼ˆIQRï¼‰æ¥è¯†åˆ«å¼‚å¸¸å€¼ã€‚é€šå¸¸ï¼Œä½äºŽQ1 - 1.5 * IQR æˆ– Q3 + 1.5 * IQRä¹‹å¤–çš„æ•°æ®ç‚¹è¢«è®¤ä¸ºæ˜¯å¼‚å¸¸å€¼ã€‚<br><strong>Z-scoreæ³•</strong>ï¼šé€šè¿‡è®¡ç®—æ•°æ®ç‚¹ä¸Žå‡å€¼çš„æ ‡å‡†å·®å€æ•°æ¥åˆ¤æ–­æ•°æ®ç‚¹æ˜¯å¦ä¸ºå¼‚å¸¸å€¼ã€‚<span class='pbg danger'>ä¸€èˆ¬è®¤ä¸ºï¼ŒZ-scoreè¶…è¿‡3æˆ–å°äºŽ-3çš„æ•°æ®ä¸ºå¼‚å¸¸å€¼ã€‚</span></p><h3 id="å¼‚å¸¸å€¼çš„å¤„ç†"><a href="#å¼‚å¸¸å€¼çš„å¤„ç†" class="headerlink" title="å¼‚å¸¸å€¼çš„å¤„ç†"></a>å¼‚å¸¸å€¼çš„å¤„ç†</h3><p>åœ¨æ•°æ®åˆ†æžä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨æ•°æ®é¢„å¤„ç†é˜¶æ®µè¯†åˆ«å¹¶å¤„ç†å¼‚å¸¸å€¼ã€‚å¸¸è§çš„å¤„ç†æ–¹æ³•åŒ…æ‹¬ï¼š</p><ul><li>åˆ é™¤å¼‚å¸¸å€¼ï¼šç›´æŽ¥ä»Žæ•°æ®é›†ä¸­åˆ é™¤å¼‚å¸¸å€¼ã€‚</li><li>æ›¿æ¢å¼‚å¸¸å€¼ï¼šç”¨å‡å€¼ã€ä¸­ä½æ•°ç­‰æ›¿ä»£å¼‚å¸¸å€¼ã€‚</li><li>ä¿ç•™å¼‚å¸¸å€¼ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¼‚å¸¸å€¼å¯èƒ½åŒ…å«é‡è¦ä¿¡æ¯ï¼Œå› æ­¤ä¹Ÿå¯ä»¥é€‰æ‹©ä¿ç•™å¼‚å¸¸å€¼ã€‚</li></ul><h2 id="ä¸¾ä¸ªåˆ—å­"><a href="#ä¸¾ä¸ªåˆ—å­" class="headerlink" title="ä¸¾ä¸ªåˆ—å­"></a>ä¸¾ä¸ªåˆ—å­</h2><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«å­¦ç”Ÿæˆç»©çš„æ•°æ®é›†ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå¼‚å¸¸å€¼ï¼ˆ200ï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ•°æ®é›†ï¼šä¸€ç»„å­¦ç”Ÿæˆç»©ï¼Œå…¶ä¸­åŒ…æ‹¬å¼‚å¸¸å€¼200</span></span><br><span class="line">data = [<span class="number">80</span>, <span class="number">85</span>, <span class="number">90</span>, <span class="number">92</span>, <span class="number">85</span>, <span class="number">88</span>, <span class="number">75</span>, <span class="number">78</span>, <span class="number">92</span>, <span class="number">95</span>, <span class="number">100</span>, <span class="number">85</span>, <span class="number">92</span>, <span class="number">88</span>, <span class="number">85</span>, <span class="number">200</span>]</span><br></pre></td></tr></table></figure><h2 id="è®¡ç®—æ–¹å·®å’Œæ ‡å‡†å·®"><a href="#è®¡ç®—æ–¹å·®å’Œæ ‡å‡†å·®" class="headerlink" title="è®¡ç®—æ–¹å·®å’Œæ ‡å‡†å·®"></a>è®¡ç®—æ–¹å·®å’Œæ ‡å‡†å·®</h2><p>æˆ‘ä»¬ä½¿ç”¨<code>NumPy</code>æ¥è®¡ç®—æ•°æ®çš„æ–¹å·®å’Œæ ‡å‡†å·®ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®—æ–¹å·®</span></span><br><span class="line">variance_value = np.var(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;æ–¹å·® (Variance): <span class="subst">&#123;variance_value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—æ ‡å‡†å·®</span></span><br><span class="line">std_dev_value = np.std(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;æ ‡å‡†å·® (Standard Deviation): <span class="subst">&#123;std_dev_value&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ–¹å·® (Variance): 781.734375</span><br><span class="line">æ ‡å‡†å·® (Standard Deviation): 27.959513139538036</span><br></pre></td></tr></table></figure><p>ä»Žè¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œè¿™ç»„æ•°æ®çš„æ–¹å·®ä¸º781.73ï¼Œæ ‡å‡†å·®ä¸º27.95ï¼Œè¿™è¡¨æ˜Žæ•°æ®çš„ç¦»æ•£ç¨‹åº¦ç›¸å¯¹è¾ƒé«˜ã€‚ç‰¹åˆ«æ˜¯æœ€åŽçš„å¼‚å¸¸å€¼ï¼ˆ200ï¼‰å¯¹æ ‡å‡†å·®çš„å½±å“å¾ˆå¤§ã€‚</p><h3 id="å¼‚å¸¸å€¼æ£€æµ‹ä¸Žå¤„ç†"><a href="#å¼‚å¸¸å€¼æ£€æµ‹ä¸Žå¤„ç†" class="headerlink" title="å¼‚å¸¸å€¼æ£€æµ‹ä¸Žå¤„ç†"></a>å¼‚å¸¸å€¼æ£€æµ‹ä¸Žå¤„ç†</h3><h4 id="ä½¿ç”¨Z-scoreæ£€æµ‹å¼‚å¸¸å€¼"><a href="#ä½¿ç”¨Z-scoreæ£€æµ‹å¼‚å¸¸å€¼" class="headerlink" title="ä½¿ç”¨Z-scoreæ£€æµ‹å¼‚å¸¸å€¼"></a>ä½¿ç”¨Z-scoreæ£€æµ‹å¼‚å¸¸å€¼</h4><p>æˆ‘ä»¬ä½¿ç”¨Z-scoreæ¥æ£€æµ‹æ•°æ®ä¸­çš„å¼‚å¸¸å€¼ã€‚å¦‚æžœZ-scoreå¤§äºŽ3æˆ–å°äºŽ-3ï¼Œåˆ™è¯¥æ•°æ®ç‚¹è¢«è®¤ä¸ºæ˜¯å¼‚å¸¸å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®—Z-score</span></span><br><span class="line">z_scores = stats.zscore(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Z-scores: <span class="subst">&#123;z_scores&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æµ‹å¼‚å¸¸å€¼</span></span><br><span class="line">outliers = [data[i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)) <span class="keyword">if</span> np.<span class="built_in">abs</span>(z_scores[i]) &gt; <span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;æ£€æµ‹åˆ°çš„å¼‚å¸¸å€¼: <span class="subst">&#123;outliers&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>scipy</code>çš„<code>stats</code>æ¨¡å—å¯ä»¥è®¡ç®—Z-scoreã€‚è¾“å‡ºç»“æžœä¸­ï¼ŒZ-scoreå¤§äºŽ3çš„å¼‚å¸¸å€¼æ˜¯200ã€‚</p><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Z-scores: [-0.51413628 -0.33530627 -0.15647626 -0.08494425 -0.33530627 -0.22800826</span><br><span class="line"> -0.69296629 -0.58566828 -0.08494425  0.02235375  0.20118376 -0.33530627</span><br><span class="line"> -0.08494425 -0.22800826 -0.33530627  3.77778395]</span><br><span class="line">æ£€æµ‹åˆ°çš„å¼‚å¸¸å€¼: [200]</span><br></pre></td></tr></table></figure><p>ä»Žè¾“å‡ºç»“æžœä¸­å¯ä»¥çœ‹å‡ºï¼ŒZ-scoreå¤§äºŽ3çš„å¼‚å¸¸å€¼æ˜¯200ã€‚è¿™æ˜¯ç”±äºŽ200ä¸Žå…¶ä»–æ•°æ®ç‚¹çš„å·®å¼‚è¿‡å¤§ï¼ŒZ-scoreå€¼ä¸º9.39ï¼Œè¿œè¿œè¶…è¿‡äº†3ã€‚</p><h4 id="ä½¿ç”¨ç®±çº¿å›¾æ£€æµ‹å¼‚å¸¸å€¼"><a href="#ä½¿ç”¨ç®±çº¿å›¾æ£€æµ‹å¼‚å¸¸å€¼" class="headerlink" title="ä½¿ç”¨ç®±çº¿å›¾æ£€æµ‹å¼‚å¸¸å€¼"></a>ä½¿ç”¨ç®±çº¿å›¾æ£€æµ‹å¼‚å¸¸å€¼</h4><p>æˆ‘ä»¬å¯ä»¥ç»˜åˆ¶ç®±çº¿å›¾æ¥å¯è§†åŒ–æ•°æ®å¹¶æ£€æµ‹å¼‚å¸¸å€¼ã€‚å¯ä»¥ä½¿ç”¨<code>matplotlib</code>åº“ç»˜åˆ¶ç®±çº¿å›¾ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç»˜åˆ¶ç®±çº¿å›¾</span></span><br><span class="line">plt.boxplot(data)</span><br><span class="line">plt.title(<span class="string">&quot;Boxplot Chart&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/data-analysis/outlier-boxplot.png" class="lazyload placeholder" data-srcset="/assets/images/data-analysis/outlier-boxplot.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="ç®±çº¿å›¾" style="width:500px;"/></div><span class="image-caption">ç®±çº¿å›¾</span></div><p>ä»Žç®±çº¿å›¾ä¸­ï¼Œ200çš„å€¼å¤„äºŽç®±ä½“å¤–ï¼Œå› æ­¤è¢«è§†ä¸ºå¼‚å¸¸å€¼ã€‚</p><h3 id="å¤„ç†å¼‚å¸¸å€¼"><a href="#å¤„ç†å¼‚å¸¸å€¼" class="headerlink" title="å¤„ç†å¼‚å¸¸å€¼"></a>å¤„ç†å¼‚å¸¸å€¼</h3><p>åœ¨å®žé™…åˆ†æžä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å¤„ç†å¼‚å¸¸å€¼ã€‚ä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„æ–¹æ³•ï¼š</p><h4 id="åˆ é™¤å¼‚å¸¸å€¼"><a href="#åˆ é™¤å¼‚å¸¸å€¼" class="headerlink" title="åˆ é™¤å¼‚å¸¸å€¼"></a>åˆ é™¤å¼‚å¸¸å€¼</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤å¼‚å¸¸å€¼ï¼ˆZ-scoreå¤§äºŽ3çš„ç‚¹ï¼‰</span></span><br><span class="line">cleaned_data = [data[i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data)) <span class="keyword">if</span> np.<span class="built_in">abs</span>(z_scores[i]) &lt;= <span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;åˆ é™¤å¼‚å¸¸å€¼åŽçš„æ•°æ®: <span class="subst">&#123;cleaned_data&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åˆ é™¤å¼‚å¸¸å€¼åŽçš„æ•°æ®: [80, 85, 90, 92, 85, 88, 75, 78, 92, 95, 100, 85, 92, 88, 85]</span><br></pre></td></tr></table></figure><h4 id="æ›¿æ¢å¼‚å¸¸å€¼"><a href="#æ›¿æ¢å¼‚å¸¸å€¼" class="headerlink" title="æ›¿æ¢å¼‚å¸¸å€¼"></a>æ›¿æ¢å¼‚å¸¸å€¼</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›¿æ¢å¼‚å¸¸å€¼ä¸ºä¸­ä½æ•°</span></span><br><span class="line">median_value = np.median(data)</span><br><span class="line">cleaned_data_with_median = [median_value <span class="keyword">if</span> np.<span class="built_in">abs</span>(z_scores[i]) &gt; <span class="number">3</span> <span class="keyword">else</span> data[i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data))]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;æ›¿æ¢å¼‚å¸¸å€¼åŽçš„æ•°æ®: <span class="subst">&#123;cleaned_data_with_median&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ›¿æ¢å¼‚å¸¸å€¼åŽçš„æ•°æ®: [80, 85, 90, 92, 85, 88, 75, 78, 92, 95, 100, 85, 92, 88, 85, 88.0]</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>æ–¹å·®å’Œæ ‡å‡†å·®æ˜¯ç”¨äºŽè¡¡é‡æ•°æ®ç¦»æ•£ç¨‹åº¦çš„åŸºæœ¬ç»Ÿè®¡é‡ã€‚æ–¹å·®çš„å•ä½ä¸ºåŽŸå§‹æ•°æ®å•ä½çš„å¹³æ–¹ï¼Œè€Œæ ‡å‡†å·®åˆ™ç›´æŽ¥ä»¥åŽŸå§‹å•ä½è¡¨ç¤ºï¼Œæ›´å®¹æ˜“è§£é‡Šã€‚</li><li>å¼‚å¸¸å€¼æ˜¯æŒ‡é‚£äº›åœ¨æ•°æ®ä¸­ä¸Žå…¶ä»–æ•°æ®ç‚¹å·®å¼‚è¾ƒå¤§çš„å€¼ï¼Œå®ƒä»¬å¯èƒ½å½±å“ç»Ÿè®¡åˆ†æžçš„ç»“æžœã€‚åœ¨æ•°æ®æ¸…æ´—é˜¶æ®µï¼Œè¯†åˆ«å’Œå¤„ç†å¼‚å¸¸å€¼æ˜¯è‡³å…³é‡è¦çš„ä¸€æ­¥ã€‚</li></ul><p>åœ¨Pythonä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨<code>NumPy</code>ã€<code>SciPy</code>å’Œ<code>Matplotlib</code>ç­‰åº“æ¥è®¡ç®—æ–¹å·®ã€æ ‡å‡†å·®ï¼Œè¯†åˆ«å¼‚å¸¸å€¼ï¼Œå¹¶æ ¹æ®éœ€è¦å¤„ç†å¼‚å¸¸å€¼ã€‚é€šè¿‡æŽŒæ¡è¿™äº›åŸºæœ¬æ¦‚å¿µå’ŒæŠ€æœ¯ï¼Œæˆ‘ä»¬æ•°æ®åˆ†æžå¸ˆå¯ä»¥æ›´æœ‰æ•ˆåœ°ç†è§£æ•°æ®çš„åˆ†å¸ƒç‰¹å¾ï¼Œå‘çŽ°æ•°æ®ä¸­çš„æ½œåœ¨é—®é¢˜ï¼Œåšå‡ºæ›´åŠ ç²¾å‡†çš„æ•°æ®åˆ†æžã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Data Analysis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Data Analysis </tag>
            
            <tag> Math </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åˆ†æžä¸­çš„å‡å€¼ã€ä¸­å¤®å€¤ä¸Žä¼—æ•°</title>
      <link href="/2020/08/14/data-analysis-mean-median-mode/"/>
      <url>/2020/08/14/data-analysis-mean-median-mode/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æ•°æ®åˆ†æžä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šç”¨åˆ°<strong>å‡å€¼</strong>ï¼ˆ<code>Mean</code>ï¼‰ã€<strong>ä¸­å¤®å€¤</strong>ï¼ˆ<code>Median</code>ï¼‰å’Œ<strong>ä¼—æ•°</strong>ï¼ˆ<code>Mode</code>ï¼‰è¿™ä¸‰ä¸ªåŸºæœ¬çš„ç»Ÿè®¡é‡ã€‚è¿™äº›ç»Ÿè®¡é‡èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£æ•°æ®é›†çš„åˆ†å¸ƒæƒ…å†µï¼Œå‘çŽ°æ•°æ®ä¸­çš„è¶‹åŠ¿ä»¥åŠè¿›è¡Œæ•°æ®æ¸…æ´—å’Œå¤„ç†ã€‚</p><h2 id="å‡å€¼ï¼ˆMeanï¼‰"><a href="#å‡å€¼ï¼ˆMeanï¼‰" class="headerlink" title="å‡å€¼ï¼ˆMeanï¼‰"></a>å‡å€¼ï¼ˆMeanï¼‰</h2><p><strong>å‡å€¼</strong>æ˜¯æœ€å¸¸è§çš„é›†ä¸­è¶‹åŠ¿æŒ‡æ ‡ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€œ<code>å¹³å‡æ•°</code>â€ã€‚å®ƒæ˜¯æ‰€æœ‰æ•°æ®ç‚¹åŠ æ€»ä¹‹åŽé™¤ä»¥æ•°æ®ç‚¹çš„ä¸ªæ•°ã€‚è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.798ex;" xmlns="http://www.w3.org/2000/svg" width="15.293ex" height="3.167ex" role="img" focusable="false" viewBox="0 -1047.1 6759.4 1399.9" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1-TEX-SO-2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"></path><path id="MJX-1-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">å‡</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">å€¼</text></g><g data-mml-node="mo" transform="translate(2277.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(3333.6,0)"><g data-mml-node="mrow" transform="translate(220,516.8) scale(0.707)"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-1-TEX-SO-2211"></use></g><g data-mml-node="mtext" transform="translate(1222.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">æ•°</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">æ®</text><text data-variant="normal" transform="translate(2000,0) scale(1,-1)" font-size="884px" font-family="serif">å€¼</text></g></g><g data-mml-node="mi" transform="translate(1500.8,-345) scale(0.707)"><use data-c="1D45B" xlink:href="#MJX-1-TEX-I-1D45B"></use></g><rect width="3185.9" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container><p>ç›´ç™½ä¸€ç‚¹å°±æ˜¯ï¼š</p><blockquote><p>å‡å€¼ &#x3D; (æ•°æ®å€¼1 + æ•°æ®å€¼2 +â€¦ + æ•°æ®å€¼n) &#x2F; n</p></blockquote><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š</p><blockquote><p>å‡å€¼å¯¹å¼‚å¸¸å€¼ï¼ˆå³æžç«¯å€¼ï¼‰éžå¸¸æ•æ„Ÿã€‚å¦‚æžœæ•°æ®é›†ä¸­å­˜åœ¨éžå¸¸å¤§çš„æˆ–éžå¸¸å°çš„å€¼ï¼ˆå¦‚å™ªå£°æ•°æ®ï¼‰ï¼Œå‡å€¼å¯èƒ½æ— æ³•å‡†ç¡®åæ˜ æ•°æ®çš„çœŸå®žåˆ†å¸ƒã€‚</p></blockquote><h2 id="ä¸­å¤®å€¤ï¼ˆMedianï¼‰"><a href="#ä¸­å¤®å€¤ï¼ˆMedianï¼‰" class="headerlink" title="ä¸­å¤®å€¤ï¼ˆMedianï¼‰"></a>ä¸­å¤®å€¤ï¼ˆMedianï¼‰</h2><p><strong>ä¸­å¤®å€¤</strong>æ˜¯æŒ‡å°†æ•°æ®ä»Žå°åˆ°å¤§æŽ’åˆ—åŽï¼Œå¤„äºŽä¸­é—´ä½ç½®çš„æ•°æ®å€¼ã€‚å¦‚æžœæ•°æ®é›†ä¸­çš„æ•°æ®ç‚¹ä¸ªæ•°æ˜¯å¥‡æ•°ï¼Œä¸­å¤®å€¤å°±æ˜¯ä¸­é—´é‚£ä¸ªæ•°ï¼›å¦‚æžœæ•°æ®é›†çš„ä¸ªæ•°æ˜¯å¶æ•°ï¼Œä¸­å¤®å€¤æ˜¯ä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚</p><ul><li>å¦‚æžœæ•°æ®ç‚¹ä¸ªæ•°æ˜¯å¥‡æ•°ï¼Œå–ä¸­é—´çš„å€¼ã€‚</li><li>å¦‚æžœæ•°æ®ç‚¹ä¸ªæ•°æ˜¯å¶æ•°ï¼Œå–ä¸­é—´ä¸¤ä¸ªå€¼çš„å¹³å‡å€¼ã€‚</li></ul><blockquote><p><strong>ä¼˜ç‚¹</strong>ï¼šä¸­å¤®å€¤å¯¹å¼‚å¸¸å€¼ä¸æ•æ„Ÿã€‚å¦‚æžœæ•°æ®é›†åŒ…å«ä¸€äº›æžç«¯å€¼ï¼Œä¸­å¤®å€¤èƒ½æ›´å¥½åœ°åæ˜ æ•°æ®çš„ä¸­å¿ƒä½ç½®ã€‚<br><strong>å±€é™</strong>ï¼šç›¸æ¯”äºŽå‡å€¼ï¼Œä¸­å¤®å€¤ç¼ºå°‘ç›´è§‚æ€§ï¼Œä¸”å¯¹æ•°æ®çš„å…·ä½“æ•°å€¼å…³ç³»ä¸æ•æ„Ÿã€‚</p></blockquote><h2 id="ä¼—æ•°ï¼ˆModeï¼‰"><a href="#ä¼—æ•°ï¼ˆModeï¼‰" class="headerlink" title="ä¼—æ•°ï¼ˆModeï¼‰"></a>ä¼—æ•°ï¼ˆModeï¼‰</h2><p><strong>ä¼—æ•°</strong>æ˜¯æ•°æ®é›†ä¸­å‡ºçŽ°é¢‘çŽ‡æœ€é«˜çš„æ•°å€¼ã€‚å¦‚æžœä¸€ä¸ªæ•°æ®é›†ä¸­æœ‰å¤šä¸ªå€¼çš„é¢‘çŽ‡ç›¸åŒä¸”æ˜¯æœ€å¤§é¢‘çŽ‡ï¼Œé‚£ä¹ˆè¯¥æ•°æ®é›†æœ‰å¤šä¸ªä¼—æ•°ï¼ˆç§°ä¸º<strong>å¤šä¼—æ•°</strong>ï¼‰ã€‚</p><ul><li>ç»Ÿè®¡æ¯ä¸ªæ•°æ®ç‚¹å‡ºçŽ°çš„é¢‘çŽ‡ï¼Œæ‰¾åˆ°å‡ºçŽ°é¢‘çŽ‡æœ€é«˜çš„å€¼ã€‚</li><li>å¦‚æžœæœ‰å¤šä¸ªé¢‘çŽ‡ç›¸åŒçš„æ•°å€¼ï¼Œéƒ½å¯ä»¥è¢«è§†ä¸ºå¤šä¼—æ•°ã€‚</li></ul><blockquote><p><strong>ä¼˜ç‚¹</strong>ï¼šä¼—æ•°é€‚ç”¨äºŽåä¹‰å°ºåº¦çš„æ•°æ®ï¼ˆä¾‹å¦‚ç±»åˆ«æ•°æ®ï¼‰ï¼Œå¯ä»¥åæ˜ å‡ºæ•°æ®ä¸­æœ€å¸¸è§çš„ç±»åˆ«ã€‚<br><strong>å±€é™</strong>ï¼šæœ‰äº›æ•°æ®é›†å¯èƒ½æ²¡æœ‰ä¼—æ•°ï¼Œæˆ–è€…ä¼—æ•°ä¸å”¯ä¸€ã€‚</p></blockquote><h2 id="Pythonä»£ç ä¸¾ä¾‹"><a href="#Pythonä»£ç ä¸¾ä¾‹" class="headerlink" title="Pythonä»£ç ä¸¾ä¾‹"></a>Pythonä»£ç ä¸¾ä¾‹</h2><p>ä¸‹é¢æˆ‘ä»¬ç”¨Pythonä»£ç æ¥æ¼”ç¤ºå¦‚ä½•è®¡ç®—å‡å€¼ã€ä¸­å¤®å€¤å’Œä¼—æ•°ã€‚</p><h3 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«å­¦ç”Ÿæˆç»©çš„ç®€å•æ•°æ®é›†ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®é›†ï¼šä¸€ç»„å­¦ç”Ÿçš„æˆç»©</span></span><br><span class="line">data = [<span class="number">80</span>, <span class="number">85</span>, <span class="number">90</span>, <span class="number">92</span>, <span class="number">85</span>, <span class="number">88</span>, <span class="number">75</span>, <span class="number">78</span>, <span class="number">92</span>, <span class="number">95</span>, <span class="number">100</span>, <span class="number">85</span>, <span class="number">92</span>, <span class="number">88</span>, <span class="number">85</span>]</span><br></pre></td></tr></table></figure><h3 id="è®¡ç®—å‡å€¼ï¼ˆMeanï¼‰"><a href="#è®¡ç®—å‡å€¼ï¼ˆMeanï¼‰" class="headerlink" title="è®¡ç®—å‡å€¼ï¼ˆMeanï¼‰"></a>è®¡ç®—å‡å€¼ï¼ˆMeanï¼‰</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Pythonçš„<code>NumPy</code>åº“æ¥è®¡ç®—å‡å€¼ï¼Œ <code>NumPy</code>æ˜¯ä¸€ä¸ªç”¨äºŽç§‘å­¦è®¡ç®—çš„åŸºç¡€åº“ï¼Œæä¾›äº†å¤§é‡çš„<code>æ•°å­¦å‡½æ•°</code>å’Œ<code>çŸ©é˜µè¿ç®—</code>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mean_value = np.mean(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;å‡å€¼ (Mean): <span class="subst">&#123;mean_value&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å‡å€¼ (Mean): 87.33333333333333</span><br></pre></td></tr></table></figure><h3 id="è®¡ç®—ä¸­å¤®å€¤ï¼ˆMedianï¼‰"><a href="#è®¡ç®—ä¸­å¤®å€¤ï¼ˆMedianï¼‰" class="headerlink" title="è®¡ç®—ä¸­å¤®å€¤ï¼ˆMedianï¼‰"></a>è®¡ç®—ä¸­å¤®å€¤ï¼ˆMedianï¼‰</h3><p>Pythonä¸­çš„<code>NumPy</code>ä¹Ÿæä¾›äº†è®¡ç®—ä¸­å¤®å€¤çš„åŠŸèƒ½ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">median_value = np.median(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;ä¸­å¤®å€¤ (Median): <span class="subst">&#123;median_value&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸­å¤®å€¤ (Median): 85.0</span><br></pre></td></tr></table></figure><h3 id="è®¡ç®—ä¼—æ•°ï¼ˆModeï¼‰"><a href="#è®¡ç®—ä¼—æ•°ï¼ˆModeï¼‰" class="headerlink" title="è®¡ç®—ä¼—æ•°ï¼ˆModeï¼‰"></a>è®¡ç®—ä¼—æ•°ï¼ˆModeï¼‰</h3><p>è®¡ç®—ä¼—æ•°å¯ä»¥ä½¿ç”¨<code>SciPy</code>åº“ä¸­çš„stats.modeå‡½æ•°, <code>SciPy</code>åº“æ˜¯ä¸€ä¸ªåŸºäºŽPythonçš„ç§‘å­¦è®¡ç®—åŒ…ï¼ŒåŒ…å«äº†è®¸å¤š<code>æ•°å­¦</code>ã€<code>ç»Ÿè®¡</code>ã€<code>ä¼˜åŒ–</code>ã€<code>çº¿æ€§ä»£æ•°</code>ç­‰å‡½æ•°ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mode_value = stats.mode(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;ä¼—æ•° (Mode): <span class="subst">&#123;mode_value.mode[<span class="number">0</span>]&#125;</span>, å‡ºçŽ°æ¬¡æ•°: <span class="subst">&#123;mode_value.count[<span class="number">0</span>]&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¼—æ•° (Mode): 85, å‡ºçŽ°æ¬¡æ•°: 4</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¼—æ•°æ˜¯85ï¼Œå®ƒåœ¨æ•°æ®é›†ä¸­å‡ºçŽ°äº†4æ¬¡ã€‚</p><h3 id="ç»¼åˆä»£ç ç¤ºä¾‹"><a href="#ç»¼åˆä»£ç ç¤ºä¾‹" class="headerlink" title="ç»¼åˆä»£ç ç¤ºä¾‹"></a>ç»¼åˆä»£ç ç¤ºä¾‹</h3><p>ç»“åˆä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç»¼åˆç¤ºä¾‹ï¼Œè®¡ç®—ä¸€ä¸ªæ•°æ®é›†çš„å‡å€¼ã€ä¸­å¤®å€¤å’Œä¼—æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> scipy <span class="keyword">import</span> stats</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®é›†ï¼šä¸€ç»„å­¦ç”Ÿçš„æˆç»©</span></span><br><span class="line">data = [<span class="number">80</span>, <span class="number">85</span>, <span class="number">90</span>, <span class="number">92</span>, <span class="number">85</span>, <span class="number">88</span>, <span class="number">75</span>, <span class="number">78</span>, <span class="number">92</span>, <span class="number">95</span>, <span class="number">100</span>, <span class="number">85</span>, <span class="number">92</span>, <span class="number">88</span>, <span class="number">85</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—å‡å€¼</span></span><br><span class="line">mean_value = np.mean(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—ä¸­å¤®å€¤</span></span><br><span class="line">median_value = np.median(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—ä¼—æ•°</span></span><br><span class="line">mode_value = stats.mode(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æžœ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;å‡å€¼ (Mean): <span class="subst">&#123;mean_value&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;ä¸­å¤®å€¤ (Median): <span class="subst">&#123;median_value&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;ä¼—æ•° (Mode): <span class="subst">&#123;mode_value.mode[<span class="number">0</span>]&#125;</span>, å‡ºçŽ°æ¬¡æ•°: <span class="subst">&#123;mode_value.count[<span class="number">0</span>]&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å‡å€¼ (Mean): 87.33333333333333</span><br><span class="line">ä¸­å¤®å€¤ (Median): 85.0</span><br><span class="line">ä¼—æ•° (Mode): 85, å‡ºçŽ°æ¬¡æ•°: 4</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨æ•°æ®åˆ†æžä¸­ï¼Œå‡å€¼ã€ä¸­å¤®å€¤å’Œä¼—æ•°æ˜¯æœ€å¸¸ç”¨çš„ä¸‰ç§é›†ä¸­è¶‹åŠ¿çš„ç»Ÿè®¡é‡ã€‚å®ƒä»¬å„è‡ªæœ‰ä¸åŒçš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ï¼š</p><blockquote><p>å‡å€¼ï¼šé€‚ç”¨äºŽæ•°æ®åˆ†å¸ƒè¾ƒä¸ºå‡åŒ€çš„æƒ…å†µï¼Œä½†å¯¹å¼‚å¸¸å€¼æ•æ„Ÿã€‚<br>ä¸­å¤®å€¤ï¼šé€‚ç”¨äºŽæ•°æ®æœ‰æžç«¯å€¼æˆ–å¼‚å¸¸å€¼çš„æƒ…å†µï¼Œèƒ½è¾ƒå¥½åœ°åæ˜ æ•°æ®çš„ä¸­å¿ƒä½ç½®ã€‚<br>ä¼—æ•°ï¼šé€‚ç”¨äºŽåˆ†ç±»æ•°æ®æˆ–æè¿°æ•°æ®ä¸­æœ€å¸¸è§çš„å€¼ã€‚</p></blockquote><p>é€šè¿‡Pythonçš„<code>NumPy</code>å’Œ<code>SciPy</code>åº“ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°è®¡ç®—è¿™äº›ç»Ÿè®¡é‡ï¼Œä¸ºæ•°æ®åˆ†æžæä¾›æœ‰åŠ›çš„æ”¯æŒã€‚åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œæ ¹æ®æ•°æ®çš„æ€§è´¨é€‰æ‹©åˆé€‚çš„ç»Ÿè®¡é‡éžå¸¸é‡è¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Data Analysis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Data Analysis </tag>
            
            <tag> Math </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èŠèŠäººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ä¸Žæ·±åº¦å­¦ä¹ </title>
      <link href="/2020/07/05/ai-ml-dl/"/>
      <url>/2020/07/05/ai-ml-dl/</url>
      
        <content type="html"><![CDATA[<p>éšç€ç§‘æŠ€çš„å¿«é€Ÿå‘å±•ï¼Œäººå·¥æ™ºèƒ½ï¼ˆ<code>Artificial Intelligence, AI</code>ï¼‰ã€æœºå™¨å­¦ä¹ ï¼ˆ<code>Machine Learning, ML</code>ï¼‰å’Œæ·±åº¦å­¦ä¹ ï¼ˆ<code>Deep Learning, DL</code>ï¼‰æˆä¸ºäº†çŽ°ä»£ç§‘æŠ€çš„é‡è¦è¯é¢˜ã€‚ä»Žè¯­éŸ³åŠ©æ‰‹åˆ°è‡ªåŠ¨é©¾é©¶æ±½è½¦ï¼ŒAI æ­£åœ¨æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»æ–¹å¼ã€‚ä½†å¾ˆå¤šäººå¯èƒ½ä¼šé—®ï¼Œ äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œå®ƒä»¬ä¹‹é—´åˆæœ‰ä»€ä¹ˆå…³ç³»ã€‚è™½ç„¶è¿™ä¸‰ä¸ªæ¦‚å¿µç»å¸¸è¢«æ··æ·†ï¼Œä½†å®ƒä»¬ä¹‹é—´å­˜åœ¨ç€æ˜Žç¡®çš„å…³ç³»å’Œå±‚çº§ç»“æž„ã€‚ä¸‹é¢å°†æˆ‘ä»¬æ¥è¯¦ç»†è§£é‡Šå®ƒä»¬çš„å®šä¹‰ã€ç‰¹ç‚¹åŠç›¸äº’å…³ç³»ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/ai-ml/ai-ml-dl-relationship.png" class="lazyload placeholder" data-srcset="/assets/images/ai-ml/ai-ml-dl-relationship.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="AIã€MLã€DLå…³ç³»å›¾" style="width:800px;"/></div><span class="image-caption">AIã€MLã€DLå…³ç³»å›¾</span></div><h2 id="1-äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰"><a href="#1-äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰" class="headerlink" title="1. äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰"></a>1. äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰</h2><p>äººå·¥æ™ºèƒ½æ˜¯æŒ‡ä½¿è®¡ç®—æœºå’Œæœºå™¨å…·æœ‰äººç±»æ™ºèƒ½çš„èƒ½åŠ›ã€‚è¿™åŒ…æ‹¬ç†è§£è‡ªç„¶è¯­è¨€ã€è¯†åˆ«å›¾åƒã€è§£å†³é—®é¢˜å’Œåšå‡ºå†³ç­–ç­‰ã€‚è®©æœºå™¨æ¨¡ä»¿äººç±»çš„æ™ºèƒ½è¡Œä¸ºï¼Œèƒ½å¤Ÿåƒäººç±»ä¸€æ ·è¿›è¡Œæ€è€ƒã€å­¦ä¹ å’Œè§£å†³é—®é¢˜ã€‚æ¯”å¦‚ï¼Œå½“ä½ ç”¨æ™ºèƒ½éŸ³ç®±è¯¢é—®å¤©æ°”æ—¶ï¼Œå®ƒä¸ä»…èƒ½ç†è§£ä½ çš„é—®é¢˜ï¼Œè¿˜èƒ½ç»™ä½ å‡†ç¡®çš„ç­”æ¡ˆã€‚è¿™å°±æ˜¯äººå·¥æ™ºèƒ½åœ¨å‘æŒ¥ä½œç”¨ã€‚ç®€å•æ¥è¯´ï¼Œäººå·¥æ™ºèƒ½çš„ç›®æ ‡æ˜¯è®©æœºå™¨èƒ½å¤Ÿâ€œåƒäººä¸€æ ·æ€è€ƒâ€ã€‚</p><p>äººå·¥æ™ºèƒ½æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼Œ å…¶åº”ç”¨å®žä¾‹æœ‰ï¼šæ™ºèƒ½åŠ©æ‰‹ï¼ˆå¦‚Siriã€Alexaï¼‰ã€è‡ªåŠ¨é©¾é©¶æ±½è½¦ã€æŽ¨èç³»ç»Ÿç­‰ã€‚<br><strong>è‡ªä¸»æ€§</strong>ï¼šèƒ½å¤Ÿè‡ªä¸»è¿›è¡Œå†³ç­–å’Œå­¦ä¹ ã€‚<br><strong>é€‚åº”æ€§</strong>ï¼šèƒ½å¤Ÿæ ¹æ®çŽ¯å¢ƒå˜åŒ–è°ƒæ•´è‡ªèº«è¡Œä¸ºã€‚<br><strong>é—®é¢˜è§£å†³èƒ½åŠ›</strong>ï¼šèƒ½å¤Ÿåœ¨å¤æ‚çš„æƒ…å†µä¸‹æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="2-æœºå™¨å­¦ä¹ ï¼ˆMLï¼‰"><a href="#2-æœºå™¨å­¦ä¹ ï¼ˆMLï¼‰" class="headerlink" title="2. æœºå™¨å­¦ä¹ ï¼ˆMLï¼‰"></a>2. æœºå™¨å­¦ä¹ ï¼ˆMLï¼‰</h2><p>æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªå­é›†ï¼Œä¸“æ³¨äºŽé€šè¿‡æ•°æ®è®©æœºå™¨è‡ªåŠ¨å­¦ä¹ å¹¶æ”¹è¿›å…¶æ€§èƒ½ï¼Œè€Œä¸æ˜¯ä¾èµ–äºŽæ˜Žç¡®çš„ç¼–ç¨‹æŒ‡ä»¤ã€‚æœºå™¨å­¦ä¹ çš„æ ¸å¿ƒåœ¨äºŽç®—æ³•ï¼Œå®ƒä»¬å¯ä»¥ä»Žæ•°æ®ä¸­å‘çŽ°æ¨¡å¼ï¼Œå¹¶æ ¹æ®è¿™äº›æ¨¡å¼è¿›è¡Œé¢„æµ‹æˆ–åˆ†ç±»ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³è®­ç»ƒä¸€ä¸ªæœºå™¨æ¥è¯†åˆ«æ°´æžœçš„ç§ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®ƒæˆåƒä¸Šä¸‡å¼ ä¸åŒæ°´æžœçš„å›¾ç‰‡ï¼Œå¹¶å‘Šè¯‰å®ƒæ¯å¼ å›¾ç‰‡ä¸Šæ˜¯ä»€ä¹ˆæ°´æžœã€‚æœºå™¨å­¦ä¹ é€šè¿‡ä¸æ–­åˆ†æžè¿™äº›æ•°æ®ï¼Œé€æ¸æ‰¾å‡ºæ°´æžœçš„ç‰¹å¾ï¼Œä»Žè€Œèƒ½å¤Ÿåœ¨çœ‹åˆ°æ–°å›¾ç‰‡æ—¶å‡†ç¡®åˆ¤æ–­å‡ºæ°´æžœçš„ç§ç±»ã€‚</p><p>æœºå™¨å­¦ä¹ çš„ç‰¹ç‚¹æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><p><strong>æ•°æ®é©±åŠ¨</strong>ï¼šä¾èµ–äºŽå¤§é‡çš„æ•°æ®è¿›è¡Œè®­ç»ƒã€‚<br><strong>æ¨¡åž‹è®­ç»ƒ</strong>ï¼šé€šè¿‡è®­ç»ƒæ•°æ®åˆ›å»ºæ¨¡åž‹ï¼Œç„¶åŽç”¨æ–°çš„æ•°æ®è¿›è¡Œæµ‹è¯•å’ŒéªŒè¯ã€‚<br><strong>ä¸æ–­æ”¹è¿›</strong>ï¼šéšç€æ–°æ•°æ®çš„è¾“å…¥ï¼Œæ¨¡åž‹å¯ä»¥ä¸æ–­æ›´æ–°å’Œæ”¹è¿›ã€‚</p><p>æœºå™¨å­¦ä¹ æœ‰å¦‚ä¸‹ç±»åž‹ï¼š</p><p><strong>ç›‘ç£å­¦ä¹ </strong>ï¼šåˆ©ç”¨æ ‡æ³¨æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œç›®æ ‡æ˜¯é¢„æµ‹ç»“æžœï¼ˆä¾‹å¦‚åˆ†ç±»ã€å›žå½’ï¼‰ã€‚åˆ†ç±»é—®é¢˜ä¸­æœ€å¸¸è§çš„å°±æ˜¯æ­£è´Ÿæ ·æœ¬çš„äºŒåˆ†ç±»é—®é¢˜ã€‚<br><strong>æ— ç›‘ç£å­¦ä¹ </strong>ï¼šä½¿ç”¨æœªæ ‡æ³¨çš„æ•°æ®å¯»æ‰¾éšè—çš„æ¨¡å¼ï¼ˆä¾‹å¦‚èšç±»ã€å…³è”è§„åˆ™ï¼‰ã€‚<br><strong>å¼ºåŒ–å­¦ä¹ </strong>ï¼šé€šè¿‡ä¸ŽçŽ¯å¢ƒçš„äº¤äº’ï¼Œå­¦ä¹ æœ€ä¼˜å†³ç­–ç­–ç•¥ï¼ˆä¾‹å¦‚æ¸¸æˆAIï¼‰ã€‚<br>åº”ç”¨å®žä¾‹ä¸»è¦åŒ…æ‹¬ï¼šå›¾åƒè¯†åˆ«ã€è¯­éŸ³è¯†åˆ«ã€åžƒåœ¾é‚®ä»¶è¿‡æ»¤ç­‰ã€‚</p><h2 id="3-æ·±åº¦å­¦ä¹ ï¼ˆDLï¼‰"><a href="#3-æ·±åº¦å­¦ä¹ ï¼ˆDLï¼‰" class="headerlink" title="3. æ·±åº¦å­¦ä¹ ï¼ˆDLï¼‰"></a>3. æ·±åº¦å­¦ä¹ ï¼ˆDLï¼‰</h2><p>æ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªé«˜çº§åˆ†æ”¯ï¼ŒåŸºäºŽäººå·¥ç¥žç»ç½‘ç»œçš„ç»“æž„ã€‚å®ƒé€šè¿‡å¤šå±‚ç¥žç»ç½‘ç»œï¼ˆæ·±å±‚ç¥žç»ç½‘ç»œï¼‰å¯¹æ•°æ®è¿›è¡Œå¤æ‚çš„ç‰¹å¾æå–å’Œè¡¨ç¤ºå­¦ä¹ ã€‚æ¯”å¦‚ï¼Œåœ¨äººè„¸è¯†åˆ«ä¸­ï¼Œæ·±åº¦å­¦ä¹ å¯ä»¥è¯†åˆ«å‡ºç…§ç‰‡ä¸­çš„äººè„¸ï¼Œä¸ä»…èƒ½å¤Ÿåˆ¤æ–­å‡ºæ˜¯è°ï¼Œè¿˜èƒ½åˆ†æžå‡ºä»–ä»¬çš„è¡¨æƒ…å’Œæƒ…ç»ªã€‚æ·±åº¦å­¦ä¹ çš„å¼ºå¤§ä¹‹å¤„åœ¨äºŽï¼Œå®ƒèƒ½å¤Ÿå¤„ç†å¤§é‡çš„æ•°æ®ï¼Œå¹¶ä»Žä¸­å‘çŽ°æ›´æ·±å±‚æ¬¡çš„è§„å¾‹ã€‚æ·±åº¦å­¦ä¹ ç‰¹åˆ«é€‚ç”¨äºŽå¤„ç†å¤§è§„æ¨¡æ•°æ®é›†ã€‚</p><p>æ·±åº¦å­¦ä¹ çš„ç‰¹ç‚¹ï¼š</p><p><strong>å¤šå±‚ç»“æž„</strong>ï¼šé€šè¿‡å¤šå±‚ç½‘ç»œæå–æ•°æ®çš„é«˜é˜¶ç‰¹å¾ï¼Œä½¿å¾—æ¨¡åž‹èƒ½å¤Ÿç†è§£æ›´å¤æ‚çš„æ¨¡å¼ã€‚<br><strong>è‡ªåŠ¨ç‰¹å¾æå–</strong>ï¼šä¸åŒäºŽä¼ ç»Ÿæœºå™¨å­¦ä¹ ï¼Œæ·±åº¦å­¦ä¹ å¯ä»¥è‡ªåŠ¨è¯†åˆ«é‡è¦ç‰¹å¾ï¼Œå‡å°‘äº†æ‰‹åŠ¨ç‰¹å¾å·¥ç¨‹çš„éœ€è¦ã€‚<br><strong>å¼ºå¤§çš„æ€§èƒ½</strong>ï¼šåœ¨å›¾åƒã€è¯­éŸ³ç­‰ä»»åŠ¡ä¸Šï¼Œæ·±åº¦å­¦ä¹ é€šå¸¸èƒ½è¾¾åˆ°æ›´é«˜çš„å‡†ç¡®çŽ‡ã€‚<br>åº”ç”¨å®žä¾‹ä¸»è¦åŒ…æ‹¬ï¼šäººè„¸è¯†åˆ«ã€è‡ªåŠ¨ç¿»è¯‘ã€è¯­éŸ³åˆæˆã€è§†é¢‘åˆ†æžç­‰ã€‚</p><h2 id="4-ä¸‰è€…ä¹‹é—´çš„å…³ç³»"><a href="#4-ä¸‰è€…ä¹‹é—´çš„å…³ç³»" class="headerlink" title="4. ä¸‰è€…ä¹‹é—´çš„å…³ç³»"></a>4. ä¸‰è€…ä¹‹é—´çš„å…³ç³»</h2><p>ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£è¿™ä¸‰è€…çš„å…³ç³»ï¼Œå¯ä»¥å°†å®ƒä»¬çœ‹ä½œä¸€ä¸ªå±‚çº§ç»“æž„ï¼š</p><p><strong>äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰</strong>æ˜¯å¹¿æ³›çš„æ¦‚å¿µï¼Œæ¶µç›–äº†æ‰€æœ‰æ¨¡ä»¿æˆ–æ¨¡æ‹Ÿäººç±»æ™ºèƒ½çš„æŠ€æœ¯ã€‚<br><strong>æœºå™¨å­¦ä¹ ï¼ˆMLï¼‰</strong>æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªé‡è¦åˆ†æ”¯ï¼Œä¸“æ³¨äºŽè®©æœºå™¨é€šè¿‡æ•°æ®å­¦ä¹ ã€‚<br><strong>æ·±åº¦å­¦ä¹ ï¼ˆDLï¼‰</strong>åˆ™æ˜¯æœºå™¨å­¦ä¹ ä¸­çš„ä¸€ä¸ªå…·ä½“å®žçŽ°ï¼Œä½¿ç”¨æ·±å±‚ç¥žç»ç½‘ç»œæ¥å¤„ç†å’Œç†è§£æ•°æ®ã€‚</p><p>å¯ä»¥ç”¨ä»¥ä¸‹æ¯”å–»æ¥ç†è§£ï¼š</p><p>äººå·¥æ™ºèƒ½æ˜¯ä¸€ä¸ªå¤§ç›’å­ï¼Œé‡Œé¢æœ‰è®¸å¤šçŽ©å…·ã€‚<br>æœºå™¨å­¦ä¹ æ˜¯å…¶ä¸­ä¸€ç§çŽ©å…·ï¼Œä¸“æ³¨äºŽé€šè¿‡æ•°æ®å­¦ä¹ å’Œæ”¹è¿›ã€‚<br>æ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ ä¸­æ›´é«˜çº§çš„çŽ©å…·ï¼Œèƒ½å¤Ÿå¤„ç†æ›´å¤æ‚çš„æ•°æ®å’Œä»»åŠ¡ã€‚</p><p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> AI/ML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®æ¹–ï¼ˆData Lakeï¼‰vs æ•°æ®ä»“åº“ï¼ˆData Warehouseï¼‰</title>
      <link href="/2020/06/13/data-lake-vs-data-warehouse/"/>
      <url>/2020/06/13/data-lake-vs-data-warehouse/</url>
      
        <content type="html"><![CDATA[<p><code>æ•°æ®æ¹–ï¼ˆData Lakeï¼‰</code>å’Œ<code>æ•°æ®ä»“åº“ï¼ˆData Warehouseï¼‰</code>éƒ½æ˜¯ç”¨äºŽå­˜å‚¨å’Œç®¡ç†æ•°æ®çš„ç³»ç»Ÿï¼Œä½†å®ƒä»¬åœ¨è®¾è®¡ç†å¿µã€ç»“æž„å’Œä½¿ç”¨åœºæ™¯ä¸Šæœ‰ä¸€äº›æ˜¾è‘—çš„åŒºåˆ«å’Œå…±åŒç‚¹ã€‚</p><h2 id="æ•°æ®æ¹–ï¼ˆData-Lakeï¼‰"><a href="#æ•°æ®æ¹–ï¼ˆData-Lakeï¼‰" class="headerlink" title="æ•°æ®æ¹–ï¼ˆData Lakeï¼‰"></a>æ•°æ®æ¹–ï¼ˆData Lakeï¼‰</h2><p>æ•°æ®æ¹–æ˜¯ä¸€ä¸ªé›†ä¸­å¼å­˜å‚¨åº“ï¼Œå®ƒä»¥åŽŸå§‹å½¢å¼æ‘„å–å’Œå­˜å‚¨å¤§é‡æ•°æ®ã€‚ç„¶åŽï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¹¶å°†å…¶ç”¨ä½œå„ç§åˆ†æžéœ€æ±‚çš„åŸºç¡€ã€‚ç”±äºŽå…¶å¼€æ”¾ã€å¯æ‰©å±•çš„æž¶æž„ï¼Œæ•°æ®æ¹–å¯ä»¥å®¹çº³æ¥è‡ªä»»ä½•æ¥æºçš„æ‰€æœ‰ç±»åž‹çš„æ•°æ®ï¼Œä»Žç»“æž„åŒ–ï¼ˆæ•°æ®åº“è¡¨ã€Excel è¡¨æ ¼ï¼‰åˆ°åŠç»“æž„åŒ–ï¼ˆXML æ–‡ä»¶ã€ç½‘é¡µï¼‰å†åˆ°éžç»“æž„åŒ–ï¼ˆå›¾åƒã€éŸ³é¢‘æ–‡ä»¶ã€æŽ¨æ–‡ï¼‰ï¼Œæ‰€æœ‰è¿™äº›éƒ½ä¸ä¼šç‰ºç‰²ä¿çœŸåº¦ã€‚æ•°æ®æ–‡ä»¶é€šå¸¸å­˜å‚¨åœ¨æš‚å­˜åŒºåŸŸï¼ˆåŽŸå§‹åŒºåŸŸã€æ¸…ç†åŒºåŸŸå’Œç‰¹é€‰åŒºåŸŸï¼‰ä¸­ï¼Œä»¥ä¾¿ä¸åŒç±»åž‹çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨å„ç§å½¢å¼çš„æ•°æ®æ¥æ»¡è¶³ä»–ä»¬çš„éœ€æ±‚ã€‚æ•°æ®æ¹–ä¸ºå„ç§åº”ç”¨ç¨‹åºæä¾›æ ¸å¿ƒæ•°æ®ä¸€è‡´æ€§ï¼Œä¸ºå¤§æ•°æ®åˆ†æžã€æœºå™¨å­¦ä¹ ã€é¢„æµ‹åˆ†æžå’Œå…¶ä»–å½¢å¼çš„æ™ºèƒ½æ“ä½œæä¾›æ”¯æŒã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/data-lake.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/data-lake.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Data Lake" style="width:700px;"/></div><span class="image-caption">Data Lake</span></div><h3 id="ç‰¹ç‚¹ï¼š"><a href="#ç‰¹ç‚¹ï¼š" class="headerlink" title="ç‰¹ç‚¹ï¼š"></a>ç‰¹ç‚¹ï¼š</h3><p><strong>æ•°æ®å­˜å‚¨æ–¹å¼</strong>ï¼š æ•°æ®æ¹–é€šå¸¸ä½¿ç”¨åŽŸå§‹æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œå¯ä»¥å¤„ç†ç»“æž„åŒ–ã€åŠç»“æž„åŒ–å’Œéžç»“æž„åŒ–æ•°æ®ï¼ˆä¾‹å¦‚æ–‡æœ¬ã€å›¾åƒã€è§†é¢‘ç­‰ï¼‰ã€‚</p><p><strong>çµæ´»æ€§</strong>ï¼š å¯ä»¥å­˜å‚¨å¤šç§ç±»åž‹çš„æ•°æ®ï¼Œæ•°æ®åœ¨å­˜å‚¨æ—¶ä¸éœ€è¦é¢„å…ˆå®šä¹‰æ¨¡å¼ï¼ˆschema-on-writeï¼‰ï¼Œè€Œæ˜¯åœ¨è¯»å–æ—¶è¿›è¡Œæ¨¡å¼å®šä¹‰ï¼ˆschema-on-readï¼‰ã€‚</p><p><strong>æ‰©å±•æ€§</strong>ï¼š æ•°æ®æ¹–é€šå¸¸å»ºç«‹åœ¨å¤§æ•°æ®æŠ€æœ¯ä¹‹ä¸Šï¼Œå¦‚Hadoopã€Amazon S3ç­‰ï¼Œå…·æœ‰é«˜åº¦çš„å¯æ‰©å±•æ€§ã€‚</p><p><strong>æ•°æ®å¤„ç†</strong>ï¼š æ”¯æŒå¤§è§„æ¨¡çš„æ•°æ®å¤„ç†å’Œåˆ†æžï¼Œå¦‚æ•°æ®æŒ–æŽ˜å’Œæœºå™¨å­¦ä¹ ã€‚</p><p><strong>æˆæœ¬</strong>ï¼š å­˜å‚¨æˆæœ¬é€šå¸¸è¾ƒä½Žï¼Œä½†å¤„ç†å’Œåˆ†æžæ•°æ®çš„æˆæœ¬å¯èƒ½è¾ƒé«˜ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯ï¼š"><a href="#ä½¿ç”¨åœºæ™¯ï¼š" class="headerlink" title="ä½¿ç”¨åœºæ™¯ï¼š"></a>ä½¿ç”¨åœºæ™¯ï¼š</h3><ul><li>éœ€è¦å¤„ç†å’Œå­˜å‚¨å„ç§ç±»åž‹çš„æ•°æ®ï¼Œå¦‚ç¤¾äº¤åª’ä½“å†…å®¹ã€ä¼ æ„Ÿå™¨æ•°æ®ã€æ—¥å¿—æ–‡ä»¶ç­‰ã€‚</li><li>éœ€è¦è¿›è¡Œå¤§è§„æ¨¡çš„æ•°æ®åˆ†æžå’Œæ•°æ®ç§‘å­¦ä»»åŠ¡ã€‚</li></ul><h2 id="æ•°æ®ä»“åº“ï¼ˆData-Warehouseï¼‰"><a href="#æ•°æ®ä»“åº“ï¼ˆData-Warehouseï¼‰" class="headerlink" title="æ•°æ®ä»“åº“ï¼ˆData Warehouseï¼‰"></a>æ•°æ®ä»“åº“ï¼ˆData Warehouseï¼‰</h2><p>æ•°æ®ä»“åº“æ˜¯ä¸€ä¸ªé›†ä¸­å¼å­˜å‚¨åº“ï¼Œç”¨äºŽå­˜å‚¨å’Œç®¡ç†ä¼ä¸šçº§æ•°æ®ã€‚æ•°æ®ä»“åº“é€šå¸¸åŒ…å«æ¥è‡ªå¤šä¸ªæºçš„ç»“æž„åŒ–å’Œéžç»“æž„åŒ–æ•°æ®ï¼ŒåŒ…æ‹¬æ¥è‡ªå…³ç³»æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€åº”ç”¨ç¨‹åºã€Web æœåŠ¡å™¨ã€ç§»åŠ¨è®¾å¤‡ç­‰ã€‚æ•°æ®ä»“åº“é€šå¸¸æŒ‰ç…§äº‹å®žè¡¨ã€ç»´åº¦è¡¨å’Œäº‹å®žå’Œç»´åº¦çš„å¤šå¯¹å¤šå…³ç³»è¿›è¡Œç»„ç»‡ï¼Œä»¥ä¾¿æ”¯æŒå¤æ‚çš„åˆ†æžæŸ¥è¯¢ã€‚æ•°æ®ä»“åº“é€šå¸¸ä½¿ç”¨æ•°æ®é›†å¸‚ï¼ˆData Martï¼‰çš„å½¢å¼ï¼Œå°†æ•°æ®é›†ä¸­å­˜å‚¨ï¼Œå¹¶æä¾›æ•°æ®é›†å¸‚çš„åˆ†æžåŠŸèƒ½ã€‚æ•°æ®ä»“åº“é€šå¸¸ä½¿ç”¨å¤šç§æ•°æ®ä»“åº“å·¥å…·è¿›è¡Œæ•°æ®å»ºæ¨¡ã€æ•°æ®è½¬æ¢ã€æ•°æ®åŠ è½½ã€æ•°æ®è´¨é‡å’Œæ•°æ®æŒ–æŽ˜ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/data-warehouse.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/data-warehouse.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Data Warehouse" style="width:700px;"/></div><span class="image-caption">Data Warehouse</span></div><h3 id="ç‰¹ç‚¹ï¼š-1"><a href="#ç‰¹ç‚¹ï¼š-1" class="headerlink" title="ç‰¹ç‚¹ï¼š"></a>ç‰¹ç‚¹ï¼š</h3><p><strong>æ•°æ®å­˜å‚¨æ–¹å¼</strong>ï¼š æ•°æ®ä»“åº“é€šå¸¸å­˜å‚¨ç»è¿‡å¤„ç†å’Œæ•´åˆçš„æ•°æ®ï¼Œæ•°æ®æ˜¯ç»“æž„åŒ–çš„ï¼Œå¹¶ä¸”åœ¨å­˜å‚¨ä¹‹å‰å·²ç»å®šä¹‰äº†æ¨¡å¼ï¼ˆschema-on-writeï¼‰ã€‚</p><p><strong>æ•°æ®æ•´åˆ</strong>ï¼š æ•°æ®ä»“åº“ç”¨äºŽæ•´åˆæ¥è‡ªä¸åŒæ•°æ®æºçš„æ•°æ®ï¼Œè¿›è¡Œæ¸…æ´—ã€è½¬æ¢å’ŒåŠ è½½ï¼ˆETLï¼‰ã€‚</p><p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š æ•°æ®ä»“åº“é€šå¸¸ä¼˜åŒ–äº†æŸ¥è¯¢æ€§èƒ½ï¼Œæ”¯æŒå¤æ‚çš„SQLæŸ¥è¯¢å’ŒæŠ¥è¡¨ç”Ÿæˆã€‚</p><p><strong>æ‰©å±•æ€§</strong>ï¼š è™½ç„¶çŽ°ä»£æ•°æ®ä»“åº“ä¹Ÿæ”¯æŒå¤§è§„æ¨¡æ•°æ®å­˜å‚¨ï¼Œä½†æ‰©å±•æ€§é€šå¸¸ä¸å¦‚æ•°æ®æ¹–ã€‚</p><p><strong>æˆæœ¬</strong>ï¼š å­˜å‚¨å’Œå¤„ç†æˆæœ¬è¾ƒé«˜ï¼Œä½†æ€§èƒ½ä¼˜åŒ–çš„æŸ¥è¯¢å¤„ç†å¯ä»¥å‡å°‘è®¡ç®—æˆæœ¬ã€‚</p><h3 id="ä½¿ç”¨åœºæ™¯ï¼š-1"><a href="#ä½¿ç”¨åœºæ™¯ï¼š-1" class="headerlink" title="ä½¿ç”¨åœºæ™¯ï¼š"></a>ä½¿ç”¨åœºæ™¯ï¼š</h3><ul><li>éœ€è¦å­˜å‚¨å’Œåˆ†æžç»“æž„åŒ–æ•°æ®ï¼Œé€šå¸¸ç”¨äºŽå•†ä¸šæ™ºèƒ½ã€æŠ¥è¡¨å’Œåˆ†æžã€‚</li><li>éœ€è¦ä»Žå¤šä¸ªæ•°æ®æºä¸­æ•´åˆæ•°æ®å¹¶è¿›è¡Œé«˜æ•ˆæŸ¥è¯¢å’Œåˆ†æžã€‚</li></ul><h2 id="å¼‚åŒç‚¹"><a href="#å¼‚åŒç‚¹" class="headerlink" title="å¼‚åŒç‚¹"></a>å¼‚åŒç‚¹</h2><h3 id="ç›¸åŒç‚¹ï¼š"><a href="#ç›¸åŒç‚¹ï¼š" class="headerlink" title="ç›¸åŒç‚¹ï¼š"></a>ç›¸åŒç‚¹ï¼š</h3><p><strong>æ•°æ®å­˜å‚¨</strong>ï¼š éƒ½ç”¨äºŽå­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œä»¥æ”¯æŒæ•°æ®åˆ†æžå’Œå†³ç­–ã€‚</p><p><strong>æ•°æ®è®¿é—®</strong>ï¼š éƒ½å…è®¸ç”¨æˆ·å’Œåº”ç”¨ç¨‹åºè®¿é—®å­˜å‚¨çš„æ•°æ®ï¼Œç”¨äºŽæŠ¥å‘Šã€åˆ†æžå’Œå†³ç­–æ”¯æŒã€‚</p><h3 id="ä¸åŒç‚¹ï¼š"><a href="#ä¸åŒç‚¹ï¼š" class="headerlink" title="ä¸åŒç‚¹ï¼š"></a>ä¸åŒç‚¹ï¼š</h3><p><strong>æ•°æ®ç±»åž‹</strong>ï¼š æ•°æ®æ¹–å¯ä»¥å­˜å‚¨ç»“æž„åŒ–ã€åŠç»“æž„åŒ–å’Œéžç»“æž„åŒ–æ•°æ®ï¼Œè€Œæ•°æ®ä»“åº“ä¸»è¦å¤„ç†ç»“æž„åŒ–æ•°æ®ã€‚</p><p><strong>æ•°æ®å¤„ç†æ¨¡å¼</strong>ï¼š æ•°æ®æ¹–é€šå¸¸é‡‡ç”¨æŒ‰éœ€æ¨¡å¼ï¼ˆschema-on-readï¼‰ï¼Œæ•°æ®ä»“åº“é‡‡ç”¨é¢„å®šä¹‰æ¨¡å¼ï¼ˆschema-on-writeï¼‰ã€‚</p><p><strong>æ€§èƒ½å’Œæˆæœ¬</strong>ï¼š æ•°æ®ä»“åº“é€šå¸¸åœ¨æŸ¥è¯¢æ€§èƒ½ä¸Šè¿›è¡Œä¼˜åŒ–ï¼Œæˆæœ¬è¾ƒé«˜ï¼›æ•°æ®æ¹–åœ¨å­˜å‚¨æˆæœ¬ä¸Šæ›´å…·ä¼˜åŠ¿ï¼Œä½†å¤„ç†å’Œåˆ†æžå¯èƒ½æ›´å¤æ‚ä¸”æˆæœ¬è¾ƒé«˜ã€‚ </p><p><strong>æ‰©å±•æ€§</strong>ï¼š æ•°æ®æ¹–é€šå¸¸å…·æœ‰é«˜åº¦çš„å¯æ‰©å±•æ€§ï¼Œä½†æ•°æ®ä»“åº“é€šå¸¸ä¸å…·å¤‡è¿™ç§èƒ½åŠ›ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/data-lake-vs-data-warehouse.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/data-lake-vs-data-warehouse.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Data Lake vs Data Warehouse" style="width:800px;"/></div><span class="image-caption">Data Lake vs Data Warehouse</span></div><p>æ€»çš„æ¥è¯´ï¼Œæ•°æ®æ¹–å’Œæ•°æ®ä»“åº“å„æœ‰ä¼˜åŠ£ï¼Œé€‰æ‹©å“ªä¸ªç³»ç»Ÿå–å†³äºŽå…·ä½“çš„ä¸šåŠ¡éœ€æ±‚å’Œæ•°æ®å¤„ç†è¦æ±‚ã€‚åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œå¾ˆå¤šç»„ç»‡ä¼šç»“åˆä½¿ç”¨æ•°æ®æ¹–å’Œæ•°æ®ä»“åº“ï¼Œä»¥å……åˆ†åˆ©ç”¨å®ƒä»¬å„è‡ªçš„ä¼˜åŠ¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Data Lake </tag>
            
            <tag> Data Warehouse </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Apache Iceberg åˆ†æžä»‹ç»ä»¥åŠä½¿ç”¨åœºæ™¯</title>
      <link href="/2020/05/23/what-is-apache-iceberg/"/>
      <url>/2020/05/23/what-is-apache-iceberg/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å¤§æ•°æ®å’Œåˆ†æžä¸æ–­å‘å±•çš„é¢†åŸŸä¸­ï¼Œé«˜æ•ˆç®¡ç†å¤§åž‹æ•°æ®é›†æ˜¯ä¸€ä¸ªå…³é”®æŒ‘æˆ˜ã€‚<code>Apache Iceberg</code> ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„è§£å†³æ–¹æ¡ˆï¼Œå½»åº•æ”¹å˜äº†æˆ‘ä»¬å¤„ç†æ•°æ®æ¹–çš„æ–¹å¼ã€‚å®ƒæ˜¯<code>ä¸€ç§ç”¨äºŽå¤§åž‹åˆ†æžè¡¨çš„é«˜æ€§èƒ½å¼€æºçš„è¡¨æ ¼å¼</code>ï¼Œæ—¨åœ¨è§£å†³æ•°æ®æ¹–ä¸­çš„æ•°æ®ç®¡ç†é—®é¢˜ã€‚å®ƒæä¾›äº†ä¸€ç§æ–°çš„è¡¨æ ¼å¼ï¼Œæ”¯æŒé«˜æ•ˆçš„æŸ¥è¯¢å’Œæ•°æ®ç®¡ç†ï¼ŒåŒæ—¶ä¿æŒäº†æ•°æ®çš„ä¸€è‡´æ€§å’Œå¯é æ€§ã€‚Iceberg ç”± Netflix å¼€å‘ï¼ŒåŽæ¥æèµ ç»™ Apache è½¯ä»¶åŸºé‡‘ä¼šï¼Œæ—¨åœ¨è§£å†³ä¼ ç»Ÿè¡¨æ ¼æ ¼å¼ï¼ˆå¦‚ Apache Hiveï¼‰çš„ä¸€äº›é™åˆ¶ã€‚å®ƒé’ˆå¯¹çŽ°ä»£äº‘å­˜å‚¨å’Œè®¡ç®—çŽ¯å¢ƒè¿›è¡Œäº†ä¼˜åŒ–ï¼Œæä¾›äº†ä¸€ç³»åˆ—é«˜çº§ç‰¹æ€§ï¼Œä½¿å¾—ç®¡ç†å¤§è§„æ¨¡æ•°æ®é›†æ›´åŠ ä¾¿æ·ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/apache-iceberg.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/apache-iceberg.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Apache Iceberg" style="width:600px;"/></div><span class="image-caption">Apache Iceberg</span></div><h2 id="å·¥ä½œåŽŸç†"><a href="#å·¥ä½œåŽŸç†" class="headerlink" title="å·¥ä½œåŽŸç†"></a>å·¥ä½œåŽŸç†</h2><p><code>Apache Iceberg</code> çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ª<code>è¡¨æ ¼å¼</code>ï¼Œå®ƒå°†æ•°æ®ç»„ç»‡æˆä¸€ç³»åˆ—çš„æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶åŒ…å«ä¸€ç»„æ•°æ®è®°å½•ã€‚è¿™äº›æ–‡ä»¶é€šè¿‡<code>å…ƒæ•°æ®æ–‡ä»¶</code>è¿›è¡Œç®¡ç†ï¼Œå…ƒæ•°æ®æ–‡ä»¶è®°å½•äº†æ–‡ä»¶çš„ä½ç½®ã€å¤§å°ã€ç»Ÿè®¡ä¿¡æ¯ç­‰ã€‚ä¸»è¦åˆ†ä¸ºä¸¤å±‚ï¼š<code>å…ƒæ•°æ®å±‚</code>å’Œ<code>æ•°æ®å­˜å‚¨å±‚</code>ã€‚Iceberg ä½¿ç”¨ä¸€ç§ç§°ä¸ºâ€œ<code>å¿«ç…§</code>â€çš„æœºåˆ¶æ¥ç®¡ç†æ•°æ®çš„ç‰ˆæœ¬ï¼Œæ¯ä¸ªå¿«ç…§ä»£è¡¨è¡¨åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„çŠ¶æ€ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/apache-iceberg-structure.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/apache-iceberg-structure.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Apache Iceberg Architecture" style="width:600px;"/></div><span class="image-caption">Apache Iceberg Architecture</span></div><h3 id="æ•°æ®ç»„ç»‡"><a href="#æ•°æ®ç»„ç»‡" class="headerlink" title="æ•°æ®ç»„ç»‡"></a>æ•°æ®ç»„ç»‡</h3><p>Iceberg å°†æ•°æ®ç»„ç»‡æˆå¤šä¸ªå±‚çº§ï¼š</p><p><strong>æ–‡ä»¶å±‚</strong>ï¼šæ•°æ®å­˜å‚¨åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶åŒ…å«ä¸€ç»„è®°å½•ã€‚<br><strong>æ¸…å•å±‚</strong>ï¼šæ¸…å•æ–‡ä»¶å³å…ƒæ•°æ®æ–‡ä»¶ï¼Œå®ƒè®°å½•äº†æ–‡ä»¶çš„ä½ç½®å’Œç»Ÿè®¡ä¿¡æ¯ã€‚<br><strong>å¿«ç…§å±‚</strong>ï¼šå¿«ç…§è®°å½•äº†è¡¨åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬æ‰€æœ‰æ–‡ä»¶å’Œæ¸…å•æ–‡ä»¶çš„å¼•ç”¨ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/apache-iceberg-architecture.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/apache-iceberg-architecture.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" style="width:600px;"/></div></div><h3 id="æŸ¥è¯¢æ‰§è¡Œ"><a href="#æŸ¥è¯¢æ‰§è¡Œ" class="headerlink" title="æŸ¥è¯¢æ‰§è¡Œ"></a>æŸ¥è¯¢æ‰§è¡Œ</h3><p>å½“æŸ¥è¯¢æ‰§è¡Œæ—¶ï¼ŒIceberg ä½¿ç”¨å…ƒæ•°æ®æ¥ä¼˜åŒ–æŸ¥è¯¢è®¡åˆ’ã€‚å®ƒå¯ä»¥æ ¹æ®æ–‡ä»¶çš„ç»Ÿè®¡ä¿¡æ¯è·³è¿‡ä¸éœ€è¦çš„æ–‡ä»¶ï¼Œä»Žè€Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚æ­¤å¤–ï¼Œ<span class='pbg '>green</span>ã€‚</p><h2 id="å…³é”®ç‰¹æ€§"><a href="#å…³é”®ç‰¹æ€§" class="headerlink" title="å…³é”®ç‰¹æ€§"></a>å…³é”®ç‰¹æ€§</h2><ol><li><p>æ¨¡å¼æ¼”åŒ–ï¼š<br>Iceberg æ”¯æŒæ¨¡å¼æ¼”åŒ–ï¼Œå…è®¸æ·»åŠ ã€åˆ é™¤æˆ–é‡å‘½ååˆ—ï¼Œè€Œæ— éœ€é‡å†™æ•´ä¸ªæ•°æ®é›†ã€‚è¿™ç§çµæ´»æ€§å¯¹äºŽé€‚åº”æ•°æ®éœ€æ±‚å’Œåˆ†æžéœ€æ±‚çš„å˜åŒ–è‡³å…³é‡è¦ã€‚</p></li><li><p>åˆ†åŒºï¼š<br>ä¸Žä¼ ç»Ÿåˆ†åŒºä¸åŒï¼ŒIceberg ä½¿ç”¨æ›´é«˜æ•ˆçš„é€»è¾‘åˆ†åŒºæ–¹æ¡ˆã€‚è¿™æ„å‘³ç€å¯ä»¥ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½è€Œæ— éœ€ç®¡ç†å¤šä¸ªç‰©ç†åˆ†åŒºçš„å¼€é”€ã€‚</p></li><li><p>ACID äº‹åŠ¡ï¼š<br>Iceberg é€šè¿‡å®Œå…¨æ”¯æŒ <code>ACID</code>ï¼ˆåŽŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰äº‹åŠ¡æ¥ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚è¿™ä¸€ç‰¹æ€§å¯¹å¹¶å‘æ•°æ®è¯»å†™è‡³å…³é‡è¦ï¼Œç¡®ä¿æ‰€æœ‰æ“ä½œéƒ½å¯é ä¸€è‡´ã€‚</p></li><li><p>æ—¶é—´æ—…è¡Œï¼š<br>Iceberg æä¾›å†…ç½®çš„<code>æ—¶é—´æ—…è¡Œ</code>æ”¯æŒï¼Œå…è®¸ç”¨æˆ·æŸ¥è¯¢æ•°æ®åœ¨ç‰¹å®šæ—¶é—´ç‚¹çš„çŠ¶æ€ã€‚æ­¤åŠŸèƒ½å¯¹å®¡è®¡ã€æ•°æ®æ¢å¤å’ŒåŽ†å²åˆ†æžéžå¸¸æœ‰ç”¨ã€‚</p></li><li><p>å…ƒæ•°æ®å¤„ç†ï¼š<br>Iceberg ä½¿ç”¨é«˜æ•ˆçš„å…ƒæ•°æ®æ ¼å¼ï¼Œéšæ•°æ®é›†è§„æ¨¡çš„å¢žé•¿è€Œæ‰©å±•ã€‚è¿™ç§å…ƒæ•°æ®ç®¡ç†æ”¹å–„äº†æ€§èƒ½ï¼Œå‡å°‘äº†ç®¡ç†å¤§åž‹è¡¨æ ¼çš„å¼€é”€ã€‚</p></li><li><p>æ’å…¥å’Œåˆ é™¤æ“ä½œï¼š<br>ä½¿ç”¨ Icebergï¼Œå¯ä»¥ç›´æŽ¥å¯¹è¡¨æ ¼æ‰§è¡Œæ’å…¥ï¼ˆæ›´æ–°æˆ–æ’å…¥ï¼‰å’Œåˆ é™¤æ“ä½œï¼Œä½¿å¾—ç®¡ç†å’Œæ›´æ–°æ•°æ®å˜å¾—æ›´åŠ ç®€å•ï¼Œæ— éœ€å¤æ‚çš„ ETLï¼ˆæå–ã€è½¬æ¢ã€åŠ è½½ï¼‰æµç¨‹ã€‚</p></li><li><p>ä¸Žå¤šç§å¼•æ“Žçš„é›†æˆï¼š<br>Iceberg è®¾è®¡ä¸Šä¸Žå¤šç§æ•°æ®å¤„ç†å¼•æ“Žï¼ˆå¦‚ Apache Sparkã€Apache Flink å’Œ Trinoï¼‰æ— ç¼é›†æˆã€‚è¿™ç§é›†æˆæä¾›äº†é€‰æ‹©é€‚åˆåˆ†æžéœ€æ±‚çš„å·¥å…·çš„çµæ´»æ€§ã€‚</p></li></ol><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><ol><li><p>å¤§è§„æ¨¡æ•°æ®åˆ†æžï¼š<br>å½“å¤„ç†å¤§åž‹æ•°æ®é›†æ—¶ï¼ŒIceberg çš„é«˜æ•ˆå…ƒæ•°æ®å¤„ç†å’Œ ACID äº‹åŠ¡ç¡®ä¿äº†å¯é å’Œå¿«é€Ÿçš„æ€§èƒ½ã€‚å®ƒéžå¸¸é€‚åˆéœ€è¦å¯¹å¤§é‡æ•°æ®è¿è¡Œå¤æ‚æŸ¥è¯¢å’Œåˆ†æžçš„ç”¨ä¾‹ã€‚</p></li><li><p>æ•°æ®æ¹–ç®¡ç†ï¼š<br>Iceberg ç‰¹åˆ«é€‚åˆæ•°æ®æ¹–çŽ¯å¢ƒï¼Œå…¶ä¸­å­˜å‚¨ç€å¤§é‡å¤šæ ·åŒ–çš„æ•°æ®ã€‚å…¶å¯¹æ¨¡å¼æ¼”åŒ–å’Œé«˜æ•ˆåˆ†åŒºçš„æ”¯æŒä½¿å¾—åœ¨æ•°æ®æ¹–çŽ¯å¢ƒä¸­ç®¡ç†å’Œåˆ†æžæ•°æ®å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p></li><li><p>å®žæ—¶åˆ†æžï¼š<br>Iceberg èƒ½å¤„ç†å®žæ—¶æ•°æ®æµï¼Œä½¿å…¶éžå¸¸é€‚åˆéœ€è¦ä»¥é«˜æ€§èƒ½å’Œå¯é æ€§å¤„ç†ã€åˆ†æžæµæ•°æ®çš„åœºæ™¯ã€‚</p></li><li><p>åŽ†å²æ•°æ®åˆ†æžï¼š<br>å€ŸåŠ©å†…ç½®çš„æ—¶é—´æ—…è¡ŒåŠŸèƒ½ï¼ŒIceberg éžå¸¸é€‚åˆéœ€è¦è¿›è¡ŒåŽ†å²æ•°æ®åˆ†æžã€å®¡è®¡æˆ–åˆè§„çš„åœºæ™¯ã€‚</p></li><li><p>æ•°æ®è½¬æ¢å’Œ ETL è¿‡ç¨‹ï¼š<br>Iceberg é€šè¿‡å…è®¸ç›´æŽ¥åœ¨è¡¨æ ¼ä¸Šè¿›è¡Œæ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œç®€åŒ–äº†æ•°æ®è½¬æ¢å’Œ ETL è¿‡ç¨‹ï¼Œå‡å°‘äº†å¤æ‚çš„æ•°æ®å¤„ç†å·¥ä½œæµçš„éœ€æ±‚ã€‚</p></li></ol><h2 id="å¦‚ä½•ä½¿ç”¨-Apache-Iceberg"><a href="#å¦‚ä½•ä½¿ç”¨-Apache-Iceberg" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ Apache Iceberg"></a>å¦‚ä½•ä½¿ç”¨ Apache Iceberg</h2><p>è¦å¼€å§‹ä½¿ç”¨ Apache Icebergï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><p>è®¾ç½®çŽ¯å¢ƒï¼š<br>ç¡®ä¿å®‰è£…äº†å…¼å®¹çš„å¤§æ•°æ®å¤„ç†å¼•æ“Žï¼Œå¦‚ Apache Spark æˆ– Apache Flinkã€‚Iceberg ä¸Žè¿™äº›å¼•æ“Žé›†æˆï¼Œæä¾›æ— ç¼ä½“éªŒã€‚æ ¹æ®å¤„ç†å¼•æ“Žï¼Œå¯èƒ½éœ€è¦å°† Iceberg ä½œä¸ºä¾èµ–é¡¹æ·»åŠ ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæ‚¨ä½¿ç”¨ Apache Sparkï¼Œå¯ä»¥å°† Iceberg ä¾èµ–é¡¹æ·»åŠ åˆ° Spark é…ç½®ä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spark.conf.set(&quot;spark.sql.extensions&quot;, &quot;org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions&quot;)</span><br><span class="line">spark.conf.set(&quot;spark.sql.catalog.spark_catalog&quot;, &quot;org.apache.iceberg.spark.SparkCatalog&quot;)</span><br><span class="line">spark.conf.set(&quot;spark.sql.catalog.spark_catalog.type&quot;, &quot;hive&quot;)</span><br></pre></td></tr></table></figure><p>åˆ›å»º Iceberg è¡¨æ ¼ï¼š<br>å¯ä»¥é€šè¿‡ SQL å‘½ä»¤æˆ–æ•°æ®å¤„ç†å¼•æ“Žæä¾›çš„ API åˆ›å»º Iceberg è¡¨æ ¼ã€‚å®šä¹‰è¡¨æ ¼æ¨¡å¼ã€åˆ†åŒºå’Œå…¶ä»–é…ç½®ã€‚å¦‚: <code>spark.sql(&quot;sql statement&quot;)</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE spark_catalog.default.iceberg_table (</span><br><span class="line">  id INT,</span><br><span class="line">  name STRING,</span><br><span class="line">  timestamp TIMESTAMP</span><br><span class="line">) USING iceberg;</span><br></pre></td></tr></table></figure><p>åŠ è½½æ•°æ®ï¼š<br>ä½¿ç”¨æ•°æ®å¤„ç†å¼•æ“Žå°†æ•°æ®åŠ è½½åˆ° Iceberg è¡¨æ ¼ä¸­ã€‚Iceberg æ”¯æŒå¤šç§æ•°æ®æ ¼å¼ï¼ŒåŒ…æ‹¬ Parquet å’Œ ORCã€‚ä¾‹å¦‚ï¼Œå°†æ•°æ®ä»Ž CSV æ–‡ä»¶åŠ è½½åˆ° Iceberg è¡¨æ ¼ä¸­.</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> df = spark.read.format(<span class="string">&quot;csv&quot;</span>).option(<span class="string">&quot;header&quot;</span>, <span class="string">&quot;true&quot;</span>).load(<span class="string">&quot;my_data.csv&quot;</span>)</span><br><span class="line">df.write.format(<span class="string">&quot;iceberg&quot;</span>).mode(<span class="string">&quot;append&quot;</span>).save(<span class="string">&quot;spark_catalog.default.iceberg_table&quot;</span>)</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæ“ä½œï¼š<br>ä¸€æ—¦è®¾ç½®äº†è¡¨æ ¼å¹¶åŠ è½½äº†æ•°æ®ï¼Œå¯ä»¥æ‰§è¡Œå„ç§æ“ä½œï¼Œå¦‚æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤å’Œæ—¶é—´æ—…è¡Œã€‚</p><p>æŸ¥è¯¢æ•°æ®:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> spark_catalog.default.iceberg_table <span class="keyword">WHERE</span> id <span class="operator">&gt;</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure><p>æ›´æ–°å­—æ®µå:</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.iceberg.spark.<span class="type">Spark3Util</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> table = <span class="type">Spark3Util</span>.loadTable(spark, <span class="string">&quot;spark_catalog.default.iceberg_table&quot;</span>)</span><br><span class="line">table.update().set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Updated Name&quot;</span>).where(<span class="string">&quot;id = 10&quot;</span>).commit()</span><br></pre></td></tr></table></figure><p>æ—¶é—´æ—…è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥è¯¢åŽ†å²æ—¶é—´ç‚¹çš„æ•°æ®:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> spark_catalog.default.iceberg_table <span class="type">TIMESTAMP</span> <span class="keyword">AS</span> <span class="keyword">OF</span> <span class="string">&#x27;2024-08-01 12:00:00&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Apache Iceberg æ˜¯ä¸€ç§å¼ºå¤§çš„è¡¨æ ¼å¼ï¼Œé€‚ç”¨äºŽç®¡ç†å¤§è§„æ¨¡æ•°æ®é›†å’Œå¤æ‚çš„æ•°æ®åˆ†æžã€‚å®ƒæä¾›äº†è®¸å¤šé«˜çº§ç‰¹æ€§ï¼Œå¦‚ ACID äº‹åŠ¡ã€æ¨¡å¼æ¼”åŒ–ã€åˆ†åŒºæ¼”åŒ–å’Œæ—¶é—´æ—…è¡ŒæŸ¥è¯¢ï¼Œä½¿å…¶æˆä¸ºæ•°æ®æ¹–å’Œæ•°æ®ä»“åº“çš„ç†æƒ³é€‰æ‹©ã€‚é€šè¿‡ä¸Ž Sparkã€Flink å’Œ Trino ç­‰æŸ¥è¯¢å¼•æ“Žçš„é›†æˆï¼ŒIceberg å¯ä»¥æä¾›é«˜æ•ˆçš„æŸ¥è¯¢æ€§èƒ½å’Œçµæ´»çš„æ•°æ®ç®¡ç†èƒ½åŠ›ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Big Data </tag>
            
            <tag> Iceberg </tag>
            
            <tag> Spark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Apache Parquet é«˜æ•ˆçš„æ•°æ®å­˜å‚¨æ ¼å¼</title>
      <link href="/2020/05/11/apache-parquet-efficient-storage-format/"/>
      <url>/2020/05/11/apache-parquet-efficient-storage-format/</url>
      
        <content type="html"><![CDATA[<p><code>Apache Parquet</code>æ˜¯ä¸€ç§é¢å‘åˆ—çš„å­˜å‚¨æ ¼å¼ï¼Œå¹¿æ³›åº”ç”¨äºŽå¤§æ•°æ®å¤„ç†æ¡†æž¶ä¸­ï¼Œå¦‚<code>Apache Hadoop</code>ã€<code>Apache Spark</code>ç­‰ã€‚å®ƒæœ€åˆç”±Twitterå’ŒClouderaå…¬å¸åˆä½œå¼€å‘ï¼Œå¹¶äºŽ2013å¹´è´¡çŒ®ç»™Apacheè½¯ä»¶åŸºé‡‘ä¼šï¼Œæˆä¸ºApacheé¡¶çº§é¡¹ç›®ä¹‹ä¸€ã€‚<span class='pbg green'>Parquetçš„è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†æé«˜å¤§æ•°æ®å¤„ç†çš„æ•ˆçŽ‡å’Œæ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦å¤„ç†å¤§é‡ç»“æž„åŒ–æ•°æ®çš„åœºæ™¯ä¸­</span>ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/apache-parquet.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/apache-parquet.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Apache Parquet Format" style="width:800px;"/></div><span class="image-caption">Apache Parquet Format</span></div><h2 id="å­˜å‚¨åŽŸç†"><a href="#å­˜å‚¨åŽŸç†" class="headerlink" title="å­˜å‚¨åŽŸç†"></a>å­˜å‚¨åŽŸç†</h2><p>Parquetçš„å­˜å‚¨åŽŸç†åŸºäºŽ<code>åˆ—å¼å­˜å‚¨ï¼ˆColumnar Storageï¼‰</code>æŠ€æœ¯ã€‚ä¸Žä¼ ç»Ÿçš„è¡Œå¼å­˜å‚¨ä¸åŒï¼Œåˆ—å¼å­˜å‚¨å°†åŒä¸€åˆ—çš„æ•°æ®è¿žç»­å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œè¿™æ ·å¯ä»¥å¸¦æ¥ä»¥ä¸‹å‡ ä¸ªä¼˜åŠ¿ï¼š</p><p><strong>åŽ‹ç¼©æ•ˆçŽ‡é«˜</strong>ï¼šç”±äºŽåŒä¸€åˆ—çš„æ•°æ®ç±»åž‹ç›¸åŒï¼Œå¯ä»¥é‡‡ç”¨æ›´é«˜æ•ˆçš„åŽ‹ç¼©ç®—æ³•ï¼Œå‡å°‘å­˜å‚¨ç©ºé—´å ç”¨ã€‚<br><strong>æŸ¥è¯¢æ€§èƒ½ä¼˜</strong>ï¼šåœ¨æ‰§è¡Œåªæ¶‰åŠéƒ¨åˆ†åˆ—çš„æŸ¥è¯¢æ—¶ï¼Œåˆ—å¼å­˜å‚¨å¯ä»¥å‡å°‘I&#x2F;Oæ“ä½œï¼Œæé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚<br><strong>æ”¯æŒå¤æ‚æ•°æ®ç±»åž‹</strong>ï¼šParquetæ”¯æŒåµŒå¥—æ•°æ®ç»“æž„ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å­˜å‚¨å’ŒæŸ¥è¯¢å¤æ‚çš„æ•°æ®ç±»åž‹ã€‚</p><p><code>Parquet</code>æ–‡ä»¶ç”±å¤šä¸ª<code>è¡Œç»„ï¼ˆRow Groupï¼‰</code>ç»„æˆï¼Œæ¯ä¸ªè¡Œç»„åŒ…å«ä¸€å®šæ•°é‡çš„è¡Œã€‚æ¯ä¸ªè¡Œç»„å†…çš„æ•°æ®æŒ‰<code>åˆ—å­˜å‚¨</code>ï¼Œæ¯åˆ—æ•°æ®åˆè¢«åˆ†æˆå¤šä¸ª<code>æ•°æ®å—ï¼ˆData Chunkï¼‰</code>ã€‚æ­¤å¤–ï¼ŒParquetè¿˜ä½¿ç”¨<code>å…ƒæ•°æ®ï¼ˆMetadataï¼‰</code>æ¥æè¿°æ–‡ä»¶çš„ç»“æž„å’Œæ•°æ®ç±»åž‹ï¼Œä¾¿äºŽå¿«é€Ÿè§£æžå’ŒæŸ¥è¯¢ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/big-data-parquet.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/big-data-parquet.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Apache Parquet Storage Example" style="width:800px;"/></div><span class="image-caption">Apache Parquet Storage Example</span></div><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><p>Parquetæ ¼å¼ç‰¹åˆ«é€‚ç”¨äºŽä»¥ä¸‹åœºæ™¯ï¼š</p><p><strong>å¤§æ•°æ®å¤„ç†</strong>ï¼šåœ¨Hadoopã€Sparkç­‰å¤§æ•°æ®å¤„ç†æ¡†æž¶ä¸­ï¼ŒParquetå¯ä»¥æ˜¾è‘—æé«˜æ•°æ®è¯»å–å’Œå¤„ç†çš„æ•ˆçŽ‡ã€‚<br><strong>æ•°æ®ä»“åº“</strong>ï¼šåœ¨æ•°æ®ä»“åº“ä¸­ï¼Œç»å¸¸éœ€è¦å¯¹å¤§é‡æ•°æ®è¿›è¡Œå¤æ‚çš„æŸ¥è¯¢å’Œåˆ†æžï¼ŒParquetçš„åˆ—å¼å­˜å‚¨ç‰¹æ€§å¯ä»¥æœ‰æ•ˆæå‡æŸ¥è¯¢æ€§èƒ½ã€‚<br><strong>æ•°æ®æ¹–</strong>ï¼šåœ¨æ•°æ®æ¹–æž¶æž„ä¸­ï¼ŒParquetå¯ä»¥ä½œä¸ºæ•°æ®å­˜å‚¨æ ¼å¼ï¼Œæ”¯æŒé«˜æ•ˆçš„æ•°æ®å­˜å‚¨å’ŒæŸ¥è¯¢ã€‚</p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«ç”¨æˆ·è¡Œä¸ºæ—¥å¿—çš„æ•°æ®é›†ï¼Œæ¯å¤©äº§ç”Ÿæ•°åäº¿æ¡è®°å½•ã€‚è¿™äº›æ—¥å¿—æ•°æ®åŒ…æ‹¬ç”¨æˆ·IDã€æ—¶é—´æˆ³ã€æ“ä½œç±»åž‹ã€æ“ä½œè¯¦æƒ…ç­‰å­—æ®µã€‚å¦‚æžœæˆ‘ä»¬ä½¿ç”¨ä¼ ç»Ÿçš„è¡Œå¼å­˜å‚¨æ ¼å¼ï¼ˆå¦‚CSVï¼‰ï¼Œåœ¨æ‰§è¡Œåªæ¶‰åŠéƒ¨åˆ†åˆ—çš„æŸ¥è¯¢æ—¶ï¼Œä¼šå¯¼è‡´å¤§é‡çš„I&#x2F;Oæ“ä½œï¼ŒæŸ¥è¯¢æ€§èƒ½ä½Žä¸‹ã€‚</p><p>è€Œä½¿ç”¨Parquetæ ¼å¼å­˜å‚¨è¿™äº›æ•°æ®ï¼Œå¯ä»¥å°†åŒä¸€åˆ—çš„æ•°æ®è¿žç»­å­˜å‚¨ï¼Œå‡å°‘I&#x2F;Oæ“ä½œï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæˆ‘ä»¬åªéœ€è¦æŸ¥è¯¢æŸä¸€å¤©æ‰€æœ‰ç”¨æˆ·çš„æ“ä½œç±»åž‹ï¼ŒParquetæ ¼å¼å¯ä»¥åªè¯»å–â€œæ—¶é—´æˆ³â€å’Œâ€œæ“ä½œç±»åž‹â€ä¸¤åˆ—çš„æ•°æ®ï¼Œè€Œä¸éœ€è¦è¯»å–å…¶ä»–åˆ—çš„æ•°æ®ï¼Œä»Žè€Œæ˜¾è‘—æå‡æŸ¥è¯¢é€Ÿåº¦ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹ä»£ç ï¼šä½¿ç”¨PySparkè¯»å–Parquetæ–‡ä»¶å¹¶æ‰§è¡ŒæŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">from</span> pyspark.sql <span class="keyword">import</span> SparkSession</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºSparkSession</span></span><br><span class="line">spark = SparkSession.builder.appName(<span class="string">&quot;ParquetExample&quot;</span>).getOrCreate()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–Parquetæ–‡ä»¶</span></span><br><span class="line">df = spark.read.parquet(<span class="string">&quot;user_logs.parquet&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡ŒæŸ¥è¯¢</span></span><br><span class="line">result = df.<span class="built_in">filter</span>(df.timestamp &gt;= <span class="string">&quot;2023-01-01&quot;</span>)\</span><br><span class="line">           .select(<span class="string">&quot;user_id&quot;</span>, <span class="string">&quot;action_type&quot;</span>)\</span><br><span class="line">           .distinct()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºç»“æžœ</span></span><br><span class="line">result.show()</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°ç¤ºä¾‹ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½¿ç”¨Parquetæ ¼å¼å­˜å‚¨æ•°æ®åŽï¼Œå¯ä»¥é«˜æ•ˆåœ°æ‰§è¡Œå¤æ‚æŸ¥è¯¢ï¼Œæå‡æ•°æ®å¤„ç†çš„æ•ˆçŽ‡å’Œæ€§èƒ½ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Apache Parquetä½œä¸ºä¸€ç§é«˜æ•ˆçš„åˆ—å¼å­˜å‚¨æ ¼å¼ï¼Œåœ¨å¤§æ•°æ®å¤„ç†é¢†åŸŸå…·æœ‰å¹¿æ³›çš„åº”ç”¨å‰æ™¯ã€‚å…¶åˆ—å¼å­˜å‚¨ç‰¹æ€§å¯ä»¥æ˜¾è‘—æé«˜æ•°æ®åŽ‹ç¼©æ•ˆçŽ‡å’ŒæŸ¥è¯¢æ€§èƒ½ï¼Œç‰¹åˆ«é€‚ç”¨äºŽå¤§æ•°æ®å¤„ç†ã€æ•°æ®ä»“åº“å’Œæ•°æ®æ¹–ç­‰åœºæ™¯ã€‚é€šè¿‡åˆç†ä½¿ç”¨Parquetæ ¼å¼ï¼Œå¯ä»¥æœ‰æ•ˆæå‡æ•°æ®å¤„ç†çš„æ•ˆçŽ‡å’Œæ€§èƒ½ï¼Œæ»¡è¶³æ—¥ç›Šå¢žé•¿çš„æ•°æ®å¤„ç†éœ€æ±‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Big Data </tag>
            
            <tag> Parquet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Understanding CSS Units: px, rem, em, vh, vw, %, ch</title>
      <link href="/2020/04/05/understanding-css-units-px-rem-em-vh-vw-ch/"/>
      <url>/2020/04/05/understanding-css-units-px-rem-em-vh-vw-ch/</url>
      
        <content type="html"><![CDATA[<p>In the web development, understanding CSS units is crucial for creating responsive and visually appealing designs. Each <code>CSS unit</code> serves a specific purpose, catering to different aspects of layout and design responsiveness. We will introduce the differences between <code>px</code>, <code>rem</code>, <code>em</code>, <code>vh</code>, <code>vw</code>, <code>%</code>, and <code>ch</code>, and discuss how and when to use each unit effectively.</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/css/css-units.png" class="lazyload placeholder" data-srcset="/assets/images/css/css-units.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="CSS Units" style="width:800px;"/></div><span class="image-caption">CSS Units</span></div><h2 id="px-Pixels"><a href="#px-Pixels" class="headerlink" title="px (Pixels)"></a>px (Pixels)</h2><p><code>px</code> stands for pixels and is the most commonly used unit in web design. It represents a single dot on a screen, and its size is fixed and does not change with the browserâ€™s zoom settings.</p><p><strong>Usage</strong>: Ideal for defining precise sizes, such as borders, margins, and fixed-width elements.<br><strong>When to Use</strong>: Use px when we need elements to maintain a consistent size regardless of the screen size or zoom level.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="rem-Root-em"><a href="#rem-Root-em" class="headerlink" title="rem (Root em)"></a>rem (Root em)</h2><p><code>rem</code> stands for root em, which is relative to the <code>font-size of the root element (html)</code>. Unlike em, which is relative to its parent element, rem is consistent across the entire document. <span class='pbg danger'>1 rem is equal to the font-size of the root element.</span></p><p><strong>Usage</strong>: Useful for defining global sizes, especially for typography and spacing that should scale with the root font size.<br><strong>When to Use</strong>: Use <code>rem</code> for overall layout and sizing that should be consistent across different sections of our website.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>; <span class="comment">/* Set a base font size for the entire document */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1rem</span>; <span class="comment">/* Equivalent to 16px */</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1rem</span>; <span class="comment">/* Padding will be 16px */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="em-Relative-to-Parent-Font-Size"><a href="#em-Relative-to-Parent-Font-Size" class="headerlink" title="em (Relative to Parent Font Size)"></a>em (Relative to Parent Font Size)</h2><p><code>em</code> is a relative unit that is based on the font-size of its <code>parent element</code>. If used within nested elements, em can compound and result in unexpected sizes.</p><p><strong>Usage</strong>: Suitable for defining sizes that need to be relative to the font-size of the parent element.<br><strong>When to Use</strong>: Use em for typography and spacing within elements where responsiveness to parent font size changes is desired.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1.2em</span>; <span class="comment">/* 1.2 * 16px = 19.2px */</span></span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0.5em</span>; <span class="comment">/* 0.5 * 16px = 8px */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="vh-Viewport-Height-and-vw-Viewport-Width"><a href="#vh-Viewport-Height-and-vw-Viewport-Width" class="headerlink" title="vh (Viewport Height) and vw (Viewport Width)"></a>vh (Viewport Height) and vw (Viewport Width)</h2><p><code>vh</code> and <code>vw</code> are browser viewport-based units that represent a percentage of the viewportâ€™s height and width, respectively. These units are useful for creating layouts that adjust dynamically based on the browserâ€™s <code>viewport size</code>.</p><p><strong>Usage</strong>: Perfect for creating elements that should fill a specific percentage of the browser viewportâ€™s height or width.<br><strong>When to Use</strong>: Use vh and vw for responsive designs where elements should scale based on the viewport dimensions.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50vh</span>; <span class="comment">/* 50% of viewport height */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">75vw</span>; <span class="comment">/* 75% of viewport width */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Percentage"><a href="#Percentage" class="headerlink" title="% (Percentage)"></a>% (Percentage)</h2><p><code>%</code> is a relative unit that is calculated based on the size of the parent element. It is widely used for creating fluid layouts and scaling elements proportionally. </p><p><strong>Usage</strong>: Effective for creating responsive designs where elements should scale relative to their parent container.<br><strong>When to Use</strong>: Use % for widths, heights, padding, and margins that need to adapt to the size of the parent element.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80%</span>; <span class="comment">/* 80% of the parent container&#x27;s width */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">50%</span>; <span class="comment">/* 50% of the parent container&#x27;s width */</span></span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5%</span>; <span class="comment">/* 5% of the parent container&#x27;s width */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ch-Character-Width"><a href="#ch-Character-Width" class="headerlink" title="ch (Character Width)"></a>ch (Character Width)</h2><p><code>ch</code> represents <span class='pbg danger'>the width of the zero (0) character in the current font</span>. It is useful for creating layouts based on the width of text characters.</p><p><strong>Usage</strong>: Suitable for layouts that need to be based on the width of characters, such as <span class='pbg green'>creating fixed-width elements based on text content.</span><br><strong>When to Use</strong>: Use ch when we need elements to be sized based on the number of characters they contain.</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20ch</span>; <span class="comment">/* Width based on the width of 20 characters in the current font */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Understanding and using CSS units effectively is essential for creating modern, <code>responsive web designs</code>. Each unit â€” <code>px</code>, <code>rem</code>, <code>em</code>, <code>vh</code>, <code>vw</code>, <code>%</code>, and <code>ch</code> â€” serves a unique purpose in defining sizes and layouts. By leveraging these units appropriately, we can ensure that our web pages look great across various devices and screen sizes.</p><p>Happy coding!</p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ Docker permission denied while trying to connect to the Docker daemon socket</title>
      <link href="/2020/03/19/error-got-permission-denied-while-trying-to-connect-to-the-docker-daemon-socket/"/>
      <url>/2020/03/19/error-got-permission-denied-while-trying-to-connect-to-the-docker-daemon-socket/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>å½“æˆ‘ä»¬åœ¨æœ¬åœ°è¿è¡Œ Docker å®¹å™¨ï¼Œç›´æŽ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éžrootæ–¹å¼æ‰§è¡Œæ—¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><p>å¦‚æžœé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/docker/docker-permission-denied.png" class="lazyload placeholder" data-srcset="/assets/images/docker/docker-permission-denied.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker: permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Head &quot;http://%2Fvar%2Frun%2Fdocker.sock/_ping&quot;: dial unix /var/run/docker.sock: connect: permission denied.</span><br></pre></td></tr></table></figure><p>è¿™ç§â€permission denied while trying to connect to the Docker daemon socketâ€ï¼ˆå°è¯•è¿žæŽ¥Dockerå®ˆæŠ¤ç¨‹åºå¥—æŽ¥å­—æ—¶æƒé™è¢«æ‹’ç»ï¼‰çš„é”™è¯¯é€šå¸¸æ˜¯å› ä¸ºè¿è¡ŒDockerå‘½ä»¤çš„ç”¨æˆ·æ²¡æœ‰è¶³å¤Ÿçš„æƒé™æ¥è®¿é—®Dockerå®ˆæŠ¤ç¨‹åºé€ æˆçš„ã€‚</p><p>è§£å†³è¿™ä¸ªé—®é¢˜å…¶å®žå¾ˆç®€å•ï¼Œåªéœ€ç»™å½“å‰ç”¨æˆ·ç»™äºˆæƒé™å³å¯ã€‚Dockerå®ˆæŠ¤ç¨‹åºå¥—æŽ¥å­—é€šå¸¸åœ¨&#x2F;var&#x2F;run&#x2F;docker.sockï¼Œæˆ‘ä»¬éœ€è¦ç»™äºˆå½“å‰ç”¨æˆ·è¯»å†™æƒé™ã€‚dockerç»„æ˜¯dockerå‘½ä»¤çš„è¿è¡Œç”¨æˆ·ç»„ï¼Œå®ƒåŒ…å«äº†è¿è¡Œdockerå‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æƒé™ã€‚Dockerå®ˆæŠ¤ç¨‹åºé»˜è®¤è¿è¡Œåœ¨rootæƒé™ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å½“å‰ç”¨æˆ·åŠ å…¥dockerç»„ï¼Œå¹¶ä¿®æ”¹docker.sockçš„æƒé™ã€‚</p><h2 id="è§£å†³æ–¹æ³•ï¼š"><a href="#è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h2><p>Step 1. åˆ›å»ºdockerç»„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd docker</span><br></pre></td></tr></table></figure><p>Step 2. ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å½“å‰ç”¨æˆ·åŠ å…¥dockerç»„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure><p>Step 3. ä¿®æ”¹docker.sockçš„æƒé™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod 666 /var/run/docker.sock</span><br></pre></td></tr></table></figure><p>Step 4. é‡å¯DockeræœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/docker/docker-permission-denied-fixed.png" class="lazyload placeholder" data-srcset="/assets/images/docker/docker-permission-denied-fixed.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"/></div></div><p>æ‰§è¡Œå®Œä»¥ä¸Šæ­¥éª¤åŽï¼Œå†æ¬¡è¿è¡Œ<code>docker ps</code>å‘½ä»¤ï¼Œå°±èƒ½æ­£å¸¸è¿è¡Œäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Container </tag>
            
            <tag> Cloud Native </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLä¸»ä»ŽåŒæ­¥è¯¦è§£ä¸Žåº”ç”¨åœºæ™¯</title>
      <link href="/2020/01/31/mysql-master-slave/"/>
      <url>/2020/01/31/mysql-master-slave/</url>
      
        <content type="html"><![CDATA[<h3 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h3><p>åœ¨å¤§åž‹æ•°æ®åº“åº”ç”¨ä¸­ï¼Œæ•°æ®åŒæ­¥å’Œå¤‡ä»½æ˜¯è‡³å…³é‡è¦çš„ã€‚MySQLä¸»ä»ŽåŒæ­¥æ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®åŒæ­¥æœºåˆ¶ï¼Œå®ƒèƒ½å¤Ÿç¡®ä¿å¤šä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®ä¿æŒä¸€è‡´ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»MySQLä¸»ä»ŽåŒæ­¥çš„è¿è¡ŒåŽŸç†ä»¥åŠå¸¸è§çš„åº”ç”¨åœºæ™¯ã€‚</p><h3 id="ä¸»ä»ŽåŒæ­¥çš„è¿è¡ŒåŽŸç†"><a href="#ä¸»ä»ŽåŒæ­¥çš„è¿è¡ŒåŽŸç†" class="headerlink" title="ä¸»ä»ŽåŒæ­¥çš„è¿è¡ŒåŽŸç†"></a>ä¸»ä»ŽåŒæ­¥çš„è¿è¡ŒåŽŸç†</h3><h4 id="1-ä¸»ä»Žæž¶æž„"><a href="#1-ä¸»ä»Žæž¶æž„" class="headerlink" title="1. ä¸»ä»Žæž¶æž„"></a>1. ä¸»ä»Žæž¶æž„</h4><p>MySQLä¸»ä»ŽåŒæ­¥æ˜¯åŸºäºŽä¸»ä»Žæž¶æž„å®žçŽ°çš„ã€‚åœ¨ä¸»ä»Žæž¶æž„ä¸­ï¼Œä¸€ä¸ªæ•°æ®åº“æœåŠ¡å™¨ï¼ˆä¸»æœåŠ¡å™¨ï¼‰è´Ÿè´£å¤„ç†å†™æ“ä½œå’Œè¯»æ“ä½œï¼Œè€Œå…¶ä»–æœåŠ¡å™¨ï¼ˆä»ŽæœåŠ¡å™¨ï¼‰åˆ™å¤åˆ¶ä¸»æœåŠ¡å™¨ä¸Šçš„æ•°æ®ã€‚ä¸»ä»ŽæœåŠ¡å™¨ä¹‹é—´é€šè¿‡äºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinary Logï¼‰è¿›è¡Œæ•°æ®åŒæ­¥ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/mysql/mysql-master-slave.webp" class="lazyload placeholder" data-srcset="/assets/images/mysql/mysql-master-slave.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Mysql Master Slave" style="width:800px;"/></div><span class="image-caption">Mysql Master Slave</span></div><h4 id="2-è¿è¡Œæ­¥éª¤"><a href="#2-è¿è¡Œæ­¥éª¤" class="headerlink" title="2. è¿è¡Œæ­¥éª¤"></a>2. è¿è¡Œæ­¥éª¤</h4><p>è¿™ä¸ªè¿‡ç¨‹ä¸»è¦æ¶‰åŠåˆ°3ä¸ªçº¿ç¨‹ï¼Œä¸»æœåŠ¡å™¨Masterä¸­çš„<strong>Dump Thread</strong>, ä»ŽæœåŠ¡å™¨Slaveä¸Šçš„<strong>IO Thread</strong>å’Œ<strong>SQL Thread</strong>ã€‚</p><h5 id="2-1-ä¸»æœåŠ¡å™¨è®°å½•äºŒè¿›åˆ¶æ—¥å¿—"><a href="#2-1-ä¸»æœåŠ¡å™¨è®°å½•äºŒè¿›åˆ¶æ—¥å¿—" class="headerlink" title="2.1 ä¸»æœåŠ¡å™¨è®°å½•äºŒè¿›åˆ¶æ—¥å¿—"></a>2.1 ä¸»æœåŠ¡å™¨è®°å½•äºŒè¿›åˆ¶æ—¥å¿—</h5><p>å½“ä¸»æœåŠ¡å™¨æŽ¥æ”¶åˆ°å†™æ“ä½œæ—¶ï¼Œä¸»æœåŠ¡å™¨ä¸Šçš„<strong>Dump Thread</strong>çº¿ç¨‹ä¼šå°†è¿™äº›æ“ä½œä»¥äºŒè¿›åˆ¶æ ¼å¼è®°å½•åœ¨<strong>Binary Log</strong>äºŒè¿›åˆ¶æ—¥å¿—ä¸­ã€‚è¿™ä¸ªäºŒè¿›åˆ¶æ—¥å¿—åŒ…å«äº†å¯¹æ•°æ®è¿›è¡Œæ›´æ”¹çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚</p><h5 id="2-2-ä»ŽæœåŠ¡å™¨è¿žæŽ¥åˆ°ä¸»æœåŠ¡å™¨"><a href="#2-2-ä»ŽæœåŠ¡å™¨è¿žæŽ¥åˆ°ä¸»æœåŠ¡å™¨" class="headerlink" title="2.2 ä»ŽæœåŠ¡å™¨è¿žæŽ¥åˆ°ä¸»æœåŠ¡å™¨"></a>2.2 ä»ŽæœåŠ¡å™¨è¿žæŽ¥åˆ°ä¸»æœåŠ¡å™¨</h5><p>ä»ŽæœåŠ¡å™¨é€šè¿‡<strong>IO Thread</strong>çº¿ç¨‹è¿žæŽ¥åˆ°ä¸»æœåŠ¡å™¨ï¼Œå¹¶è¯·æ±‚å¤åˆ¶ä¸»æœåŠ¡å™¨ä¸Šçš„<strong>Binary Log</strong>äºŒè¿›åˆ¶æ—¥å¿—ã€‚è¿™ä¸ªè¿žæŽ¥å¯ä»¥æ˜¯åŒæ­¥çš„ï¼ˆå®žæ—¶åŒæ­¥ï¼‰æˆ–å¼‚æ­¥çš„ï¼ˆå»¶è¿Ÿä¸€æ®µæ—¶é—´åŒæ­¥ï¼‰ã€‚ </p><h5 id="2-3-ä»ŽæœåŠ¡å™¨å¤åˆ¶äºŒè¿›åˆ¶æ—¥å¿—"><a href="#2-3-ä»ŽæœåŠ¡å™¨å¤åˆ¶äºŒè¿›åˆ¶æ—¥å¿—" class="headerlink" title="2.3 ä»ŽæœåŠ¡å™¨å¤åˆ¶äºŒè¿›åˆ¶æ—¥å¿—"></a>2.3 ä»ŽæœåŠ¡å™¨å¤åˆ¶äºŒè¿›åˆ¶æ—¥å¿—</h5><p>ä¸»æœåŠ¡å™¨å°†äºŒè¿›åˆ¶æ—¥å¿—ä¼ è¾“ç»™ä»ŽæœåŠ¡å™¨ï¼Œä»ŽæœåŠ¡å™¨é€šè¿‡<strong>IO Thread</strong>å°†è¿™äº›æ—¥å¿—ä¿å­˜åœ¨<strong>Relay Log</strong>ä¸­ç»§æ—¥å¿—ä¸­ï¼Œä»ŽæœåŠ¡å™¨ä¸Šçš„<strong>SQL Thread</strong>çº¿ç¨‹ç„¶ç„¶åŽè¯»å–<strong>Relay Log</strong>ä¸­ç»§æ—¥å¿—ä¸­çš„å†…å®¹ï¼Œç„¶åŽè§£æžæˆå…·ä½“çš„æ“ä½œåº”ç”¨åˆ°æœ¬åœ°æ•°æ®åº“ä¸Šï¼Œä»Žè€Œä¿æŒä¸Žä¸»æœåŠ¡å™¨ä¸Šæ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><h5 id="2-4-ä»ŽæœåŠ¡å™¨å¤„ç†è¯»æ“ä½œ"><a href="#2-4-ä»ŽæœåŠ¡å™¨å¤„ç†è¯»æ“ä½œ" class="headerlink" title="2.4 ä»ŽæœåŠ¡å™¨å¤„ç†è¯»æ“ä½œ"></a>2.4 ä»ŽæœåŠ¡å™¨å¤„ç†è¯»æ“ä½œ</h5><p>ä»ŽæœåŠ¡å™¨è´Ÿè´£å¤„ç†è¯»æ“ä½œï¼Œè€Œå†™æ“ä½œä»ç„¶ç”±ä¸»æœåŠ¡å™¨å¤„ç†ã€‚è¿™æ ·ï¼Œä¸»ä»ŽæœåŠ¡å™¨ä¹‹é—´å®žçŽ°äº†è¯»å†™åˆ†ç¦»ï¼Œæé«˜äº†æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½ã€‚</p><h3 id="ä¸»ä»ŽåŒæ­¥çš„åº”ç”¨åœºæ™¯"><a href="#ä¸»ä»ŽåŒæ­¥çš„åº”ç”¨åœºæ™¯" class="headerlink" title="ä¸»ä»ŽåŒæ­¥çš„åº”ç”¨åœºæ™¯"></a>ä¸»ä»ŽåŒæ­¥çš„åº”ç”¨åœºæ™¯</h3><h4 id="1-æé«˜è¯»æ€§èƒ½"><a href="#1-æé«˜è¯»æ€§èƒ½" class="headerlink" title="1. æé«˜è¯»æ€§èƒ½"></a>1. æé«˜è¯»æ€§èƒ½</h4><p>é€šè¿‡å°†è¯»æ“ä½œåˆ†æ‹…åˆ°ä»ŽæœåŠ¡å™¨ä¸Šï¼Œä¸»æœåŠ¡å™¨çš„è´Ÿè½½å°†å¤§å¤§å‡è½»ï¼Œæé«˜äº†æ•´ä¸ªç³»ç»Ÿçš„è¯»æ€§èƒ½ã€‚åœ¨é«˜å¹¶å‘çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œè¯»å†™åˆ†ç¦»æ˜¯æå‡ç³»ç»Ÿæ€§èƒ½çš„æœ‰æ•ˆæ‰‹æ®µã€‚</p><h4 id="2-æ•°æ®å¤‡ä»½"><a href="#2-æ•°æ®å¤‡ä»½" class="headerlink" title="2. æ•°æ®å¤‡ä»½"></a>2. æ•°æ®å¤‡ä»½</h4><p>ä»ŽæœåŠ¡å™¨ä¸ä»…å¯ä»¥ç”¨äºŽå¤„ç†è¯»æ“ä½œï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä½œä¸ºä¸»æœåŠ¡å™¨çš„å¤‡ä»½ã€‚åœ¨ä¸»æœåŠ¡å™¨å‘ç”Ÿæ•…éšœæ—¶ï¼Œå¯ä»¥è¿…é€Ÿåˆ‡æ¢åˆ°ä»ŽæœåŠ¡å™¨ï¼Œç¡®ä¿ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚</p><h4 id="3-æ•°æ®åˆ†å¸ƒ"><a href="#3-æ•°æ®åˆ†å¸ƒ" class="headerlink" title="3. æ•°æ®åˆ†å¸ƒ"></a>3. æ•°æ®åˆ†å¸ƒ</h4><p>ä¸»ä»ŽåŒæ­¥ä¹Ÿå¸¸ç”¨äºŽæ•°æ®åˆ†å¸ƒï¼Œå°†ä¸åŒåœ°åŒºçš„æ•°æ®åˆ†å¸ƒåˆ°ä¸åŒçš„ä»ŽæœåŠ¡å™¨ä¸Šï¼Œä»Žè€Œé™ä½Žè·¨åœ°åŒºè®¿é—®çš„å»¶è¿Ÿï¼Œå¹¶æé«˜ç”¨æˆ·ä½“éªŒã€‚</p><h4 id="4-æ•°æ®åˆ†æž"><a href="#4-æ•°æ®åˆ†æž" class="headerlink" title="4. æ•°æ®åˆ†æž"></a>4. æ•°æ®åˆ†æž</h4><p>é€šè¿‡å°†ä»ŽæœåŠ¡å™¨é…ç½®ä¸ºåªè¯»ï¼Œå¯ä»¥åœ¨ä»ŽæœåŠ¡å™¨ä¸Šè¿›è¡Œæ•°æ®åˆ†æžå’ŒæŠ¥è¡¨ç”Ÿæˆï¼Œè€Œä¸ä¼šå½±å“ä¸»æœåŠ¡å™¨çš„æ€§èƒ½ã€‚è¿™å¯¹äºŽéœ€è¦è¿›è¡Œå¤§é‡å¤æ‚æŸ¥è¯¢çš„åœºæ™¯éžå¸¸æœ‰ç”¨ã€‚</p><h3 id="é…ç½®ä¸»ä»ŽåŒæ­¥"><a href="#é…ç½®ä¸»ä»ŽåŒæ­¥" class="headerlink" title="é…ç½®ä¸»ä»ŽåŒæ­¥"></a>é…ç½®ä¸»ä»ŽåŒæ­¥</h3><h4 id="1-ä¸»æœåŠ¡å™¨é…ç½®"><a href="#1-ä¸»æœåŠ¡å™¨é…ç½®" class="headerlink" title="1. ä¸»æœåŠ¡å™¨é…ç½®"></a>1. ä¸»æœåŠ¡å™¨é…ç½®</h4><p>åœ¨ä¸»æœåŠ¡å™¨çš„my.cnfé…ç½®æ–‡ä»¶ä¸­å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">server-id</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">log-bin</span>=mysql-binlog</span><br><span class="line"><span class="attr">binlog-format</span>=ROW</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-ä»ŽæœåŠ¡å™¨é…ç½®"><a href="#2-ä»ŽæœåŠ¡å™¨é…ç½®" class="headerlink" title="2. ä»ŽæœåŠ¡å™¨é…ç½®"></a>2. ä»ŽæœåŠ¡å™¨é…ç½®</h4><p>åœ¨ä»ŽæœåŠ¡å™¨çš„my.cnfé…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸»æœåŠ¡å™¨çš„ä¿¡æ¯ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">server-id</span>=<span class="number">2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨MySQLå‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹è¯­å¥è¿žæŽ¥åˆ°ä¸»æœåŠ¡å™¨ï¼Œå¹¶å¯åŠ¨å¤åˆ¶</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CHANGE MASTER <span class="keyword">TO</span></span><br><span class="line">  MASTER_HOST<span class="operator">=</span><span class="string">&#x27;ä¸»æœåŠ¡å™¨IP&#x27;</span>,</span><br><span class="line">  MASTER_PORT<span class="operator">=</span><span class="string">&#x27;ä¸»æœåŠ¡å™¨PORT&#x27;</span>,</span><br><span class="line">  MASTER_USER<span class="operator">=</span><span class="string">&#x27;å¤åˆ¶ç”¨æˆ·&#x27;</span>,</span><br><span class="line">  MASTER_PASSWORD<span class="operator">=</span><span class="string">&#x27;å¤åˆ¶ç”¨æˆ·å¯†ç &#x27;</span>,</span><br><span class="line">  MASTER_LOG_FILE<span class="operator">=</span><span class="string">&#x27;ä¸»æœåŠ¡å™¨äºŒè¿›åˆ¶æ—¥å¿—æ–‡ä»¶&#x27;</span>,</span><br><span class="line">  MASTER_LOG_POS<span class="operator">=</span>ä¸»æœåŠ¡å™¨äºŒè¿›åˆ¶æ—¥å¿—ä½ç½®;</span><br><span class="line"></span><br><span class="line"><span class="keyword">START</span> SLAVE;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹ä¸Žä¼˜åŒ–"><a href="#æ³¨æ„äº‹é¡¹ä¸Žä¼˜åŒ–" class="headerlink" title="æ³¨æ„äº‹é¡¹ä¸Žä¼˜åŒ–"></a>æ³¨æ„äº‹é¡¹ä¸Žä¼˜åŒ–</h3><h4 id="1-ä¸»ä»Žå»¶è¿Ÿ"><a href="#1-ä¸»ä»Žå»¶è¿Ÿ" class="headerlink" title="1. ä¸»ä»Žå»¶è¿Ÿ"></a>1. ä¸»ä»Žå»¶è¿Ÿ</h4><p>åœ¨å¼‚æ­¥å¤åˆ¶çš„æƒ…å†µä¸‹ï¼Œä»ŽæœåŠ¡å™¨ä¸Šçš„æ•°æ®å¯èƒ½ä¼šæœ‰ä¸€å®šçš„å»¶è¿Ÿã€‚å¯ä»¥é€šè¿‡é€‚å½“è°ƒæ•´åŒæ­¥çš„é¢‘çŽ‡ã€ä¼˜åŒ–ç½‘ç»œå’Œç¡¬ä»¶ç­‰æ‰‹æ®µæ¥å‡å°‘å»¶è¿Ÿã€‚</p><h4 id="2-ä¸»ä»Žä¸€è‡´æ€§"><a href="#2-ä¸»ä»Žä¸€è‡´æ€§" class="headerlink" title="2. ä¸»ä»Žä¸€è‡´æ€§"></a>2. ä¸»ä»Žä¸€è‡´æ€§</h4><p>åœ¨ä¸»ä»ŽåŒæ­¥è¿‡ç¨‹ä¸­ï¼Œå¦‚æžœä¸»æœåŠ¡å™¨ä¸Šçš„æ•°æ®å‘ç”Ÿäº†ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå¯èƒ½ä¼šå½±å“ä»ŽæœåŠ¡å™¨ä¸Šçš„æ•°æ®ä¸€è‡´æ€§ã€‚å› æ­¤ï¼Œåœ¨é…ç½®ä¸»ä»ŽåŒæ­¥æ—¶ï¼Œéœ€è¦è°¨æ…Žå¤„ç†ä¸»ä»Žä¸€è‡´æ€§çš„é—®é¢˜ã€‚</p><h4 id="3-ç›‘æŽ§ä¸ŽæŠ¥è­¦"><a href="#3-ç›‘æŽ§ä¸ŽæŠ¥è­¦" class="headerlink" title="3. ç›‘æŽ§ä¸ŽæŠ¥è­¦"></a>3. ç›‘æŽ§ä¸ŽæŠ¥è­¦</h4><p>å»ºè®®ä½¿ç”¨ç›‘æŽ§å·¥å…·å¯¹ä¸»ä»ŽåŒæ­¥è¿›è¡Œå®žæ—¶ç›‘æŽ§ï¼Œå¹¶è®¾ç½®æŠ¥è­¦æœºåˆ¶ï¼ŒåŠæ—¶å‘çŽ°å¹¶è§£å†³æ½œåœ¨çš„é—®é¢˜ï¼Œç¡®ä¿ä¸»ä»ŽåŒæ­¥çš„å¯é æ€§ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>MySQLä¸»ä»ŽåŒæ­¥æ˜¯ä¸€ç§å¼ºå¤§çš„æ•°æ®åŒæ­¥æœºåˆ¶ï¼Œé€šè¿‡åˆç†é…ç½®å’Œä½¿ç”¨ï¼Œå¯ä»¥åœ¨æé«˜ç³»ç»Ÿæ€§èƒ½çš„åŒæ—¶ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ã€‚åœ¨è®¾è®¡æ•°æ®åº“æž¶æž„æ—¶ï¼Œè€ƒè™‘åˆ°è¯»å†™åˆ†ç¦»ã€æ•°æ®å¤‡ä»½å’Œåˆ†å¸ƒç­‰éœ€æ±‚ï¼Œä¸»ä»ŽåŒæ­¥æ˜¯ä¸€ä¸ªå€¼å¾—è€ƒè™‘çš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡æ·±å…¥äº†è§£ä¸»ä»ŽåŒæ­¥çš„åŽŸç†å’Œé…ç½®æ–¹æ³•ï¼Œå¼€å‘äººå‘˜å¯ä»¥æ›´å¥½åœ°åº”ç”¨è¿™ä¸€æŠ€æœ¯ï¼Œæå‡æ•°æ®åº“ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®æœåŠ¡ä¸ŽæœåŠ¡ç½‘æ ¼ - çŽ°ä»£åº”ç”¨æž¶æž„çš„è¿›åŒ–</title>
      <link href="/2019/07/02/microservice-and-service-mesh-for-modern-application/"/>
      <url>/2019/07/02/microservice-and-service-mesh-for-modern-application/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å½“ä»Šå¿«é€Ÿå‘å±•çš„è½¯ä»¶å¼€å‘é¢†åŸŸï¼Œ<code>å¾®æœåŠ¡æž¶æž„</code>å’Œ<code>æœåŠ¡ç½‘æ ¼</code>æˆä¸ºäº†æž„å»ºå¯æ‰©å±•ã€çµæ´»å’Œé«˜æ•ˆåº”ç”¨çš„æ ¸å¿ƒæŠ€æœ¯ã€‚æœ¬æ–‡å°†æŽ¢è®¨å¾®æœåŠ¡æž¶æž„å’ŒæœåŠ¡ç½‘æ ¼çš„æ¦‚å¿µã€ä¼˜åŠ¿ä»¥åŠå®ƒä»¬å¦‚ä½•å…±åŒæŽ¨åŠ¨çŽ°ä»£åº”ç”¨æž¶æž„çš„è¿›åŒ–ã€‚</p><h2 id="1-å¾®æœåŠ¡æž¶æž„æ¦‚è¿°"><a href="#1-å¾®æœåŠ¡æž¶æž„æ¦‚è¿°" class="headerlink" title="1. å¾®æœåŠ¡æž¶æž„æ¦‚è¿°"></a>1. å¾®æœåŠ¡æž¶æž„æ¦‚è¿°</h2><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/microservice/microservice-architecture.png" class="lazyload placeholder" data-srcset="/assets/images/microservice/microservice-architecture.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Microservice Architecture"/></div><span class="image-caption">Microservice Architecture</span></div><p>å¾®æœåŠ¡æž¶æž„æ˜¯ä¸€ç§ä»¥æœåŠ¡ä¸ºä¸­å¿ƒçš„è½¯ä»¶è®¾è®¡æ–¹æ³•ï¼Œå°†å¤§åž‹åº”ç”¨æ‹†åˆ†ä¸ºä¸€ç»„<code>å°åž‹</code>ã€<code>è‡ªæ²»</code>çš„æœåŠ¡ã€‚æ¯ä¸ªæœåŠ¡éƒ½ä¸“æ³¨äºŽæ‰§è¡Œç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½ï¼Œå¹¶é€šè¿‡è½»é‡çº§é€šä¿¡æœºåˆ¶ï¼ˆé€šå¸¸æ˜¯<code>HTTP</code>æˆ–<code>RPC</code>ï¼‰è¿›è¡Œç›¸äº’é€šä¿¡ã€‚å¾®æœåŠ¡æž¶æž„çš„æ ¸å¿ƒåŽŸåˆ™åŒ…æ‹¬ï¼š</p><p><strong>æœåŠ¡è‡ªæ²»æ€§</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡éƒ½æ˜¯ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹æ‰©å±•å’Œç‹¬ç«‹ç®¡ç†çš„ã€‚<br><strong>æ¾è€¦åˆ</strong>ï¼šæœåŠ¡ä¹‹é—´é€šè¿‡æ˜Žç¡®å®šä¹‰çš„æŽ¥å£è¿›è¡Œé€šä¿¡ï¼Œé™ä½Žäº†è€¦åˆåº¦ã€‚<br><strong>æŠ€æœ¯å¤šæ ·æ€§</strong>ï¼šä¸åŒçš„æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯æ ˆï¼Œé€‰æ‹©æœ€é€‚åˆå…¶éœ€æ±‚çš„æŠ€æœ¯ã€‚</p><p>å¾®æœåŠ¡æž¶æž„é€šè¿‡å°†å¤§åž‹ç³»ç»Ÿæ‹†åˆ†ä¸ºå°çš„ã€å¯ç‹¬ç«‹éƒ¨ç½²çš„æœåŠ¡å•å…ƒï¼Œå¸¦æ¥äº†ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><p><strong>çµæ´»æ€§å’Œå¯æ‰©å±•æ€§</strong>ï¼šæ¯ä¸ªæœåŠ¡éƒ½å¯ä»¥ç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•ï¼Œæ— éœ€å½±å“æ•´ä¸ªåº”ç”¨ã€‚<br><strong>å®¹é”™æ€§</strong>ï¼šä¸€ä¸ªæœåŠ¡çš„æ•…éšœä¸ä¼šå½±å“å…¶ä»–æœåŠ¡çš„æ­£å¸¸è¿è¡Œã€‚<br><strong>å›¢é˜Ÿè‡ªæ²»</strong>ï¼šä¸åŒå›¢é˜Ÿå¯ä»¥ç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²è‡ªå·±çš„æœåŠ¡ï¼ŒåŠ å¿«äº†äº¤ä»˜é€Ÿåº¦ã€‚</p><h2 id="2-æœåŠ¡ç½‘æ ¼çš„å´›èµ·"><a href="#2-æœåŠ¡ç½‘æ ¼çš„å´›èµ·" class="headerlink" title="2. æœåŠ¡ç½‘æ ¼çš„å´›èµ·"></a>2. æœåŠ¡ç½‘æ ¼çš„å´›èµ·</h2><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/microservice/service-mesh.png" class="lazyload placeholder" data-srcset="/assets/images/microservice/service-mesh.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Service Mesh Architecture"/></div><span class="image-caption">Service Mesh Architecture</span></div><p>éšç€å¾®æœåŠ¡æž¶æž„çš„å¹¿æ³›é‡‡ç”¨ï¼Œ<code>æœåŠ¡ç½‘æ ¼</code>ä½œä¸ºå…¶æ¼”è¿›çš„è‡ªç„¶å»¶ä¼¸ï¼Œæä¾›äº†å¯¹å¾®æœåŠ¡é€šä¿¡ã€ç›‘æŽ§å’Œå®‰å…¨æ€§çš„å¢žå¼ºæ”¯æŒã€‚<span class='pbg danger'>æœåŠ¡ç½‘æ ¼æ˜¯ä¸€ç§åŸºç¡€è®¾æ–½å±‚ï¼Œä½äºŽåº”ç”¨ç¨‹åºå†…éƒ¨ï¼Œè´Ÿè´£ç®¡ç†æœåŠ¡é—´çš„æ‰€æœ‰é€šä¿¡</span>ã€‚å…¶ä¸»è¦ç‰¹å¾åŒ…æ‹¬ï¼š</p><p><strong>é€æ˜Žçš„æœåŠ¡é—´é€šä¿¡</strong>ï¼šæœåŠ¡ç½‘æ ¼é€šè¿‡<code>ä»£ç†æ¨¡å¼</code>å¤„ç†æœåŠ¡é—´çš„æ‰€æœ‰é€šä¿¡ï¼Œä½¿æœåŠ¡ä¹‹é—´çš„äº¤äº’å¯¹å¼€å‘è€…é€æ˜Žã€‚<br><strong>æµé‡ç®¡ç†å’Œè´Ÿè½½å‡è¡¡</strong>ï¼šç½‘æ ¼å¯ä»¥<code>æ™ºèƒ½åœ°è·¯ç”±æµé‡</code>ã€å®žæ–½è´Ÿè½½å‡è¡¡ï¼Œä»¥ç¡®ä¿é«˜å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚<br><strong>å®‰å…¨æ€§å’Œç­–ç•¥æ‰§è¡Œ</strong>ï¼šç½‘æ ¼æä¾›äº†å¯¹é€šä¿¡è¿›è¡Œå®‰å…¨åŠ å¯†å’Œæ‰§è¡Œç­–ç•¥çš„èƒ½åŠ›ï¼Œå¦‚<code>è®¿é—®æŽ§åˆ¶</code>å’Œ<code>æµé‡æŽ§åˆ¶</code>ã€‚</p><p>æœåŠ¡ç½‘æ ¼çš„å‡ºçŽ°å¼¥è¡¥äº†å¾®æœåŠ¡æž¶æž„åœ¨é€šä¿¡ã€å¯è§‚å¯Ÿæ€§å’Œå®‰å…¨æ€§æ–¹é¢çš„ä¸€äº›æŒ‘æˆ˜ï¼Œå¹¶ä½¿å¾—è¿ç»´å›¢é˜Ÿèƒ½å¤Ÿæ›´å¥½åœ°ç®¡ç†å¤§è§„æ¨¡å¾®æœåŠ¡åº”ç”¨ã€‚</p><h2 id="3-å¾®æœåŠ¡ä¸ŽæœåŠ¡ç½‘æ ¼çš„ç»“åˆ"><a href="#3-å¾®æœåŠ¡ä¸ŽæœåŠ¡ç½‘æ ¼çš„ç»“åˆ" class="headerlink" title="3. å¾®æœåŠ¡ä¸ŽæœåŠ¡ç½‘æ ¼çš„ç»“åˆ"></a>3. å¾®æœåŠ¡ä¸ŽæœåŠ¡ç½‘æ ¼çš„ç»“åˆ</h2><p>å¾®æœåŠ¡æž¶æž„å’ŒæœåŠ¡ç½‘æ ¼çš„ç»“åˆï¼Œä¸ºçŽ°ä»£åº”ç”¨æž¶æž„å¸¦æ¥äº†å¤šé‡å¥½å¤„ï¼š</p><p><strong>è¿ç»´ç®€åŒ–</strong>ï¼šæœåŠ¡ç½‘æ ¼é€šè¿‡é›†ä¸­ç®¡ç†å’ŒæŽ§åˆ¶æœåŠ¡é—´çš„é€šä¿¡ï¼Œç®€åŒ–äº†è¿ç»´å·¥ä½œï¼Œé™ä½Žäº†è¿ç»´æˆæœ¬ã€‚<br><strong>å¢žå¼ºçš„å®‰å…¨æ€§</strong>ï¼šç½‘æ ¼æä¾›äº†å®‰å…¨çš„æœåŠ¡é—´é€šä¿¡å’Œè®¿é—®æŽ§åˆ¶ï¼Œæœ‰åŠ©äºŽä¿æŠ¤åº”ç”¨ç¨‹åºå…å—å„ç§ç½‘ç»œæ”»å‡»ã€‚<br><strong>æµé‡ç®¡ç†å’ŒæŽ§åˆ¶</strong>ï¼šé€šè¿‡æœåŠ¡ç½‘æ ¼ï¼Œå¼€å‘å›¢é˜Ÿå¯ä»¥å®žçŽ°å¤æ‚çš„æµé‡ç®¡ç†ç­–ç•¥ï¼Œå¦‚A&#x2F;Bæµ‹è¯•ã€é‡‘ä¸é›€å‘å¸ƒç­‰ï¼Œè€Œæ— éœ€ä¿®æ”¹åº”ç”¨ä»£ç ã€‚</p><p>å¾®æœåŠ¡æž¶æž„å’ŒæœåŠ¡ç½‘æ ¼å…±åŒæŽ¨åŠ¨äº†çŽ°ä»£åº”ç”¨æž¶æž„çš„æ¼”è¿›ã€‚å®ƒä»¬é€šè¿‡è§£è€¦æœåŠ¡ã€å¢žå¼ºé€šä¿¡å’Œå®‰å…¨æ€§ï¼Œæå‡äº†åº”ç”¨çš„çµæ´»æ€§ã€å¯æ‰©å±•æ€§å’Œå¯è§‚å¯Ÿæ€§ï¼Œä½¿å¾—å¼€å‘å›¢é˜Ÿèƒ½å¤Ÿæ›´å¿«é€Ÿåœ°å“åº”å¸‚åœºéœ€æ±‚ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚éšç€æŠ€æœ¯çš„è¿›æ­¥å’Œåº”ç”¨åœºæ™¯çš„ä¸æ–­æ¼”åŒ–ï¼Œå¾®æœåŠ¡æž¶æž„å’ŒæœåŠ¡ç½‘æ ¼å°†ç»§ç»­å‘æŒ¥é‡è¦ä½œç”¨ï¼Œå¹¶ä¸æ–­æ¼”åŒ–å’Œæ”¹è¿›ï¼Œä»¥æ»¡è¶³ä¼ä¸šåœ¨æž„å»ºå’Œç®¡ç†å¤æ‚åº”ç”¨æ—¶çš„éœ€æ±‚å’ŒæŒ‘æˆ˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Microservice </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Microservice </tag>
            
            <tag> Service Mesh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Apache Flink çš„æž¶æž„åŽŸç†ã€å…³é”®ç‰¹æ€§ä¸Žåº”ç”¨åœºæ™¯æ·±åº¦è§£æž</title>
      <link href="/2019/04/26/what-is-apache-flink/"/>
      <url>/2019/04/26/what-is-apache-flink/</url>
      
        <content type="html"><![CDATA[<p><code>Apache Flink</code> æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼æµå¤„ç†æ¡†æž¶ï¼Œä»¥å…¶é«˜æ•ˆã€å¯æ‰©å±•å’Œå‡†ç¡®çš„è®¡ç®—èƒ½åŠ›åœ¨å®žæ—¶æ•°æ®å¤„ç†é¢†åŸŸä¸­å æ®é‡è¦åœ°ä½ã€‚<span class='pbg green'>Flink ä¸ä»…æ”¯æŒæ‰¹å¤„ç†ï¼Œè¿˜ç‰¹åˆ«å¼ºè°ƒå¯¹æµæ•°æ®å¤„ç†çš„ä¼˜åŒ–ï¼Œå…·æœ‰é«˜åžåé‡ã€ä½Žå»¶è¿Ÿã€ç²¾ç¡®ä¸€æ¬¡æ€§å¤„ç†è¯­ä¹‰ç­‰ç‰¹ç‚¹ï¼Œé€‚ç”¨äºŽå¤§è§„æ¨¡æ•°æ®æµå¤„ç†å’Œå®žæ—¶åˆ†æžåœºæ™¯</span>ã€‚æœ¬æ–‡å°†æ·±å…¥æŽ¢è®¨ Flink çš„æž¶æž„åŽŸç†ã€å…³é”®ç‰¹æ€§ä»¥åŠå¹¿æ³›çš„åº”ç”¨åœºæ™¯ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/big-data-flink-component-layer.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/big-data-flink-component-layer.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Apache Flink Component Layer" style="width:600px;"/></div><span class="image-caption">Apache Flink Component Layer</span></div><h2 id="æž¶æž„åŽŸç†"><a href="#æž¶æž„åŽŸç†" class="headerlink" title="æž¶æž„åŽŸç†"></a>æž¶æž„åŽŸç†</h2><ol><li>æµå¤„ç†ä¸Žæ‰¹å¤„ç†ç»Ÿä¸€<br>Flink çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†æµå¤„ç†ï¼ˆStreamingï¼‰å’Œæ‰¹å¤„ç†ï¼ˆBatchï¼‰ç»Ÿä¸€ä¸ºä¸€ä¸ªå¼•æ“Žå¤„ç†ï¼Œå³æµä¸Žæ‰¹åœ¨Flinkä¸­éƒ½æ˜¯æ•°æ®æµï¼ˆDataStreamï¼‰ã€‚è¿™ç§è®¾è®¡ä½¿å¾—æ‰¹å¤„ç†å¯ä»¥çœ‹ä½œæ˜¯æœ‰ç•Œæµå¤„ç†ï¼Œè€Œæµå¤„ç†åˆ™å¯ä»¥å¤„ç†æ— ç•Œæ•°æ®æµã€‚</li><li>åˆ†å¸ƒå¼æ•°æ®æµæ‰§è¡Œå¼•æ“Ž<br>Flink æž¶æž„ä¸­çš„å…³é”®ç»„ä»¶æ˜¯ä»»åŠ¡ç®¡ç†å™¨ï¼ˆTaskManagerï¼‰å’Œä½œä¸šç®¡ç†å™¨ï¼ˆJobManagerï¼‰ã€‚ä»»åŠ¡ç®¡ç†å™¨è´Ÿè´£æ‰§è¡Œå¹¶è¡Œçš„æ•°æ®æµä»»åŠ¡ï¼Œä½œä¸šç®¡ç†å™¨è´Ÿè´£æŽ¥æ”¶ç¨‹åºã€ç”Ÿæˆæ‰§è¡Œå›¾ï¼Œå¹¶åè°ƒä»»åŠ¡æ‰§è¡Œã€‚</li><li>äº‹ä»¶é©±åŠ¨çš„æµå¤„ç†æ¨¡åž‹<br>Flink åŸºäºŽäº‹ä»¶é©±åŠ¨çš„å¤„ç†æ¨¡åž‹ï¼Œæ”¯æŒæŒ‰æ—¶é—´å’Œäº‹ä»¶è¿›è¡ŒçŠ¶æ€ç®¡ç†å’Œçª—å£è®¡ç®—ï¼Œä¿è¯äº†å¤„ç†çš„ç²¾ç¡®ä¸€æ¬¡æ€§ï¼ˆExactly-Onceï¼‰è¯­ä¹‰ã€‚</li><li>é«˜å¯ç”¨æ€§å’Œå®¹é”™<br>Flink æ”¯æŒä½œä¸šçš„è‡ªåŠ¨æ•…éšœæ¢å¤å’ŒçŠ¶æ€çš„å¯æŒä¹…åŒ–ï¼Œé€šè¿‡æ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰å’Œä¿å­˜ç‚¹ï¼ˆSavepointï¼‰æ¥å®žçŽ°æ¢å¤ã€‚</li><li>å†…å­˜ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–<br>Flink ä½¿ç”¨å †å¤–å†…å­˜ï¼ˆOff-heap memoryï¼‰ç®¡ç†å’Œå†…å­˜åˆ†é…ç®—æ³•æ¥ä¼˜åŒ–æ€§èƒ½ï¼Œå°½é‡å‡å°‘åžƒåœ¾å›žæ”¶å¯¹æ€§èƒ½çš„å½±å“ã€‚</li></ol><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/big-data-flink.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/big-data-flink.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Apache Flink" style="width:800px;"/></div><span class="image-caption">Apache Flink</span></div><h4 id="æ ¸å¿ƒç»„ä»¶"><a href="#æ ¸å¿ƒç»„ä»¶" class="headerlink" title="æ ¸å¿ƒç»„ä»¶"></a>æ ¸å¿ƒç»„ä»¶</h4><p>Flink çš„æ ¸å¿ƒæž¶æž„ç”±å¤šä¸ªå…³é”®ç»„ä»¶æž„æˆï¼Œè¿™äº›ç»„ä»¶ååŒå·¥ä½œä»¥å®žçŽ°é«˜æ•ˆçš„æ•°æ®å¤„ç†å’Œä»»åŠ¡æ‰§è¡Œï¼š<br><strong>JobManager</strong>: ä½œä¸º Flink é›†ç¾¤çš„æŽ§åˆ¶ä¸­å¿ƒï¼ŒJobManager è´Ÿè´£åè°ƒåˆ†å¸ƒå¼æ‰§è¡Œã€‚å…¶ä¸»è¦èŒè´£åŒ…æ‹¬ä»»åŠ¡è°ƒåº¦ã€æ£€æŸ¥ç‚¹ï¼ˆ<code>Checkpoint</code>ï¼‰ç®¡ç†ã€æ•…éšœæ¢å¤ä»¥åŠå…ƒæ•°æ®ç®¡ç†ã€‚JobManager ç¡®ä¿æ•´ä¸ªåº”ç”¨çš„é¡ºåˆ©è¿è¡Œï¼Œå¹¶åœ¨å‘ç”Ÿæ•…éšœæ—¶è¿…é€Ÿæ¢å¤çŠ¶æ€ã€‚<br><strong>TaskManager</strong>: TaskManager æ˜¯å®žé™…æ‰§è¡Œæ•°æ®æµä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹ã€‚æ¯ä¸ª TaskManager åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡æ§½ï¼ˆ<code>Task Slot</code>ï¼‰ï¼Œæ¯ä¸ªä»»åŠ¡æ§½å¯ä»¥æ‰§è¡Œä¸€ä¸ªå…·ä½“çš„ä»»åŠ¡ã€‚TaskManager ä¹‹é—´é€šè¿‡æ•°æ®äº¤æ¢ç½‘ç»œè¿›è¡Œé€šä¿¡ï¼Œå®žçŽ°æ•°æ®çš„å¹¶è¡Œå¤„ç†ã€‚<br><strong>Dispatcher</strong>: Dispatcher æä¾› REST æŽ¥å£æ¥æäº¤åº”ç”¨ï¼Œå¹¶ä¸ºæ¯ä¸ªæäº¤çš„åº”ç”¨å¯åŠ¨ä¸€ä¸ªæ–°çš„ JobManagerã€‚Dispatcher è¿˜è´Ÿè´£ç»´æŠ¤ä½œä¸šçš„æ‰§è¡ŒçŠ¶æ€ï¼Œå¹¶å‘å®¢æˆ·ç«¯æä¾›ä½œä¸šæ‰§è¡Œçš„è¯¦ç»†ä¿¡æ¯ã€‚<br><strong>ResourceManager</strong>: ResourceManager è´Ÿè´£ç®¡ç†ä»»åŠ¡æ§½ï¼Œç¡®ä¿èµ„æºçš„é«˜æ•ˆåˆ©ç”¨ã€‚å®ƒä¸Ž JobManager å’Œ TaskManager ååŒå·¥ä½œï¼ŒåŠ¨æ€åˆ†é…å’Œå›žæ”¶èµ„æºï¼Œä»¥é€‚åº”ä¸æ–­å˜åŒ–çš„å·¥ä½œè´Ÿè½½ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/big-data-flink-cluster.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/big-data-flink-cluster.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Apache Flink Cluster" style="width:800px;"/></div><span class="image-caption">Apache Flink Cluster</span></div><h4 id="æ•°æ®æµç¼–ç¨‹æ¨¡åž‹"><a href="#æ•°æ®æµç¼–ç¨‹æ¨¡åž‹" class="headerlink" title="æ•°æ®æµç¼–ç¨‹æ¨¡åž‹"></a>æ•°æ®æµç¼–ç¨‹æ¨¡åž‹</h4><p>Flink æä¾›äº†ä¸¤ç§ä¸»è¦çš„ç¼–ç¨‹æ¨¡åž‹ï¼šæ•°æ®æµï¼ˆ<code>DataStream</code>ï¼‰API å’Œæ•°æ®é›†ï¼ˆ<code>DataSet</code>ï¼‰APIã€‚<br><strong>DataStream API</strong>: ç”¨äºŽå¤„ç†<em>æ— ç•Œæ•°æ®æµ</em>ï¼Œæ”¯æŒå„ç§<strong>æµå¤„ç†æ“ä½œ</strong>ï¼Œå¦‚ <code>map</code>ã€<code>filter</code>ã€<code>reduce</code>ã€<code>join</code> ç­‰ã€‚DataStream API å…è®¸å¼€å‘è€…å®šä¹‰å¤æ‚çš„æ•°æ®å¤„ç†é€»è¾‘ï¼Œå¹¶æ”¯æŒäº‹ä»¶æ—¶é—´ï¼ˆEvent Timeï¼‰å’Œå¤„ç†æ—¶é—´ï¼ˆProcessing Timeï¼‰çš„å¤„ç†ã€‚<br><strong>DataSet API</strong>: ç”¨äºŽå¤„ç†<em>æœ‰ç•Œæ•°æ®é›†</em>ï¼Œé€‚ç”¨äºŽ<strong>æ‰¹å¤„ç†ä»»åŠ¡</strong>ã€‚DataSet API æä¾›äº†ä¸°å¯Œçš„æ‰¹å¤„ç†æ“ä½œï¼Œå¦‚ mapã€reduceã€joinã€groupBy ç­‰ã€‚DataSet API é€šè¿‡ä¼˜åŒ–ç®—æ³•å’Œå¹¶è¡Œæ‰§è¡Œï¼Œå®žçŽ°é«˜æ•ˆçš„æ•°æ®å¤„ç†ã€‚</p><h4 id="åˆ†å¸ƒå¼æ‰§è¡Œ"><a href="#åˆ†å¸ƒå¼æ‰§è¡Œ" class="headerlink" title="åˆ†å¸ƒå¼æ‰§è¡Œ"></a>åˆ†å¸ƒå¼æ‰§è¡Œ</h4><p>Flink çš„åˆ†å¸ƒå¼æ‰§è¡Œæ¨¡åž‹åŸºäºŽæµå¼æ•°æ®æµå›¾ï¼ˆStreaming Dataflow Graphï¼‰ï¼Œå…¶ä¸­æ¯ä¸ªæ“ä½œç¬¦ï¼ˆOperatorï¼‰åœ¨ä¸åŒçš„ TaskManager ä¸Šå¹¶è¡Œæ‰§è¡Œã€‚è¿™ç§è®¾è®¡ä½¿å¾— Flink èƒ½å¤Ÿé«˜æ•ˆåœ°å¤„ç†å¤§è§„æ¨¡æ•°æ®ï¼Œå¹¶å®žçŽ°é«˜åžåå’Œä½Žå»¶è¿Ÿçš„æ•°æ®å¤„ç†èƒ½åŠ›ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/big-data/big-data-flink-job.png" class="lazyload placeholder" data-srcset="/assets/images/big-data/big-data-flink-job.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Apache Flink Job Execution" style="width:800px;"/></div><span class="image-caption">Apache Flink Job Execution</span></div><h2 id="å…³é”®ç‰¹æ€§"><a href="#å…³é”®ç‰¹æ€§" class="headerlink" title="å…³é”®ç‰¹æ€§"></a>å…³é”®ç‰¹æ€§</h2><h4 id="é«˜åžåä¸Žä½Žå»¶è¿Ÿ"><a href="#é«˜åžåä¸Žä½Žå»¶è¿Ÿ" class="headerlink" title="é«˜åžåä¸Žä½Žå»¶è¿Ÿ"></a>é«˜åžåä¸Žä½Žå»¶è¿Ÿ</h4><p>Flink é€šè¿‡ä¼˜åŒ–å†…å­˜ç®¡ç†å’Œæ•°æ®äº¤æ¢æœºåˆ¶ï¼Œå®žçŽ°äº†<code>é«˜åžå</code>å’Œ<code>ä½Žå»¶è¿Ÿ</code>çš„æ•°æ®å¤„ç†èƒ½åŠ›ã€‚Flink é‡‡ç”¨<code>æµæ°´çº¿æ•°æ®ä¼ è¾“æ¨¡å¼</code>ï¼Œå‡å°‘æ•°æ®ä¼ è¾“çš„å»¶è¿Ÿï¼Œå¹¶é€šè¿‡å†…å­˜ç®¡ç†æŠ€æœ¯ï¼Œç¡®ä¿æ•°æ®åœ¨å†…å­˜ä¸­çš„é«˜æ•ˆåˆ©ç”¨ã€‚</p><h4 id="ç²¾ç¡®ä¸€æ¬¡ï¼ˆExactly-Onceï¼‰è¯­ä¹‰"><a href="#ç²¾ç¡®ä¸€æ¬¡ï¼ˆExactly-Onceï¼‰è¯­ä¹‰" class="headerlink" title="ç²¾ç¡®ä¸€æ¬¡ï¼ˆExactly-Onceï¼‰è¯­ä¹‰"></a>ç²¾ç¡®ä¸€æ¬¡ï¼ˆExactly-Onceï¼‰è¯­ä¹‰</h4><p>Flink æä¾›äº†ç²¾ç¡®ä¸€æ¬¡çš„è¯­ä¹‰ä¿è¯ï¼Œé€šè¿‡åˆ†å¸ƒå¼å¿«ç…§ï¼ˆ<code>Checkpoint</code>ï¼‰å’ŒçŠ¶æ€ç®¡ç†æœºåˆ¶ (<code>State Management</code>)ï¼Œç¡®ä¿å³ä½¿åœ¨å‘ç”Ÿæ•…éšœæ—¶ï¼Œæ•°æ®å¤„ç†ä¹Ÿèƒ½ä¿æŒä¸€è‡´æ€§å’Œå‡†ç¡®æ€§ã€‚Flink çš„ Checkpoint æœºåˆ¶å®šæœŸå¯¹ç³»ç»ŸçŠ¶æ€è¿›è¡Œå¿«ç…§ï¼Œå¹¶åœ¨æ•…éšœæ¢å¤æ—¶ä½¿ç”¨è¿™äº›å¿«ç…§æ¢å¤ç³»ç»ŸçŠ¶æ€ã€‚çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼ŒåŒ…æ‹¬åŸºäºŽå†…å­˜å’ŒåŸºäºŽå¤–éƒ¨å­˜å‚¨çš„çŠ¶æ€ç®¡ç†ã€‚</p><h4 id="äº‹ä»¶æ—¶é—´å¤„ç†"><a href="#äº‹ä»¶æ—¶é—´å¤„ç†" class="headerlink" title="äº‹ä»¶æ—¶é—´å¤„ç†"></a>äº‹ä»¶æ—¶é—´å¤„ç†</h4><p>Flink æ”¯æŒäº‹ä»¶æ—¶é—´ï¼ˆ<code>Event Time</code>ï¼‰å¤„ç†ï¼Œå…è®¸ç”¨æˆ·æ ¹æ®äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´è€Œä¸æ˜¯æ•°æ®åˆ°è¾¾çš„æ—¶é—´æ¥å¤„ç†æ•°æ®ã€‚è¿™å¯¹äºŽå¤„ç†ä¹±åºæ•°æ®å’Œå»¶è¿Ÿæ•°æ®å°¤ä¸ºé‡è¦ã€‚Flink é€šè¿‡æ°´ä½çº¿ï¼ˆWatermarkï¼‰æœºåˆ¶ï¼Œæœ‰æ•ˆåœ°å¤„ç†äº‹ä»¶æ—¶é—´çš„ä¹±åºå’Œå»¶è¿Ÿé—®é¢˜ã€‚</p><h4 id="ä¸°å¯Œçš„è¿žæŽ¥å™¨"><a href="#ä¸°å¯Œçš„è¿žæŽ¥å™¨" class="headerlink" title="ä¸°å¯Œçš„è¿žæŽ¥å™¨"></a>ä¸°å¯Œçš„è¿žæŽ¥å™¨</h4><p>Flink æä¾›äº†ä¸°å¯Œçš„è¿žæŽ¥å™¨ï¼Œæ”¯æŒä¸Žå„ç§æ•°æ®æºå’Œæ•°æ®å­˜å‚¨ç³»ç»Ÿçš„é›†æˆï¼Œå¦‚ <code>Kafka</code>ã€<code>HDFS</code>ã€<code>Elasticsearch</code>ã€<code>Cassandra</code> ç­‰ã€‚è¿™äº›è¿žæŽ¥å™¨ä½¿å¾— Flink èƒ½å¤Ÿè½»æ¾åœ°ä¸ŽçŽ°æœ‰çš„æ•°æ®åŸºç¡€è®¾æ–½é›†æˆï¼Œå®žçŽ°æ•°æ®çš„è¾“å…¥å’Œè¾“å‡ºã€‚</p><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><h4 id="å®žæ—¶æ•°æ®åˆ†æž"><a href="#å®žæ—¶æ•°æ®åˆ†æž" class="headerlink" title="å®žæ—¶æ•°æ®åˆ†æž"></a>å®žæ—¶æ•°æ®åˆ†æž</h4><p>Flink å¹¿æ³›åº”ç”¨äºŽå®žæ—¶æ•°æ®åˆ†æžåœºæ™¯ï¼Œå¦‚<code>å®žæ—¶æŠ¥è¡¨</code>ã€<code>å®žæ—¶ç›‘æŽ§</code>ã€<code>å®žæ—¶æŽ¨èç³»ç»Ÿ</code>ã€<code>å®žæ—¶é£ŽæŽ§</code>ç­‰ã€‚é€šè¿‡ Flink çš„é«˜åžåå’Œä½Žå»¶è¿Ÿç‰¹æ€§ï¼Œä¼ä¸šå¯ä»¥å¿«é€ŸèŽ·å–å’Œåˆ†æžå®žæ—¶æ•°æ®ï¼Œä»Žè€Œåšå‡ºåŠæ—¶çš„ä¸šåŠ¡å†³ç­–ã€‚</p><h4 id="å¤æ‚äº‹ä»¶å¤„ç†ï¼ˆCEPï¼‰"><a href="#å¤æ‚äº‹ä»¶å¤„ç†ï¼ˆCEPï¼‰" class="headerlink" title="å¤æ‚äº‹ä»¶å¤„ç†ï¼ˆCEPï¼‰"></a>å¤æ‚äº‹ä»¶å¤„ç†ï¼ˆCEPï¼‰</h4><p>Flink çš„å¤æ‚äº‹ä»¶å¤„ç†èƒ½åŠ›ä½¿å…¶æˆä¸ºæž„å»ºå®žæ—¶è§„åˆ™å¼•æ“Žå’Œäº‹ä»¶å¤„ç†ç³»ç»Ÿçš„ç†æƒ³é€‰æ‹©ã€‚é€šè¿‡å®šä¹‰å¤æ‚çš„äº‹ä»¶æ¨¡å¼ï¼ŒFlink å¯ä»¥å®žæ—¶æ£€æµ‹å’Œå“åº”ç‰¹å®šçš„äº‹ä»¶åºåˆ—ï¼Œå¦‚<code>æ¬ºè¯ˆæ£€æµ‹</code>ã€<code>å¼‚å¸¸æ£€æµ‹</code>ç­‰ã€‚</p><h4 id="å®žæ—¶æµå¤„ç†"><a href="#å®žæ—¶æµå¤„ç†" class="headerlink" title="å®žæ—¶æµå¤„ç†"></a>å®žæ—¶æµå¤„ç†</h4><p>Flink åœ¨å®žæ—¶æµå¤„ç†é¢†åŸŸè¡¨çŽ°å‡ºè‰²ï¼Œèƒ½å¤Ÿå¤„ç†é«˜å¹¶å‘ã€é«˜åžåçš„æµæ•°æ®ã€‚æ— è®ºæ˜¯æ—¥å¿—å¤„ç†ã€å®žæ—¶æ•°æ®é›†æˆè¿˜æ˜¯å®žæ—¶æ•°æ®æ¸…æ´—ï¼ŒFlink éƒ½èƒ½æä¾›é«˜æ•ˆå¯é çš„è§£å†³æ–¹æ¡ˆã€‚</p><h4 id="æœºå™¨å­¦ä¹ ä¸Žè¿­ä»£è®¡ç®—"><a href="#æœºå™¨å­¦ä¹ ä¸Žè¿­ä»£è®¡ç®—" class="headerlink" title="æœºå™¨å­¦ä¹ ä¸Žè¿­ä»£è®¡ç®—"></a>æœºå™¨å­¦ä¹ ä¸Žè¿­ä»£è®¡ç®—</h4><p>Flink çš„<code>è¿­ä»£è®¡ç®—èƒ½åŠ›</code>ä½¿å…¶é€‚åˆç”¨äºŽæœºå™¨å­¦ä¹ å’Œå›¾è®¡ç®—ç­‰éœ€è¦å¤§é‡è¿­ä»£è®¡ç®—çš„åœºæ™¯ã€‚é€šè¿‡ Flink çš„<code>æ‰¹å¤„ç†</code>å’Œ<code>æµå¤„ç†</code>èƒ½åŠ›ï¼Œå¯ä»¥é«˜æ•ˆåœ°è¿›è¡Œæ¨¡åž‹è®­ç»ƒå’Œé¢„æµ‹ï¼Œå¦‚å®žæ—¶æŽ¨èç³»ç»Ÿã€å®žæ—¶åˆ†ç±»å™¨ç­‰ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Apache Flink ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„æµå¤„ç†æ¡†æž¶ï¼Œå‡­å€Ÿå…¶<code>é«˜åžå</code>ã€<code>ä½Žå»¶è¿Ÿ</code>ã€<code>ç²¾ç¡®ä¸€æ¬¡è¯­ä¹‰</code>ç­‰å…³é”®ç‰¹æ€§ï¼Œåœ¨å®žæ—¶æ•°æ®å¤„ç†é¢†åŸŸå±•çŽ°å‡ºå·¨å¤§çš„æ½œåŠ›ã€‚æ— è®ºæ˜¯å®žæ—¶æ•°æ®åˆ†æžã€å¤æ‚äº‹ä»¶å¤„ç†è¿˜æ˜¯å®žæ—¶æµå¤„ç†ï¼ŒFlink éƒ½èƒ½æä¾›é«˜æ•ˆå¯é çš„è§£å†³æ–¹æ¡ˆï¼Œæ»¡è¶³ä¼ä¸šå¯¹å®žæ—¶æ•°æ®å¤„ç†çš„éœ€æ±‚ã€‚éšç€æ•°æ®é‡çš„ä¸æ–­å¢žé•¿å’Œå®žæ—¶æ•°æ®å¤„ç†éœ€æ±‚çš„æå‡ï¼ŒFlink å°†åœ¨æœªæ¥çš„æ•°æ®å¤„ç†é¢†åŸŸä¸­å‘æŒ¥è¶Šæ¥è¶Šé‡è¦çš„ä½œç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
            <tag> Big Data </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kafkaä¸ºä»€ä¹ˆå…·æœ‰é«˜åžåé‡å’Œä½Žå»¶è¿Ÿçš„ç‰¹æ€§</title>
      <link href="/2019/02/16/kafka-high-throughput-low-latency/"/>
      <url>/2019/02/16/kafka-high-throughput-low-latency/</url>
      
        <content type="html"><![CDATA[<p>Apache Kafka æ˜¯ä¸€ç§åˆ†å¸ƒå¼æµå¤„ç†å¹³å°ï¼Œå…·æœ‰é«˜åžåé‡å’Œä½Žå»¶è¿Ÿçš„ç‰¹å¾ï¼Œè¿™äº›ç‰¹ç‚¹ä½¿å…¶æˆä¸ºå¤„ç†å¤§è§„æ¨¡å®žæ—¶æ•°æ®æµçš„ç†æƒ³é€‰æ‹©ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯¼è‡´ Kafka å…·æœ‰é«˜åžåé‡å’Œä½Žå»¶è¿Ÿçš„å…³é”®å› ç´ ï¼š</p><p><strong>åˆ†å¸ƒå¼æž¶æž„</strong>ï¼šKafka æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå…è®¸æ•°æ®è¢«åˆ†å‰²æˆå¤šä¸ªåˆ†åŒºï¼Œå¹¶åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šè¿›è¡Œå¹¶è¡Œå¤„ç†ã€‚è¿™ç§åˆ†å¸ƒå¼æž¶æž„æœ‰åŠ©äºŽæé«˜åžåé‡ï¼Œå› ä¸ºæ•°æ®å¯ä»¥åŒæ—¶åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šè¿›è¡Œå¤„ç†ï¼Œè€Œä¸ä¼šæˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</p><p><strong>æ¶ˆæ¯é˜Ÿåˆ—æ¨¡åž‹</strong>ï¼šKafka ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¨¡åž‹ï¼Œå®ƒå°†æ•°æ®æŒ‰é¡ºåºå­˜å‚¨åœ¨åˆ†åŒºä¸­ï¼Œæ¯ä¸ªæ¶ˆæ¯éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„åç§»é‡ã€‚è¿™ä½¿å¾— Kafka èƒ½å¤Ÿæ”¯æŒé¡ºåºè¯»å–å’Œå†™å…¥ï¼Œè€Œä¸”è¯»å†™æ“ä½œçš„æ•ˆçŽ‡éžå¸¸é«˜ã€‚</p><p><strong>æŒä¹…æ€§å­˜å‚¨</strong>ï¼šKafka å…·æœ‰æŒä¹…æ€§å­˜å‚¨èƒ½åŠ›ï¼Œå®ƒå°†æ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼Œå³ä½¿æ¶ˆè´¹è€…æœªåŠæ—¶å¤„ç†æ¶ˆæ¯ï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚è¿™æ„å‘³ç€ Kafka å¯ä»¥åœ¨é«˜åžåé‡çš„æƒ…å†µä¸‹ä¿æŒæ•°æ®çš„å¯é æ€§ï¼Œå› ä¸ºæ•°æ®ä¸ä¼šå› ä¸ºæ•…éšœè€Œä¸¢å¤±ã€‚</p><p><strong>æ‰¹é‡å¤„ç†</strong>ï¼šKafka æ”¯æŒæ‰¹é‡å¤„ç†ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å¯ä»¥ä¸€æ¬¡å¤„ç†å¤šä¸ªæ¶ˆæ¯ï¼Œä»Žè€Œå‡å°‘äº†å¤„ç†æ¶ˆæ¯çš„å¼€é”€ï¼Œæé«˜äº†åžåé‡ã€‚</p><p><strong>æ°´å¹³æ‰©å±•æ€§</strong>ï¼šKafka å¯ä»¥è½»æ¾åœ°è¿›è¡Œæ°´å¹³æ‰©å±•ï¼Œé€šè¿‡æ·»åŠ æ›´å¤šçš„èŠ‚ç‚¹æ¥å¤„ç†æ›´å¤šçš„è´Ÿè½½ã€‚è¿™ç§èƒ½åŠ›ä½¿å…¶èƒ½å¤Ÿé€‚åº”ä¸æ–­å¢žé•¿çš„æ•°æ®æµé‡ï¼ŒåŒæ—¶ä¿æŒä½Žå»¶è¿Ÿã€‚</p><p><strong>å‰¯æœ¬æœºåˆ¶</strong>ï¼šKafka ä½¿ç”¨å‰¯æœ¬æœºåˆ¶æ¥æé«˜å¯ç”¨æ€§å’Œå®¹é”™æ€§ã€‚æ¯ä¸ªåˆ†åŒºå¯ä»¥é…ç½®å¤šä¸ªå‰¯æœ¬ï¼Œå¦‚æžœæŸä¸ªèŠ‚ç‚¹å‡ºçŽ°æ•…éšœï¼Œå…¶ä»–å‰¯æœ¬ä»ç„¶å¯ä»¥æä¾›æ•°æ®ï¼Œä»Žè€Œé™ä½Žäº†æ•°æ®ä¸¢å¤±çš„é£Žé™©ã€‚</p><p><strong>é›¶æ‹·è´æŠ€æœ¯</strong>ï¼šKafka ä½¿ç”¨é›¶æ‹·è´æŠ€æœ¯æ¥æé«˜æ€§èƒ½ã€‚é›¶æ‹·è´å…è®¸æ•°æ®åœ¨ä¸æ¶‰åŠé¢å¤–æ•°æ®å¤åˆ¶çš„æƒ…å†µä¸‹ä»Žç”Ÿäº§è€…ä¼ è¾“åˆ° Kafka æœåŠ¡å™¨ï¼Œä»¥åŠä»Ž Kafka æœåŠ¡å™¨ä¼ è¾“åˆ°æ¶ˆè´¹è€…ï¼Œå‡å°‘äº†æ•°æ®ä¼ è¾“çš„å¼€é”€ã€‚</p><p>æ€»çš„æ¥è¯´ï¼ŒKafka çš„é«˜åžåé‡å’Œä½Žå»¶è¿Ÿç‰¹å¾å¾—ç›ŠäºŽå…¶åˆ†å¸ƒå¼æž¶æž„ã€æ¶ˆæ¯é˜Ÿåˆ—æ¨¡åž‹ã€æŒä¹…æ€§å­˜å‚¨ã€æ‰¹é‡å¤„ç†ã€æ°´å¹³æ‰©å±•æ€§ã€å‰¯æœ¬æœºåˆ¶å’Œé›¶æ‹·è´æŠ€æœ¯ç­‰å¤šç§å› ç´ çš„ç»“åˆã€‚è¿™ä½¿å¾— Kafka æˆä¸ºå¤„ç†å¤§è§„æ¨¡å®žæ—¶æ•°æ®æµçš„å¯é å¹³å°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BI </tag>
            
            <tag> Kafka </tag>
            
            <tag> MQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java 8 çš„ä¸€äº›æ–°ç‰¹æ€§</title>
      <link href="/2018/03/13/java8-new-features/"/>
      <url>/2018/03/13/java8-new-features/</url>
      
        <content type="html"><![CDATA[<p><code>Java 8</code> å¼•å…¥äº†å¾ˆå¤šé‡è¦çš„æ–°ç‰¹æ€§ï¼Œæžå¤§å¢žå¼ºäº†è¯­è¨€çš„è¡¨è¾¾åŠ›å’Œå¯è¯»æ€§ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„ Java 8 æ–°ç‰¹æ€§ï¼š</p><h2 id="1-Lambda-è¡¨è¾¾å¼"><a href="#1-Lambda-è¡¨è¾¾å¼" class="headerlink" title="1. Lambda è¡¨è¾¾å¼"></a>1. Lambda è¡¨è¾¾å¼</h2><p>Lambda è¡¨è¾¾å¼å…è®¸ä½ å°†è¡Œä¸ºä¼ é€’ç»™æ–¹æ³•ï¼Œå®ƒä½¿å¾—ä»£ç æ›´ç®€æ´ã€å¯è¯»æ€§æ›´å¼ºã€‚<span class='pbg danger'>Lambda è¡¨è¾¾å¼æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒã€‚</span></p><h4 id="è¯­æ³•ï¼š"><a href="#è¯­æ³•ï¼š" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(parameters) -&gt; expression</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ Lambda è¡¨è¾¾å¼ç®€åŒ–ä»£ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LambdaExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// æœªä½¿ç”¨ Lambda è¡¨è¾¾å¼åˆ›å»ºä¸€ä¸ªçº¿ç¨‹</span></span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">r1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;This thread r1 is not created by Lambda expression&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(r1).start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Lambda è¡¨è¾¾å¼åˆ›å»ºä¸€ä¸ªçº¿ç¨‹</span></span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">r2</span> <span class="operator">=</span> () -&gt; System.out.println(<span class="string">&quot;This thread r2 is created by Lambda expression&quot;</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(r2).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»Žä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ Lambda è¡¨è¾¾å¼å¯ä»¥ç®€åŒ–ä»£ç ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ˜“è¯»ã€æ˜“å†™ã€‚ </p><h2 id="2-å‡½æ•°å¼æŽ¥å£-Functional-Interface"><a href="#2-å‡½æ•°å¼æŽ¥å£-Functional-Interface" class="headerlink" title="2. å‡½æ•°å¼æŽ¥å£ (Functional Interface)"></a>2. å‡½æ•°å¼æŽ¥å£ (Functional Interface)</h2><p>Java 8 å¼•å…¥äº†å‡½æ•°å¼æŽ¥å£çš„æ¦‚å¿µã€‚<span class='pbg danger'>å‡½æ•°å¼æŽ¥å£æ˜¯æŒ‡ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æŽ¥å£ï¼Œå¯ä»¥ç”¨ Lambda è¡¨è¾¾å¼æ¥è¡¨ç¤ºã€‚</span>ã€‚ä½¿ç”¨æ³¨è§£<code>@FunctionalInterface</code>æ¥ä¿®é¥°ä¸€ä¸ªæŽ¥å£ï¼Œå‡½æ•°å¼æŽ¥å£çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><h4 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">myMethod</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼š-1"><a href="#ç¤ºä¾‹ï¼š-1" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªå‡½æ•°å¼æŽ¥å£ï¼Œåªèƒ½åŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•</span></span><br><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Calculator</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">calc</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FunctionalInterfaceExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‡½æ•°å¼æŽ¥å£å¯ä»¥ç”¨Lambdaæ¥è¡¨ç¤ºï¼Œç®€åŒ–ä»£ç </span></span><br><span class="line">        <span class="type">Calculator</span> <span class="variable">addCalculator</span> <span class="operator">=</span> (a, b) -&gt; a + b;</span><br><span class="line">        System.out.println(addCalculator.calc(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// è¾“å‡º 3</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Calculator</span> <span class="variable">minusCalculator</span> <span class="operator">=</span> (a, b) -&gt; a - b;</span><br><span class="line">        System.out.println(minusCalculator.calc(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">// è¾“å‡º -1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>@FunctionalInterface</code> æ³¨è§£ç”¨äºŽæ˜Žç¡®æ ‡ç¤ºè¯¥æŽ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°å¼æŽ¥å£ï¼Œå®ƒåªèƒ½åŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚</p><h2 id="3-Streams-API"><a href="#3-Streams-API" class="headerlink" title="3. Streams API"></a>3. Streams API</h2><p>Java 8 å¼•å…¥äº† <code>Streams API</code>ï¼Œä½¿å¾—é›†åˆçš„æ“ä½œå˜å¾—æ›´åŠ ç®€æ´ã€å£°æ˜Žå¼ã€‚Streams å…è®¸ä½ ä»¥å£°æ˜Žæ€§æ–¹å¼å¤„ç†é›†åˆï¼Œæ”¯æŒä¸²è¡Œå’Œå¹¶è¡Œçš„èšåˆæ“ä½œã€‚</p><h4 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stream.filter(predicate)</span><br><span class="line">stream.map(function)</span><br><span class="line">stream.reduce(accumulator, combiner)</span><br><span class="line">stream.collect(collector)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼š-2"><a href="#ç¤ºä¾‹ï¼š-2" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Collectors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;C#&quot;</span>, <span class="string">&quot;Python&quot;</span>, <span class="string">&quot;Go&quot;</span>, <span class="string">&quot;JavaScript&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†Listè½¬ä¸ºstreamï¼Œä½¿ç”¨stream apiæ“ä½œ</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> list.stream()</span><br><span class="line">                .filter(s -&gt; s.length() &gt; <span class="number">2</span>)</span><br><span class="line">                .map(s -&gt; s.toUpperCase())</span><br><span class="line">                .collect(Collectors.joining(<span class="string">&quot;, &quot;</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(result); <span class="comment">// è¾“å‡ºï¼š JAVA, PYTHON, JAVASCRIPT</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€šè¿‡æµæ“ä½œï¼Œå¯ä»¥åƒ SQL æŸ¥è¯¢ä¸€æ ·è¿›è¡Œé›†åˆçš„è¿‡æ»¤ã€æŽ’åºã€æ˜ å°„ç­‰æ“ä½œ, æžå¤§çš„ç®€åŒ–äº†ä»£ç çš„ç¼–å†™ã€‚</p><h2 id="4-é»˜è®¤æ–¹æ³•-Default-Methods"><a href="#4-é»˜è®¤æ–¹æ³•-Default-Methods" class="headerlink" title="4. é»˜è®¤æ–¹æ³• (Default Methods)"></a>4. é»˜è®¤æ–¹æ³• (Default Methods)</h2><span class='pbg danger'>Java 8 å…è®¸æŽ¥å£æœ‰é»˜è®¤æ–¹æ³•ï¼Œå®žçŽ°äº†æŽ¥å£çš„ç±»å¯ä»¥ä¸å†å¿…é¡»æä¾›è¯¥æ–¹æ³•çš„å®žçŽ°ï¼Œè¿™ä¸ºæŽ¥å£çš„æ¼”åŒ–æä¾›äº†æ›´å¥½çš„å‘åŽå…¼å®¹æ€§ã€‚</span>ã€‚é»˜è®¤æ–¹æ³•å…è®¸æŽ¥å£æ–°å¢žæ–¹æ³•ï¼Œä¸å¼ºåˆ¶è¦æ±‚æ‰€æœ‰å®žçŽ°ç±»ä¿®æ”¹ä»£ç ã€‚<h4 id="è¯­æ³•-2"><a href="#è¯­æ³•-2" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">default</span> <span class="keyword">return</span>-type method-name(parameters) &#123;</span><br><span class="line">    <span class="comment">// method body</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Flyable</span> &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰é»˜è®¤æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;something flying&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bird</span> <span class="keyword">implements</span> <span class="title class_">Flyable</span> &#123;</span><br><span class="line">    <span class="comment">// Birdå¯ä»¥ä¸éœ€è¦æä¾›fly()çš„å®žçŽ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DefaultMethodExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Bird</span> <span class="variable">bird</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bird</span>();</span><br><span class="line">        bird.fly(); <span class="comment">// è¾“å‡ºï¼š something flying</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡é»˜è®¤æ–¹æ³•ï¼ŒæŽ¥å£çš„æ–°å¢žåŠŸèƒ½ä¸å†å¼ºåˆ¶è¦æ±‚æ‰€æœ‰å®žçŽ°ç±»ä¿®æ”¹ä»£ç ã€‚ä¸ºæŽ¥å£çš„æ¼”åŒ–æä¾›äº†æ›´å¥½çš„å‘åŽå…¼å®¹æ€§ã€‚</p><h2 id="5-æ–¹æ³•å¼•ç”¨-Method-References"><a href="#5-æ–¹æ³•å¼•ç”¨-Method-References" class="headerlink" title="5. æ–¹æ³•å¼•ç”¨ (Method References)"></a>5. æ–¹æ³•å¼•ç”¨ (Method References)</h2><span class='pbg danger'>æ–¹æ³•å¼•ç”¨æ˜¯ä¸€ç§æ›´ç®€æ´çš„ Lambda è¡¨è¾¾å¼å†™æ³•ï¼Œå¯ä»¥ç›´æŽ¥å¼•ç”¨å·²æœ‰æ–¹æ³•æ¥ä»£æ›¿ Lambda è¡¨è¾¾å¼ã€‚</span>ã€‚<h4 id="è¯­æ³•-3"><a href="#è¯­æ³•-3" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Class::staticMethod</span><br><span class="line">object::instanceMethod</span><br><span class="line">Class::instanceMethod</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼š-3"><a href="#ç¤ºä¾‹ï¼š-3" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodReferenceExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;String&gt; list = Arrays.asList(<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;C#&quot;</span>, <span class="string">&quot;Python&quot;</span>, <span class="string">&quot;JavaScript&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨Lambdaè¡¨è¾¾å¼</span></span><br><span class="line">        list.forEach(s -&gt; System.out.println(s));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ–¹æ³•å¼•ç”¨æ¥æ›¿ä»£ Lambda è¡¨è¾¾å¼</span></span><br><span class="line">        list.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­çš„ <code>System.out::println</code> æ˜¯å¯¹ <code>System.out.println</code> çš„æ–¹æ³•å¼•ç”¨ã€‚å®ƒç­‰ä»·äºŽ <code>(s) -&gt; System.out.println(s)</code>ã€‚</p><h2 id="6-Optional-ç±»"><a href="#6-Optional-ç±»" class="headerlink" title="6. Optional ç±»"></a>6. Optional ç±»</h2><span class='pbg danger'>`Optional` ç±»æ˜¯ Java 8 å¼•å…¥çš„æ–°ç±»ï¼Œç”¨äºŽé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ˆNullPointerExceptionï¼‰ã€‚</span> ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå®¹å™¨ï¼Œå¯èƒ½åŒ…å«å€¼ï¼Œä¹Ÿå¯èƒ½ä¸ºç©ºï¼Œé¿å…ç›´æŽ¥æ“ä½œ null å€¼ã€‚<h4 id="è¯­æ³•-4"><a href="#è¯­æ³•-4" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Optional.of(value)</span><br><span class="line">Optional.empty()</span><br><span class="line">Optional.ofNullable(value)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹ï¼š-4"><a href="#ç¤ºä¾‹ï¼š-4" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OptionalExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªOptionalå¯¹è±¡</span></span><br><span class="line">        Optional&lt;String&gt; optional = Optional.of(<span class="string">&quot;Java 8&quot;</span>);</span><br><span class="line">        <span class="comment">// å¦‚æžœå€¼å­˜åœ¨ï¼Œåˆ™æ‰“å°ï¼Œå¦‚æžœå€¼ä¸å­˜åœ¨ï¼Œåˆ™æ‰“å°é»˜è®¤å€¼</span></span><br><span class="line">        System.out.println(optional.orElse(<span class="string">&quot;Java&quot;</span>)); <span class="comment">// è¾“å‡º Java 8</span></span><br><span class="line"></span><br><span class="line">        Optional&lt;String&gt; nullOptional = Optional.ofNullable(<span class="literal">null</span>);</span><br><span class="line">        System.out.println(nullOptional.orElse(<span class="string">&quot;Java&quot;</span>)); <span class="comment">// è¾“å‡º Java</span></span><br><span class="line"></span><br><span class="line">        Optional&lt;String&gt; emptyOptional = Optional.empty();</span><br><span class="line">        System.out.println(emptyOptional.orElse(<span class="string">&quot;Java&quot;</span>)); <span class="comment">// è¾“å‡º Java</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><span class='pbg info'>Optional å¼ºçƒˆæŽ¨èç”¨äºŽæ–¹æ³•çš„è¿”å›žå€¼ï¼Œç”¨æ¥æ˜Žç¡®è¡¨è¾¾æŸä¸ªå€¼å¯èƒ½ä¸ºç©ºã€‚</span><h2 id="7-æ–°çš„æ—¥æœŸæ—¶é—´-API-java-time"><a href="#7-æ–°çš„æ—¥æœŸæ—¶é—´-API-java-time" class="headerlink" title="7. æ–°çš„æ—¥æœŸæ—¶é—´ API (java.time)"></a>7. æ–°çš„æ—¥æœŸæ—¶é—´ API (java.time)</h2><span class='pbg danger'>Java 8 å¼•å…¥äº†å…¨æ–°çš„æ—¥æœŸæ—¶é—´ APIï¼Œè§£å†³äº†è€çš„ java.util.Date å’Œ java.util.Calendar çš„ä¸€äº›ç¼ºé™·ã€‚</span> æ–° API æ›´åŠ çµæ´»ã€æ¸…æ™°å’Œä¸å¯å˜ã€‚<h4 id="ç¤ºä¾‹ï¼š-5"><a href="#ç¤ºä¾‹ï¼š-5" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DateTimeExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// èŽ·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        System.out.println(<span class="string">&quot;Current date and time: &quot;</span> + now);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ ¼å¼åŒ–æ—¥æœŸ</span></span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">date</span> <span class="operator">=</span> LocalDate.of(<span class="number">2018</span>, <span class="number">03</span>, <span class="number">13</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Formatted date: &quot;</span> + date);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ—¶é—´åŠ æ³•</span></span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">nextWeek</span> <span class="operator">=</span> now.plusWeeks(<span class="number">1</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;One week later: &quot;</span> + nextWeek);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><span class='pbg success'>`java.time` åŒ…ä¸­çš„ç±»æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œå› æ­¤å®ƒä»¬å¤©ç”Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</span><h2 id="8-æ–°çš„-java-util-function-åŒ…"><a href="#8-æ–°çš„-java-util-function-åŒ…" class="headerlink" title="8. æ–°çš„ java.util.function åŒ…"></a>8. æ–°çš„ java.util.function åŒ…</h2><p><code>java.util.function</code> åŒ…æä¾›äº†å¤§é‡çš„å¸¸ç”¨å‡½æ•°å¼æŽ¥å£ï¼Œå¦‚ <code>Predicate</code>, <code>Function</code>, <code>Consumer</code>, <code>Supplier</code> ç­‰ï¼Œå¯ä»¥ç®€åŒ–å¾ˆå¤šæ“ä½œã€‚</p><h4 id="ç¤ºä¾‹ï¼š-6"><a href="#ç¤ºä¾‹ï¼š-6" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.function.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FunctionExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Function æŽ¥å£è¿›è¡Œæ˜ å°„æ“ä½œ, Function æŽ¥å£æ˜¯ä¸€ä¸ªæŽ¥å—ä¸€ä¸ªå‚æ•°å¹¶è¿”å›žä¸€ä¸ªç»“æžœçš„å‡½æ•°ã€‚</span></span><br><span class="line">        Function&lt;String, Integer&gt; stringLength = s -&gt; s.length();</span><br><span class="line">        System.out.println(stringLength.apply(<span class="string">&quot;Hello&quot;</span>));  <span class="comment">// è¾“å‡º 5</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Predicate æŽ¥å£è¿›è¡Œè¿‡æ»¤æ“ä½œ, Predicate æŽ¥å£æ˜¯ä¸€ä¸ªæŽ¥å—ä¸€ä¸ªå‚æ•°å¹¶è¿”å›žä¸€ä¸ªå¸ƒå°”å€¼çš„å‡½æ•°ã€‚</span></span><br><span class="line">        Predicate&lt;String&gt; isNotEmpty = s -&gt; !s.isEmpty();</span><br><span class="line">        System.out.println(isNotEmpty.test(<span class="string">&quot;Hello&quot;</span>));  <span class="comment">// è¾“å‡º true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Consumer æŽ¥å£è¿›è¡Œè¾“å‡ºæ“ä½œ, Consumer æŽ¥å£æ˜¯ä¸€ä¸ªæŽ¥å—ä¸€ä¸ªå‚æ•°ä½†ä¸è¿”å›žå€¼çš„å‡½æ•°ã€‚</span></span><br><span class="line">        Consumer&lt;String&gt; printString = s -&gt; System.out.println(s);</span><br><span class="line">        printString.accept(<span class="string">&quot;Hello&quot;</span>);  <span class="comment">// è¾“å‡º Hello</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ Supplier æŽ¥å£è¿›è¡Œç”Ÿæˆæ“ä½œ, Supplier æŽ¥å£æ˜¯ä¸€ä¸ªä¸æŽ¥å—å‚æ•°å¹¶è¿”å›žä¸€ä¸ªå€¼çš„å‡½æ•°ã€‚</span></span><br><span class="line">        Supplier&lt;String&gt; helloSupplier = () -&gt; <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">        System.out.println(helloSupplier.get());  <span class="comment">// è¾“å‡º Hello</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="9-é‡å¤æ³¨è§£-Repeating-Annotations"><a href="#9-é‡å¤æ³¨è§£-Repeating-Annotations" class="headerlink" title="9. é‡å¤æ³¨è§£ (Repeating Annotations)"></a>9. é‡å¤æ³¨è§£ (Repeating Annotations)</h2><p>Java 8 æ”¯æŒ<code>é‡å¤æ³¨è§£</code>çš„å®šä¹‰ï¼Œå…è®¸åŒä¸€ä¸ªæ³¨è§£åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šå‡ºçŽ°å¤šæ¬¡ã€‚ä½¿ç”¨ <code>@Repeatable</code> æ³¨è§£æ¥æ ‡è®°ã€‚</p><h4 id="ç¤ºä¾‹ï¼š-7"><a href="#ç¤ºä¾‹ï¼š-7" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.Repeatable;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repeatable(Schedules.class)</span></span><br><span class="line"><span class="meta">@interface</span> Schedule &#123;</span><br><span class="line">    String <span class="title function_">month</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;January&quot;</span>;</span><br><span class="line">    String <span class="title function_">day</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;First&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">hour</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> Schedules &#123;</span><br><span class="line">    Schedule[] value();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Schedule(day = &quot;Monday&quot;, hour=12)</span></span><br><span class="line"><span class="meta">@Schedule(month = &quot;March&quot;, day = &quot;Friday&quot;, hour=1)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MySchedule</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RepeatingAnnotationExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Schedule[] annos = MySchedule.class.getAnnotationsByType(Schedule.class);</span><br><span class="line">        <span class="keyword">for</span> (Schedule s: annos) &#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;Month: %s, Day: %s, Hour: %d\n&quot;</span>, s.month(), s.day(), s.hour());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€šè¿‡é‡å¤æ³¨è§£ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªç±»æˆ–æ–¹æ³•ä¸Šåº”ç”¨å¤šä¸ªç›¸åŒçš„æ³¨è§£ã€‚</p><h2 id="10-Nashorn-JavaScript-å¼•æ“Ž"><a href="#10-Nashorn-JavaScript-å¼•æ“Ž" class="headerlink" title="10. Nashorn JavaScript å¼•æ“Ž"></a>10. Nashorn JavaScript å¼•æ“Ž</h2><p>Java 8 å¼•å…¥äº†æ–°çš„ JavaScript å¼•æ“Ž <code>Nashorn</code>ï¼Œå®ƒæ¯”ä¹‹å‰çš„ Rhino å¼•æ“Žæ€§èƒ½æ›´é«˜ï¼Œå¹¶ä¸”å¯ä»¥æ›´å®¹æ˜“åœ°ä¸Ž Java ä»£ç è¿›è¡Œäº¤äº’ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.script.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NashornExample</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ScriptException &#123;</span><br><span class="line">        <span class="type">ScriptEngine</span> <span class="variable">engine</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ScriptEngineManager</span>().getEngineByName(<span class="string">&quot;nashorn&quot;</span>);</span><br><span class="line">        engine.eval(<span class="string">&quot;print(&#x27;Hello from JavaScript!&#x27;)&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ Nashornï¼Œå¯ä»¥ç›´æŽ¥åœ¨ Java ä¸­è¿è¡Œ JavaScript ä»£ç ï¼Œå¢žå¼ºäº† Java ä¸Žå…¶ä»–è¯­è¨€çš„é›†æˆèƒ½åŠ›ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Java 8 å¼•å…¥äº†è®¸å¤šæ–°ç‰¹æ€§ï¼Œæå‡äº†è¯­è¨€çš„è¡¨è¾¾åŠ›ï¼Œå¢žåŠ äº†å‡½æ•°å¼ç¼–ç¨‹çš„æ”¯æŒï¼Œç®€åŒ–äº†ä»£ç çš„ç¼–å†™å’Œå¯ç»´æŠ¤æ€§ã€‚é€šè¿‡ä½¿ç”¨ <code>Lambda è¡¨è¾¾å¼</code>ã€<code>å‡½æ•°å¼æŽ¥å£</code>ã€<code>æ–¹æ³•å¼•ç”¨</code>ã€<code>Streams API</code>ã€<code>é»˜è®¤æ–¹æ³•</code>ã€<code>Optional ç±»</code>ã€<code>java.time</code> ç­‰ç‰¹æ€§ï¼ŒJava å¼€å‘è€…å¯ä»¥ç¼–å†™æ›´ç®€æ´ã€é«˜æ•ˆã€æ˜“äºŽç†è§£çš„ä»£ç ã€‚è¿™äº›ç‰¹æ€§ä¸ä»…æå‡äº†ä»£ç çš„å¯è¯»æ€§ï¼Œè¿˜å¢žå¼ºäº†ä»£ç çš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è°ˆè°ˆDockerä¸Žè™šæ‹Ÿæœº</title>
      <link href="/2018/02/17/docker-vs-virtual-machine/"/>
      <url>/2018/02/17/docker-vs-virtual-machine/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å½“ä»Šçš„è®¡ç®—æœºç§‘æŠ€è¿…é€Ÿå‘å±•çš„æ—¶ä»£ï¼Œ<code>Docker</code> å’Œ<code>è™šæ‹Ÿæœºï¼ˆVirtual Machine, VMï¼‰</code>ä½œä¸ºä¸¤ç§é‡è¦çš„æŠ€æœ¯ï¼Œå„è‡ªå‘æŒ¥ç€ä¸å¯æˆ–ç¼ºçš„ä½œç”¨ã€‚å®ƒä»¬åœ¨è½¯ä»¶å¼€å‘ã€æµ‹è¯•ä»¥åŠç”Ÿäº§çŽ¯å¢ƒä¸­éƒ½å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚æˆ‘ä»¬å°†è¯¦ç»†æŽ¢è®¨ Docker å’Œè™šæ‹Ÿæœºçš„å·¥ä½œåŽŸç†ï¼Œå¹¶æ¯”è¾ƒå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/docker/docker-vs-vm.png" class="lazyload placeholder" data-srcset="/assets/images/docker/docker-vs-vm.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Docker vs VM"/></div><span class="image-caption">Docker vs VM</span></div><h2 id="è™šæ‹Ÿæœºçš„åŽŸç†"><a href="#è™šæ‹Ÿæœºçš„åŽŸç†" class="headerlink" title="è™šæ‹Ÿæœºçš„åŽŸç†"></a>è™šæ‹Ÿæœºçš„åŽŸç†</h2><p><code>è™šæ‹Ÿæœº</code>æ˜¯ä¸€ç§æ¨¡æ‹Ÿè®¡ç®—æœºç³»ç»Ÿçš„æŠ€æœ¯ï¼Œå¯ä»¥åœ¨ç‰©ç†è®¡ç®—æœºï¼ˆå®¿ä¸»æœºï¼‰ä¸Šåˆ›å»ºå¤šä¸ªè™šæ‹Ÿè®¡ç®—æœºï¼ˆè™šæ‹Ÿæœºï¼‰ã€‚æ¯ä¸ªè™šæ‹Ÿæœºéƒ½æœ‰è‡ªå·±çš„æ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºå’Œç‹¬ç«‹çš„ç¡¬ä»¶èµ„æºã€‚è™šæ‹Ÿæœºçš„å®žçŽ°ä¾èµ–äºŽ<code>è™šæ‹ŸåŒ–æŠ€æœ¯</code>ï¼Œè¿™ç§æŠ€æœ¯é€šè¿‡åœ¨å®¿ä¸»æœºä¸Šå®‰è£…ä¸€ä¸ªå«åšâ€œè™šæ‹Ÿæœºç›‘æŽ§å™¨â€ï¼ˆ<code>Hypervisor</code>ï¼‰çš„è½¯ä»¶æ¥å®žçŽ°ã€‚</p><h3 id="è™šæ‹Ÿæœºçš„å·¥ä½œè¿‡ç¨‹"><a href="#è™šæ‹Ÿæœºçš„å·¥ä½œè¿‡ç¨‹" class="headerlink" title="è™šæ‹Ÿæœºçš„å·¥ä½œè¿‡ç¨‹"></a>è™šæ‹Ÿæœºçš„å·¥ä½œè¿‡ç¨‹</h3><p><strong>å®¿ä¸»æœº</strong>ï¼šè¿è¡Œè™šæ‹Ÿæœºç›‘æŽ§å™¨çš„ç‰©ç†æœåŠ¡å™¨ï¼Œæä¾› CPUã€å†…å­˜å’Œå­˜å‚¨ç­‰èµ„æºã€‚<br><strong>è™šæ‹Ÿæœºç›‘æŽ§å™¨</strong>ï¼šåœ¨å®¿ä¸»æœºä¸Šè¿è¡Œçš„ç®¡ç†è½¯ä»¶ï¼Œè´Ÿè´£åˆ›å»ºã€ç®¡ç†å’Œåˆ†é…è™šæ‹Ÿæœºèµ„æºã€‚<br><strong>è™šæ‹Ÿæœº</strong>ï¼šåœ¨è™šæ‹Ÿæœºç›‘æŽ§å™¨ä¸Šè¿è¡Œçš„æ“ä½œç³»ç»Ÿï¼Œè™šæ‹Ÿæœºå°±åƒä¸€å°çœŸå®žçš„è®¡ç®—æœºï¼Œå…·æœ‰è‡ªå·±çš„æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºã€‚</p><span class='pbg danger'>åœ¨è™šæ‹Ÿæœºä¸­ï¼Œ`æ¯ä¸ªè™šæ‹Ÿæœºéƒ½æ‹¥æœ‰è‡ªå·±çš„æ“ä½œç³»ç»Ÿå®žä¾‹`ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¯ä»¥ç‹¬ç«‹è¿è¡Œå„ç§è½¯ä»¶å’ŒæœåŠ¡</span>ã€‚ç”±äºŽè™šæ‹Ÿæœºæä¾›äº†å®Œæ•´çš„éš”ç¦»çŽ¯å¢ƒï¼Œå› æ­¤å¯ä»¥åœ¨åŒä¸€å°å®¿ä¸»æœºä¸Šè¿è¡Œä¸åŒç‰ˆæœ¬çš„æ“ä½œç³»ç»Ÿã€‚<h2 id="Dockerçš„åŽŸç†"><a href="#Dockerçš„åŽŸç†" class="headerlink" title="Dockerçš„åŽŸç†"></a>Dockerçš„åŽŸç†</h2><p><code>Docker</code> æ˜¯ä¸€ç§<code>å®¹å™¨åŒ–æŠ€æœ¯(Containery)</code>ï¼Œå®ƒé€šè¿‡å°†åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰ä¾èµ–é¡¹æ‰“åŒ…åœ¨ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºå¯ä»¥åœ¨ä»»ä½•çŽ¯å¢ƒä¸­ä¸€è‡´åœ°è¿è¡Œã€‚<span class='pbg danger'>ä¸Žè™šæ‹Ÿæœºä¸åŒï¼ŒDocker ä¸éœ€è¦åœ¨æ¯ä¸ªå®¹å™¨ä¸­å®‰è£…å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œè€Œæ˜¯å…±äº«å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚</span></p><h3 id="Dockerçš„å·¥ä½œè¿‡ç¨‹"><a href="#Dockerçš„å·¥ä½œè¿‡ç¨‹" class="headerlink" title="Dockerçš„å·¥ä½œè¿‡ç¨‹"></a>Dockerçš„å·¥ä½œè¿‡ç¨‹</h3><p><strong>å®¿ä¸»æœº</strong>ï¼šè¿è¡Œ <code>Docker å¼•æ“Žï¼ˆDocker Engineï¼‰</code>çš„ç‰©ç†æœåŠ¡å™¨ï¼Œæä¾› CPUã€å†…å­˜å’Œå­˜å‚¨ç­‰èµ„æºã€‚<br><strong>Docker å¼•æ“Ž</strong>ï¼šç®¡ç† Docker å®¹å™¨çš„æ ¸å¿ƒç»„ä»¶ï¼ŒåŒ…æ‹¬å®¹å™¨çš„åˆ›å»ºã€è¿è¡Œã€åœæ­¢å’Œåˆ é™¤ã€‚<br><strong>Docker å®¹å™¨</strong>ï¼šè½»é‡çº§çš„ç‹¬ç«‹è¿è¡ŒçŽ¯å¢ƒï¼ŒåŒ…å«åº”ç”¨ç¨‹åºåŠå…¶æ‰€æœ‰ä¾èµ–é¡¹ï¼Œä½†å…±äº«å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚</p><p>ç”±äºŽ Docker å®¹å™¨çš„è½»é‡çº§ç‰¹æ€§ï¼Œå¤šä¸ªå®¹å™¨å¯ä»¥å¿«é€Ÿå¯åŠ¨å’Œåœæ­¢ï¼Œä¸”ç›¸äº’ä¹‹é—´å‡ ä¹Žä¸å ç”¨é¢å¤–çš„èµ„æºã€‚è¿™ä½¿å¾— Docker ç‰¹åˆ«é€‚åˆäºŽå¾®æœåŠ¡æž¶æž„å’ŒæŒç»­é›†æˆ&#x2F;æŒç»­éƒ¨ç½²ï¼ˆCI&#x2F;CDï¼‰çŽ¯å¢ƒã€‚</p><h2 id="Dockerä¸Žè™šæ‹Ÿæœºçš„åŒºåˆ«"><a href="#Dockerä¸Žè™šæ‹Ÿæœºçš„åŒºåˆ«" class="headerlink" title="Dockerä¸Žè™šæ‹Ÿæœºçš„åŒºåˆ«"></a>Dockerä¸Žè™šæ‹Ÿæœºçš„åŒºåˆ«</h2><p>è™½ç„¶ Docker å’Œè™šæ‹Ÿæœºéƒ½å¯ä»¥ç”¨äºŽéš”ç¦»åº”ç”¨ç¨‹åºï¼Œä½†å®ƒä»¬åœ¨åŽŸç†ã€æ€§èƒ½å’Œä½¿ç”¨åœºæ™¯ç­‰æ–¹é¢å­˜åœ¨æ˜¾è‘—åŒºåˆ«ã€‚</p><table><thead><tr><th>ç‰¹ç‚¹</th><th>Dockerï¼ˆå®¹å™¨ï¼‰</th><th>è™šæ‹Ÿæœº (VM)</th></tr></thead><tbody><tr><td>æž¶æž„</td><td>å…±äº«å®¿ä¸»æœºçš„æ“ä½œç³»ç»Ÿå†…æ ¸</td><td>æ¯ä¸ªè™šæ‹Ÿæœºæœ‰ç‹¬ç«‹çš„æ“ä½œç³»ç»Ÿ</td></tr><tr><td>å¯åŠ¨é€Ÿåº¦</td><td>å¯åŠ¨é€Ÿåº¦å¿«ï¼Œé€šå¸¸åœ¨å‡ ç§’å†…</td><td>å¯åŠ¨é€Ÿåº¦æ…¢ï¼Œå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿ</td></tr><tr><td>èµ„æºå¼€é”€</td><td>å ç”¨è¾ƒå°‘çš„èµ„æºï¼Œé€‚åˆé«˜å¯†åº¦éƒ¨ç½²</td><td>å ç”¨è¾ƒå¤šçš„èµ„æºï¼Œè¾ƒé€‚åˆä½Žå¯†åº¦éƒ¨ç½²</td></tr><tr><td>éš”ç¦»ç¨‹åº¦</td><td>è½»åº¦éš”ç¦»ï¼Œé€‚åˆåŒä¸€æ“ä½œç³»ç»Ÿä¸­çš„åº”ç”¨</td><td>å®Œå…¨éš”ç¦»ï¼Œé€‚åˆä¸åŒæ“ä½œç³»ç»Ÿçš„åº”ç”¨</td></tr><tr><td>é•œåƒç®¡ç†</td><td>ä½¿ç”¨åˆ†å±‚æ–‡ä»¶ç³»ç»Ÿï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´</td><td>æ¯ä¸ªè™šæ‹Ÿæœºé•œåƒæ¯”è¾ƒå¤§ï¼Œèµ„æºåˆ©ç”¨çŽ‡è¾ƒä½Ž</td></tr><tr><td>ä½¿ç”¨åœºæ™¯</td><td>é€‚åˆå¿«é€Ÿå¼€å‘ã€æµ‹è¯•å’Œå¾®æœåŠ¡æž¶æž„</td><td>é€‚åˆéœ€è¦å®Œæ•´æ“ä½œç³»ç»Ÿå’Œåº”ç”¨çš„åœºæ™¯</td></tr></tbody></table><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Docker å’Œè™šæ‹Ÿæœºå„æœ‰å…¶ä¼˜åŠ¿ä¸Žé€‚ç”¨åœºæ™¯ã€‚<span class='pbg info'>è™šæ‹Ÿæœºæä¾›äº†æ›´å¼ºçš„éš”ç¦»æ€§å’Œå…¼å®¹æ€§ï¼Œé€‚åˆåœ¨éœ€è¦ä¸åŒæ“ä½œç³»ç»Ÿçš„çŽ¯å¢ƒä¸­ä½¿ç”¨ï¼›è€Œ Docker ç”±äºŽå…¶è½»é‡å’Œå¿«é€Ÿå¯åŠ¨çš„ç‰¹ç‚¹ï¼Œæ›´é€‚åˆäºŽçŽ°ä»£åº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²</span>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> DevOps </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Virtual Machine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaçš„åŒäº²å§”æ´¾æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›æ–¹å¼å¯ä»¥æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶</title>
      <link href="/2018/01/05/java-shuang-qin-weipai-jizi/"/>
      <url>/2018/01/05/java-shuang-qin-weipai-jizi/</url>
      
        <content type="html"><![CDATA[<h3 id="åŒäº²å§”æ´¾æœºåˆ¶"><a href="#åŒäº²å§”æ´¾æœºåˆ¶" class="headerlink" title="åŒäº²å§”æ´¾æœºåˆ¶"></a>åŒäº²å§”æ´¾æœºåˆ¶</h3><p><code>åŒäº²å§”æ´¾æœºåˆ¶</code>ï¼ˆParent-Delegation Modelï¼‰æ˜¯Javaç±»åŠ è½½æœºåˆ¶ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚å®ƒæ˜¯ä¸€ç§ç±»åŠ è½½çš„å±‚æ¬¡ç»“æž„å’Œæœºåˆ¶ï¼Œç”¨äºŽç¡®ä¿ç±»çš„å®‰å…¨æ€§å’Œä¸€è‡´æ€§ã€‚æ ¹æ®è¿™ä¸€æœºåˆ¶ï¼Œç±»åŠ è½½å™¨åœ¨åŠ è½½ç±»æ—¶é¦–å…ˆå°è¯•å§”æ‰˜ç»™å…¶çˆ¶ç±»åŠ è½½å™¨ï¼Œåªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½è¯¥ç±»æ—¶ï¼Œæ‰ä¼šç”±å½“å‰ç±»åŠ è½½å™¨æ¥å°è¯•åŠ è½½ã€‚è¿™ä¸€æœºåˆ¶çš„ç›®çš„æ˜¯ä¿æŠ¤Javaè¿è¡Œæ—¶çŽ¯å¢ƒçš„ç¨³å®šæ€§å’Œå®‰å…¨æ€§ï¼Œé˜²æ­¢ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»ç ´åJavaæ ¸å¿ƒåº“ã€‚</p><p>åŒäº²å§”æ´¾æœºåˆ¶é€šå¸¸åˆ†ä¸ºä»¥ä¸‹ä¸‰å±‚ï¼š</p><p><strong>å¯åŠ¨ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰</strong>ï¼šå®ƒæ˜¯JVMçš„ä¸€éƒ¨åˆ†ï¼Œè´Ÿè´£åŠ è½½Javaçš„æ ¸å¿ƒç±»åº“ï¼Œå¦‚java.langå’Œjava.utilç­‰ã€‚è¿™æ˜¯ç±»åŠ è½½å±‚æ¬¡ç»“æž„çš„æ ¹ï¼Œæ˜¯æœ€é¡¶å±‚çš„ç±»åŠ è½½å™¨ï¼Œé€šå¸¸ç”±Javaè™šæ‹Ÿæœºçš„æœ¬åœ°å®žçŽ°æä¾›ï¼Œå®ƒä¸æ˜¯Javaä»£ç å®žçŽ°çš„ç±»åŠ è½½å™¨ã€‚</p><p><strong>æ‰©å±•ç±»åŠ è½½å™¨ï¼ˆExtension ClassLoaderï¼‰</strong>ï¼šå®ƒç”¨äºŽåŠ è½½Javaçš„æ‰©å±•ç±»ï¼Œé€šå¸¸ä½äºŽjre&#x2F;lib&#x2F;extç›®å½•ä¸‹ã€‚æ‰©å±•ç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½javaxåŒ…ä¸­çš„ç±»ç­‰ã€‚å®ƒæ˜¯ç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½çš„ã€‚</p><p><strong>åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨ï¼ˆApplication ClassLoaderï¼‰</strong>ï¼šä¹Ÿç§°ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œè¿™æ˜¯åº”ç”¨ç¨‹åºå¼€å‘è€…æœ€å¸¸æŽ¥è§¦çš„ç±»åŠ è½½å™¨ï¼Œå®ƒè´Ÿè´£åŠ è½½åº”ç”¨ç¨‹åºçš„ç±»ï¼Œé€šå¸¸ä»Žç±»è·¯å¾„ï¼ˆClasspathï¼‰ä¸­åŠ è½½ã€‚å®ƒæ˜¯ç”±æ‰©å±•ç±»åŠ è½½å™¨åŠ è½½çš„ã€‚</p><p>ä¸€æ—¦ä¸€ä¸ªç±»éœ€è¦è¢«åŠ è½½ï¼Œç±»åŠ è½½å™¨ä¼šé¦–å…ˆå°è¯•å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨åŠ è½½ã€‚å¦‚æžœçˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½è¯¥ç±»ï¼Œé‚£ä¹ˆå­ç±»åŠ è½½å™¨æ‰ä¼šå°è¯•åŠ è½½ã€‚è¿™ç§çº§è”çš„åŠ è½½æœºåˆ¶ç¡®ä¿äº†ç±»çš„ä¸€è‡´æ€§å’Œå®‰å…¨æ€§ã€‚</p><p>å¦‚æžœæ‚¨å°è¯•ç¼–å†™ä¸€ä¸ªä¸ŽJavaæ ¸å¿ƒç±»ï¼ˆå¦‚java.langåŒ…ä¸­çš„ç±»ï¼‰å…·æœ‰ç›¸åŒåç§°å’Œå®Œå…¨ç›¸åŒçš„ç±»ï¼Œå¹¶å°†å…¶æ”¾åœ¨ç±»è·¯å¾„ä¸­ï¼ŒåŒäº²å§”æ´¾åŠ è½½æœºåˆ¶å°†å°è¯•åŠ è½½è¿™ä¸ªè‡ªå®šä¹‰ç±»ã€‚ä½†ç”±äºŽJavaæ ¸å¿ƒç±»å·²ç»ç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ï¼ŒåŒäº²å§”æ´¾åŠ è½½æœºåˆ¶ä¼šä¼˜å…ˆåŠ è½½æ ¸å¿ƒç±»ã€‚è¿™æ„å‘³ç€æ‚¨çš„è‡ªå®šä¹‰ç±»ä¸ä¼šæ›¿ä»£Javaæ ¸å¿ƒç±»ï¼Œè€Œä¼šè¢«å¿½ç•¥ã€‚</p><p>è¿™ç§æœºåˆ¶ç¡®ä¿äº†Javaæ ¸å¿ƒç±»çš„å”¯ä¸€æ€§å’Œå®‰å…¨æ€§ï¼Œé˜²æ­¢åº”ç”¨ç¨‹åºæˆ–å¼€å‘è€…æ— æ„ä¸­æ›¿ä»£æˆ–ä¿®æ”¹æ ¸å¿ƒç±»ï¼Œä»Žè€Œç»´æŠ¤äº†Javaå¹³å°çš„ç¨³å®šæ€§ã€‚å¦‚æžœè¦æ‰©å±•æˆ–ä¿®æ”¹Javaæ ¸å¿ƒç±»çš„è¡Œä¸ºï¼Œé€šå¸¸éœ€è¦é€šè¿‡å…¶ä»–æ‰‹æ®µï¼Œä¾‹å¦‚ç»§æ‰¿æˆ–å®žçŽ°æŽ¥å£ï¼Œè€Œä¸æ˜¯ç›´æŽ¥æ›¿æ¢æ ¸å¿ƒç±»ã€‚</p><h3 id="æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶"><a href="#æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶" class="headerlink" title="æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶"></a>æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶</h3><p>è™½ç„¶åŒäº²å§”æ´¾æœºåˆ¶æœ‰åˆ©äºŽç¡®ä¿Javaæ ¸å¿ƒåº“çš„ç¨³å®šæ€§ï¼Œä½†æœ‰æ—¶å€™ç”¨æˆ·å¯èƒ½éœ€è¦æ‰“ç ´è¿™ä¸€æœºåˆ¶ã€‚æœ‰ä¸€äº›æƒ…å†µä¸‹å¯ä»¥è€ƒè™‘æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶ï¼š</p><p><strong>è‡ªå®šä¹‰ç±»åŠ è½½å™¨</strong>ï¼šå¦‚æžœéœ€è¦å®žçŽ°è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ï¼Œéœ€è¦ç»§æ‰¿ClassLoaderç±»å¹¶é‡å†™å…¶loadClassæ–¹æ³•ï¼Œä»¥å®žçŽ°è‡ªå®šä¹‰çš„ç±»åŠ è½½é€»è¾‘ã€‚</p><p><strong>åŠ¨æ€ä»£ç†ç±»</strong>ï¼šæŸäº›åŠ¨æ€ä»£ç†ç±»æˆ–å­—èŠ‚ç ç”Ÿæˆæ¡†æž¶å¯èƒ½éœ€è¦åœ¨è¿è¡Œæ—¶ç”Ÿæˆå’ŒåŠ è½½ç±»ï¼Œè¿™å¯èƒ½éœ€è¦æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶ä»¥å®žçŽ°ç‰¹å®šçš„åŠ è½½é€»è¾‘ã€‚</p><p><strong>æ¨¡å—åŒ–ç³»ç»Ÿ</strong>ï¼šåœ¨Java 9åŠä»¥åŽç‰ˆæœ¬ä¸­ï¼Œå¼•å…¥äº†æ¨¡å—åŒ–ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿæä¾›äº†æ›´çµæ´»çš„ç±»åŠ è½½å’Œæ¨¡å—å®šä¹‰æœºåˆ¶ï¼Œä½¿å¾—å¯ä»¥æ›´ç²¾ç»†åœ°æŽ§åˆ¶ç±»åŠ è½½è¿‡ç¨‹ã€‚</p><p>æ‰“ç ´åŒäº²å§”æ´¾æœºåˆ¶éœ€è¦è°¨æ…Žå¤„ç†ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šå¼•å…¥ç±»åŠ è½½å†²çªå’Œå®‰å…¨é—®é¢˜ã€‚åœ¨è‡ªå®šä¹‰ç±»åŠ è½½å™¨æˆ–ä½¿ç”¨åŠ¨æ€ä»£ç†ç­‰æƒ…å†µä¸‹ï¼Œéœ€è¦ä»”ç»†è€ƒè™‘æ½œåœ¨çš„é—®é¢˜ï¼Œç¡®ä¿ä¸ä¼šç ´åJavaè¿è¡Œæ—¶çŽ¯å¢ƒçš„ç¨³å®šæ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> BI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¾è®¡æ¨¡å¼ä¹‹å•ä¾‹æ¨¡å¼è¯¦è§£ä¸Žåº”ç”¨</title>
      <link href="/2017/05/19/design-pattern-singleton/"/>
      <url>/2017/05/19/design-pattern-singleton/</url>
      
        <content type="html"><![CDATA[<h3 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h3><p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œè®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§è§£å†³å¸¸è§é—®é¢˜çš„ç»éªŒæ€»ç»“ï¼Œå®ƒæä¾›äº†ä¸€å¥—å¯å¤ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©å¼€å‘äººå‘˜æ›´é«˜æ•ˆåœ°ç¼–å†™å¯ç»´æŠ¤å’Œå¯æ‰©å±•çš„ä»£ç ã€‚å•ä¾‹æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§ï¼Œå®ƒç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/design-pattern/singleton-pattern.webp" class="lazyload placeholder" data-srcset="/assets/images/design-pattern/singleton-pattern.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Singleton Pattern" style="width:800px;"/></div><span class="image-caption">Singleton Pattern</span></div><h3 id="å•ä¾‹æ¨¡å¼çš„åº”ç”¨åœºæ™¯"><a href="#å•ä¾‹æ¨¡å¼çš„åº”ç”¨åœºæ™¯" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„åº”ç”¨åœºæ™¯"></a>å•ä¾‹æ¨¡å¼çš„åº”ç”¨åœºæ™¯</h3><p>å•ä¾‹æ¨¡å¼é€‚ç”¨äºŽä»¥ä¸‹æƒ…å†µï¼š</p><p><strong>èµ„æºå…±äº«çš„åœºæ™¯</strong>ï¼š åœ¨æ•´ä¸ªç³»ç»Ÿä¸­ï¼Œéœ€è¦å…±äº«æŸä¸ªèµ„æºï¼Œä¾‹å¦‚é…ç½®ä¿¡æ¯ã€æ•°æ®åº“è¿žæŽ¥æ± ç­‰ã€‚<br><strong>æŽ§åˆ¶èµ„æºçš„è®¿é—®</strong>ï¼š åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œé¿å…å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æŸä¸ªèµ„æºï¼Œå¼•èµ·æ•°æ®ä¸ä¸€è‡´ã€‚<br><strong>å®žä¾‹æŽ§åˆ¶</strong>ï¼š æŸäº›ç±»åˆ›å»ºå®žä¾‹éœ€è¦æ¶ˆè€—è¾ƒå¤šèµ„æºï¼Œé€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥å‡å°‘å®žä¾‹çš„åˆ›å»ºï¼Œæé«˜æ€§èƒ½ã€‚</p><h3 id="å•ä¾‹æ¨¡å¼çš„å®žçŽ°"><a href="#å•ä¾‹æ¨¡å¼çš„å®žçŽ°" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„å®žçŽ°"></a>å•ä¾‹æ¨¡å¼çš„å®žçŽ°</h3><p>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æŽ¥Showä»£ç å§ï¼Œè¿™é‡Œæ¼”ç¤ºä¸‹ä¸‰ç§åˆ›å»ºå•ä¾‹æ¨¡å¼çš„ä»£ç </p><h5 id="1-é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼"><a href="#1-é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼" class="headerlink" title="1. é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼"></a>1. é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="comment">// åœ¨ç±»åŠ è½½æ—¶å°±åˆ›å»ºå®žä¾‹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç§æœ‰æž„é€ æ–¹æ³•ï¼Œé˜²æ­¢å¤–éƒ¨å®žä¾‹åŒ–</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æä¾›å…¨å±€è®¿é—®ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="2-æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼ï¼ˆåŒé‡æ£€æŸ¥é”ï¼‰"><a href="#2-æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼ï¼ˆåŒé‡æ£€æŸ¥é”ï¼‰" class="headerlink" title="2. æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼ï¼ˆåŒé‡æ£€æŸ¥é”ï¼‰"></a>2. æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼ï¼ˆåŒé‡æ£€æŸ¥é”ï¼‰</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123; <span class="comment">// é¦–æ¬¡åˆ¤æ–­æ˜¯å¦å·²ç»åˆå§‹åŒ–è¿‡</span></span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123; <span class="comment">// åŠ é”ï¼Œä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿›å…¥</span></span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123; <span class="comment">// å†æ¬¡æ£€æŸ¥æ˜¯å¦ä¸ºç©ºï¼Œå› ä¸º instance = new Singleton() å¹¶éžåŽŸå­æ€§æ“ä½œ</span></span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼"><a href="#3-é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼" class="headerlink" title="3. é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼"></a>3. é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="comment">// ç§æœ‰é™æ€å†…éƒ¨ç±»</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SingletonHolder</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å•ä¾‹æ¨¡å¼çš„åº”ç”¨ç¤ºä¾‹"><a href="#å•ä¾‹æ¨¡å¼çš„åº”ç”¨ç¤ºä¾‹" class="headerlink" title="å•ä¾‹æ¨¡å¼çš„åº”ç”¨ç¤ºä¾‹"></a>å•ä¾‹æ¨¡å¼çš„åº”ç”¨ç¤ºä¾‹</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ—¥å¿—è®°å½•å™¨ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­åªæœ‰ä¸€ä¸ªå®žä¾‹è®°å½•æ—¥å¿—ï¼Œå¯ä»¥ä½¿ç”¨å•ä¾‹æ¨¡å¼æ¥å®žçŽ°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Logger</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger instance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Logger</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Logger <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Logger.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">Logger</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Log: &quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼èŽ·å–æ—¥å¿—è®°å½•å™¨çš„å®žä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> Logger.getInstance();</span><br><span class="line">logger.log(<span class="string">&quot;This is a log message.&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€šè¿‡å•ä¾‹æ¨¡å¼ï¼Œç¡®ä¿äº†æ•´ä¸ªåº”ç”¨ç¨‹åºåªæœ‰ä¸€ä¸ªæ—¥å¿—è®°å½•å™¨å®žä¾‹ï¼Œé¿å…äº†èµ„æºæµªè´¹å’Œæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§ç®€å•è€Œå¼ºå¤§çš„è®¾è®¡æ¨¡å¼ï¼Œå¯ä»¥æœ‰æ•ˆåœ°è§£å†³ç‰¹å®šé—®é¢˜ï¼Œä¾‹å¦‚èµ„æºå…±äº«ã€å®žä¾‹æŽ§åˆ¶ç­‰ã€‚åœ¨ä½¿ç”¨å•ä¾‹æ¨¡å¼æ—¶ï¼Œéœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨æ€§ï¼Œé€‰æ‹©é€‚åˆåœºæ™¯çš„å®žçŽ°æ–¹å¼ã€‚é€šè¿‡åˆç†åº”ç”¨è®¾è®¡æ¨¡å¼ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¼–å†™å‡ºæ›´åŠ å¥å£®å’Œå¯ç»´æŠ¤çš„ä»£ç ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å•ä¾‹æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SOLIDåŽŸåˆ™ï¼šæž„å»ºç¨³å¥è½¯ä»¶çš„äº”å¤§æ”¯æŸ±</title>
      <link href="/2017/04/30/solid-principle/"/>
      <url>/2017/04/30/solid-principle/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸï¼Œ<code>SOLIDåŽŸåˆ™</code>æ˜¯ä¸€ç»„è®¾è®¡åŽŸåˆ™ï¼Œæ—¨åœ¨æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload placeholder" src="/assets/images/design-pattern/solid-principles.webp" class="lazyload placeholder" data-srcset="/assets/images/design-pattern/solid-principles.webp" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="SOLID Principles" style="width:800px;"/></div><span class="image-caption">SOLID Principles</span></div><p>è¿™äº”ä¸ªåŽŸåˆ™åˆ†åˆ«æ˜¯<br><strong>å•ä¸€èŒè´£åŽŸåˆ™</strong>ï¼ˆSingle Responsibility Principleï¼Œç®€ç§°SRPï¼‰<br><strong>å¼€æ”¾å°é—­åŽŸåˆ™</strong>ï¼ˆOpen&#x2F;Closed Principleï¼Œç®€ç§°OCPï¼‰<br><strong>é‡Œæ°æ›¿æ¢åŽŸåˆ™</strong>ï¼ˆLiskov Substitution Principleï¼Œç®€ç§°LSPï¼‰<br><strong>æŽ¥å£éš”ç¦»åŽŸåˆ™</strong>ï¼ˆInterface Segregation Principleï¼Œç®€ç§°ISPï¼‰<br><strong>ä¾èµ–åè½¬åŽŸåˆ™</strong>ï¼ˆDependency Inversion Principleï¼Œç®€ç§°DIPï¼‰<br>æœ¬æ–‡å°†è¯¦ç»†è§£é‡Šæ¯ä¸ªåŽŸåˆ™ï¼Œå¹¶é€šè¿‡å®žé™…ä¾‹å­è¯´æ˜Žå®ƒä»¬çš„åº”ç”¨ã€‚</p><h3 id="1-å•ä¸€èŒè´£åŽŸåˆ™ï¼ˆSRPï¼‰"><a href="#1-å•ä¸€èŒè´£åŽŸåˆ™ï¼ˆSRPï¼‰" class="headerlink" title="1. å•ä¸€èŒè´£åŽŸåˆ™ï¼ˆSRPï¼‰"></a>1. å•ä¸€èŒè´£åŽŸåˆ™ï¼ˆSRPï¼‰</h3><p>å•ä¸€èŒè´£åŽŸåˆ™æŒ‡ä¸€ä¸ªç±»åº”è¯¥åªæœ‰ä¸€ä¸ªå¼•èµ·å˜åŒ–çš„åŽŸå› ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½é¢†åŸŸã€‚è¿™æœ‰åŠ©äºŽé™ä½Žç±»çš„å¤æ‚æ€§ï¼Œä½¿å…¶æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚</p><p>ä¾‹å­ï¼š å‡è®¾æœ‰ä¸€ä¸ªè´Ÿè´£å¤„ç†ç”¨æˆ·ä¿¡æ¯çš„ç±»ï¼ŒåŒ…æ‹¬éªŒè¯ç”¨æˆ·ã€å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€å‘é€é‚®ä»¶ç­‰åŠŸèƒ½ã€‚å¦‚æžœå°†è¿™äº›åŠŸèƒ½æ‹†åˆ†æˆç‹¬ç«‹çš„ç±»ï¼Œæ¯”å¦‚ä¸€ä¸ªè´Ÿè´£éªŒè¯ï¼Œä¸€ä¸ªè´Ÿè´£å­˜å‚¨ï¼Œä¸€ä¸ªè´Ÿè´£é‚®ä»¶å‘é€ï¼Œå°±èƒ½æ›´å¥½åœ°éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™ã€‚</p><h5 id="ä¸éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™çš„è®¾è®¡"><a href="#ä¸éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™çš„è®¾è®¡" class="headerlink" title="ä¸éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™çš„è®¾è®¡"></a>ä¸éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™çš„è®¾è®¡</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserManager</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">authenticateUser</span><span class="params">(String username, String password)</span> &#123;</span><br><span class="line">        <span class="comment">// éªŒè¯ç”¨æˆ·</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="comment">// ä¿å­˜ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendEmail</span><span class="params">(User user, String message)</span> &#123;</span><br><span class="line">        <span class="comment">// å‘é€é‚®ä»¶</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™çš„æ”¹è¿›"><a href="#éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™çš„æ”¹è¿›" class="headerlink" title="éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™çš„æ”¹è¿›"></a>éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™çš„æ”¹è¿›</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éµå¾ªå•ä¸€èŒè´£åŽŸåˆ™çš„æ”¹è¿›</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Authenticator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">authenticateUser</span><span class="params">(String username, String password)</span> &#123;</span><br><span class="line">        <span class="comment">// éªŒè¯ç”¨æˆ·</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserManager</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="comment">// ä¿å­˜ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmailSender</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendEmail</span><span class="params">(User user, String message)</span> &#123;</span><br><span class="line">        <span class="comment">// å‘é€é‚®ä»¶</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-å¼€æ”¾å°é—­åŽŸåˆ™ï¼ˆOCPï¼‰"><a href="#2-å¼€æ”¾å°é—­åŽŸåˆ™ï¼ˆOCPï¼‰" class="headerlink" title="2. å¼€æ”¾å°é—­åŽŸåˆ™ï¼ˆOCPï¼‰"></a>2. å¼€æ”¾å°é—­åŽŸåˆ™ï¼ˆOCPï¼‰</h3><p>å¼€æ”¾å°é—­åŽŸåˆ™è¦æ±‚è½¯ä»¶å®žä½“ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ç­‰ï¼‰åº”è¯¥å¯¹æ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œå¯¹ä¿®æ”¹æ˜¯å°é—­çš„ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬åº”è¯¥é€šè¿‡æ·»åŠ æ–°ä»£ç è€Œä¸æ˜¯ä¿®æ”¹çŽ°æœ‰ä»£ç æ¥å¼•å…¥æ–°åŠŸèƒ½ã€‚</p><p>ä¾‹å­ï¼š è€ƒè™‘ä¸€ä¸ªè´Ÿè´£ç»˜åˆ¶å›¾å½¢çš„ç±»ï¼Œæœ€åˆåªæ”¯æŒçŸ©å½¢çš„ç»˜åˆ¶ã€‚éµå¾ªå¼€æ”¾å°é—­åŽŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºæ–°çš„å­ç±»ï¼ˆä¾‹å¦‚ï¼Œåœ†å½¢ç»˜åˆ¶ç±»ï¼‰æ¥æ‰©å±•åŠŸèƒ½ï¼Œè€Œä¸æ˜¯ä¿®æ”¹åŽŸæœ‰çš„ç»˜åˆ¶ç±»ã€‚</p><h5 id="ä¸éµå¾ªå¼€æ”¾å°é—­åŽŸåˆ™çš„è®¾è®¡"><a href="#ä¸éµå¾ªå¼€æ”¾å°é—­åŽŸåˆ™çš„è®¾è®¡" class="headerlink" title="ä¸éµå¾ªå¼€æ”¾å°é—­åŽŸåˆ™çš„è®¾è®¡"></a>ä¸éµå¾ªå¼€æ”¾å°é—­åŽŸåˆ™çš„è®¾è®¡</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸éµå¾ªå¼€æ”¾å°é—­åŽŸåˆ™çš„ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShapeDrawer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(Shape shape)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (shape.getType().equals(<span class="string">&quot;rectangle&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// ç»˜åˆ¶çŸ©å½¢</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (shape.getType().equals(<span class="string">&quot;circle&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// ç»˜åˆ¶åœ†å½¢</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="éµå¾ªå¼€æ”¾å°é—­åŽŸåˆ™çš„æ”¹è¿›"><a href="#éµå¾ªå¼€æ”¾å°é—­åŽŸåˆ™çš„æ”¹è¿›" class="headerlink" title="éµå¾ªå¼€æ”¾å°é—­åŽŸåˆ™çš„æ”¹è¿›"></a>éµå¾ªå¼€æ”¾å°é—­åŽŸåˆ™çš„æ”¹è¿›</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éµå¾ªå¼€æ”¾å°é—­åŽŸåˆ™çš„æ”¹è¿›</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ç»˜åˆ¶çŸ©å½¢</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">implements</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// ç»˜åˆ¶åœ†å½¢</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShapeDrawer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">(Shape shape)</span> &#123;</span><br><span class="line">        shape.draw();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-é‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼ˆLSPï¼‰"><a href="#3-é‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼ˆLSPï¼‰" class="headerlink" title="3. é‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼ˆLSPï¼‰"></a>3. é‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼ˆLSPï¼‰</h3><p>é‡Œæ°æ›¿æ¢åŽŸåˆ™è§„å®šï¼Œå­ç±»åº”è¯¥èƒ½å¤Ÿæ›¿æ¢å…¶åŸºç±»è€Œä¸æ”¹å˜ç¨‹åºçš„æ­£ç¡®æ€§ã€‚å¦‚æžœä¸€ä¸ªè½¯ä»¶å®žä½“ä½¿ç”¨åŸºç±»ï¼Œé‚£ä¹ˆæ›¿æ¢ä¸ºå…¶å­ç±»ä¹Ÿä¸åº”è¯¥å¯¼è‡´ç¨‹åºå‡ºé”™ã€‚</p><p>ä¾‹å­ï¼š å‡è®¾æœ‰ä¸€ä¸ªå¤„ç†å›¾å½¢é¢ç§¯çš„ç±»ï¼Œå¯ä»¥æŽ¥å—ä»»ä½•ç»§æ‰¿è‡ªå›¾å½¢åŸºç±»çš„å¯¹è±¡ã€‚å¦‚æžœä¸€ä¸ªå­ç±»ï¼ˆå¦‚çŸ©å½¢ï¼‰çš„é¢ç§¯è®¡ç®—ä¸æ­£ç¡®ï¼Œé‚£ä¹ˆå®ƒè¿åäº†é‡Œæ°æ›¿æ¢åŽŸåˆ™ã€‚</p><h5 id="è¿åé‡Œæ°æ›¿æ¢åŽŸåˆ™çš„è®¾è®¡"><a href="#è¿åé‡Œæ°æ›¿æ¢åŽŸåˆ™çš„è®¾è®¡" class="headerlink" title="è¿åé‡Œæ°æ›¿æ¢åŽŸåˆ™çš„è®¾è®¡"></a>è¿åé‡Œæ°æ›¿æ¢åŽŸåˆ™çš„è®¾è®¡</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿åé‡Œæ°æ›¿æ¢åŽŸåˆ™çš„è®¾è®¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">calculateArea</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// é»˜è®¤å®žçŽ°ï¼Œå¯ä»¥åœ¨å­ç±»ä¸­è¦†ç›–</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> width;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> height;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Rectangle</span><span class="params">(<span class="type">double</span> width, <span class="type">double</span> height)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.width = width;</span><br><span class="line">        <span class="built_in">this</span>.height = height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">calculateArea</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œæ•…æ„é”™è¯¯åœ°å°†å®½åº¦å’Œé«˜åº¦ç›¸åŠ è€Œä¸æ˜¯ç›¸ä¹˜</span></span><br><span class="line">        <span class="keyword">return</span> width + height; <span class="comment">// é”™è¯¯çš„é¢ç§¯è®¡ç®—</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="éµå¾ªé‡Œæ°æ›¿æ¢åŽŸåˆ™çš„æ”¹è¿›"><a href="#éµå¾ªé‡Œæ°æ›¿æ¢åŽŸåˆ™çš„æ”¹è¿›" class="headerlink" title="éµå¾ªé‡Œæ°æ›¿æ¢åŽŸåˆ™çš„æ”¹è¿›"></a>éµå¾ªé‡Œæ°æ›¿æ¢åŽŸåˆ™çš„æ”¹è¿›</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="comment">// åŸºç±»ï¼Œæ‰€æœ‰å›¾å½¢éƒ½åº”è¯¥ç»§æ‰¿è‡ªå®ƒ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">calculateArea</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">// é»˜è®¤å®žçŽ°ï¼Œå¯ä»¥åœ¨å­ç±»ä¸­è¦†ç›–</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> width;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> height;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Rectangle</span><span class="params">(<span class="type">double</span> width, <span class="type">double</span> height)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.width = width;</span><br><span class="line">        <span class="built_in">this</span>.height = height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">calculateArea</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> width * height; <span class="comment">// çŸ©å½¢çš„é¢ç§¯è®¡ç®—</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Square</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> side;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Square</span><span class="params">(<span class="type">double</span> side)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.side = side;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">calculateArea</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> side * side; <span class="comment">// æ­£æ–¹å½¢çš„é¢ç§¯è®¡ç®—</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> radius;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Circle</span><span class="params">(<span class="type">double</span> radius)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.radius = radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">calculateArea</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.PI * radius * radius; <span class="comment">// åœ†å½¢çš„é¢ç§¯è®¡ç®—</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-æŽ¥å£éš”ç¦»åŽŸåˆ™ï¼ˆISPï¼‰"><a href="#4-æŽ¥å£éš”ç¦»åŽŸåˆ™ï¼ˆISPï¼‰" class="headerlink" title="4. æŽ¥å£éš”ç¦»åŽŸåˆ™ï¼ˆISPï¼‰"></a>4. æŽ¥å£éš”ç¦»åŽŸåˆ™ï¼ˆISPï¼‰</h3><p>æŽ¥å£éš”ç¦»åŽŸåˆ™è¦æ±‚ä¸€ä¸ªç±»ä¸åº”è¯¥è¢«å¼ºè¿«å®žçŽ°å®ƒç”¨ä¸åˆ°çš„æŽ¥å£ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªç±»åº”è¯¥åªä¾èµ–äºŽå®ƒéœ€è¦çš„æŽ¥å£ã€‚</p><p>ä¾‹å­ï¼š å‡è®¾æœ‰ä¸€ä¸ªå¤„ç†é£žè¡Œå™¨çš„ç±»ï¼Œå¦‚æžœå°†é£žæœºå’Œæ½œè‰‡çš„åŠŸèƒ½éƒ½æ”¾åœ¨åŒä¸€ä¸ªæŽ¥å£ä¸­ï¼Œé‚£ä¹ˆæŸäº›ç±»å¯èƒ½ä¼šè¢«è¿«å®žçŽ°å®ƒä»¬ç”¨ä¸åˆ°çš„æ–¹æ³•ã€‚é€šè¿‡æ‹†åˆ†æŽ¥å£ï¼Œæ¯ä¸ªç±»åªéœ€å®žçŽ°å…¶éœ€è¦çš„æŽ¥å£ï¼Œä»Žè€Œéµå¾ªæŽ¥å£éš”ç¦»åŽŸåˆ™ã€‚</p><h5 id="ä¸éµå¾ªæŽ¥å£éš”ç¦»åŽŸåˆ™çš„è®¾è®¡"><a href="#ä¸éµå¾ªæŽ¥å£éš”ç¦»åŽŸåˆ™çš„è®¾è®¡" class="headerlink" title="ä¸éµå¾ªæŽ¥å£éš”ç¦»åŽŸåˆ™çš„è®¾è®¡"></a>ä¸éµå¾ªæŽ¥å£éš”ç¦»åŽŸåˆ™çš„è®¾è®¡</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿åæŽ¥å£éš”ç¦»åŽŸåˆ™çš„è®¾è®¡</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Aircraft</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">dive</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Airplane</span> <span class="keyword">implements</span> <span class="title class_">Aircraft</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Airplane is flying.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dive</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Airplane doesn&#x27;t dive, so this method is not meaningful.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Submarine</span> <span class="keyword">implements</span> <span class="title class_">Aircraft</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Submarine can&#x27;t fly, so this method is not meaningful.</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dive</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Submarine is diving.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="éµå¾ªæŽ¥å£éš”ç¦»åŽŸåˆ™çš„æ”¹è¿›"><a href="#éµå¾ªæŽ¥å£éš”ç¦»åŽŸåˆ™çš„æ”¹è¿›" class="headerlink" title="éµå¾ªæŽ¥å£éš”ç¦»åŽŸåˆ™çš„æ”¹è¿›"></a>éµå¾ªæŽ¥å£éš”ç¦»åŽŸåˆ™çš„æ”¹è¿›</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŽ¥å£éš”ç¦»åŽŸåˆ™æ”¹è¿›åŽçš„è®¾è®¡</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">FlyingAircraft</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">DivingAircraft</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">dive</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Airplane</span> <span class="keyword">implements</span> <span class="title class_">FlyingAircraft</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Airplane is flying.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Submarine</span> <span class="keyword">implements</span> <span class="title class_">DivingAircraft</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">dive</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Submarine is diving.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-ä¾èµ–åè½¬åŽŸåˆ™ï¼ˆDIPï¼‰"><a href="#5-ä¾èµ–åè½¬åŽŸåˆ™ï¼ˆDIPï¼‰" class="headerlink" title="5. ä¾èµ–åè½¬åŽŸåˆ™ï¼ˆDIPï¼‰"></a>5. ä¾èµ–åè½¬åŽŸåˆ™ï¼ˆDIPï¼‰</h3><p>ä¾èµ–åè½¬åŽŸåˆ™è¦æ±‚é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºŽåº•å±‚æ¨¡å—ï¼Œè€Œæ˜¯åº”è¯¥ä¾èµ–äºŽæŠ½è±¡ã€‚æŠ½è±¡ä¸åº”è¯¥ä¾èµ–äºŽç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–äºŽæŠ½è±¡ã€‚</p><p>ä¾‹å­ï¼š è€ƒè™‘ä¸€ä¸ªè´­ç‰©è½¦ç±»ï¼Œæœ€åˆå¯èƒ½ç›´æŽ¥ä¾èµ–äºŽå…·ä½“çš„æ”¯ä»˜æ–¹å¼ï¼Œå¦‚ä¿¡ç”¨å¡æ”¯ä»˜ç±»ã€‚é€šè¿‡å¼•å…¥ä¸€ä¸ªæ”¯ä»˜æŽ¥å£å¹¶è®©å…·ä½“æ”¯ä»˜ç±»å®žçŽ°å®ƒï¼Œè´­ç‰©è½¦ç±»å°±å¯ä»¥ä¾èµ–äºŽæŠ½è±¡è€Œä¸æ˜¯å…·ä½“çš„å®žçŽ°ï¼Œç¬¦åˆä¾èµ–åè½¬åŽŸåˆ™ã€‚</p><h5 id="ä¸éµå¾ªä¾èµ–åè½¬åŽŸåˆ™çš„è®¾è®¡"><a href="#ä¸éµå¾ªä¾èµ–åè½¬åŽŸåˆ™çš„è®¾è®¡" class="headerlink" title="ä¸éµå¾ªä¾èµ–åè½¬åŽŸåˆ™çš„è®¾è®¡"></a>ä¸éµå¾ªä¾èµ–åè½¬åŽŸåˆ™çš„è®¾è®¡</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ç¬¦åˆä¾èµ–åè½¬åŽŸåˆ™çš„è®¾è®¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CreditCardPayment</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">processPayment</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Processing payment using Credit Card.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShoppingCart</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> CreditCardPayment paymentMethod;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ShoppingCart</span><span class="params">(CreditCardPayment paymentMethod)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.paymentMethod = paymentMethod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">checkout</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Checkout process initiated.&quot;</span>);</span><br><span class="line">        paymentMethod.processPayment();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="éµå¾ªä¾èµ–åè½¬åŽŸåˆ™çš„æ”¹è¿›"><a href="#éµå¾ªä¾èµ–åè½¬åŽŸåˆ™çš„æ”¹è¿›" class="headerlink" title="éµå¾ªä¾èµ–åè½¬åŽŸåˆ™çš„æ”¹è¿›"></a>éµå¾ªä¾èµ–åè½¬åŽŸåˆ™çš„æ”¹è¿›</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¦åˆä¾èµ–åè½¬åŽŸåˆ™çš„è®¾è®¡</span></span><br><span class="line"><span class="comment">// æ”¯ä»˜æŽ¥å£</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Payment</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">processPayment</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…·ä½“çš„ä¿¡ç”¨å¡æ”¯ä»˜ç±»å®žçŽ°äº†æ”¯ä»˜æŽ¥å£</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CreditCardPayment</span> <span class="keyword">implements</span> <span class="title class_">Payment</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">processPayment</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Processing payment using Credit Card.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è´­ç‰©è½¦ç±»ä¾èµ–äºŽæ”¯ä»˜æŽ¥å£</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShoppingCart</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Payment paymentMethod;  <span class="comment">// ä¾èµ–æŠ½è±¡</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ShoppingCart</span><span class="params">(Payment paymentMethod)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.paymentMethod = paymentMethod;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">checkout</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Checkout process initiated.&quot;</span>);</span><br><span class="line">        paymentMethod.processPayment();  <span class="comment">// é€šè¿‡æŽ¥å£è°ƒç”¨æ”¯ä»˜æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼ŒSOLIDåŽŸåˆ™æä¾›äº†ä¸€ç§è®¾è®¡è‰¯å¥½ä¸”æ˜“äºŽç»´æŠ¤çš„æž¶æž„ã€‚éµå¾ªè¿™äº›åŽŸåˆ™æœ‰åŠ©äºŽé™ä½Žä»£ç çš„å¤æ‚æ€§ï¼Œæé«˜å¯è¯»æ€§ï¼Œå¹¶ä½¿ä»£ç æ›´å®¹æ˜“æ‰©å±•å’Œç»´æŠ¤ã€‚é€šè¿‡æ·±å…¥ç†è§£å’Œå®žè·µè¿™äº›åŽŸåˆ™ï¼Œå¼€å‘äººå‘˜å¯ä»¥æž„å»ºå‡ºæ›´ä¸ºå¥å£®ã€å¯ç»´æŠ¤çš„è½¯ä»¶ç³»ç»Ÿã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SOLID </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>èŠèŠå‰ç«¯ä¼˜åŒ–æ‰‹æ®µé˜²æŠ–</title>
      <link href="/2017/03/16/liao-liao-qian-duan-you-hua-shou-duan-fang-dou/"/>
      <url>/2017/03/16/liao-liao-qian-duan-you-hua-shou-duan-fang-dou/</url>
      
        <content type="html"><![CDATA[<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œ<strong>é˜²æŠ–ï¼ˆDebouncingï¼‰</strong> æ˜¯ä¸€ç§å¸¸ç”¨çš„ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºŽå¤„ç†é¢‘ç¹è§¦å‘çš„äº‹ä»¶ï¼Œå¦‚æµè§ˆå™¨çª—å£çš„resizeã€inputè¾“å…¥ç­‰ã€‚<strong>é˜²æŠ–çš„ç›®æ ‡æ˜¯åœ¨äº‹ä»¶è¢«è§¦å‘åŽï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œåªæ‰§è¡Œä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä»¥é¿å…é¢‘ç¹çš„é‡å¤æ“ä½œ</strong>ã€‚</p><p><strong>é˜²æŠ–çš„åŽŸç†</strong>å¾ˆç®€å•ï¼šå½“ä¸€ä¸ªäº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œç«‹å³è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œåœ¨è§„å®šçš„æ—¶é—´å†…æ²¡æœ‰å†æ¬¡è§¦å‘è¯¥äº‹ä»¶æ—¶ï¼Œæ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°ã€‚å¦‚æžœåœ¨å®šæ—¶å™¨è§„å®šçš„æ—¶é—´å†…å†æ¬¡è§¦å‘äº†äº‹ä»¶ï¼Œé‚£ä¹ˆå°±æ¸…é™¤å‰ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¹¶é‡æ–°è®¾ç½®æ–°çš„å®šæ—¶å™¨ã€‚è¿™æ ·ï¼Œåªæœ‰åœ¨äº‹ä»¶åœæ­¢è§¦å‘ä¸€æ®µæ—¶é—´åŽï¼Œæ‰ä¼šæ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªé˜²æŠ–çš„åŸºæœ¬å®žçŽ°ç¤ºä¾‹ï¼ˆä½¿ç”¨ JavaScriptï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> context = <span class="variable language_">this</span>;</span><br><span class="line">        <span class="keyword">const</span> args = <span class="variable language_">arguments</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer); <span class="comment">// æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œæ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">//è®¾ç½®æ–°çš„å®šæ—¶å™¨</span></span><br><span class="line">            func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> debounceFunction = <span class="title function_">debounce</span>(<span class="function">(<span class="params">args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Debounce function called&quot;</span>, args);</span><br><span class="line">&#125;, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, debounceFunction);</span><br></pre></td></tr></table></figure><span id="more"></span><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œdebounce å‡½æ•°æŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼š<strong>è¦æ‰§è¡Œçš„äº‹ä»¶å¤„ç†å‡½æ•°</strong>å’Œ<strong>å»¶è¿Ÿæ—¶é—´</strong>ï¼ˆè§„å®šçš„ç­‰å¾…æ—¶é—´ï¼‰ã€‚åœ¨äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œdebounce è¿”å›žä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨æ¥ç­‰å¾…å»¶è¿Ÿæ—¶é—´ï¼Œç„¶åŽæ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p><p>é˜²æŠ–çš„å®žçŽ°å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œé€‚å½“çš„è°ƒæ•´ï¼Œä¾‹å¦‚å¢žåŠ ç«‹å³æ‰§è¡Œé€‰é¡¹ï¼Œå³åœ¨äº‹ä»¶è§¦å‘æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç„¶åŽå†è¿›å…¥é˜²æŠ–æ¨¡å¼ã€‚è¿™æ ·å¯ä»¥åœ¨äº‹ä»¶è§¦å‘çš„çž¬é—´å³æ—¶å“åº”ï¼ŒåŒæ—¶ä»ç„¶ä¿ç•™äº†åŽç»­çš„é˜²æŠ–æ•ˆæžœã€‚</p><p>çŽ°åœ¨åœ¨ä¸Šé¢é˜²æŠ–çš„åŸºç¡€ä¸Šå¤šå¢žåŠ ä¸€ä¸ªå‚æ•°ï¼Œ<strong>immediate</strong>ï¼Œ å‚æ•°å€¼ä¸ºtrueæ—¶ï¼Œå‡½æ•°ç«‹å³æ‰§è¡Œï¼Œä¸ºfalseæ—¶å»¶æ—¶æ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, delay, immediate</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timer;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> context = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">const</span> args = <span class="variable language_">arguments</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (immediate) &#123;    <span class="comment">// immediateä¸ºtrueï¼Œç«‹å³æ‰§è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span> (!timer) &#123;</span><br><span class="line">            func.<span class="title function_">apply</span>(context, args); <span class="comment">// ç«‹å³æ‰§è¡Œä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">        &#125;</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            timer = <span class="literal">null</span>; <span class="comment">// delayæ—¶é—´åˆ°åŽï¼Œå°†è®¡æ—¶å™¨è®¾ç½®nullï¼Œä¸‹ä¸€æ¬¡ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;    <span class="comment">//immediateä¸ºfalseï¼Œå»¶æ—¶æ‰§è¡Œ</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            func.<span class="title function_">apply</span>(context, args); <span class="comment">// åœ¨å»¶è¿Ÿæ—¶é—´åŽæ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨é˜²æŠ–å¤„ç†äº‹ä»¶ï¼Œç¬¬ä¸€æ¬¡è§¦å‘ç«‹å³æ‰§è¡Œï¼Œä¹‹åŽæ¯æ¬¡è§¦å‘ç­‰å¾…300æ¯«ç§’åŽæ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">const</span> debouncedFunction = <span class="title function_">debounce</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Debounce function called.&quot;</span>);</span><br><span class="line">&#125;, <span class="number">500</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, debouncedFunction);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ€»çš„æ¥è¯´ï¼Œé˜²æŠ–æ˜¯ä¸€ç§æœ‰æ•ˆçš„ä¼˜åŒ–æ‰‹æ®µï¼Œå¯ä»¥å¸®åŠ©å‡å°‘é¢‘ç¹è§¦å‘çš„äº‹ä»¶é€ æˆçš„é‡å¤æ“ä½œï¼Œæå‡å‰ç«¯åº”ç”¨çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ä¸ªå…è´¹é«˜è´¨é‡çš„å›¾ç‰‡åˆ†äº«å¹³å°</title>
      <link href="/2017/02/23/yi-ge-mian-fei-gao-zhi-liang-de-tu-pian-fen-xiang-ping-tai/"/>
      <url>/2017/02/23/yi-ge-mian-fei-gao-zhi-liang-de-tu-pian-fen-xiang-ping-tai/</url>
      
        <content type="html"><![CDATA[<p>å¾ˆå¤šæ—¶å€™åœ¨å†™æ–‡ç« æˆ–è€…åˆ¶ä½œPPTæ—¶éœ€è¦ç”¨åˆ°ä¸€äº›å›¾ç‰‡èµ„æºï¼Œæœ€è¿‘åˆšå¥½å‘çŽ°äº†ä¸€ä¸ªå®žç”¨çš„é«˜åˆ†è¾¨çŽ‡çš„å…è´¹èµ„æºå¹³å°Unspash, è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ã€‚<br><img src="/assets/images/ziyuan/laptop-1.png" class="lazyload placeholder" data-srcset="/assets/images/ziyuan/laptop-1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"><br><a href="https://unsplash.com/" title="å…è´¹é«˜è´¨é‡çš„å›¾ç‰‡åˆ†äº«å¹³å°">Unsplash.com</a> æ˜¯ä¸€ä¸ªçŸ¥åçš„å…è´¹é«˜è´¨é‡å›¾ç‰‡åˆ†äº«å¹³å°ï¼Œæä¾›å„ç§ç±»åž‹çš„é«˜åˆ†è¾¨çŽ‡æ‘„å½±å›¾ç‰‡ä¾›ç”¨æˆ·å…è´¹ä¸‹è½½å’Œä½¿ç”¨ã€‚è¿™äº›å›¾ç‰‡å¯ä»¥ç”¨äºŽä¸ªäººã€å•†ä¸šã€åˆ›æ„å’Œå­¦æœ¯é¡¹ç›®ï¼ŒåŒ…æ‹¬ç½‘ç«™ã€åšå®¢ã€ç¤¾äº¤åª’ä½“ã€æ¼”ç¤ºæ–‡ç¨¿ç­‰ã€‚</p><span id="more"></span><p>è¿™ä¸ªå¹³å°çš„ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p><p><strong>é«˜è´¨é‡å›¾ç‰‡ï¼š</strong> Unsplash ä¸Šçš„å›¾ç‰‡è´¨é‡å¾€å¾€å¾ˆé«˜ï¼ŒåŒ…æ‹¬é£Žæ™¯ã€äººç‰©ã€é£Ÿç‰©ã€å»ºç­‘ç­‰å¤šç§ä¸»é¢˜ã€‚è¿™äº›å›¾ç‰‡é€šå¸¸ç”±ä¸“ä¸šæ‘„å½±å¸ˆæ‹æ‘„ï¼Œå› æ­¤åœ¨è®¾è®¡å’Œå†…å®¹åˆ›ä½œä¸­å…·æœ‰å¾ˆå¤§çš„ä»·å€¼ã€‚<br><img src="/assets/images/ziyuan/fengjing-1.png" class="lazyload placeholder" data-srcset="/assets/images/ziyuan/fengjing-1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p><strong>å…è´¹ä½¿ç”¨ï¼š</strong> Unsplash çš„å›¾ç‰‡éƒ½æ˜¯å…è´¹æä¾›çš„ï¼Œæ— éœ€ä»˜è´¹æˆ–è®¢é˜…ã€‚ç”¨æˆ·å¯ä»¥è‡ªç”±ä¸‹è½½ã€ç¼–è¾‘å’Œä½¿ç”¨è¿™äº›å›¾ç‰‡ï¼Œè€Œä¸éœ€è¦æ‹…å¿ƒç‰ˆæƒé—®é¢˜ã€‚<br><img src="/assets/images/ziyuan/coding-1.png" class="lazyload placeholder" data-srcset="/assets/images/ziyuan/coding-1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p><strong>ç®€å•çš„è®¸å¯ï¼š</strong> Unsplash ä½¿ç”¨çš„æ˜¯åˆ›ä½œå…±ç”¨è®¸å¯ï¼ˆCreative Commons Zero Licenseï¼‰ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·å¯ä»¥è‡ªç”±ä½¿ç”¨è¿™äº›å›¾ç‰‡ï¼Œç”šè‡³å¯ä»¥ç”¨äºŽå•†ä¸šç›®çš„ï¼Œæ— éœ€ç»™äºˆä½œè€…ç½²åã€‚<br><img src="/assets/images/ziyuan/license-1.png" class="lazyload placeholder" data-srcset="/assets/images/ziyuan/license-1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p><strong>æœç´¢å’Œæµè§ˆåŠŸèƒ½ï¼š</strong> Unsplash ç½‘ç«™æä¾›æœç´¢åŠŸèƒ½å’Œæµè§ˆä¸åŒä¸»é¢˜çš„å›¾ç‰‡é›†åˆï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ‰¾åˆ°ç¬¦åˆè‡ªå·±éœ€æ±‚çš„å›¾ç‰‡ã€‚<br><img src="/assets/images/ziyuan/search-1.png" class="lazyload placeholder" data-srcset="/assets/images/ziyuan/search-1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p><strong>ç¤¾åŒºå’Œåˆ›ä½œè€…ï¼š</strong> Unsplash æž„å»ºäº†ä¸€ä¸ªæ´»è·ƒçš„æ‘„å½±å¸ˆç¤¾åŒºï¼Œç”¨æˆ·å¯ä»¥æŸ¥çœ‹æ‘„å½±å¸ˆçš„ä¸ªäººä¸»é¡µï¼Œäº†è§£ä»–ä»¬çš„ä½œå“ï¼Œå¹¶é€‰æ‹©å…³æ³¨è‡ªå·±å–œæ¬¢çš„åˆ›ä½œè€…ã€‚<br><img src="/assets/images/ziyuan/community-1.png" class="lazyload placeholder" data-srcset="/assets/images/ziyuan/community-1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p>æ€»çš„æ¥è¯´ï¼ŒUnsplash.com æ˜¯ä¸€ä¸ªå—æ¬¢è¿Žçš„å›¾ç‰‡èµ„æºå¹³å°ï¼Œé€‚ç”¨äºŽéœ€è¦é«˜è´¨é‡å›¾ç‰‡çš„ä¸ªäººå’Œå•†ä¸šé¡¹ç›®ã€‚çœŸçš„æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„èµ„æºå¹³å°ï¼</p>]]></content>
      
      
      <categories>
          
          <category> Resources </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é«˜æ¸…å›¾ç‰‡ </tag>
            
            <tag> èµ„æº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ€çŸ­å­æ•°ç»„ä¹‹å’Œ</title>
      <link href="/2016/03/01/minimum-size-subarray-sum/"/>
      <url>/2016/03/01/minimum-size-subarray-sum/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ªå¸¸è§çš„æœ€çŸ­å­æ•°ç»„ç®—æ³•é¢˜æ˜¯ â€œMinimum Size Subarray Sumâ€ã€‚åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œè¦æ‰¾åˆ°æ•°ç»„ä¸­ä¸€ä¸ªè¿žç»­å­æ•°ç»„ï¼Œä½¿å¾—å­æ•°ç»„çš„å…ƒç´ å’Œå¤§äºŽç­‰äºŽç›®æ ‡å€¼ï¼Œå¹¶ä¸”å­æ•°ç»„çš„é•¿åº¦æœ€å°ã€‚</p><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š </span><br><span class="line">æ•°ç»„: [5, 3, 4, 2, 8, 5];  ç›®æ ‡å€¼: 10</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">[2, 8]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š </span><br><span class="line">æ•°ç»„: [5, 3, 4, 2, 8, 5];  ç›®æ ‡å€¼: 28</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">[]</span><br></pre></td></tr></table></figure><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š </span><br><span class="line">æ•°ç»„: [5, 3, 4, 2, 8, 5];  ç›®æ ‡å€¼: 4</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">[5]</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé—®é¢˜å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆæ¥è§£å†³çª—å£çš„æ»‘åŠ¨é—®é¢˜ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] minSizeSubArray(<span class="type">int</span>[] numbers, <span class="type">int</span> target) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="number">0</span>, p2 = <span class="number">0</span>; <span class="comment">//å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">minLeft</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// æœ€å°å­æ•°ç»„çš„å·¦è¾¹ç•Œ</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">minLen</span> <span class="operator">=</span> Integer.MAX_VALUE; <span class="comment">// æœ€å°å­æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;    <span class="comment">//å­æ•°ç»„å…ƒç´ å’Œ</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (p2 = <span class="number">0</span>; p2 &lt; numbers.length; p2++) &#123;</span><br><span class="line">        sum += numbers[p2]; <span class="comment">// å°†å³æŒ‡é’ˆçš„å…ƒç´ åŠ å…¥å­æ•°ç»„</span></span><br><span class="line">        <span class="keyword">while</span> (sum &gt;= target) &#123; <span class="comment">// å¦‚æžœå­æ•°ç»„çš„å’Œå¤§äºŽç­‰äºŽç›®æ ‡å€¼</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">curLen</span> <span class="operator">=</span> p2 - p1 + <span class="number">1</span>; <span class="comment">// èŽ·å–å½“å‰å­æ•°ç»„é•¿åº¦</span></span><br><span class="line">            <span class="keyword">if</span> (minLen &gt; curLen) &#123; <span class="comment">// å¦‚æžœå­æ•°ç»„é•¿åº¦æ¯”ä¸Šæ¬¡è¿˜æ›´å°</span></span><br><span class="line">                minLen = curLen; <span class="comment">// æ›´æ–°å­æ•°ç»„æœ€å°é•¿åº¦</span></span><br><span class="line">                minLeft = p1;   <span class="comment">// æ›´æ–°å­æ•°ç»„çš„å·¦è¾¹ç•Œ</span></span><br><span class="line">            &#125;</span><br><span class="line">            sum -= numbers[p1]; <span class="comment">// å°†å·¦æŒ‡é’ˆçš„å…ƒç´ ä»Žå­æ•°ç»„ä¸­ç§»é™¤</span></span><br><span class="line">            p1++;   <span class="comment">//ç§»åŠ¨å·¦æŒ‡é’ˆï¼Œç¼©å°å­æ•°ç»„</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (minLen == Integer.MAX_VALUE) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];  <span class="comment">// æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å­æ•°ç»„</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//æ ¹æ®å­æ•°ç»„çš„å·¦è¾¹ç•Œä»¥åŠé•¿åº¦ï¼Œè¿”å›žå­æ•°ç»„</span></span><br><span class="line">        <span class="type">int</span>[] result = <span class="keyword">new</span> <span class="title class_">int</span>[minLen];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; minLen; i++) &#123;</span><br><span class="line">            result[i] = numbers[i + minLeft];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ä¸ªæŒ‡é’ˆ p1 å’Œ p2ï¼Œåˆ†åˆ«è¡¨ç¤ºå­æ•°ç»„çš„å·¦å³è¾¹ç•Œã€‚æˆ‘ä»¬åœ¨æ•°ç»„ä¸Šä½¿ç”¨æ»‘åŠ¨çª—å£æ¥å¯»æ‰¾æ»¡è¶³æ¡ä»¶çš„æœ€çŸ­å­æ•°ç»„ã€‚å½“å­æ•°ç»„çš„å’Œå¤§äºŽç­‰äºŽç›®æ ‡å€¼æ—¶ï¼Œæˆ‘ä»¬ç§»åŠ¨å·¦æŒ‡é’ˆï¼Œå¹¶æ›´æ–°æœ€å°é•¿åº¦ã€‚å¦‚æžœå‘çŽ°æœ‰æ›´å°çš„æ•°ç»„é•¿åº¦ï¼Œåˆ™æ›´æ–°æœ€å°æ•°ç»„é•¿åº¦ä»¥åŠæ•°ç»„çš„å·¦è¾¹ç•Œå€¼ï¼Œå½“å­æ•°ç»„çš„å’Œä¸è¶³ä»¥æ»¡è¶³æ¡ä»¶æ—¶ï¼Œæˆ‘ä»¬ç§»åŠ¨å³æŒ‡é’ˆï¼Œå¹¶ç»§ç»­æ‰©å±•å­æ•°ç»„ã€‚</p><p>æµ‹è¯•ç»“æžœå¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] numbers = &#123;<span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    printArray(minSizeSubArray(numbers, <span class="number">10</span>)); <span class="comment">// [2, 8]</span></span><br><span class="line">    printArray(minSizeSubArray(numbers, <span class="number">28</span>)); <span class="comment">// []</span></span><br><span class="line">    printArray(minSizeSubArray(numbers, <span class="number">4</span>)); <span class="comment">// [5]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printArray</span><span class="params">(<span class="type">int</span>[] numbers)</span> &#123;</span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    sb.append(<span class="string">&quot;[&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span><span class="number">0</span>; i &lt; numbers.length; i++) &#123;</span><br><span class="line">        sb.append(numbers[i]).append(i == numbers.length - <span class="number">1</span> ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;, &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    sb.append(<span class="string">&quot;]&quot;</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(sb.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> æ•°æ®ç»“æž„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒæŒ‡é’ˆç®—æ³•ä¹‹ä¸¤æ•°ä¹‹å’Œ</title>
      <link href="/2016/02/05/shuang-zhi-zhen-suan-fa-zhi-liang-shu-zhi-he/"/>
      <url>/2016/02/05/shuang-zhi-zhen-suan-fa-zhi-liang-shu-zhi-he/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°äº†åŒæŒ‡é’ˆç®—æ³•çš„å‡ ç§ä½¿ç”¨åœºæ™¯ï¼Œè¿™é‡Œå…·ä½“ä¸¾ä¾‹ï¼Œä»¥ç»å…¸çš„ä¸¤æ•°ä¹‹å’Œä¸ºä¾‹ã€‚</p><p>ç»™å®šä¸€ä¸ªæœ‰åºæ•°å­—çš„æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æœ‰åºæ•°ç»„ä¸­æ‰¾åˆ°ä¸¤ä¸ªæ•°å­—ä¹‹å’Œç­‰äºŽè¯¥ç›®æ ‡å€¼ï¼Œè¿”å›žåŒ…å«ä¸¤ä¸ªæ•°å­—çš„æ•°ç»„ï¼Œå¦‚æžœæ²¡æœ‰æ‰¾åˆ°è¿”å›žåŒ…å«ä¸¤ä¸ª-1å€¼çš„æ•°ç»„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ‰¾åˆ°çš„æƒ…å†µ</span><br><span class="line">è¾“å…¥ï¼š </span><br><span class="line">æœ‰åºæ•°ç»„: [2, 4, 5, 6, 12];  ç›®æ ‡å€¼: 10</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">[4, 6]</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ‰¾ä¸åˆ°çš„æƒ…å†µ</span><br><span class="line">è¾“å…¥ï¼š </span><br><span class="line">æœ‰åºæ•°ç»„: [2, 4, 5, 6, 12];  ç›®æ ‡å€¼: 3</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line">[-1, -1]</span><br></pre></td></tr></table></figure><span id="more"></span><p>ç›´æŽ¥ä»£ç èµ°èµ·ï¼Œä¸‹é¢ä»¥Javaä»£ç ä¸ºä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] findNumbers(<span class="type">int</span>[] numbers, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pLeft</span> <span class="operator">=</span> <span class="number">0</span>;  <span class="comment">// å·¦æŒ‡é’ˆåˆå§‹ä½ç½®</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">pRight</span> <span class="operator">=</span> numbers.length - <span class="number">1</span>; <span class="comment">// å³æŒ‡é’ˆåˆå§‹ä½ç½®</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (pLeft &lt; pRight) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> numbers[pLeft] + numbers[pRight];</span><br><span class="line">            <span class="keyword">if</span> (sum == target) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;numbers[pLeft], numbers[pRight]&#125;; <span class="comment">// è¿”å›žåŒ¹é…çš„å…ƒç´ </span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; target) &#123;</span><br><span class="line">                pLeft++; <span class="comment">// å’Œå°äºŽç›®æ ‡å€¼ï¼Œå·¦æŒ‡é’ˆå³ç§»</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                pRight--; <span class="comment">// å’Œå¤§äºŽç›®æ ‡å€¼ï¼Œå³æŒ‡é’ˆå·¦ç§»</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;-<span class="number">1</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] results = findNumbers(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">12</span>&#125;, <span class="number">10</span>);</span><br><span class="line">        System.out.printf(<span class="string">&quot;[%d, %d]%n&quot;</span>, results[<span class="number">0</span>], results[<span class="number">1</span>]); <span class="comment">// è¾“å‡º [4, 6]</span></span><br><span class="line"></span><br><span class="line">        results = findNumbers(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">12</span>&#125;, <span class="number">3</span>);</span><br><span class="line">        System.out.printf(<span class="string">&quot;[%d, %d]%n&quot;</span>, results[<span class="number">0</span>], results[<span class="number">1</span>]); <span class="comment">// è¾“å‡º [-1, -1]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ä¸ªæŒ‡é’ˆ pLeft å’Œ pRight åˆ†åˆ«æŒ‡å‘æœ‰åºæ•°ç»„çš„ä¸¤ç«¯ã€‚ç„¶åŽï¼Œæˆ‘ä»¬è®¡ç®— numbers[pLeft] å’Œ numbers[pRight] çš„å’Œï¼Œå¹¶ä¸Žç›®æ ‡å€¼è¿›è¡Œæ¯”è¾ƒã€‚æ ¹æ®å’Œä¸Žç›®æ ‡å€¼çš„å¤§å°å…³ç³»ï¼Œæˆ‘ä»¬ç§»åŠ¨å·¦æŒ‡é’ˆæˆ–å³æŒ‡é’ˆï¼Œç›´åˆ°æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å…ƒç´ å¯¹ï¼Œæˆ–è€…æŒ‡é’ˆé‡åˆæ²¡æœ‰æ‰¾åˆ°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> æ•°æ®ç»“æž„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒæŒ‡é’ˆç®—æ³•</title>
      <link href="/2016/01/25/shuang-zhi-zhen-suan-fa/"/>
      <url>/2016/01/25/shuang-zhi-zhen-suan-fa/</url>
      
        <content type="html"><![CDATA[<p>åŒæŒ‡é’ˆç®—æ³•ï¼ˆTwo Pointer Algorithmï¼‰æ˜¯ä¸€ç§å¸¸è§çš„ç®—æ³•æŠ€å·§ï¼Œé€šå¸¸ç”¨äºŽæ•°ç»„ã€é“¾è¡¨ç­‰æ•°æ®ç»“æž„ä¸­è§£å†³ä¸€äº›é—®é¢˜ã€‚åŒæŒ‡é’ˆç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆåœ¨ä¸åŒçš„ä½ç½®ä¸Šç§»åŠ¨ï¼Œä»¥è¾¾åˆ°è§£å†³é—®é¢˜çš„ç›®çš„ã€‚è¿™ä¸¤ä¸ªæŒ‡é’ˆå¯ä»¥æœç€ç›¸åŒçš„æ–¹å‘ç§»åŠ¨ï¼Œä¹Ÿå¯ä»¥æœç€ç›¸åçš„æ–¹å‘ç§»åŠ¨ï¼Œè§†é—®é¢˜è€Œå®šã€‚</p><p>åŒæŒ‡é’ˆç®—æ³•çš„å¸¸è§åº”ç”¨åœºæ™¯å’Œå®žçŽ°æ–¹æ³•ï¼š</p><p><strong>å¯¹æ’žæŒ‡é’ˆï¼ˆTwo Sumã€Three Sumï¼‰ï¼š</strong> åœ¨æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å…ƒç´ å¯¹æˆ–å…ƒç´ ç»„åˆã€‚ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«ä»Žæ•°ç»„çš„ä¸¤ç«¯å¼€å§‹ï¼Œå‘ä¸­é—´é€¼è¿‘ï¼Œæ ¹æ®å…ƒç´ ä¹‹é—´çš„å¤§å°å…³ç³»ï¼Œè°ƒæ•´æŒ‡é’ˆçš„ä½ç½®ã€‚</p><p><strong>å¿«æ…¢æŒ‡é’ˆï¼ˆçŽ¯å½¢é“¾è¡¨åˆ¤æ–­ã€é“¾è¡¨ä¸­é—´èŠ‚ç‚¹ï¼‰ï¼š</strong> åœ¨é“¾è¡¨ä¸­åˆ¤æ–­æ˜¯å¦å­˜åœ¨çŽ¯æˆ–æ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ã€‚ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªå¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥ï¼Œä¸€ä¸ªæ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥ï¼Œæ ¹æ®æŒ‡é’ˆçš„ç§»åŠ¨é€Ÿåº¦åˆ¤æ–­é“¾è¡¨çš„æ€§è´¨ã€‚</p><span id="more"></span><p><strong>æ»‘åŠ¨çª—å£ï¼ˆå­æ•°ç»„é—®é¢˜ã€å­—ç¬¦ä¸²é—®é¢˜ï¼‰ï¼š</strong> ç”¨äºŽè§£å†³ä¸€äº›çª—å£å†…çš„é—®é¢˜ï¼Œä¾‹å¦‚æ‰¾åˆ°æœ€çŸ­å­æ•°ç»„ã€æ‰¾åˆ°æœ€é•¿è¿žç»­å­æ•°ç»„ç­‰ã€‚ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆè¡¨ç¤ºçª—å£çš„å·¦å³è¾¹ç•Œï¼Œç§»åŠ¨çª—å£è¿›è¡Œè®¡ç®—ã€‚</p><p><strong>å¤¹é€¼æ³•ï¼ˆå®¹å™¨è£…æ°´é—®é¢˜ã€ä¸‰æ•°æœ€æŽ¥è¿‘é—®é¢˜ï¼‰ï¼š</strong> åœ¨ä¸€ç»´æ•°ç»„ä¸­å¯»æ‰¾æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å…ƒç´ å¯¹ã€‚ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆä»Žä¸¤ç«¯å¼€å§‹ï¼Œé€æ¸å‘ä¸­é—´å¤¹é€¼ï¼Œæ ¹æ®å…ƒç´ ä¹‹é—´çš„å¤§å°å…³ç³»ï¼Œè°ƒæ•´æŒ‡é’ˆçš„ä½ç½®ã€‚</p><p><strong>å¤šæŒ‡é’ˆæ³•ï¼ˆå››æ•°ä¹‹å’Œé—®é¢˜ã€åˆ é™¤æŽ’åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ï¼‰ï¼š</strong> åœ¨ä¸€ç»´æˆ–äºŒç»´æ•°ç»„ä¸­å¯»æ‰¾æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å…ƒç´ ç»„åˆã€‚ä½¿ç”¨å¤šä¸ªæŒ‡é’ˆåœ¨æ•°ç»„ä¸­ç§»åŠ¨ï¼Œæ ¹æ®é—®é¢˜éœ€è¦ï¼Œè¿›è¡Œç›¸åº”çš„æŒ‡é’ˆè°ƒæ•´ã€‚</p><p>åŒæŒ‡é’ˆç®—æ³•çš„ä¼˜åŠ¿åœ¨äºŽå®ƒå¯ä»¥åœ¨O(N)çš„æ—¶é—´å¤æ‚åº¦å†…è§£å†³ä¸€äº›å¤æ‚çš„é—®é¢˜ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨é¢å¤–çš„ç©ºé—´ã€‚å®ƒåœ¨æ•°ç»„å’Œé“¾è¡¨ç­‰æ•°æ®ç»“æž„ä¸Šéƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œå¸¸ç”¨äºŽè§£å†³æ•°ç»„éåŽ†ã€æŸ¥æ‰¾ã€æŽ’åºå’Œæ“ä½œç­‰é—®é¢˜ã€‚è¿™ç§ç®—æ³•å¯ä»¥å¸®åŠ©ç®€åŒ–é—®é¢˜çš„è§£å†³è¿‡ç¨‹ï¼Œæé«˜ä»£ç æ•ˆçŽ‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> æ•°æ®ç»“æž„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to fix Gem FilePermissionError</title>
      <link href="/2016/01/12/how-to-fix-gem-filepermissionerror/"/>
      <url>/2016/01/12/how-to-fix-gem-filepermissionerror/</url>
      
        <content type="html"><![CDATA[<p>Sometimes we face the erorr â€œGem::FilePermissionError: You donâ€™t have write permissions for the &#x2F;Library&#x2F;Ruby&#x2F;Gems&#x2F;x.x.x directoryâ€. This error message indicates that the user doesnâ€™t have the necessary permissions to install Ruby gems system-wide. This is because the system Ruby installation requires administrative privileges to modify its gem directory.</p><p>To resolve this issue, there is a few options:</p><h3 id="1-Use-a-Ruby-Version-Manager-Recommended"><a href="#1-Use-a-Ruby-Version-Manager-Recommended" class="headerlink" title="1. Use a Ruby Version Manager (Recommended)"></a>1. Use a Ruby Version Manager (Recommended)</h3><p>Instead of installing gems globally, consider using a Ruby version manager like <code>rbenv</code> or <code>RVM</code>. These tools allow you to manage multiple Ruby versions and gems without requiring administrative permissions.</p><h4 id="Using-rbenv"><a href="#Using-rbenv" class="headerlink" title="Using rbenv"></a>Using rbenv</h4><pre><code>1. Install rbenv if you haven&#39;t already.2. Install the desired version of Ruby using rbenv.3. Install gems without needing elevated permissions.</code></pre><h4 id="Using-RVM"><a href="#Using-RVM" class="headerlink" title="Using RVM"></a>Using RVM</h4><pre><code>1. Install RVM if you haven&#39;t already.2. Install the desired version of Ruby using RVM.3. Use the installed Ruby version without needing elevated permissions to install gems.</code></pre><span id="more"></span><h3 id="2-Install-Gems-Locally"><a href="#2-Install-Gems-Locally" class="headerlink" title="2. Install Gems Locally"></a>2. Install Gems Locally</h3><p>If you want to install gems for the system Ruby without using a version manager, youâ€™ll need administrative privileges. You can use the sudo command to install gems as the superuser:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install gem_name</span><br></pre></td></tr></table></figure><p>However, keep in mind that modifying the system Ruby environment might affect other applications, and itâ€™s generally recommended to use a version manager to manage Ruby environments.</p><h3 id="3-Use-â€“user-install-Option"><a href="#3-Use-â€“user-install-Option" class="headerlink" title="3. Use â€“user-install Option"></a>3. Use â€“user-install Option</h3><p>If you want to install gems locally without administrative privileges, you can use the <strong>â€“user-install</strong> option:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install gem_name --user-install</span><br></pre></td></tr></table></figure><p>This installs the gem in your userâ€™s home directory, avoiding the need for system-wide modifications.</p><h3 id="4-Install-to-Custom-Directory"><a href="#4-Install-to-Custom-Directory" class="headerlink" title="4. Install to Custom Directory"></a>4. Install to Custom Directory</h3><p>You can configure gems to be installed in a specific directory where you have write permissions. This involves configuring the <strong>GEM_HOME</strong> and <strong>GEM_PATH</strong> environment variables:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GEM_HOME=<span class="variable">$HOME</span>/gems</span><br><span class="line"><span class="built_in">export</span> GEM_PATH=<span class="variable">$GEM_HOME</span>:/path/to/system/gems</span><br><span class="line">gem install gem_name</span><br></pre></td></tr></table></figure><p>Make sure to adjust the paths according to your preferences.</p><p>In general, using a Ruby version manager like <strong>rbenv</strong> or <strong>RVM</strong> is recommended, as it provides a more flexible and isolated way to manage Ruby versions and gems without affecting system-wide configurations or requiring administrative permissions.</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tool </tag>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(18)</title>
      <link href="/2015/12/28/ruby-practice-18/"/>
      <url>/2015/12/28/ruby-practice-18/</url>
      
        <content type="html"><![CDATA[<h4 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h4><p>Rubyç¨‹åºåœ¨å¯åŠ¨åŽä¼šé¢„å…ˆåˆ†é…3ä¸ª<strong>IO</strong>å¯¹è±¡:<br>æ ‡å‡†è¾“å…¥ - é¢„å®šä¹‰å¸¸é‡(<strong>STDIN</strong>), å…¨å±€å˜é‡(<strong>$stdin</strong>)<br>æ ‡å‡†è¾“å‡º - é¢„å®šä¹‰å¸¸é‡(<strong>STDOUT</strong>), å…¨å±€å˜é‡(<strong>$stdout</strong>)<br>æ ‡å‡†é”™è¯¯è¾“å‡º - é¢„å®šä¹‰å¸¸é‡(<strong>STDERR</strong>), å…¨å±€å˜é‡(<strong>$stderr</strong>)</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stdout</span>.print <span class="string">&quot;output something from $stdout\n&quot;</span></span><br><span class="line"><span class="variable constant_">STDERR</span>.print <span class="string">&quot;output something from $stderr\n&quot;</span></span><br></pre></td></tr></table></figure><p>IOå¯¹è±¡æ˜¯å¦ä¸ŽæŽ§åˆ¶å°å…³è”ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡**tty?**æ–¹æ³•æ¥åˆ¤æ–­ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="variable">$stdin</span>.tty?</span><br><span class="line">  print <span class="string">&quot;stdin is a tty&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  print <span class="string">&quot;stdin is not a tty&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><span id="more"></span><h5 id="æ–‡ä»¶æ“ä½œ"><a href="#æ–‡ä»¶æ“ä½œ" class="headerlink" title="æ–‡ä»¶æ“ä½œ"></a>æ–‡ä»¶æ“ä½œ</h5><p>é€šè¿‡File.openæ–¹æ³•æˆ–openæ–¹æ³•æ‰“å¼€æ–‡ä»¶å¹¶èŽ·å–æ–°çš„IOå¯¹è±¡ï¼Œ</p><pre><code>io = File.open(file, mode)io = open(file, mode)</code></pre><p>modeä¸ºæ–‡ä»¶çš„è¯»å†™æ–¹æ³•ï¼Œç¼ºçœæƒ…å†µä¸‹ä¸ºåªè¯»æ¨¡å¼(r).</p><p>r  - åªè¯»æ¨¡å¼<br>r+ - è¯»å†™æ¨¡å¼<br>w  - åªå†™æ¨¡å¼ï¼Œå¦‚æžœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–°æ–‡ä»¶ï¼Œå¦‚æžœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ¸…ç©ºæ–‡ä»¶<br>w+ - è¯»å†™æ¨¡å¼ï¼Œå…¶ä½™åŒw<br>a  - è¿½åŠ æ¨¡å¼ï¼Œæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–°æ–‡ä»¶<br>a+ - è¯»å–ã€è¿½åŠ æ¨¡å¼ï¼Œæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–°æ–‡ä»¶    </p><p>io.<strong>close</strong><br>ä½¿ç”¨<strong>close</strong>æ–¹æ³•å…³é—­å·²æ‰“å¼€çš„æ–‡ä»¶ã€‚File.openæ–¹æ³•ä½¿ç”¨å—ï¼Œåˆ™æ–‡ä»¶ä¼šåœ¨ä½¿ç”¨å®Œæ¯•åŽè‡ªåŠ¨å…³é—­ï¼Œioå˜é‡ä¼šè¢«ä½œä¸ºå—å˜é‡ä¼ é€’ç»™å—ã€‚å¹¶ä¸”ä½¿ç”¨io.closed?æ–¹æ³•å¯ä»¥æ£€æŸ¥æ˜¯å¦å…³é—­ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">File</span>.open(<span class="string">&quot;tty.rb&quot;</span>) <span class="keyword">do</span> |<span class="params">io</span>|</span><br><span class="line">  <span class="keyword">while</span> line = io.gets</span><br><span class="line">    print line</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<strong>File.read</strong>å¯ä»¥ä¸€æ¬¡æ€§è¯»å–æ–‡ä»¶çš„å†…å®¹ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="title class_">File</span>.read(<span class="string">&quot;tty.rb&quot;</span>)</span><br></pre></td></tr></table></figure><h5 id="åŸºæœ¬è¾“å…¥"><a href="#åŸºæœ¬è¾“å…¥" class="headerlink" title="åŸºæœ¬è¾“å…¥"></a>åŸºæœ¬è¾“å…¥</h5><p>io.<strong>gets</strong>(rs)<br>io.<strong>each</strong>(rs)<br>io.<strong>each_line</strong>(rs)<br>io.<strong>readlines</strong>(rs)<br>ä»ŽIOç±»çš„å¯¹è±¡ä¸­è¯»å–ä¸€è¡Œæ•°æ®ï¼Œç”¨å‚æ•°<strong>rs</strong>çš„å­—ç¬¦ä¸²åˆ†è¡Œï¼Œç¼ºçœæ¨¡å¼ä¸‹ä¸ºæ¢è¡Œç¬¦ã€‚</p><p>ä½¿ç”¨**eof?**å¯ä»¥æ£€æŸ¥è¾“å…¥æ˜¯å¦å·²ç»å®Œæ¯•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">io = <span class="title class_">File</span>.open(<span class="string">&quot;tty.rb&quot;</span>)</span><br><span class="line"><span class="keyword">while</span> line = io.gets</span><br><span class="line">  line.chomp!</span><br><span class="line">  print line</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">p io.eof?     <span class="comment">#=&gt; true</span></span><br><span class="line">io.close      <span class="comment">#=&gt; close file</span></span><br><span class="line">p io.closed?   <span class="comment">#=&gt; true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç”¨<strong>readlines</strong>æ–¹æ³•å¯ä»¥ä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰æ•°æ®ï¼Œå¹¶è¿”å›žå°†æ¯è¡Œæ•°æ®ä½œä¸ºå…ƒç´ å°è£…çš„æ•°ç»„.</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">io = <span class="title class_">File</span>.open(<span class="string">&quot;tty.rb&quot;</span>)</span><br><span class="line">ary = io.readlines</span><br><span class="line">io.close</span><br><span class="line">ary.each <span class="keyword">do</span> |<span class="params">line</span>|</span><br><span class="line">  line.chomp!</span><br><span class="line">  print line</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>io.<strong>lineno</strong><br>ä½¿ç”¨getsæ–¹æ³•ï¼Œeach_lineæ–¹æ³•é€è¡Œè¯»å–æ–‡ä»¶æ—¶ï¼Œioä¼šè‡ªåŠ¨è®°å½•è¯»å–çš„è¡Œæ•°ï¼Œå¯ä»¥é€šè¿‡<strong>io.lineno</strong>æ¥èŽ·å–å½“å‰è¡Œæ•°ã€‚   </p><p>io.<strong>each_char</strong><br>é€ä¸ªå­—ç¬¦è¯»å–ioå¯¹è±¡ä¸­çš„æ•°æ®,å¹¶å¯åŠ¨å—ã€‚   </p><p>io.<strong>each_byte</strong><br>é€ä¸ªå­—èŠ‚è¯»å–ioå¯¹è±¡ä¸­çš„æ•°æ®ï¼Œå¹¶å¯åŠ¨å—ã€‚    </p><p>io.<strong>getc</strong><br>åªè¯»å–ioå¯¹è±¡ä¸­çš„ä¸€ä¸ªå­—ç¬¦ã€‚<br>io.<strong>ungetc(ch)</strong><br>å°†å‚æ•°chæŒ‡å®šçš„å­—ç¬¦é€€å›žåˆ°ioå¾—ç¼“å†²æµä¸­   </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">File</span>.open(<span class="string">&quot;hello.txt&quot;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">do</span> |<span class="params">io</span>|</span><br><span class="line">  io.write(<span class="string">&quot;Hello Ruby&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="title class_">File</span>.open(<span class="string">&quot;hello.txt&quot;</span>) <span class="keyword">do</span> |<span class="params">io</span>|</span><br><span class="line">  p io.getc       <span class="comment">#=&gt; H</span></span><br><span class="line">  io.ungetc(<span class="string">&#x27;H&#x27;</span>)</span><br><span class="line">  p io.gets       <span class="comment">#=&gt; Hello Ruby</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">File</span>.delete(<span class="string">&quot;hello.txt&quot;</span>)</span><br></pre></td></tr></table></figure><p>io.<strong>getbyte</strong>, io.<strong>ungetbyte</strong>çš„ä½¿ç”¨æ–¹æ³•åŒä¸Šï¼Œä¸åŒä¹‹å¤„åœ¨äºŽæ­¤å¤„æ˜¯å­—èŠ‚ã€‚    </p><p>io.<strong>read</strong>(size)<br>è¯»å–å‚æ•°sizeæŒ‡å®šå¤§å°çš„æ•°æ®ï¼Œå¦‚æžœæ²¡æŒ‡å®šï¼Œåˆ™ä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰æ•°æ®ã€‚    </p><h5 id="è¾“å‡ºæ“ä½œ"><a href="#è¾“å‡ºæ“ä½œ" class="headerlink" title="è¾“å‡ºæ“ä½œ"></a>è¾“å‡ºæ“ä½œ</h5><p>io.<strong>puts</strong>(str0, str1, â€¦)<br>æŒ‡å®šå¤šä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œä¼šåœ¨æ¯ä¸ªå­—ç¬¦ä¸²åŽé¢æ·»åŠ æ¢è¡Œç¬¦ã€‚   </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stdout</span>.puts <span class="string">&quot;hi&quot;</span>, <span class="string">&quot;hello&quot;</span>, <span class="string">&quot;hey&quot;</span><span class="comment">#=&gt; hi\nhello\nhey\n</span></span><br></pre></td></tr></table></figure><p>io.<strong>putc</strong>(ch)<br>è¾“å‡ºæŒ‡å®šå‚æ•°chå­—ç¬¦ï¼Œå¦‚æžœå‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™è¾“å‡ºé¦–ä¸ªå­—ç¬¦    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$stdout</span>.putc(<span class="string">&#x27;H&#x27;</span>)       <span class="comment">#=&gt; H</span></span><br><span class="line"><span class="variable">$stdout</span>.putc(<span class="string">&#x27;Hello&#x27;</span>)   <span class="comment">#=&gt; H</span></span><br><span class="line"><span class="variable">$stdout</span>.putc(<span class="string">&#x27;\n&#x27;</span>)</span><br></pre></td></tr></table></figure><p>io.<strong>print</strong>(str0, str1, â€¦)<br>è¾“å‡ºå‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œä¸ä¼šåœ¨æ¯ä¸ªå­—ç¬¦ä¸²åŽé¢è¿½åŠ æ¢è¡Œç¬¦    </p><p>io.<strong>printf</strong>(fmt, arg0, arg1, â€¦)<br>æŒ‰ç…§æŒ‡å®šæ ¼å¼è¾“å‡ºå­—ç¬¦ä¸²ã€‚    </p><p>io.<strong>write</strong>(str)<br>è¾“å‡ºå‚æ•°stræŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œæ–¹æ³•è¿”å›žå€¼ä¸ºè¾“å‡ºçš„å­—èŠ‚æ•°    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">size = <span class="variable">$stdout</span>.write(<span class="string">&quot;Hello&quot;</span>)<span class="comment">#=&gt; Hello</span></span><br><span class="line">p size<span class="comment">#=&gt; 5</span></span><br></pre></td></tr></table></figure><h5 id="æ–‡ä»¶æŒ‡é’ˆ"><a href="#æ–‡ä»¶æŒ‡é’ˆ" class="headerlink" title="æ–‡ä»¶æŒ‡é’ˆ"></a>æ–‡ä»¶æŒ‡é’ˆ</h5><p>ç”¨æ–‡ä»¶æŒ‡é’ˆæˆ–è€…å½“å‰æ–‡ä»¶åç§»é‡æ¥è¡¨ç¤ºIOå¯¹è±¡æŒ‡å‘æ–‡ä»¶çš„ä½ç½®ã€‚    </p><p>io.<strong>pos</strong><br>io.<strong>pos</strong>&#x3D;position<br>é€šè¿‡<strong>pos</strong>æ–¹æ³•èŽ·å–æ–‡ä»¶æŒ‡é’ˆä½ç½®ï¼Œæ”¹å˜æ–‡ä»¶æŒ‡é’ˆä½¿ç”¨**pos&#x3D;**æ–¹æ³•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">File</span>.open(<span class="string">&quot;hello.txt&quot;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">do</span> |<span class="params">io</span>|</span><br><span class="line">  io.write(<span class="string">&quot;Hello Ruby&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="title class_">File</span>.open(<span class="string">&quot;hello.txt&quot;</span>) <span class="keyword">do</span> |<span class="params">io</span>|</span><br><span class="line">  p io.read(<span class="number">5</span>)      <span class="comment">#=&gt; Hello</span></span><br><span class="line">  io.pos = <span class="number">0</span></span><br><span class="line">  p io.gets         <span class="comment">#=&gt; Hello Ruby</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>io.<strong>seek</strong>(offset, whence)<br>offsetä¸ºæŒ‡å®šä½ç½®çš„æ•´æ•°ï¼Œwhenceä¸ºæŒ‡å®šoffsetå¦‚ä½•ç§»åŠ¨ï¼Œ ä»¥ä¸‹ä¸ºwhenceçš„å€¼:<br>IO::SEEK_SET - å°†æ–‡ä»¶æŒ‡é’ˆç§»åŠ¨åˆ°æŒ‡å®šoffsetæŒ‡å®šçš„ä½ç½®<br>IO::SEEK_CUR - å°†offsetè§†ä¸ºç›¸å¯¹äºŽå½“å‰ä½ç½®çš„åç§»ä½ç½®æ¥ç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ<br>IO::SEEK_END - å°†offsetè§†ä¸ºç›¸å¯¹äºŽæ–‡ä»¶æœ«å°¾çš„åç§»ä½ç½®  </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">File</span>.open(<span class="string">&quot;hello.txt&quot;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">do</span> |<span class="params">io</span>|</span><br><span class="line">  io.write(<span class="string">&quot;Hello Ruby&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="title class_">File</span>.open(<span class="string">&quot;hello.txt&quot;</span>) <span class="keyword">do</span> |<span class="params">io</span>|</span><br><span class="line">  p io.read(<span class="number">5</span>)      <span class="comment">#=&gt; Hello</span></span><br><span class="line">  io.seek(-<span class="number">5</span>, <span class="variable constant_">IO</span><span class="symbol">:</span><span class="symbol">:SEEK_CUR</span>)</span><br><span class="line">  p io.gets         <span class="comment">#=&gt; Hello Ruby</span></span><br><span class="line">  io.seek(<span class="number">0</span>, <span class="variable constant_">IO</span><span class="symbol">:</span><span class="symbol">:SEEK_SET</span>)</span><br><span class="line">  p io.gets         <span class="comment">#=&gt; Hello Ruby</span></span><br><span class="line">  io.seek(-<span class="number">4</span>, <span class="variable constant_">IO</span><span class="symbol">:</span><span class="symbol">:SEEK_END</span>)</span><br><span class="line">  p io.gets         <span class="comment">#=&gt; Ruby</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>io.<strong>rewind</strong><br>å°†æ–‡ä»¶æŒ‡é’ˆé‡ç½®åˆ°æ–‡ä»¶å¼€å§‹å¤„ï¼Œç»“æžœåŒä»¥ä¸‹ä¸¤ä¸ªæ“ä½œ:    </p><pre><code>io.pos = 0   io.seek(0, IO::SEEK_SET)</code></pre><p>io.<strong>truncate</strong>(size)<br>æŒ‰ç…§å‚æ•°sizeæŒ‡å®šçš„å¤§å°æˆªæ–­æ–‡ä»¶ã€‚</p><p>*æ³¨ï¼Œæ–°çš„IOå¯¹è±¡é»˜è®¤ä¸ºæ–‡æœ¬æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡io.<strong>binmode</strong>å°†å…¶è½¬ä¸ºäºŒè¿›åˆ¶æ¨¡å¼*   </p><h5 id="ç¼“å†²"><a href="#ç¼“å†²" class="headerlink" title="ç¼“å†²"></a>ç¼“å†²</h5><p>IOå¯¹è±¡åœ¨è¾“å‡ºæ•°æ®æ—¶ï¼Œç»“æžœå¹¶ä¸ä¸€å®šä¼šé©¬ä¸Šè¾“å‡ºå‡ºæ¥ï¼Œç¨‹åºä¼šåœ¨å†…éƒ¨å¼€è¾Ÿä¸€ä¸ªç¼“å†²ç©ºé—´æ¥ç¼“å­˜è¾“å‡ºï¼Œå½“ç©ºé—´æ»¡çš„æ—¶å€™å†è¾“å‡ºæ¥ã€‚ä½†æ˜¯æ ‡å‡†é”™è¯¯è¾“å‡ºä¸ä¼šä½¿ç”¨ç¼“å†²ï¼Œå¦‚æžœæœ‰é”™è¯¯ä¿¡æ¯ï¼Œåˆ™ç«‹åˆ»è¾“å‡ºã€‚æ‰€ä»¥æ ‡å‡†é”™è¯¯è¾“å‡ºä¸€èˆ¬ç”¨äºŽè¾“å‡ºè­¦å‘Šã€é”™è¯¯ä¹‹ç±»çš„ä¿¡æ¯ï¼Œèƒ½å¤Ÿç«‹åˆ»è¾“å‡ºæ•°æ®    </p><p>io.<strong>flush</strong><br>å¼ºåˆ¶è¾“å‡ºç¼“å†²ä¸­çš„æ•°æ®ã€‚</p><p>io.<strong>sync</strong><br>io.<strong>sync</strong>&#x3D;state<br>é€šè¿‡io.sync &#x3D; true, ç¨‹åºå†™å…¥ç¼“å†²æ—¶flushæ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚    </p><h5 id="ä¸Žå‘½ä»¤è¡Œäº¤äº’"><a href="#ä¸Žå‘½ä»¤è¡Œäº¤äº’" class="headerlink" title="ä¸Žå‘½ä»¤è¡Œäº¤äº’"></a>ä¸Žå‘½ä»¤è¡Œäº¤äº’</h5><p>IO.<strong>popen</strong>(command, mode)<br>commandä¸ºç›¸å…³çš„å‘½ä»¤    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">pattern = <span class="title class_">Regexp</span>.new(<span class="variable constant_">ARGV</span>[<span class="number">0</span>])</span><br><span class="line">filename = <span class="variable constant_">ARGV</span>[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> /.gz<span class="variable">$/</span> =~ filename</span><br><span class="line">  file = <span class="variable constant_">IO</span>.popen(<span class="string">&quot;gunzip -c <span class="subst">#&#123;filename&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  file = <span class="title class_">File</span>.open(filename)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">file.close</span><br><span class="line"><span class="string">``</span><span class="string">`    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**open**(&quot;|command&quot;, mode)   </span></span><br><span class="line"><span class="string">å°†å¸¦æœ‰ç®¡é“ç¬¦å·çš„å‘½ä»¤ä¼ é€’ç»™openæ–¹æ³•çš„æ•ˆæžœä¸Žä½¿ç”¨IO.popenæ–¹æ³•æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span> ruby</span><br><span class="line">filename = <span class="variable constant_">ARGV</span>[<span class="number">0</span>]</span><br><span class="line">open(<span class="string">&quot;|gunzip -c <span class="subst">#&#123;filename&#125;</span>&quot;</span>) <span class="keyword">do</span> |<span class="params">io</span>|</span><br><span class="line">  io.each_line <span class="keyword">do</span> |<span class="params">line</span>|</span><br><span class="line">    print line</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(17)</title>
      <link href="/2015/12/17/ruby-practice-17/"/>
      <url>/2015/12/17/ruby-practice-17/</url>
      
        <content type="html"><![CDATA[<h4 id="æ­£åˆ™è¡¨è¾¾å¼-Regexp"><a href="#æ­£åˆ™è¡¨è¾¾å¼-Regexp" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼(Regexp)"></a>æ­£åˆ™è¡¨è¾¾å¼(Regexp)</h4><p>Rubyä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ç”¨<strong>Regexp</strong>ç±»æ¥è¡¨ç¤ºï¼Œæ­£åˆ™è¡¨è¾¾å¼æè¿°çš„æ˜¯ä¸€ç§æ¨¡å¼ï¼Œè¯¥æ¨¡å¼ç”¨äºŽåŒ¹é…å­—ç¬¦ä¸²ã€‚</p><h5 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h5><p>å…¶åˆ›å»ºæ–¹å¼æœ‰å¤šç§ï¼š<br>1.ä½¿ç”¨**&#x2F; &#x2F;** æŠŠå­—ç¬¦ä¸²æ‹¬èµ·æ¥ï¼Œå¯ä»¥ç®€å•åœ°åˆ›å»ºå‡ºæ­£åˆ™è¡¨è¾¾å¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reg1 = <span class="regexp">/Ruby/</span></span><br><span class="line">puts reg1.<span class="keyword">class</span>       <span class="comment">#=&gt; Regexp</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>2.ä½¿ç”¨**Regexp.new(â€œå­—ç¬¦ä¸²â€)**åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reg = <span class="title class_">Regexp</span>.new(<span class="string">&quot;Ruby&quot;</span>)</span><br><span class="line">puts reg.<span class="keyword">class</span>       <span class="comment">#=&gt; Regexp</span></span><br></pre></td></tr></table></figure><p>3.ä½¿ç”¨**%r**åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">reg = <span class="regexp">%r(Ruby)</span></span><br><span class="line">puts reg.<span class="keyword">class</span>       <span class="comment">#=&gt; Regexp</span></span><br><span class="line"></span><br><span class="line">reg = %r&lt;<span class="title class_">Ruby</span>&gt;</span><br><span class="line">puts reg.<span class="keyword">class</span>       <span class="comment">#=&gt; Regexp</span></span><br><span class="line"></span><br><span class="line">reg = %r|<span class="params">Ruby</span>|</span><br><span class="line">puts reg.<span class="keyword">class</span>       <span class="comment">#=&gt; Regexp</span></span><br><span class="line"></span><br><span class="line">reg = <span class="regexp">%r!Ruby!</span></span><br><span class="line">puts reg.<span class="keyword">class</span>       <span class="comment">#=&gt; Regexp</span></span><br></pre></td></tr></table></figure><h5 id="åŒ¹é…"><a href="#åŒ¹é…" class="headerlink" title="åŒ¹é…"></a>åŒ¹é…</h5><p>Rubyçš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ä½¿ç”¨**&#x3D;~**ç¬¦å·ï¼Œå¦‚æžœåŒ¹é…æˆåŠŸè¿”å›žåŒ¹é…å­—ç¬¦ä¸²çš„ä½ç½®ï¼Œå¦åˆ™è¿”å›žnilã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">reg = <span class="regexp">/R..y/</span></span><br><span class="line">str = <span class="string">&quot;regexp of Ruby&quot;</span></span><br><span class="line"></span><br><span class="line">matched = reg =~ str</span><br><span class="line">puts matched        <span class="comment">#=&gt; 10</span></span><br><span class="line"></span><br><span class="line">unmatched = reg =~ <span class="string">&quot;test&quot;</span></span><br><span class="line">p unmatched         <span class="comment">#=&gt; nil</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> matched</span><br><span class="line">  puts <span class="string">&quot;matched&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  puts <span class="string">&quot;unmatched&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>æ­¤å¤„å¹¶ä¸è¿‡å¤šçš„ä»‹ç»æ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•è§„åˆ™ï¼Œå…·ä½“è¯¦ç»†è¯­æ³•è¯·å‚è§<a href="http://regexlib.com/CheatSheet.aspx">http://regexlib.com/CheatSheet.aspx</a></p><h5 id="è½¬ä¹‰"><a href="#è½¬ä¹‰" class="headerlink" title="è½¬ä¹‰"></a>è½¬ä¹‰</h5><p>å¯¹ç‰¹æ®Šå­—ç¬¦çš„è½¬ä¹‰æ–¹å¼æœ‰ä¸¤ç§ï¼Œä½¿ç”¨<strong>\</strong>å­—ç¬¦å’Œä½¿ç”¨<strong>Regexp#quote</strong>æ–¹æ³•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#using \ symbol</span></span><br><span class="line">reg = <span class="regexp">/ruby\*regexp/</span></span><br><span class="line">puts reg =~ <span class="string">&quot;ruby*regexp&quot;</span>     <span class="comment">#=&gt; 0</span></span><br><span class="line">p reg =~ <span class="string">&quot;rubyregexp&quot;</span>          <span class="comment">#=&gt; nil</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#using Regexp#quote method</span></span><br><span class="line">reg1 = <span class="regexp">%r(ruby*regexp)</span></span><br><span class="line">reg2 = <span class="title class_">Regexp</span>.new(<span class="title class_">Regexp</span>.quote(<span class="string">&quot;ruby*regexp&quot;</span>))</span><br><span class="line">str = <span class="string">&quot;ruby*regexp&quot;</span></span><br><span class="line"></span><br><span class="line">p reg1 =~ str         <span class="comment">#=&gt; nil</span></span><br><span class="line">p reg2 =~ str         <span class="comment">#=&gt; 0</span></span><br></pre></td></tr></table></figure><h5 id="é€‰é¡¹"><a href="#é€‰é¡¹" class="headerlink" title="é€‰é¡¹"></a>é€‰é¡¹</h5><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼çš„åŽé¢æ·»åŠ ç‰¹å®šçš„å­—ç¬¦å¦‚<strong>i</strong>, <strong>x</strong>, <strong>m</strong>ç­‰æ—¶ï¼ŒåŒ¹é…åŽçš„è§„åˆ™ä¼šæœ‰ç‚¹å˜åŒ–</p><p><strong>i</strong> Regexp::IGNORECASE  å¿½ç•¥å­—ç¬¦ä¸²å¤§å°å†™<br><strong>x</strong>Regexp::EXTENDEDå¿½ç•¥å­—ç¬¦ä¸²ä¸­çš„ç©ºç™½å­—ç¬¦<br><strong>m</strong>Regexp::MULTILINEåŒ¹é…å¤šè¡Œå­—ç¬¦ä¸²    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#using i optional symbol to ignore the cap</span></span><br><span class="line">reg1 = <span class="regexp">/test String/i</span></span><br><span class="line">reg2 = <span class="title class_">Regexp</span>.new(<span class="string">&quot;test string&quot;</span>, <span class="title class_">Regexp</span><span class="symbol">:</span><span class="symbol">:IGNORECASE</span>)</span><br><span class="line">puts reg1 =~ <span class="string">&quot;test string&quot;</span>     <span class="comment">#=&gt; 0</span></span><br><span class="line">puts reg1 =~ <span class="string">&quot;test string&quot;</span>     <span class="comment">#=&gt; 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#using x optional symbol to ignore the white space symbol</span></span><br><span class="line">reg1 = <span class="regexp">/test string/x</span></span><br><span class="line">reg2 = <span class="title class_">Regexp</span>.new(<span class="string">&quot;test string&quot;</span>, <span class="title class_">Regexp</span><span class="symbol">:</span><span class="symbol">:EXTENDED</span>)</span><br><span class="line">puts reg1 =~ <span class="string">&quot;teststring&quot;</span>      <span class="comment">#=&gt; 0</span></span><br><span class="line">puts reg1 =~ <span class="string">&quot;teststring&quot;</span>      <span class="comment">#=&gt; 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#using m optional symbol to match multiline</span></span><br><span class="line">reg1 = <span class="regexp">/test\nstring/m</span></span><br><span class="line">reg2 = <span class="title class_">Regexp</span>.new(<span class="string">&quot;test\nstring&quot;</span>, <span class="title class_">Regexp</span><span class="symbol">:</span><span class="symbol">:MULTILINE</span>)</span><br><span class="line">puts reg1 =~ <span class="string">&quot;test\nstring&quot;</span></span><br><span class="line">puts reg1 =~ <span class="string">&quot;test\nstring&quot;</span>      <span class="comment">#=&gt; 0</span></span><br></pre></td></tr></table></figure><h5 id="æ•èŽ·"><a href="#æ•èŽ·" class="headerlink" title="æ•èŽ·"></a>æ•èŽ·</h5><p>æ•èŽ·ï¼Œå°±æ˜¯ä»Žæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…éƒ¨åˆ†ä¸­æå–æŸéƒ¨åˆ†å­—ç¬¦ï¼Œé€šè¿‡â€<strong>$æ•°å­—</strong>â€œè¿™ç§å½¢å¼çš„å˜é‡èŽ·å–åŒ¹é…äº†æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ç”¨**()**æ‹¬ä½çš„å­—ç¬¦ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">reg = <span class="regexp">/(.)(C.)(.)/</span></span><br><span class="line">str = <span class="string">&quot;ABCDE&quot;</span></span><br><span class="line">reg =~ str</span><br><span class="line"></span><br><span class="line">puts <span class="variable">$1</span>   <span class="comment">#=&gt; B</span></span><br><span class="line">puts <span class="variable">$2</span>   <span class="comment">#=&gt; CD</span></span><br><span class="line">puts <span class="variable">$3</span>   <span class="comment">#=&gt; E</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨â€<strong>(?: )</strong>â€œå¯ä»¥è¿‡æ»¤æŽ‰ä¸éœ€è¦æ•èŽ·çš„æ¨¡å¼.</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">reg = <span class="regexp">/(.)(?:C.)(.)/</span></span><br><span class="line">str = <span class="string">&quot;ABCDE&quot;</span></span><br><span class="line">reg =~ str</span><br><span class="line"></span><br><span class="line">puts <span class="variable">$1</span>   <span class="comment">#=&gt; B</span></span><br><span class="line">puts <span class="variable">$2</span>   <span class="comment">#=&gt; E</span></span><br></pre></td></tr></table></figure><p>Rubyä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨**$&#96;**, <strong>$&amp;</strong>, **$â€™**åˆ†åˆ«ä»£è¡¨åŒ¹é…éƒ¨åˆ†å‰çš„å­—ç¬¦ä¸²ã€åŒ¹é…éƒ¨åˆ†çš„å­—ç¬¦ä¸²ã€åŒ¹é…éƒ¨åˆ†åŽçš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">reg = <span class="regexp">/(C.)/</span></span><br><span class="line">str = <span class="string">&quot;ABCDE&quot;</span></span><br><span class="line">reg =~ str</span><br><span class="line"></span><br><span class="line">puts <span class="variable">$`</span>     <span class="comment">#=&gt; AB</span></span><br><span class="line">puts <span class="variable">$&amp;</span>     <span class="comment">#=&gt; CD</span></span><br><span class="line">puts <span class="variable">$&#x27;</span>     <span class="comment">#=&gt; E</span></span><br></pre></td></tr></table></figure><h5 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h5><p><strong>sub</strong>å’Œ<strong>gsub</strong>æ–¹æ³•çš„ä½œç”¨æ˜¯ç”¨æŒ‡å®šçš„å­—ç¬¦ç½®æ¢å­—ç¬¦ä¸²ä¸­çš„æŸéƒ¨åˆ†å­—ç¬¦ã€‚<strong>sub</strong>æ–¹æ³•åªç½®æ¢é¦–æ¬¡åŒ¹é…çš„éƒ¨åˆ†ï¼Œè€Œ<strong>gsub</strong>åˆ™ä¼šç½®æ¢æ‰€æœ‰åŒ¹é…çš„éƒ¨åˆ†.</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">reg = <span class="regexp">/\s+/</span></span><br><span class="line">str = <span class="string">&quot;This is test string&quot;</span></span><br><span class="line"></span><br><span class="line">puts str.sub(reg, <span class="string">&#x27;-&#x27;</span>)   <span class="comment">#=&gt; &quot;This-is test string&quot;</span></span><br><span class="line">puts str.gsub(reg, <span class="string">&#x27;-&#x27;</span>)   <span class="comment">#=&gt; &quot;This-is-test-string&quot;</span></span><br></pre></td></tr></table></figure><p>subå’Œgsubæ–¹æ³•åŒæ ·æ”¯æŒblockå—æ¨¡å¼ï¼Œé’ˆå¯¹åŒ¹é…åˆ°çš„å­—ç¬¦åšå¤„ç†</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">reg =<span class="regexp">/i/</span></span><br><span class="line">str = <span class="string">&quot;This is test string&quot;</span></span><br><span class="line"></span><br><span class="line">result = str.sub(reg) <span class="keyword">do</span> |<span class="params">matched</span>|</span><br><span class="line">  matched.upcase</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">puts result     <span class="comment">#=&gt; ThIs is test string</span></span><br><span class="line"></span><br><span class="line">result = str.gsub(reg) <span class="keyword">do</span> |<span class="params">matched</span>|</span><br><span class="line">  matched.upcase</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">puts result     <span class="comment">#=&gt; ThIs Is test strIng</span></span><br></pre></td></tr></table></figure><p><strong>scan</strong>æ–¹æ³•å’Œ<strong>gsub</strong>æ–¹æ³•ç±»ä¼¼ï¼Œéƒ½å¯ä»¥èŽ·å–åˆ°æ‰€æœ‰åŒ¹é…åˆ°çš„å­—ç¬¦ï¼Œä½†æ˜¯ä¸èƒ½ç½®æ¢ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">reg = <span class="regexp">/(r)(.)/</span></span><br><span class="line">str = <span class="string">&quot;racrtrhrdra&quot;</span></span><br><span class="line">str.scan(reg) <span class="keyword">do</span> |<span class="params">matched</span>|</span><br><span class="line">  p matched</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#[&quot;r&quot;, &quot;a&quot;]</span></span><br><span class="line"><span class="comment">#[&quot;r&quot;, &quot;t&quot;]</span></span><br><span class="line"><span class="comment">#[&quot;r&quot;, &quot;h&quot;]</span></span><br><span class="line"><span class="comment">#[&quot;r&quot;, &quot;d&quot;]</span></span><br><span class="line"><span class="comment">#[&quot;r&quot;, &quot;a&quot;]</span></span><br><span class="line"></span><br><span class="line">str.scan(reg) <span class="keyword">do</span> |<span class="params">val1, val2</span>|</span><br><span class="line">  p val1 + <span class="string">&quot;-&quot;</span> + val2</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#&quot;r-a&quot;</span></span><br><span class="line"><span class="comment">#&quot;r-t&quot;</span></span><br><span class="line"><span class="comment">#&quot;r-h&quot;</span></span><br><span class="line"><span class="comment">#&quot;r-d&quot;</span></span><br><span class="line"><span class="comment">#&quot;r-a&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Using Nginx in Mac OS X</title>
      <link href="/2015/12/05/using-nginx-in-mac-os-x/"/>
      <url>/2015/12/05/using-nginx-in-mac-os-x/</url>
      
        <content type="html"><![CDATA[<h4 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h4><p><strong>Nginx</strong> is a open source quite lightweight HTTP server which is written by Russian <em>Igor Sysoev</em>, the pronunciation is â€œengine Xâ€. Itâ€™s a high performance HTTP and reverse proxy server, and also it is a IMAP&#x2F;POP3&#x2F;SMTP proxy serverã€‚</p><p>There are lots of website using Nginx in China, like Sina, Tencent, 163, Discuz and so on. The Nginx has a very high performance due to event driven way, and also it is a high performance reverse proxy, load balancing.</p><span id="more"></span><p>The features of Nginx Http server are below:</p><p>1.dealing with static file, indexing file and also automatically indexing.</p><p>2.accelerating reverse proxy server,load balancing</p><p>3.FastCGI, Caching, Security</p><p>4.Support SSL and TLS</p><p>From investigation, the Nginx can support about 50,000 concurrence request connection, and also support hot deploy, even running 7*24 hours uninterrupted.   </p><h4 id="Installing"><a href="#Installing" class="headerlink" title="Installing"></a>Installing</h4><p>So, how to install it on Mac OS X. Letâ€™s assume you have installed the <em>Home brew</em>, using brew to install the nginx with command:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure><h4 id="Starting-And-Runing"><a href="#Starting-And-Runing" class="headerlink" title="Starting And Runing"></a>Starting And Runing</h4><p>After install, we can use below command to run it:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx</span><br></pre></td></tr></table></figure><p>If you get the failed message which is â€œ[emerg] bind() to 0.0.0.0:8080 failed (48: Address already in use)â€. You have to kill the progress which is running with that address, it usually is Apache. And also there is another way, changing the port number, we will introduce later.</p><p>The nginx running success, you will get the below page when you access the <a href="http://localhost:8080/">http://localhost:8080</a></p><p><img src="/assets/images/legacy/nginx-welcome.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/nginx-welcome.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="nginx, devops"></p><p>There are several commands to start, stop nginx and reload configuration.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nginx -s stop #=&gt; fast shutdown</span><br><span class="line"></span><br><span class="line">nginx -s quit#=&gt; graceful shutdown</span><br><span class="line"></span><br><span class="line">nginx -s reload#=&gt; reloading the configuration file</span><br><span class="line"></span><br><span class="line">nginx -s reopen#=&gt; reopening the log files</span><br></pre></td></tr></table></figure><h4 id="Simple-Configuration"><a href="#Simple-Configuration" class="headerlink" title="Simple Configuration"></a>Simple Configuration</h4><p>The default place of nginx.conf on Mac after installing with brew is:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>Letâ€™s change the port number in this file. First, we need to stop the nginx.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s stop</span><br></pre></td></tr></table></figure><p>And then open that file, you will see the below server configuration section. It includes the listen, server_name, location&#x2F;root, location&#x2F;index. location&#x2F;root is your website root folder, and index is your website first page file.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">listen       8080;</span><br><span class="line">server_name  localhost;</span><br><span class="line"></span><br><span class="line">#access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">    root   html;</span><br><span class="line">    index  index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>okay, letâ€™s change the port number from 8080 to 80, and then run it again</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx</span><br></pre></td></tr></table></figure><p>Access it with <a href="http://localhost/">http://localhost</a>, the 80 port number is http default port number, so we donâ€™t need to append it into url.</p><p>Now, letâ€™s put our blog website in the nginx, to do so, we need to reference the location&#x2F;root to our blog website folder.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">listen       80;</span><br><span class="line">server_name  localhost;</span><br><span class="line"></span><br><span class="line">#access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">    root   /Users/yushi/Codes/Blog/stonefishy.github.io/public;;</span><br><span class="line">    index  index.html index.htm;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>letâ€™s running it again with clicking <a href="http://localhost/">http://localhost</a>. Woow, cool, very nice, we can access our blog with nignx.</p><p>This is a just simple usage of nginx, we will talk about more later.</p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MacOS </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»£ç å®¡æŸ¥ä¹‹Pull Request</title>
      <link href="/2015/11/22/code-review-with-pull-request/"/>
      <url>/2015/11/22/code-review-with-pull-request/</url>
      
        <content type="html"><![CDATA[<p>ä»£ç å®¡æŸ¥(Code Review)ä¸€ç›´æ˜¯ä¸€ä¸ªé«˜æ•ˆå›¢é˜Ÿé‡Œé¢å¿…å¤‡çš„æµç¨‹ï¼Œå›¢é˜Ÿæˆå‘˜å¯ä»¥é€šè¿‡å®ƒè¾¾åˆ°æŠ€æœ¯äº¤æµï¼Œç›¸äº’å­¦ä¹ ä»¥åŠæå‡è‡ªèº«ç¼–ç æ°´å¹³çš„ç›®çš„ã€‚å½“ç„¶å®ƒçš„ç›®çš„å¹¶ä¸æ­¢äºŽæ­¤ï¼Œæˆ‘ä»¬åœ¨åšæŸä¸€ä»¶äº‹çš„è¿‡ç¨‹ä¸­ï¼Œæ‰€ç”¨çš„æŠ€èƒ½å’Œå·¥å…·ä¸å¤–ä¹Žéƒ½æ˜¯ä¸ºäº†èƒ½ä½¿ç»“æžœæ›´ç¬¦åˆæˆ‘ä»¬çš„æœŸæœ›ï¼Œå°±æ‹¿å»ºç­‘å·¥ç¨‹æ¥è¯´ï¼Œè´¨é‡æŽ§åˆ¶å°±æ˜¯å…¶æŠŠæŽ§æœ€ä¸¥çš„ä¸€å…³ï¼Œæœ‰ä¸“é—¨çš„è´¨é‡ç®¡ç†é¢†å¯¼å°ç»„ã€è´¨é‡ç»„ç»‡ç®¡ç†ä½“ç³»åˆ¶åº¦æ¥è´¯ç©¿è¿™ä¸ªè¿‡ç¨‹ï¼Œå…¶æœ€ç»ˆç›®çš„å°±æ˜¯ä¸ºäº†ä½¿è¿™æ ‹å»ºç­‘åšå›ºç‰¢ç¨³ï¼Œé¿å…éšæ—¶æœ‰å¯èƒ½å´©å¡Œçš„å±é™©ã€‚</p><span id="more"></span><p>è½¯ä»¶å¼€å‘ä¹Ÿä¸€æ ·ï¼Œä»£ç å®¡æŸ¥çš„å¦å¤–ä¸€ä¸ªç›®çš„å°±æ˜¯ä¸ºäº†ä¿è¯è½¯ä»¶çš„è´¨é‡ï¼Œé¿å…ç³»ç»Ÿä¸­å­˜åœ¨è¾ƒå¤šçš„Bugï¼ˆè½¯ä»¶ä¸­Bugæ˜¯æ— æ³•é¿å…çš„ï¼Œæ­¤å¤„æ„æ€æ˜¯å°½é‡å‡å°‘Bugå‡ºçŽ°çš„å‡ çŽ‡ï¼‰ã€‚åœ¨æˆ‘ä»¬ä»¥å¾€çš„ä»£ç å®¡æŸ¥è¿‡ç¨‹ä¸­ï¼Œé‡‡ç”¨çš„ä¸»è¦å½¢å¼æ˜¯å¼€å‘äººå‘˜å›´åœ¨ä¸€èµ·æŸ¥çœ‹ä»Šå¤©æ˜¯å¦æœ‰å“ªäº›ä»£ç æäº¤ï¼Œç„¶åŽé’ˆå¯¹æäº¤çš„ä»£ç è¿‡ä¸€éï¼Œå‘çŽ°æœ‰å¥½çš„å®žè·µå°±ç›¸äº’å­¦ä¹ ï¼Œé’ˆå¯¹å¾…æå‡çš„ä»£ç è®¨è®ºåŽç”±Ownerè‡ªå·±ä¸‹åŽ»ä¿®æ”¹ã€‚è¿™ä¸ªè¿‡ç¨‹çœ‹ä¼¼å¾ˆæ­£å¸¸ï¼Œå…¶å®žé‡Œé¢å­˜åœ¨è¾ƒå¤šçš„é—®é¢˜ï¼š</p><ul><li>å…¶ä¸€ï¼Œå¥½çš„å®žè·µå¹¶æ²¡æœ‰åœ¨ä»£ç ä¸­æ ‡æ˜Žï¼Œä»¥åŠä¸ºä»€ä¹ˆæ˜¯ä¸ªå¥½çš„å®žè·µï¼Œè€Œä¸”å½“æƒ³å›žé¡¾æŸ¥æ‰¾çš„æ—¶å€™å¾ˆå›°éš¾ï¼›  </li><li>å…¶äºŒï¼Œæ¯ä¸ªå¼€å‘äººå‘˜å¯¹åŒä¸€ä¸ªæäº¤çš„æƒ³æ³•å’Œè§è§£å¯èƒ½ä¸ä¸€æ ·ï¼Œä½†æ˜¯è¿™äº›æƒ³æ³•å’Œè§è§£å´å¹¶æ²¡æœ‰è¢«è®°å½•ä¸‹æ¥ï¼›    </li><li>å…¶ä¸‰ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ä¸ªï¼Œæ²¡æœ‰è½½ä½“åŽ»è®°å½•å“ªäº›ä»£ç é¡»æ”¹è¿›ï¼Œé‚£ä¹ˆåœ¨ä¸‹æ¬¡Reviewçš„è¿‡ç¨‹ä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½è®°å¾—ä¸Šæ¬¡æœ‰å“ªäº›ä»£ç æ˜¯å¦å·²ç»æ”¹è¿›äº†ï¼Œè¿™å°±ä¼šå¯¼è‡´ä»£ç çš„è´¨é‡æ²¡æœ‰å—åˆ°ç›‘ç®¡ã€‚</li></ul><p>ä»»ä½•ä¸€ç§å·¥ä½œæ–¹æ³•ï¼Œå¦‚æžœæœ‰å·¥å…·çš„è¾…åŠ©ï¼Œå°±å¯ä»¥å¤§å¤§æé«˜å…¶æ•ˆçŽ‡ã€‚Pull Requestå°±æ˜¯ä»£ç å®¡æŸ¥çš„ä¸€ç§å·¥ä½œæµå·¥å…·ï¼Œå®ƒå¹¶ä¸æ˜¯DVCS(Distributed Version Control System)æ¯”å¦‚gitçš„ä¸€ä¸ªç‰¹æ€§ï¼Œé€šè¿‡å®ƒå¯ä»¥ä½¿ä»£ç å®¡æŸ¥æ›´æœ‰æ•ˆçŽ‡ã€‚è€Œæˆ‘ä»¬å¤§å¤šé¡¹ç›®çŽ°åœ¨éƒ½æ˜¯ç”¨Stashï¼ˆçŽ°åœ¨å·²æ›´åä¸ºBitbucketï¼‰æˆ–Githubä½œä¸ºä»£ç ä»“åº“ï¼Œä¸¤è€…å‡æä¾›äº†è¿™ç§æ–¹å¼æ¥ç¡®ä¿ä»£ç è´¨é‡ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•é€šè¿‡Pull Requestæ¥ä½“çŽ°æˆ‘ä»¬çš„ä»£ç è´¨é‡ç®¡ç†è¿‡ç¨‹å‘¢ï¼Ÿé¦–å…ˆä»£ç è´¨é‡ç®¡ç†å°ç»„éœ€è¦ç”±é¡¹ç›®ä¸­æ¯”è¾ƒèµ„æ·±çš„ç ”å‘äººå‘˜æž„æˆï¼Œä»–ä»¬æ˜¯Pull Requestçš„Reviewerä¸å¯ç¼ºå°‘çš„æˆå‘˜ï¼Œç”¨äºŽæŠŠæŽ§æäº¤çš„ä»£ç æ˜¯å¦å¯ä»¥é€šè¿‡ï¼Œå½“ç„¶ï¼Œæœ€å¥½æ˜¯å…¨ä½“ç ”å‘äººå‘˜ä¸€èµ·åŠ å…¥ã€‚è€Œä»£ç è´¨é‡ç®¡ç†ä½“ç³»åˆ¶åº¦å…¶å®žä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ä¸€äº›è§„èŒƒå’Œå®žè·µï¼ŒåŒ…æ‹¬é¡¹ç›®ç»Ÿä¸€çš„ç¼–ç é£Žæ ¼ã€ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ã€åˆç†çš„å•å…ƒæµ‹è¯•ä»¥åŠæå€¡çš„ä¸€äº›æœ€ä½³å®žè·µç­‰ç­‰ã€‚Reviewerå¯ä»¥é€šè¿‡æ­¤ç±»ä½“ç³»æ¥é‰´åˆ«æ‰€æäº¤çš„ä»£ç è´¨é‡æ˜¯å¦å¯ä»¥è¿‡å…³ã€‚</p><p>åœ¨æ­¤å¤„æˆ‘ä»¬å¹¶ä¸é˜è¿°å¦‚ä½•åˆ›å»ºä¸€ä¸ªPull Requestï¼Œæˆ‘ä»¬çš„ç„¦ç‚¹åœ¨äºŽç”¨å®ƒæ¥è§£å†³ä¹‹å‰é‡åˆ°çš„é—®é¢˜ã€‚ä»¥æˆ‘ä»¬çŽ°åœ¨é¡¹ç›®ä¸­ç”¨çš„Stashä¸ºä¾‹ï¼Œå½“Pull Requestå·²åˆ›å»ºå¹¶é€šçŸ¥RevieweråŽï¼ŒReviewerå¯ä»¥æŸ¥çœ‹å…¶æäº¤ä»£ç ï¼Œåšå‡ºä»¥ä¸‹Action:</p><ul><li>é’ˆå¯¹å¥½çš„å®žè·µä»£ç æˆ–è®¾è®¡å¯ä»¥åœ¨å…¶ä½ç½®æ ‡æ³¨ä¸Šæ³¨é‡Šï¼Œä»¥å¤‡åŽç»­å›žé¡¾æŸ¥æ‰¾æ—¶å®¹æ˜“æ‰¾åˆ°ã€‚</li><li>å»ºè®®è¢«æ·»åŠ ä¸ºReviewerçš„å¼€å‘äººå‘˜å‡è¦åœ¨æ­¤æ¬¡çš„Pull Requestä¸­ç•™ä¸‹è‡ªå·±çš„æ„è§ï¼Œè¿™æ ·åœ¨åŽç»­çš„é›†ä½“Code Reviewä¸­å¯ä»¥æŸ¥çœ‹åˆ°ç›¸äº’çš„è§è§£ã€‚</li><li>å¦‚æžœå‘çŽ°ä»£ç å­˜åœ¨é—®é¢˜çš„ï¼Œå¯ä»¥åŠæ—¶åœ¨ä»£ç ä¸­ç•™ä¸‹æ³¨é‡Šã€‚å¦‚æžœä»£ç æäº¤è€…å¯¹è¿™ä¸ªæ³¨é‡Šä¹ŸèµžåŒï¼Œå¯å½“å³ä¿®æ”¹å¹¶æ›´æ–°Pull Requestï¼Œè¿™æ ·å¯ä»¥ä¿è¯ä»£ç æ˜¯å·²ç»ä¿®æ­£è¿‡çš„ã€‚</li></ul><p><img src="/assets/images/legacy/stash-pull-request.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/stash-pull-request.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="stash-pull-request.png"></p><p>å½“ä¸€ä¸ªPull Requestç›¸å…³é—®é¢˜éƒ½å·²ä¿®æ”¹åŽæˆ–ä¸å­˜åœ¨ä»»ä½•é—®é¢˜æ—¶ï¼Œå°±å¯ä»¥ç›´æŽ¥Approveå¹¶Mergeåˆ°CodeBaseä¸­åŽ»ï¼Œè¿™æ ·èƒ½å¤Ÿå¾ˆå¥½çš„ç¡®ä¿CodeBaseä¸­çš„ä»£ç æ˜¯ç»è¿‡ç›‘ç®¡æŽ§åˆ¶è¿‡çš„ã€‚è€Œä¸”åœ¨Stashçš„Pull Requestä¸­ï¼Œè¿˜å¯ä»¥è®¾ç½®å½“é¡»ä¸å°‘äºŽæŒ‡å®šä¸ªæ•°çš„RevieweråŒæ„ä»£ç æäº¤é€šè¿‡åŽï¼Œæäº¤è€…æ‰æœ‰æƒé™Mergeåˆ°CodeBaseä¸­ã€‚è¿™æ ·ä¹Ÿèƒ½æžå¤§çš„ç¡®ä¿é¡¹ç›®çš„ä»£ç è´¨é‡è§„èŒƒæ˜¯æ•´ä½“å¼€å‘äººå‘˜è®¤åŒçš„ã€‚</p><p>æ€»ä¹‹ï¼ŒPull Requestå·¥ä½œæµç¨‹çš„æ–¹å¼å¯ä»¥å¾ˆå¤§çš„æé«˜ä»£ç å®¡æŸ¥çš„è´¨é‡ä»¥åŠæ•ˆçŽ‡ï¼Œæœ‰å·¥å…·ï¼Œä¸ºä½•ä¸åŠ ä»¥åˆç†ä½¿ç”¨å‘¢ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Collaboration </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(16)</title>
      <link href="/2015/11/18/ruby-practice-16/"/>
      <url>/2015/11/18/ruby-practice-16/</url>
      
        <content type="html"><![CDATA[<h4 id="æ•£åˆ—ç±»"><a href="#æ•£åˆ—ç±»" class="headerlink" title="æ•£åˆ—ç±»"></a>æ•£åˆ—ç±»</h4><p>æ•£åˆ—(<strong>Hash</strong>)å’Œæ•°ç»„ä¸€æ ·ï¼Œéƒ½æ˜¯è¡¨ç¤ºå¯¹è±¡é›†åˆçš„å¯¹è±¡ï¼Œä¸åŒä¹‹å¤„åœ¨äºŽï¼Œæ•°ç»„ä½¿ç”¨ç´¢å¼•æ¥å–å¾—å…ƒç´ ï¼Œè€Œæ•£åˆ—åˆ™æ˜¯ç”¨é”®keyï¼Œkeyå¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ï¼Œè€Œç´¢å¼•åˆ™ä¸èƒ½ï¼Œåªèƒ½æ˜¯æ•´æ•°ã€‚</p><h5 id="æ•£åˆ—çš„åˆ›å»º"><a href="#æ•£åˆ—çš„åˆ›å»º" class="headerlink" title="æ•£åˆ—çš„åˆ›å»º"></a>æ•£åˆ—çš„åˆ›å»º</h5><p>1.ä½¿ç”¨ <strong>{}</strong></p><pre><code>    &#123;key=&gt;value&#125;    æˆ–    &#123;key:value&#125;</code></pre><span id="more"></span><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hash1 = &#123;<span class="string">&quot;key1&quot;</span>=&gt;<span class="string">&quot;value1&quot;</span>, <span class="string">&quot;key2&quot;</span>=&gt;<span class="string">&quot;value2&quot;</span>&#125;</span><br><span class="line">p hash1[<span class="string">&quot;key1&quot;</span>]<span class="comment">#=&gt; &quot;value1&quot;</span></span><br><span class="line"></span><br><span class="line">hash2 = &#123;<span class="symbol">key1:</span><span class="string">&quot;value1&quot;</span>, <span class="symbol">key2:</span><span class="string">&quot;value2&quot;</span>&#125;</span><br><span class="line">p hash2[<span class="symbol">:key1</span>]<span class="comment">#=&gt; &quot;value1&quot;</span></span><br></pre></td></tr></table></figure><p>2.ä½¿ç”¨<strong>Hash.new</strong></p><p>Hash.new()å¯å¸¦å‚æ•°ï¼Œå½“å¸¦å‚æ•°çš„æ—¶å€™è¡¨ç¤ºè¯¥å‚æ•°ä¸ºé»˜è®¤å€¼ï¼Œå³å½“é”®ä¸å­˜åœ¨æ—¶ï¼Œæ‰€å¾—çš„å€¼ä¸ºè¯¥é»˜è®¤å€¼ï¼›ä¸å¸¦å‚æ•°æƒ…å†µä¸‹ï¼Œå…¶é»˜è®¤å€¼ä¸ºnil</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hash1 = <span class="title class_">Hash</span>.new</span><br><span class="line">hash2 = <span class="title class_">Hash</span>.new(<span class="string">&quot;ruby&quot;</span>)</span><br><span class="line"></span><br><span class="line">p hash1[<span class="string">&quot;key&quot;</span>]<span class="comment">#=&gt; nil</span></span><br><span class="line">p hash2[<span class="string">&quot;key&quot;</span>]<span class="comment">#=&gt; &quot;ruby&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ•£åˆ—çš„é”®å¯ä»¥æ˜¯ä»»æ„å¯¹è±¡ï¼Œä¸€èˆ¬æŽ¨èä½¿ç”¨ä¸‹åˆ—ç±»åž‹çš„å¯¹è±¡æ¥ä½œä¸ºé”®ï¼šå­—ç¬¦ä¸²(String), æ•°å€¼(Numberic), ç¬¦å·(Symbol), æ—¥æœŸ(Date).</p><h5 id="æ•£åˆ—å€¼çš„è®¾ç½®å’ŒèŽ·å–"><a href="#æ•£åˆ—å€¼çš„è®¾ç½®å’ŒèŽ·å–" class="headerlink" title="æ•£åˆ—å€¼çš„è®¾ç½®å’ŒèŽ·å–"></a>æ•£åˆ—å€¼çš„è®¾ç½®å’ŒèŽ·å–</h5><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¤§å¤šä½¿ç”¨æœ€æ™®é€šçš„æ–¹æ³•æ¥ç»™æ•£åˆ—èµ‹å€¼æˆ–å–å€¼, å¦‚æžœé”®ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›žnil</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#common set and get</span></span><br><span class="line">hash = <span class="title class_">Hash</span>.new</span><br><span class="line">hash[<span class="string">&quot;a&quot;</span>] = <span class="string">&quot;first&quot;</span></span><br><span class="line"></span><br><span class="line">p hash[<span class="string">&quot;a&quot;</span>]<span class="comment">#=&gt; &quot;first&quot;</span></span><br><span class="line">p hash[<span class="string">&quot;abc&quot;</span>]<span class="comment">#=&gt; nil</span></span><br></pre></td></tr></table></figure><p>Rubyè¿˜æä¾›äº†<strong>store</strong>æ–¹æ³•æ¥å­˜å‚¨å€¼ï¼Œä½¿ç”¨<strong>fetch</strong>æ–¹æ³•æ¥èŽ·å–å€¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#store and fetch</span></span><br><span class="line">hash = <span class="title class_">Hash</span>.new</span><br><span class="line"></span><br><span class="line">hash.store(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;ruby&quot;</span>)</span><br><span class="line"></span><br><span class="line">p hash.fetch(<span class="string">&quot;key&quot;</span>)<span class="comment">#=&gt; &quot;ruby&quot;</span></span><br></pre></td></tr></table></figure><p>ä½†<strong>fetch</strong>æ–¹æ³•ä¸Ž[]ä¸åŒä¹‹å¤„åœ¨äºŽï¼Œå¦‚æžœhashå¯¹è±¡ä¸­ä¸å­˜åœ¨é”®æ—¶ï¼Œä½¿ç”¨æ­¤æ–¹æ³•å°†ä¼šå‡ºé”™</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hash = <span class="title class_">Hash</span>.new</span><br><span class="line"></span><br><span class="line">hash.store(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;ruby&quot;</span>)</span><br><span class="line"></span><br><span class="line">hash.fetch(<span class="string">&quot;abc&quot;</span>)<span class="comment">#=&gt; KeyError</span></span><br></pre></td></tr></table></figure><p><strong>fetch</strong>æ–¹æ³•åŒæ ·å¯ä»¥è¿”å›žä¸€ä¸ªé»˜è®¤å€¼ï¼Œå½“å®ƒæŒ‡å®šç¬¬2ä¸ªå‚æ•°æ—¶æˆ–è€…å¸¦å—æ—¶</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hash = <span class="title class_">Hash</span>.new</span><br><span class="line"></span><br><span class="line">p hash.fetch(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;default value&quot;</span>)<span class="comment">#=&gt; &quot;default value&quot;</span></span><br><span class="line"></span><br><span class="line">p hash.fetch(<span class="string">&quot;abc&quot;</span>) &#123;<span class="string">&quot;a_&quot;</span>+ <span class="title class_">String</span>.new(<span class="string">&quot;bc&quot;</span>)&#125;<span class="comment">#=&gt;&quot;a_bc&quot;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡<strong>keys</strong>å’Œ<strong>values</strong>æ–¹æ³•å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„é”®å’Œå€¼ï¼Œè€Œä¸”<strong>to_a</strong>æ–¹æ³•å¯ä»¥é”®å€¼ç»„åˆçš„æ•°ç»„ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">get all keys <span class="keyword">and</span> values</span><br><span class="line">hash = &#123;<span class="string">&quot;a&quot;</span>=&gt;<span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>=&gt;<span class="string">&quot;d&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">p hash.keys<span class="comment">#=&gt; [&quot;a&quot;, &quot;c&quot;]</span></span><br><span class="line">p hash.values<span class="comment">#=&gt; [&quot;b&quot;, &quot;d&quot;]</span></span><br><span class="line">p hash.to_a<span class="comment">#=&gt; [[&quot;a&quot;, &quot;b&quot;], [&quot;c&quot;, &quot;d&quot;]]</span></span><br></pre></td></tr></table></figure><p>Rubyä¹Ÿæ”¯æŒäº†Hashå¯¹è±¡çš„è¿­ä»£éåŽ†</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">hash = &#123;<span class="string">&quot;a&quot;</span>=&gt;<span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>=&gt;<span class="string">&quot;d&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">hash.each_key <span class="keyword">do</span> |<span class="params">key</span>|</span><br><span class="line">puts key</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">hash.each_value <span class="keyword">do</span> |<span class="params">value</span>|</span><br><span class="line">puts value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">hash.each <span class="keyword">do</span> |<span class="params">key, value</span>|</span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;key&#125;</span>=&gt;<span class="subst">#&#123;value&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h5 id="æ•£åˆ—çš„é»˜è®¤å€¼"><a href="#æ•£åˆ—çš„é»˜è®¤å€¼" class="headerlink" title="æ•£åˆ—çš„é»˜è®¤å€¼"></a>æ•£åˆ—çš„é»˜è®¤å€¼</h5><p>æ•£åˆ—çš„é»˜è®¤å€¼è®¾ç½®æœ‰ä¸‰ç§æ–¹å¼<br>1.ä½¿ç”¨Hash.newå¸¦å‚æ•°ä½œä¸ºé»˜è®¤å€¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hash = <span class="title class_">Hash</span>.new(<span class="string">&quot;ruby&quot;</span>)</span><br><span class="line">p hash[<span class="string">&quot;a&quot;</span>] <span class="comment">#=&gt; &quot;ruby&quot;</span></span><br></pre></td></tr></table></figure><p>2.ä½¿ç”¨å—æŒ‡å®šé»˜è®¤å€¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hash = <span class="title class_">Hash</span>.new <span class="keyword">do</span> |<span class="params">hash, key</span>|</span><br><span class="line">hash[key] = key.upcase</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p hash[<span class="string">&quot;a&quot;</span>]<span class="comment">#=&gt; &quot;A&quot;</span></span><br><span class="line">p hash[<span class="string">&quot;B&quot;</span>]<span class="comment">#=&gt; &quot;B&quot;</span></span><br></pre></td></tr></table></figure><p>3.ä½¿ç”¨fetchæ–¹æ³•æŒ‡å®šé»˜è®¤å€¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hash = <span class="title class_">Hash</span>.new <span class="keyword">do</span> |<span class="params">hash, key</span>|</span><br><span class="line">hash[key] = key.upcase</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p hash.fetch(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;abc&quot;</span>)<span class="comment">#=&gt; &quot;abc&quot;</span></span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼šå½“Hash.newæ–¹æ³•æŒ‡å®šäº†é»˜è®¤å€¼æˆ–å—æ—¶ï¼Œfetchæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šçš„é»˜è®¤å€¼çš„ä¼˜å…ˆçº§æ˜¯æœ€é«˜çš„ï¼Œä¸”çœ‹ä¸Šä¾‹</em></p><h5 id="æ•£åˆ—å…¶ä»–æ–¹æ³•"><a href="#æ•£åˆ—å…¶ä»–æ–¹æ³•" class="headerlink" title="æ•£åˆ—å…¶ä»–æ–¹æ³•"></a>æ•£åˆ—å…¶ä»–æ–¹æ³•</h5><p>1.æŸ¥çœ‹æŒ‡å®šå¯¹è±¡æ˜¯å¦ä¸ºæ•£åˆ—çš„é”®<br>h.<strong>key?</strong>(key)<br>h.<strong>has_key?</strong>(key)<br>h.<strong>include?</strong>(key)<br>h.<strong>member?</strong>(key)   </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hash = &#123;<span class="string">&quot;a&quot;</span> =&gt; <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>=&gt; <span class="string">&quot;d&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">p hash.key?(<span class="string">&quot;a&quot;</span>)    <span class="comment">#=&gt; true</span></span><br><span class="line">p hash.key?(<span class="string">&quot;x&quot;</span>)    <span class="comment">#=&gt; false</span></span><br><span class="line">p hash.has_key?(<span class="string">&quot;c&quot;</span>)  <span class="comment">#=&gt; true</span></span><br><span class="line">p hash.<span class="keyword">include</span>?(<span class="string">&quot;a&quot;</span>)  <span class="comment">#=&gt; true</span></span><br><span class="line">p hash.member?(<span class="string">&quot;x&quot;</span>)   <span class="comment">#=&gt; false</span></span><br></pre></td></tr></table></figure><p>2.æŸ¥çœ‹æŒ‡å®šå¯¹è±¡æ˜¯å¦ä¸ºæ•£åˆ—çš„å€¼<br>h.<strong>value?</strong>(val)<br>h.<strong>has_value?</strong>(val)    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hash = &#123;<span class="string">&quot;a&quot;</span>=&gt;<span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>=&gt;<span class="string">&quot;d&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">p hash.value?(<span class="string">&quot;a&quot;</span>)        <span class="comment">#=&gt; true</span></span><br><span class="line">p hash.has_value?(<span class="string">&quot;x&quot;</span>)    <span class="comment">#=&gt; false</span></span><br></pre></td></tr></table></figure><p>3.èŽ·å–æ•£åˆ—çš„å¤§å°<br>hash.<strong>length</strong><br>hash.<strong>size</strong>    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hash = &#123;<span class="symbol">:a</span> =&gt; <span class="string">&quot;b&quot;</span>, <span class="symbol">:c</span> =&gt; <span class="string">&quot;d&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">p hash.length   <span class="comment">#=&gt; 2</span></span><br><span class="line">p hash.size   <span class="comment">#=&gt; 2</span></span><br></pre></td></tr></table></figure><p>4.åˆ¤æ–­æ•£åˆ—æ˜¯å¦ä¸ºç©º<br>hash.<strong>empty?</strong>    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hash = &#123;<span class="symbol">:a=&gt;<span class="string">&quot;b&quot;</span></span>&#125;</span><br><span class="line">p hash.empty?     <span class="comment">#=&gt; false</span></span><br><span class="line"></span><br><span class="line">hash = <span class="title class_">Hash</span>.new</span><br><span class="line">p hash.empty?     <span class="comment">#=&gt; true</span></span><br></pre></td></tr></table></figure><p>6.åˆ é™¤é”®å€¼<br>h.<strong>delete</strong>(key)<br>h.<strong>delete_if</strong>{|key,val| â€¦}<br>h.<strong>reject!</strong>{|key, val| â€¦}    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">hash = &#123;<span class="symbol">:a</span> =&gt; <span class="string">&quot;b&quot;</span>&#125;</span><br><span class="line">p hash[<span class="symbol">:a</span>]    <span class="comment">#=&gt; &quot;b&quot;</span></span><br><span class="line"></span><br><span class="line">hash.delete(<span class="symbol">:a</span>)</span><br><span class="line">p hash[<span class="symbol">:a</span>]    <span class="comment">#=&gt; nil</span></span><br><span class="line"></span><br><span class="line">hash = &#123;<span class="symbol">:a</span> =&gt; <span class="string">&quot;b&quot;</span>&#125;</span><br><span class="line">p hash.delete(<span class="symbol">:x</span>) &#123; |<span class="params">key</span>| <span class="string">&quot;no <span class="subst">#&#123;key&#125;</span> in this hash object&quot;</span>&#125;   <span class="comment">#=&gt;&quot;no x in this hash object&quot;</span></span><br><span class="line"></span><br><span class="line">hash = &#123;<span class="symbol">:a</span> =&gt; <span class="string">&quot;b&quot;</span>, <span class="symbol">:c</span> =&gt; <span class="string">&quot;d&quot;</span>&#125;</span><br><span class="line">p hash.delete_if &#123;|<span class="params">key, val</span>| key == <span class="symbol">:a</span> &#125;     <span class="comment">#=&gt; &#123;:c=&gt;&quot;d&quot;&#125;</span></span><br><span class="line">p hash.delete_if &#123;|<span class="params">key, val</span>| key == <span class="symbol">:b</span> &#125;     <span class="comment">#=&gt; &#123;:c=&gt;&quot;d&quot;&#125;</span></span><br><span class="line"></span><br><span class="line">hash = &#123;<span class="symbol">:a</span> =&gt; <span class="string">&quot;b&quot;</span>, <span class="symbol">:c</span> =&gt; <span class="string">&quot;d&quot;</span>&#125;</span><br><span class="line">p hash.reject! &#123;|<span class="params">key, val</span>| key == <span class="symbol">:a</span>&#125;       <span class="comment">#=&gt; &#123;:c=&gt;&quot;d&quot;&#125;</span></span><br><span class="line">p hash.reject! &#123;|<span class="params">key, val</span>| key == <span class="symbol">:b</span>&#125;       <span class="comment">#=&gt; nil</span></span><br></pre></td></tr></table></figure><p>deleteæ–¹æ³•å¸¦å—æ—¶ï¼Œå¦‚æžœä¸å­˜åœ¨æŒ‡å®šçš„é”®, åˆ™è¿”å›žå—ä¸­çš„ç»“æžœã€‚<strong>delete_if</strong>æ–¹æ³•å’Œ**reject!**åŠŸèƒ½ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽå¦‚æžœä¸æ»¡è¶³æ¡ä»¶æ˜¯ï¼Œdelete_ifè¿”å›žçš„æ˜¯æ•£åˆ—å¯¹è±¡æœ¬èº«ï¼Œè€Œrejectï¼åˆ™è¿”å›žnilã€‚</p><p>7.åˆå§‹åŒ–æ•£åˆ—<br>h.<strong>clear</strong><br>ç”¨<strong>clear</strong>æ–¹æ³•æ¸…ç©ºä½¿ç”¨è¿‡çš„æ•£åˆ—</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hash = &#123;<span class="symbol">a:</span><span class="string">&quot;b&quot;</span>, <span class="symbol">c:</span><span class="string">&quot;d&quot;</span>&#125;</span><br><span class="line">p hash.size     <span class="comment">#=&gt; 2</span></span><br><span class="line"></span><br><span class="line">hash.clear</span><br><span class="line">p hash.size     <span class="comment">#=&gt; 0</span></span><br></pre></td></tr></table></figure><h5 id="å…³äºŽæ•£åˆ—çš„é”®"><a href="#å…³äºŽæ•£åˆ—çš„é”®" class="headerlink" title="å…³äºŽæ•£åˆ—çš„é”®"></a>å…³äºŽæ•£åˆ—çš„é”®</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hash = <span class="title class_">Hash</span>.new</span><br><span class="line">key1 = <span class="number">1</span></span><br><span class="line">key2 = <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line">p key1 == key2      <span class="comment">#=&gt; true</span></span><br><span class="line"></span><br><span class="line">hash[key1] = <span class="string">&quot;ruby&quot;</span></span><br><span class="line">p hash.key?(key1)     <span class="comment">#=&gt; true</span></span><br><span class="line">p hash.has_key?(key2)   <span class="comment">#=&gt; false</span></span><br></pre></td></tr></table></figure><p>æ³¨ï¼šåœ¨æ•£åˆ—å†…éƒ¨ï¼Œç¨‹åºä¼šå°†æ•£åˆ—èŽ·å–å€¼æ—¶æŒ‡å®šçš„é”®ï¼Œä¸Žå°†å€¼ä¿å­˜åˆ°æ•£åˆ—æ—¶æŒ‡å®šçš„é”®åšæ¯”è¾ƒï¼Œåˆ¤æ–­ä¸¤è€…æ˜¯å¦ä¸€è‡´ã€‚å…·ä½“æ¥è¯´å°±æ˜¯ï¼Œå¦‚æžœä¸¤ä¸ªé”®key1ï¼Œkey2ï¼Œå½“key1.hashä¸Žkey2.hashå¾—åˆ°çš„æ•´æ•°å€¼ç›¸åŒï¼Œå¹¶ä¸”key1.eql?(key2)ä¸ºtrueæ—¶ï¼Œå°±ä¼šè®¤ä¸ºè¿™ä¸¤ä¸ªé”®æ˜¯ä¸€è‡´çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(15)</title>
      <link href="/2015/11/17/ruby-practice-15/"/>
      <url>/2015/11/17/ruby-practice-15/</url>
      
        <content type="html"><![CDATA[<h5 id="å­—ç¬¦ä¸²æ¯”è¾ƒ"><a href="#å­—ç¬¦ä¸²æ¯”è¾ƒ" class="headerlink" title="å­—ç¬¦ä¸²æ¯”è¾ƒ"></a>å­—ç¬¦ä¸²æ¯”è¾ƒ</h5><p>Rubyä¸­æ¯”è¾ƒå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒä¹Ÿæ˜¯ç”¨**&#x3D;&#x3D;<strong>å’Œ</strong>!&#x3D;**ç­‰è¿ç®—ç¬¦</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#whether two strings are equal</span></span><br><span class="line">puts <span class="string">&quot;aaa&quot;</span> == <span class="string">&quot;aab&quot;</span> <span class="comment">#=&gt; false</span></span><br><span class="line">puts <span class="string">&quot;aaa&quot;</span> != <span class="string">&quot;aab&quot;</span><span class="comment">#=&gt; true</span></span><br></pre></td></tr></table></figure><p>å¦‚æžœæ˜¯åˆ¤æ–­ä¸¤å­—ç¬¦ä¸²æ˜¯å¦ç›¸ä¼¼ï¼Œé‡‡ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ›´åŠ ç®€å•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#whether two strings are similar</span></span><br><span class="line">reg = <span class="title class_">Regexp</span>.new(<span class="string">&quot;^a+b$&quot;</span>)</span><br><span class="line">p <span class="string">&quot;aaa&quot;</span> =~ reg <span class="comment">#=&gt; nil (not similar)</span></span><br><span class="line">p <span class="string">&quot;ab&quot;</span> =~ reg <span class="comment">#=&gt; 0 (similar)</span></span><br><span class="line">p <span class="string">&quot;aab&quot;</span> =~ reg <span class="comment">#=&gt; 0 (similar)</span></span><br><span class="line">p <span class="string">&quot;acb&quot;</span> =~ reg <span class="comment">#=&gt; nil (not similar)</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>å­—ç¬¦ä¸²å¤§å°ç”±å­—ç¬¦ç¼–ç çš„é¡ºåºå†³å®šï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨<strong>String#ord</strong>æ–¹æ³•èŽ·å–å­—ç¬¦ç¼–ç çš„ç ä½ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#compare two strings, which is bigger</span></span><br><span class="line">puts <span class="string">&quot;aaa&quot;</span> &gt; <span class="string">&quot;aab&quot;</span><span class="comment">#=&gt; false</span></span><br><span class="line">puts <span class="string">&quot;aaa&quot;</span> &lt;= <span class="string">&quot;aab&quot;</span><span class="comment">#=&gt; true</span></span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼šWindowså¹³å°ä¸‹çš„ä¸­æ–‡å­—ç¬¦ä½¿ç”¨GBKç¼–ç ï¼Œä½†éžWindowså¹³å°ä¸‹çš„ä¸­æ–‡å­—ç¬¦ä½¿ç”¨UTF-8ç¼–ç </em></p><h5 id="å­—ç¬¦ä¸²çš„åˆ†å‰²"><a href="#å­—ç¬¦ä¸²çš„åˆ†å‰²" class="headerlink" title="å­—ç¬¦ä¸²çš„åˆ†å‰²"></a>å­—ç¬¦ä¸²çš„åˆ†å‰²</h5><p>ç”¨ç‰¹å®šå­—ç¬¦åˆ†å‰²å­—ç¬¦ä¸²æ—¶å¯ä»¥ä½¿ç”¨<strong>split</strong>æ–¹æ³•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#split string with a special character</span></span><br><span class="line">str = <span class="string">&quot;This is a string&quot;</span></span><br><span class="line">p str.split(<span class="string">&quot; &quot;</span>) <span class="comment">#=&gt; [&quot;This&quot;, &quot;is&quot;, &quot;a&quot;, &quot;string&quot;]</span></span><br></pre></td></tr></table></figure><h5 id="å­—ç¬¦ä¸²çš„æ¢è¡Œç¬¦"><a href="#å­—ç¬¦ä¸²çš„æ¢è¡Œç¬¦" class="headerlink" title="å­—ç¬¦ä¸²çš„æ¢è¡Œç¬¦"></a>å­—ç¬¦ä¸²çš„æ¢è¡Œç¬¦</h5><p>ç”¨<strong>each_line</strong>æ–¹æ³•ä»Žæ ‡å‡†è¾“å…¥è¯»å–å­—ç¬¦ä¸²æ—¶ï¼Œå­—ç¬¦ä¸²åŽé¢è‚¯å®šæœ‰æ¢è¡Œç¬¦ã€‚åœ¨æ“ä½œå­—ç¬¦ä¸²æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¸éœ€è¦æ¢è¡Œç¬¦ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨<strong>chomp</strong>å’Œ**chomp!**æ–¹æ³•æ¥åˆ é™¤å­—ç¬¦ä¸²è¡Œæœ«çš„æ¢è¡Œç¬¦ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#delete the line break character from a string</span></span><br><span class="line">str = <span class="string">&quot;hello ruby\n&quot;</span></span><br><span class="line">p str  <span class="comment">#=&gt; &quot;hello ruby\n&quot;</span></span><br><span class="line">p str.chomp <span class="comment">#=&gt; &quot;hello ruby&quot;</span></span><br><span class="line">p str.chomp!<span class="comment">#=&gt; &quot;hello ruby&quot;</span></span><br><span class="line">p str <span class="comment">#=&gt; &quot;hello ruby&quot;</span></span><br></pre></td></tr></table></figure><p>å¦‚æžœè¯´åªæƒ³ç§»é™¤å­—ç¬¦ä¸²è¡Œæœ«çš„æœ€åŽä¸€ä¸ªä»»æ„å­—ç¬¦ï¼Œå¯ä»¥é€šè¿‡æ˜¯ç”¨<strong>chop</strong>å’Œ**chop!**æ–¹æ³•æ¥å®žçŽ°</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#delete the last character from a string</span></span><br><span class="line">str = <span class="string">&quot;hello ruby&quot;</span></span><br><span class="line">puts str.chop<span class="comment">#=&gt; hello rub</span></span><br><span class="line">puts str <span class="comment">#=&gt; hello ruby</span></span><br><span class="line">puts str.chop!<span class="comment">#=&gt; hello rub</span></span><br><span class="line">puts str<span class="comment">#=&gt; hello rub</span></span><br></pre></td></tr></table></figure><h5 id="å­—ç¬¦ä¸²çš„ç´¢å¼•"><a href="#å­—ç¬¦ä¸²çš„ç´¢å¼•" class="headerlink" title="å­—ç¬¦ä¸²çš„ç´¢å¼•"></a>å­—ç¬¦ä¸²çš„ç´¢å¼•</h5><p>ä½¿ç”¨<strong>index</strong>å’Œ<strong>rindex</strong>æ–¹æ³•å¯ä»¥èŽ·å–æŸä¸ªå­—ç¬¦ä¸²åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å¾—ç´¢å¼•ä½ç½®ï¼Œå¦‚æžœä¸åœ¨ï¼Œåˆ™è¿”å›žnilã€‚<strong>index</strong>æ–¹æ³•ä»Žå·¦å‘å³æ£€ç´¢ï¼Œ<strong>rindex</strong>ä»Žå³å‘å·¦æ£€ç´¢ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#get the index which a string in another string</span></span><br><span class="line">str1 = <span class="string">&quot;aaabbbbbb&quot;</span></span><br><span class="line">str2 = <span class="string">&quot;bb&quot;</span></span><br><span class="line"></span><br><span class="line">puts str1.index(str2)   <span class="comment">#=&gt; 3</span></span><br><span class="line">puts str1.rindex(str2)  <span class="comment">#=&gt; 7</span></span><br></pre></td></tr></table></figure><p>å¦‚æžœåªæƒ³åˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«å¦ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œä½¿ç”¨**include?**æ–¹æ³•æ›´ä½³ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#a string whether contains another string</span></span><br><span class="line">str1 = <span class="string">&quot;abc&quot;</span></span><br><span class="line">str2 = <span class="string">&quot;ab&quot;</span></span><br><span class="line">puts str1.<span class="keyword">include</span>?(str2) <span class="comment">#=&gt; true</span></span><br></pre></td></tr></table></figure><h5 id="å­—ç¬¦ä¸²çš„ç½®æ¢"><a href="#å­—ç¬¦ä¸²çš„ç½®æ¢" class="headerlink" title="å­—ç¬¦ä¸²çš„ç½®æ¢"></a>å­—ç¬¦ä¸²çš„ç½®æ¢</h5><p>å­—ç¬¦ä¸²çš„ç½®æ¢å¯ä»¥é€šè¿‡è°ƒç”¨<strong>sub</strong>å’Œ<strong>gsub</strong>æ¥å®žçŽ°ã€‚<strong>sub</strong>æ–¹æ³•ä»…æ›¿æ¢ç¬¬ä¸€ä¸ªå‡ºçŽ°çš„åŒ¹é…å­—ç¬¦ï¼Œè€Œ<strong>gsub</strong>åˆ™ä¼šæ›¿æ¢æ‰€æœ‰çš„åŒ¹é…å­—ç¬¦ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#the replacing of string</span></span><br><span class="line">puts <span class="string">&quot;hello&quot;</span>.sub(<span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)<span class="comment">#=&gt; he*lo</span></span><br><span class="line">puts <span class="string">&quot;hello&quot;</span>.gsub(<span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)<span class="comment">#=&gt; he**o</span></span><br></pre></td></tr></table></figure><p>å­—ç¬¦ä¸²çš„ç½®æ¢è¿˜å¯ä»¥é€šè¿‡åƒæ›¿æ¢æ•°ç»„ä¸­å…ƒç´ çš„æ–¹å¼æ¥å®žçŽ°ï¼Œå³ç´¢å¼•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&quot;hello&quot;</span></span><br><span class="line"></span><br><span class="line">str[<span class="number">2</span>] = <span class="string">&#x27;*&#x27;</span></span><br><span class="line">puts str <span class="comment">#=&gt; he*lo</span></span><br><span class="line"></span><br><span class="line">str[<span class="number">2</span>..<span class="number">3</span>] = <span class="string">&#x27;**&#x27;</span>       </span><br><span class="line">puts str      <span class="comment">#=&gt; he**o</span></span><br><span class="line"></span><br><span class="line">str[<span class="number">1</span>, <span class="number">3</span>]= <span class="string">&#x27;***&#x27;</span>  </span><br><span class="line">puts str <span class="comment">#=&gt; h***o</span></span><br></pre></td></tr></table></figure><h5 id="å­—ç¬¦ä¸²ä¸Žæ•°ç»„ç›¸åŒçš„æ–¹æ³•"><a href="#å­—ç¬¦ä¸²ä¸Žæ•°ç»„ç›¸åŒçš„æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²ä¸Žæ•°ç»„ç›¸åŒçš„æ–¹æ³•"></a>å­—ç¬¦ä¸²ä¸Žæ•°ç»„ç›¸åŒçš„æ–¹æ³•</h5><p>å­—ç¬¦ä¸²çš„å¾ˆå¤šæ–¹æ³•éƒ½ä¸Žæ•°ç»„ç›¸åŒï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰å¤§ç±»ï¼š    </p><ul><li>ä¸Žç´¢å¼•æ“ä½œç›¸å…³çš„æ–¹æ³•   </li><li>ä¸Ž<strong>Enumerable</strong>æ¨¡å—ç›¸å…³çš„æ–¹æ³•    </li><li>ä¸Žè¿žæŽ¥ã€åè½¬ç›¸å…³çš„æ–¹æ³•</li></ul><p>åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„ä¸€éƒ¨åˆ†å­—ç¬¦å¹¶è¿”å›žï¼Œå¯ä½¿ç”¨<strong>slice</strong>æ–¹æ³•    </p><p><strong>slice(n)</strong><br><strong>slice(n..m)</strong><br><strong>slice(n, m)</strong><br><strong>slice!(n)</strong><br><strong>slice!(n..m)</strong><br><strong>slice!(n, m)</strong></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#the slice of string</span></span><br><span class="line">str = <span class="string">&quot;hello ruby&quot;</span></span><br><span class="line">puts str.slice(<span class="number">1</span>)<span class="comment">#=&gt; e</span></span><br><span class="line">puts str.slice(<span class="number">1</span>..<span class="number">3</span>)<span class="comment">#=&gt; ell</span></span><br><span class="line">puts str.slice(<span class="number">2</span>, <span class="number">3</span>)<span class="comment">#=&gt; llo</span></span><br></pre></td></tr></table></figure><p>ä¸å¸¦å—çš„æƒ…å†µä¸‹ï¼Œå¤§éƒ¨åˆ†åŽŸç”Ÿçš„è¿­ä»£å™¨åœ¨è°ƒç”¨æ—¶éƒ½ä¼šè¿”å›ž<strong>Enumberable</strong>å¯¹è±¡ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹<strong>each_line</strong>, <strong>each_byte</strong>ï¼Œ <strong>each_char</strong>ç­‰æ–¹æ³•çš„è¿”å›žå€¼ç»§ç»­ä½¿ç”¨åƒ<strong>map</strong>ï¼Œ <strong>collect</strong>ç­‰æ–¹æ³•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#the enumerable of string</span></span><br><span class="line">str = <span class="string">&lt;&lt;EOB</span></span><br><span class="line"><span class="string">hello</span></span><br><span class="line"><span class="string">ruby</span></span><br><span class="line"><span class="string">EOB</span></span><br><span class="line"></span><br><span class="line">p str <span class="comment">#=&gt; &quot;hello\nruby\n&quot;</span></span><br><span class="line"><span class="comment">#return enumerable</span></span><br><span class="line">p str.each_line <span class="comment">#=&gt; #&lt;Enumerator: &quot;hello\nruby\n&quot;:each_line&gt;</span></span><br><span class="line"></span><br><span class="line">p str.each_line.map &#123; |<span class="params">e</span>| e.chomp  &#125;   <span class="comment">#=&gt; [&quot;hello&quot;, &quot;ruby&quot;]</span></span><br><span class="line"></span><br><span class="line">p str.each_line.collect &#123; |<span class="params">e</span>| e.chomp.upcase&#125; <span class="comment">#=&gt; [&quot;HELLO&quot;, &quot;RUBY&quot;]</span></span><br></pre></td></tr></table></figure><p><strong>delete(str)</strong><br><strong>delete!(str)</strong><br>åˆ é™¤å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›žåˆ é™¤åŽçš„å­—ç¬¦</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#delete the specific string from another string</span></span><br><span class="line">str = <span class="string">&quot;hello\n ruby\n&quot;</span></span><br><span class="line">p str.delete(<span class="string">&quot;\n&quot;</span>)      <span class="comment">#=&gt; &quot;hello ruby&quot;</span></span><br><span class="line">p str <span class="comment">#=&gt; &quot;hello\n ruby\n&quot;</span></span><br><span class="line"></span><br><span class="line">p str.delete!(<span class="string">&quot;\n&quot;</span>)<span class="comment">#=&gt; &quot;hello ruby&quot;</span></span><br><span class="line">p str <span class="comment">#=&gt; &quot;hello ruby&quot;</span></span><br></pre></td></tr></table></figure><p><strong>reverse(str)</strong><br><strong>reverse!(str)</strong><br>åè½¬å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬ç ´åæ–¹æ³•ä¸Žéžç ´åæ–¹æ³•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#reverse a string</span></span><br><span class="line">str = <span class="string">&quot;hello ruby&quot;</span></span><br><span class="line">p str.reverse <span class="comment">#=&gt; &quot;ybur olleh&quot;</span></span><br></pre></td></tr></table></figure><p><strong>str.strip</strong><br><strong>str.strip!</strong><br>åˆ é™¤å­—ç¬¦ä¸²strä¸­è¡Œé¦–å’Œè¡Œå°¾çš„ç©ºç™½å­—ç¬¦    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#remove the white space at the begin and end of string</span></span><br><span class="line">str = <span class="string">&quot; hello ruby &quot;</span></span><br><span class="line">p str <span class="comment">#=&gt; &quot; hello ruby&quot;</span></span><br><span class="line">p str.strip     <span class="comment">#=&gt; &quot;hello ruby&quot;</span></span><br></pre></td></tr></table></figure><p><strong>str.upcase&#x2F;str.upcase!</strong><br><strong>str.downcase&#x2F;str.downcase!</strong><br><strong>str.swapcase&#x2F;str.swapcase!</strong><br><strong>str.capitalize&#x2F;str.capitalize!</strong><br>å­—ç¬¦ä¸²å¤§å°å†™çš„è½¬æ¢ç³»åˆ—æ–¹æ³•, <strong>swapcase</strong>æ–¹æ³•æ˜¯å°†å­—ç¬¦ä¸²ä¸­çš„å¤§å°å†™ç›¸äº’è½¬æ¢ã€‚è€Œ<strong>capitalize</strong>æ–¹æ³•åˆ™æ˜¯å°†å­—ç¬¦ä¸²çš„é¦–ä¸ªå­—ç¬¦å¤§å†™ï¼Œå…¶ä½™çš„å‡æ”¹ä¸ºå°å†™    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#text transform</span></span><br><span class="line">str = <span class="string">&quot;Hello RUBY&quot;</span></span><br><span class="line">p str.upcase <span class="comment">#=&gt; &quot;HELLO RUBY&quot;</span></span><br><span class="line">p str.downcase<span class="comment">#=&gt; &quot;hello ruby&quot;</span></span><br><span class="line">p str.swapcase          <span class="comment">#=&gt; &quot;hELLO ruby&quot;</span></span><br><span class="line">p str.capitalize<span class="comment">#=&gt; &quot;Hello ruby&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(14)</title>
      <link href="/2015/11/12/ruby-practice-14/"/>
      <url>/2015/11/12/ruby-practice-14/</url>
      
        <content type="html"><![CDATA[<h4 id="å­—ç¬¦ä¸²çš„åˆ›å»º"><a href="#å­—ç¬¦ä¸²çš„åˆ›å»º" class="headerlink" title="å­—ç¬¦ä¸²çš„åˆ›å»º"></a>å­—ç¬¦ä¸²çš„åˆ›å»º</h4><h5 id="æ™®é€šåˆ›å»º"><a href="#æ™®é€šåˆ›å»º" class="headerlink" title="æ™®é€šåˆ›å»º"></a>æ™®é€šåˆ›å»º</h5><p>Rubyä¸­ä½¿ç”¨**â€ â€œ<strong>æˆ–</strong>â€˜ â€˜<strong>ç¬¦å·æ¥åˆ›å»ºå­—ç¬¦ä¸²ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­ä¹Ÿå¯ä»¥åŒ…å«è¡¨è¾¾å¼</strong>#{}**ï¼Œè¿™ä¸ªè¡¨è¾¾å¼è¢«ç§°ä¹‹ä¸ºå†…åµŒè¡¨è¾¾å¼ã€‚å¦‚æžœå­—ç¬¦ä¸²ä¸­éœ€è¦åŒ…å«â€â€æˆ–è€…â€™â€™ç­‰å­—ç¬¦æ—¶ï¼Œåˆ™å¯ä»¥é€šè¿‡è½¬ä¹‰å­—ç¬¦\æ¥å®žçŽ°ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&quot;this is a string&quot;</span></span><br><span class="line">puts str</span><br><span class="line"></span><br><span class="line">str = <span class="string">&#x27;this is also a string&#x27;</span></span><br><span class="line">puts str</span><br><span class="line"></span><br><span class="line">args = <span class="string">&quot;string with argument&quot;</span></span><br><span class="line">puts <span class="string">&quot;this is a <span class="subst">#&#123;args&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">&quot;Hello &#x27;string&#x27;&quot;</span></span><br><span class="line">puts str</span><br><span class="line"></span><br><span class="line">str = <span class="string">&quot;Hello \&quot;string\&quot;&quot;</span></span><br><span class="line">puts str</span><br></pre></td></tr></table></figure><span id="more"></span><h5 id="Qæˆ–-qåˆ›å»º"><a href="#Qæˆ–-qåˆ›å»º" class="headerlink" title="%Qæˆ–%qåˆ›å»º"></a>%Qæˆ–%qåˆ›å»º</h5><p>é’ˆå¯¹å­—ç¬¦ä¸²ä¸­åŒ…å«â€â€æˆ–â€™â€™ç­‰å­—ç¬¦çš„ï¼Œå»ºè®®é‡‡ç”¨**%Q<strong>æˆ–è€…</strong>%q<strong>æ¥åˆ›å»ºå­—ç¬¦ä¸²ï¼Œè¿™æ ·æ›´åŠ æ¸…æ™°æ˜Žäº†ã€‚ä½¿ç”¨</strong>%Q<strong>ç›¸å½“äºŽ</strong>â€œ â€œ<strong>åˆ›å»ºå­—ç¬¦ä¸²ï¼Œ</strong>%q<strong>ç›¸å½“äºŽ</strong>â€˜ â€˜**åˆ›å»ºå­—ç¬¦.</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">puts <span class="string">%Q(this string created by %Q)</span></span><br><span class="line"></span><br><span class="line">puts <span class="string">%q(this string created by %q)</span></span><br><span class="line"></span><br><span class="line">puts <span class="string">%Q(contains &#x27;special&#x27; &quot;character&quot; directly)</span></span><br><span class="line"></span><br><span class="line">puts <span class="string">%q(contains &#x27;special&#x27; &quot;character&quot; directly)</span></span><br></pre></td></tr></table></figure><h5 id="Here-Documentåˆ›å»ºï¼Œ"><a href="#Here-Documentåˆ›å»ºï¼Œ" class="headerlink" title="Here Documentåˆ›å»ºï¼Œ"></a>Here Documentåˆ›å»ºï¼Œ</h5><p>å¯¹äºŽå­—ç¬¦ä¸²ä¸­åŒ…å«æ¢è¡Œç¬¦çš„å­—ç¬¦ä¸²ï¼Œä½¿ç”¨Here Documentè¯­æ³•æ¥åˆ›å»ºæžä¸ºæ–¹ä¾¿ã€‚Here Documentæ˜¯Unixä¸­ä½¿ç”¨Shellçš„ä¸€ç§è¯­æ³•ï¼Œé€šå¸¸ç”¨**&lt;&lt;**æ¥åˆ›å»ºå­—ç¬¦ä¸²ã€‚å…¶è¯­æ³•ç»“æž„å¦‚ä¸‹ï¼š</p><pre><code>&lt;&lt;&quot;ç»“æŸæ ‡è¯†ç¬¦&quot;å­—ç¬¦ä¸²å†…å®¹ç»“æŸæ ‡è¯†ç¬¦</code></pre><p><em>æ³¨æ„ï¼šç»“æŸæ ‡è¯†ç¬¦å¯ä»¥ä½¿ç”¨â€ â€œæˆ–â€™ â€˜æ¥å®šä¹‰ï¼Œä½¿ç”¨â€ â€œæ—¶ï¼Œå­—ç¬¦ä¸²å†…å¯ä»¥ä½¿ç”¨è½¬ä¹‰å­—ç¬¦å’Œå†…åµŒè¡¨è¾¾å¼ï¼Œè€Œâ€™ â€˜åˆ™ä¸ä¼šï¼Œåªä¼šåŽŸå°ä¸åŠ¨çš„æ˜¾ç¤ºæ‰€æœ‰å­—ç¬¦ã€‚</em>   </p><p>ä¸€èˆ¬ä½¿ç”¨*EOF(End of File)<em>æˆ–</em>EOB(End of Block)*ç­‰ä½œä¸ºç»“æŸæ ‡è¯†ç¬¦ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&lt;&lt;EOB</span></span><br><span class="line"><span class="string">the first string</span></span><br><span class="line"><span class="string">the second string in a new line</span></span><br><span class="line"><span class="string">ok, I also get the third string</span></span><br><span class="line"><span class="string">EOB</span></span><br><span class="line"></span><br><span class="line">print str<span class="comment">#=&gt;the string has three lines, just like defined.</span></span><br></pre></td></tr></table></figure><p>å¦‚æžœå­—ç¬¦ä¸²ä¸­å­˜åœ¨ç¼©è¿›ï¼Œå¯ä»¥ä½¿ç”¨**&lt;&lt;-<strong>æ¥æ›¿ä»£</strong>&lt;&lt;**ï¼Œè¿™æ ·å°†ä¼šä¿æŒå­—ç¬¦ä¸²å®šä¹‰ä¸­çš„ç¼©è¿›ã€‚</p><h5 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨ "></a>ä½¿ç”¨<code> </code></h5><p>é€šè¿‡ä½¿ç”¨<strong>`å‘½ä»¤`</strong>, å¯ä»¥åˆ›å»ºå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºå¹¶å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¯¹è±¡ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">`ls -l`</span></span><br><span class="line"></span><br><span class="line">puts str </span><br><span class="line"><span class="comment">#=&gt; </span></span><br><span class="line">total <span class="number">8</span></span><br><span class="line">-rw-r--r--  <span class="number">1</span> yushi  staff  <span class="number">634</span> <span class="title class_">Nov</span> <span class="number">16</span> <span class="number">17</span><span class="symbol">:</span><span class="number">12</span> string_create.rb</span><br></pre></td></tr></table></figure><h5 id="ä½¿ç”¨printfå’Œsprintf"><a href="#ä½¿ç”¨printfå’Œsprintf" class="headerlink" title="ä½¿ç”¨printfå’Œsprintf"></a>ä½¿ç”¨printfå’Œsprintf</h5><p><strong>printf</strong>ä¸Ž<strong>sprintf</strong>å‡æ˜¯å¯ä»¥è¾“å‡ºæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œä¸åŒä¹‹å¤„åœ¨äºŽprintfä¼šå°†å­—ç¬¦ä¸²ç›´æŽ¥è¾“å‡ºåœ¨æŽ§åˆ¶å°ä¸Šï¼Œè€Œsprintfåˆ™ä¼šå°†å­—ç¬¦ä¸²è½¬ä¸ºä¸ºå­—ç¬¦ä¸²å¯¹è±¡ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">number = <span class="number">123</span></span><br><span class="line">printf(<span class="string">&quot;%d\n&quot;</span>, number)<span class="comment">#=&gt; 123</span></span><br><span class="line">printf(<span class="string">&quot;%4d\n&quot;</span>, number)<span class="comment">#=&gt;  123</span></span><br><span class="line">printf(<span class="string">&quot;%04d\n&quot;</span>, number)    <span class="comment">#=&gt; 0123</span></span><br><span class="line">printf(<span class="string">&quot;%+d\n&quot;</span>, number)<span class="comment">#=&gt; +123</span></span><br><span class="line"></span><br><span class="line">name = <span class="string">&quot;Ruby&quot;</span></span><br><span class="line">p sprintf(<span class="string">&quot;Hello,%s&quot;</span>, name)<span class="comment">#=&gt; &quot;Hello,Ruby&quot;</span></span><br><span class="line">p sprintf(<span class="string">&quot;Hello,%8s&quot;</span>, name)<span class="comment">#=&gt; &quot;Hello,    Ruby&quot;</span></span><br><span class="line">p sprintf(<span class="string">&quot;Hello,%-8s&quot;</span>, name)<span class="comment">#=&gt; &quot;Hello,Ruby    &quot;</span></span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²é•¿åº¦"><a href="#å­—ç¬¦ä¸²é•¿åº¦" class="headerlink" title="å­—ç¬¦ä¸²é•¿åº¦"></a>å­—ç¬¦ä¸²é•¿åº¦</h4><p>ç”¨<strong>length</strong>æ–¹æ³•å’Œ<strong>size</strong>æ–¹æ³•èŽ·å–å­—ç¬¦ä¸²é•¿åº¦ã€‚<strong>bytesize</strong>æ–¹æ³•å¯ä»¥èŽ·å–å­—èŠ‚é•¿åº¦ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">str = <span class="string">&quot;This is a string&quot;</span></span><br><span class="line">str2 = <span class="string">&quot;å­—ç¬¦ä¸²&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#get the length of a string object</span></span><br><span class="line">puts str.length<span class="comment">#=&gt; 16</span></span><br><span class="line">puts str.size<span class="comment">#=&gt; 16</span></span><br><span class="line">puts str2.length<span class="comment">#=&gt; 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#get the bytesize of a string </span></span><br><span class="line">puts str.bytesize<span class="comment">#=&gt; 16</span></span><br><span class="line">puts str2.bytesize<span class="comment">#=&gt; 9</span></span><br></pre></td></tr></table></figure><p>åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºï¼Œå¯ç”¨**empty?**æ–¹æ³•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#judge the string if is empty</span></span><br><span class="line">puts <span class="string">&quot;&quot;</span>.empty?<span class="comment">#=&gt; true</span></span><br><span class="line">puts <span class="string">&quot;string&quot;</span>.empty?<span class="comment">#=&gt; false</span></span><br></pre></td></tr></table></figure><p><em>å­—ç¬¦ä¸²çš„ç´¢å¼•ä¸Žæ•°ç»„çš„ç´¢å¼•ç”¨æ³•ä¸€æ ·ï¼Œå¯å‚ç…§ä½¿ç”¨</em></p><h5 id="å­—ç¬¦ä¸²çš„è¿žæŽ¥"><a href="#å­—ç¬¦ä¸²çš„è¿žæŽ¥" class="headerlink" title="å­—ç¬¦ä¸²çš„è¿žæŽ¥"></a>å­—ç¬¦ä¸²çš„è¿žæŽ¥</h5><p>å­—ç¬¦ä¸²çš„è¿žæŽ¥æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š   </p><ul><li>å°†å­—ç¬¦ä¸²åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²   </li><li>æ‰©å±•åŽŸæœ‰å­—ç¬¦ä¸²</li></ul><p>ä½¿ç”¨**+**å¯ä»¥åˆå¹¶ä¸¤ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#using &#x27;+&#x27;, will create a new string object</span></span><br><span class="line">str1 = <span class="string">&quot;hello &quot;</span></span><br><span class="line">str2 = <span class="string">&quot;world&quot;</span></span><br><span class="line">str3 = str1</span><br><span class="line"></span><br><span class="line">puts str1 + str2 <span class="comment">#=&gt; hello world</span></span><br><span class="line">puts str1<span class="comment">#=&gt; hello</span></span><br><span class="line"></span><br><span class="line">puts str1 = str1 + str2 <span class="comment">#=&gt; hello world</span></span><br><span class="line">puts str1<span class="comment">#=&gt; hello world</span></span><br><span class="line">puts str3<span class="comment">#=&gt; hello</span></span><br></pre></td></tr></table></figure><p>å¦‚æžœåªæƒ³æ‰©å±•åŽŸæœ‰å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨**&lt;&lt;<strong>æˆ–</strong>concat**æ–¹æ³•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#using &#x27;&lt;&lt;&#x27;, will change the original string object</span></span><br><span class="line">str1 = <span class="string">&quot;hello &quot;</span></span><br><span class="line">str2 = <span class="string">&quot;world&quot;</span></span><br><span class="line">str3 = str1</span><br><span class="line"></span><br><span class="line">puts str1<span class="string">&lt;&lt;str2#=&gt; hello world</span></span><br><span class="line"><span class="string">puts str1#=&gt; hello world</span></span><br><span class="line"><span class="string">puts str3#=&gt; hello world</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#using &#x27;concat&#x27; method, also will change the original string object</span></span><br><span class="line"><span class="string">str1 = &quot;hello &quot;</span></span><br><span class="line"><span class="string">str2</span> = <span class="string">&quot;world&quot;</span></span><br><span class="line">str3 = str1</span><br><span class="line"></span><br><span class="line">puts str1.concat str2<span class="comment">#=&gt; hello world</span></span><br><span class="line">puts str1<span class="comment">#=&gt; hello world</span></span><br><span class="line">puts str3<span class="comment">#=&gt; hello world</span></span><br></pre></td></tr></table></figure><p><em>æ³¨æ„ï¼šä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨</em>*&lt;&lt;<strong>å’Œ</strong>concat*<em>æ–¹æ³•æ›´æœ‰æ•ˆçŽ‡ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ ¹æ®æƒ…å†µè€Œå®š</em></p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to make the octopress adapt OS X EI Capitan</title>
      <link href="/2015/11/11/how-to-make-the-octopress-adapt-os-x-ei-capitan/"/>
      <url>/2015/11/11/how-to-make-the-octopress-adapt-os-x-ei-capitan/</url>
      
        <content type="html"><![CDATA[<p>Octopress was broken after I upgraded Mac to OS X EI Capitan 10.11.1 in these days. The details of the problem is below.</p><p>Octopress is work well in Mac10.10. but when I upgraded to Mac10.11.1(OS X EI Capitan). And put <em>rake preview</em> in terminal to see the blog what looks like, got following error.</p><pre><code>Starting to watch source with Jekyll and Compass. Starting Rack on port 4000rake aborted!Errno::ENOENT: No such file or directory - compass/Users/user/git/octopress/Rakefile:85:in spawn/Users/user/git/octopress/Rakefile:85:in block in &lt;top (required)&gt;Tasks: TOP =&gt; preview(See full trace by running task with --trace)</code></pre><span id="more"></span><p>Why we get this error, this error caused by rake command, so that means maybe it is ruby version problem. letâ€™s take a look it.</p><pre><code>~-&gt; $ ruby -v~-&gt; ruby 2.0.0p645 (2015-04-13 revision 50299) [universal.x86_64-darwin15]</code></pre><p>The ruby newest version is 2.2.3. Ok, letâ€™s upgrade it. There are two ways to do it.</p><h4 id="Using-rbenv"><a href="#Using-rbenv" class="headerlink" title="Using rbenv"></a>Using rbenv</h4><p>If you donâ€™t have rbenv in your local machine. You need to install it firstly.<br>1.Go to <a href="https://github.com/sstephenson/rbenv">https://github.com/sstephenson/rbenv</a> to get it.<br>2.install ruby-2.2.3</p><pre><code>rbenv install 2.2.3</code></pre><p>3.In the root of your octopress blog, put below commands</p><pre><code>rbenv local 2.2.3gem install bundlerbundle install</code></pre><h4 id="Using-RVM"><a href="#Using-RVM" class="headerlink" title="Using RVM"></a>Using RVM</h4><p>1.Clear git cache</p><pre><code>rm -rf /usr/local/.git</code></pre><p>2.Install RVM</p><pre><code>curl -L https://get.rvm.io | bash -s stable --ruby</code></pre><p>3.Install Ruby 2.2.3</p><pre><code>rvm install ruby-2.2.3rvm use 2.2.3rvm rubygems latest</code></pre><p>After these steps, make sure youâ€™re using Ruby 2.2.3<br>4.Go to the root of the your octopress blog</p><pre><code>gem install bundlerbundle install</code></pre><p>Both ways can bring octopress back.</p><p><em>Reference: <a href="https://github.com/imathis/octopress/issues/1749">https://github.com/imathis/octopress/issues/1749</a></em></p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tool </tag>
            
            <tag> Ruby </tag>
            
            <tag> MacOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(13)</title>
      <link href="/2015/10/26/ruby-practice-13/"/>
      <url>/2015/10/26/ruby-practice-13/</url>
      
        <content type="html"><![CDATA[<h4 id="æ›¿æ¢æ•°ç»„å†…çš„å…ƒç´ "><a href="#æ›¿æ¢æ•°ç»„å†…çš„å…ƒç´ " class="headerlink" title="æ›¿æ¢æ•°ç»„å†…çš„å…ƒç´ "></a>æ›¿æ¢æ•°ç»„å†…çš„å…ƒç´ </h4><p>æ ¹æ®æŒ‡å®šè§„åˆ™æ›¿æ¢æ•°ç»„ä¸­çš„å…ƒç´ ï¼ŒRubyä¹Ÿæä¾›äº†ä»¥ä¸‹æ–¹æ³•:</p><p>ary.<strong>collect</strong> { |item| â€¦}<br>ary.<strong>collect!</strong> { |item| â€¦}<br>ary.<strong>map</strong> { |item| â€¦}<br>ary.<strong>map!</strong> { |item| â€¦}   </p><p>å°†æ•°ç»„aryä¸­çš„å„å…ƒç´ itemä¼ é€’ç»™å—åšå¤„ç†ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary1 = ary.collect <span class="keyword">do</span> |<span class="params">item</span>|</span><br><span class="line">    item*<span class="number">2</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p ary1<span class="comment">#=&gt; [ 2, 4, 6]</span></span><br><span class="line"></span><br><span class="line">ary2 = ary.map <span class="keyword">do</span> |<span class="params">item</span>|</span><br><span class="line">    <span class="keyword">if</span> item % <span class="number">2</span> == <span class="number">0</span></span><br><span class="line">        <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p ary2<span class="comment">#=&gt; [1, 0, 1]</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>ary.<strong>fill</strong>(value)<br>ary.<strong>fill</strong>(value, begin)<br>ary.<strong>fill</strong>(value, begin, len)<br>ary.<strong>fill</strong>(vlaue, n..m)<br>å°†æ•°ç»„aryçš„å…ƒç´ æ›¿æ¢ä¸ºvalueã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">p [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">0</span>)<span class="comment">#=&gt; [0, 0, 0]</span></span><br><span class="line">p [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">0</span>, <span class="number">1</span>)<span class="comment">#=&gt; [1, 0, 0]</span></span><br><span class="line">p [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>)<span class="comment">#=&gt; [0, 0 ,3]</span></span><br><span class="line">p [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].fill(<span class="number">0</span>, <span class="number">1</span>..<span class="number">2</span>)<span class="comment">#=&gt; [1, 0, 0]</span></span><br><span class="line"></span><br><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary.fill(<span class="number">0</span>)</span><br><span class="line">p ary<span class="comment">#=&gt; [0, 0, 0]</span></span><br></pre></td></tr></table></figure><p>*æ³¨æ„ï¼Œæ­¤æ–¹æ³•ä¼šä¿®æ”¹åŽŸå¯¹è±¡çš„å€¼ã€‚å³ä¸ºç ´åæ–¹æ³•ã€‚</p><p>ary.<strong>flatten</strong><br>ary.<strong>flatten</strong><br>å¹³å¦åŒ–æ•°ç»„aryï¼Œæ‰€è°“å¹³å¦åŒ–æ˜¯æŒ‡å±•å¼€åµŒå¥—æ•°ç»„å˜ä¸ºä¸€ä¸ªå¤§æ•°ç»„ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>]]]</span><br><span class="line">p ary.flatten  <span class="comment">#=&gt; [1, 2, 3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure><p>ary.<strong>reverse</strong><br>ary.<strong>reverse!</strong><br>åè½¬æ•°ç»„aryçš„å…ƒç´ é¡ºåº</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">p ary.reverse<span class="comment">#=&gt; [3, 2, 1]</span></span><br></pre></td></tr></table></figure><p>ary.<strong>sort</strong><br>ary.<strong>sort!</strong><br>ary.<strong>sort</strong>{|i, j| â€¦ }<br>ary.<strong>sort!</strong>{|i, j| â€¦}<br>ary.<strong>sort_by</strong> {|i| â€¦}   </p><p>å¯¹æ•°ç»„aryä¸­è¿›è¡ŒæŽ’åºï¼ŒæŽ’åºæ–¹æ³•å¯ä»¥ç”±å—æŒ‡å®šã€‚æ²¡æœ‰å—æ—¶ï¼Œä½¿ç”¨*&lt;&#x3D;&gt;*è¿ç®—ç¬¦æ¯”è¾ƒã€‚å…¶ä¸­<strong>sort_by</strong>æ–¹æ³•ä¸­æŽ’åºæ˜¯æ ¹æ®å—çš„è¿è¡Œç»“æžœæ¥å¯¹æ•°ç»„çš„æ‰€æœ‰å…ƒç´ è¿›è¡ŒæŽ’åºã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">4</span>, <span class="number">9</span>, <span class="number">5</span>]</span><br><span class="line">p ary.sort<span class="comment">#=&gt; [4, 5, 9]</span></span><br><span class="line">ary.sort! &#123; |<span class="params">i, j</span>|</span><br><span class="line">i % <span class="number">3</span> &lt;=&gt; j % <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line">p ary <span class="comment">#=&gt; [9, 4, 5]</span></span><br><span class="line"></span><br><span class="line">p [<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">1</span>].sort_by &#123; |<span class="params">i</span>| -i &#125;  <span class="comment">#=&gt; [4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure><h4 id="æ•°ç»„çš„è¿­ä»£"><a href="#æ•°ç»„çš„è¿­ä»£" class="headerlink" title="æ•°ç»„çš„è¿­ä»£"></a>æ•°ç»„çš„è¿­ä»£</h4><p><strong>each</strong>æ–¹æ³•å¹¶ä¸çŸ¥é“å…ƒç´ çš„ç´¢å¼•å€¼ã€‚å½“éœ€è¦æŒ‡å®šç´¢å¼•å€¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<strong>each_with_index</strong>æ–¹æ³•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">23</span>, <span class="number">54</span>, <span class="number">14</span>]</span><br><span class="line">ary.each &#123; |<span class="params">item</span>| print <span class="string">&quot;<span class="subst">#&#123;item&#125;</span> &quot;</span> &#125;<span class="comment">#=&gt; 23 54 14</span></span><br><span class="line"></span><br><span class="line">ary.each_with_index <span class="keyword">do</span> |<span class="params">item, index</span>|</span><br><span class="line">print <span class="string">&quot;The &quot;</span>, index+<span class="number">1</span>, <span class="string">&quot; element is :&quot;</span>, item, <span class="string">&quot;\n&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>å¦‚æžœæ•°ç»„å†…å„å…ƒç´ å…¨éƒ¨å¤„ç†å®Œæ¯•åŽè¯¥æ•°ç»„å°±ä¸éœ€è¦äº†ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡é€ä¸ªåˆ é™¤æ•°ç»„å…ƒç´ ä½¿æ•°ç»„å˜ç©ºè¿™æ ·çš„æ‰‹æ®µæ¥å®žçŽ°å¾ªçŽ¯ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> item = ary.pop</span><br><span class="line"><span class="comment">## the handle of the item</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h4 id="å¤šç»´æ•°ç»„"><a href="#å¤šç»´æ•°ç»„" class="headerlink" title="å¤šç»´æ•°ç»„"></a>å¤šç»´æ•°ç»„</h4><p>æ•°ç»„ä¸­çš„å„ä¸ªå…ƒç´ ä¹Ÿå¯ä»¥æ˜¯æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„çš„æ•°ç»„ã€‚å¯ä»¥ç”¨å®ƒæ¥è¡¨ç¤ºçŸ©é˜µã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ary = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>], [<span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line"></span><br><span class="line">p ary[<span class="number">1</span>][<span class="number">1</span>]<span class="comment">#=&gt; 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3ä¸ªå…ƒç´ å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªæ•°ç»„å¯¹è±¡</span></span><br><span class="line">ary = <span class="title class_">Array</span>.new(<span class="number">3</span>, [<span class="number">0</span>, <span class="number">0</span>])</span><br><span class="line">ary[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">p ary  <span class="comment">#=&gt; [[0, 1], [0, 1], [0, 1]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é¿å…å¼•ç”¨åŒä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œåœ¨å—ä¸­ï¼Œé‡å¤åˆ›å»ºæ–°çš„å¯¹è±¡</span></span><br><span class="line">ary = <span class="title class_">Array</span>.new(<span class="number">3</span>) <span class="keyword">do</span></span><br><span class="line">[<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">ary[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">p ary  <span class="comment">#=&gt; [[0, 1], [0, 0], [0, 0]]</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨*Array.new(length, array)*åˆ›å»ºäºŒç»´æ•°ç»„ã€‚åˆ›å»ºçš„æ‰€æœ‰å…ƒç´ å¼•ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡arrayï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œå…¶ä»–å…ƒç´ ä¹Ÿä¼šå˜åŒ–ã€‚å¦‚ä¸Šç¤ºä¾‹ä»£ç ã€‚å¦‚ä½•é¿å…ï¼Ÿå¯åœ¨åˆ›å»ºæ•°ç»„çš„å—ä¸­é‡å¤åˆ›å»ºæ–°å¯¹è±¡ã€‚</p><p>ary.<strong>zip</strong>(ary1, ary2, â€¦)<br><strong>zip</strong>æ–¹æ³•ä¼šå°†æŽ¥æ”¶å™¨å’Œå‚æ•°ä¼ æ¥çš„æ•°ç»„å…ƒç´ é€ä¸€å–å‡ºï¼Œè€Œä¸”æ¯æ¬¡éƒ½ä¼šå¯åŠ¨å—ã€‚å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ary1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary2 = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>]</span><br><span class="line">ary3 = [<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>]</span><br><span class="line"></span><br><span class="line">result = []</span><br><span class="line">ary1.zip(ary2, ary3) <span class="keyword">do</span> |<span class="params">a, b, c</span>|</span><br><span class="line">result &lt;&lt; a + b + c</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p result<span class="comment">#=&gt; [111, 222, 333]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(12)</title>
      <link href="/2015/10/13/ruby-practice-12/"/>
      <url>/2015/10/13/ruby-practice-12/</url>
      
        <content type="html"><![CDATA[<p>æ•°ç»„(<strong>Array</strong>)ä¹Ÿæ˜¯Rubyä¸­è¡¨çŽ°ä¸€ç»„æ•°æ®çš„å¯¹è±¡</p><h4 id="æ•°ç»„çš„åˆ›å»º"><a href="#æ•°ç»„çš„åˆ›å»º" class="headerlink" title="æ•°ç»„çš„åˆ›å»º"></a>æ•°ç»„çš„åˆ›å»º</h4><p>åˆ›å»ºæ–¹å¼æœ‰ä¸€ä¸‹å‡ ç§ï¼š<br>1.ä½¿ç”¨<strong>Array.new</strong><br>Array#newæ–¹æ³•å¯å¸¦ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œç¬¬1ä¸ªå‚æ•°è¡¨ç¤ºæ•°ç»„ä¸­å¾—ä¸ªæ•°ï¼Œç¬¬2ä¸ªå‚æ•°è¡¨ç¤ºæ¯ä¸ªå…ƒç´ åˆå§‹å€¼ã€‚å¦‚æžœæ²¡æœ‰æŒ‡å®šç¬¬2ä¸ªå‚æ•°ï¼Œå…¶å…ƒç´ çš„åˆå§‹å€¼ä¸º<strong>nil</strong>ã€‚å¦‚æžœä¸å¸¦å‚æ•°åˆ™ä¼šåˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸å¸¦å‚æ•°c</span></span><br><span class="line">ary = <span class="title class_">Array</span>.new</span><br><span class="line">p ary<span class="comment">#=&gt; []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¸¦1ä¸ªå‚æ•°</span></span><br><span class="line">ary = <span class="title class_">Array</span>.new(<span class="number">3</span>)</span><br><span class="line">p ary<span class="comment">#=&gt; [nil, nil, nil]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¸¦2ä¸ªå‚æ•°</span></span><br><span class="line">ary = <span class="title class_">Array</span>.new(<span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">p ary<span class="comment">#=&gt; [5, 5, 5]</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>2.ä½¿ç”¨**%w<strong>ä¸Ž</strong>%i**<br><strong>%w</strong>ç”¨äºŽåˆ›å»ºä¸åŒ…å«ç©ºç™½çš„å­—ç¬¦ä¸²æ•°ç»„, ä½¿ç”¨æ­¤æ–¹æ³•åˆ›å»ºå­—ç¬¦ä¸²æ•°ç»„æ›´åŠ ç®€æ´ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">%w(This is ruby)</span><span class="comment">#=&gt; [&quot;This&quot;, &quot;is&quot;, &quot;ruby&quot;]</span></span><br></pre></td></tr></table></figure><p><strong>%i</strong>ç”¨äºŽåˆ›å»ºç¬¦å·(Symbol)æ•°ç»„ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%i(<span class="title class_">This</span> is ruby) <span class="comment">#=&gt; [:This, :is, :ruby]</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨**%w<strong>å’Œ</strong>%i<strong>åˆ›å»ºæ•°ç»„æ—¶ç”¨åˆ°äº†(). å…¶å®žè¿˜å¯ä»¥ç”¨å¾ˆå¤šå­—ç¬¦æ¥æ›¿ä»£ï¼Œä¸è¿‡å»ºè®®ä½¿ç”¨</strong>()<strong>,</strong>&lt;&gt;<strong>,</strong>||**.</p><p>3.ä½¿ç”¨<strong>to_a</strong>æ–¹æ³•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hash=&#123;<span class="symbol">name:</span> <span class="string">&quot;yu&quot;</span>, <span class="symbol">gender:</span> <span class="string">&quot;male&quot;</span>&#125;<span class="comment">#=&gt; &#123;:name=&gt;&quot;yu&quot;, :gender=&gt;&quot;male&quot;&#125;</span></span><br><span class="line">hash.to_a<span class="comment">#=&gt; [[:name, &quot;yu&quot;], [:gender, &quot;male&quot;]]</span></span><br></pre></td></tr></table></figure><p>4.ä½¿ç”¨<strong>split</strong>æ–¹æ³•<br>å¯¹é€—å·æˆ–ç©ºç™½å­—ç¬¦é—´éš”çš„å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨splitæ–¹æ³•æ¥åˆ›å»ºæ•°ç»„</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;this is ruby&quot;</span>.split()<span class="comment">#=&gt; [&quot;this&quot;, &quot;is&quot;, &quot;ruby&quot;]</span></span><br></pre></td></tr></table></figure><h4 id="èŽ·å–å…ƒç´ "><a href="#èŽ·å–å…ƒç´ " class="headerlink" title="èŽ·å–å…ƒç´ "></a>èŽ·å–å…ƒç´ </h4><p>èŽ·å–å…ƒç´ çš„æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š   </p><p>1.ä½¿ç”¨**[]**<br>(a) <strong>ary[n]</strong>, èŽ·å–ç´¢å¼•å€¼ä¸ºnçš„å…ƒç´ ï¼Œå½“ç´¢å¼•å€¼ä¸ºè´Ÿæ•°æ—¶ï¼Œä»Žæ•°ç»„çš„æœ«å°¾å¼€å§‹èŽ·å–å…ƒç´ ã€‚å¦‚æžœæŒ‡å®šçš„ç´¢å¼•å€¼å¤§äºŽå…ƒç´ ä¸ªæ•°åˆ™è¿”å›žnilã€‚ </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">ary[<span class="number">1</span>]<span class="comment">#=&gt; 2</span></span><br><span class="line">ary[-<span class="number">1</span>]<span class="comment">#=&gt; 5</span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(b) **ary[n..m]**, èŽ·å–ä»Ža[n]åˆ°a[m]çš„å…ƒç´ ï¼Œå¹¶è¿”å›žæ–°çš„æ•°ç»„ã€‚å¦‚æžœmå¤§äºŽæ•°ç»„çš„é•¿åº¦ï¼Œè¿”å›žçš„ç»“æžœä¸ŽæŒ‡å®šæ•°ç»„æœ€åŽä¸€ä¸ªå…ƒç´ æ˜¯ä¸€æ ·çš„ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span> ruby</span><br><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">ary[<span class="number">1</span>..<span class="number">3</span>]<span class="comment">#=&gt; [2, 3, 4]</span></span><br><span class="line">ary[<span class="number">1</span>..<span class="number">7</span>]<span class="comment">#=&gt; [2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><p>(c) <strong>ary[nâ€¦m]</strong>, èŽ·å–ä»Ža[n]åˆ°a[m-1]çš„å…ƒç´ ï¼Œå¹¶è¿”å›žæ–°æ•°ç»„    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">ary[<span class="number">1</span>...<span class="number">3</span>]<span class="comment">#=&gt; [2, 3]</span></span><br><span class="line">ary[<span class="number">1</span>...<span class="number">7</span>]<span class="comment">#=&gt; [2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><p>(d) <strong>ary[n, len]</strong>, èŽ·å–ä»Ža[n]å¼€å§‹ä¹‹åŽçš„lenä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›žæ–°æ•°ç»„. å¦‚æžœlençš„é•¿åº¦å¤§äºŽä»Žnå¼€å§‹åŽæ•°ç»„çš„å‰©ä½™é•¿åº¦ï¼Œåˆ™è¿”å›žçš„ç»“æžœä¸ŽæŒ‡å®šæ•°ç»„æœ€åŽä¸€ä¸ªå…ƒç´ æ˜¯ä¸€æ ·çš„ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">ary[<span class="number">1</span>, <span class="number">3</span>]<span class="comment">#=&gt; [2, 3, 4]</span></span><br><span class="line">ary[<span class="number">2</span>, <span class="number">7</span>]<span class="comment">#=&gt; [3, 4, 5]</span></span><br></pre></td></tr></table></figure><p>2.ä½¿ç”¨<strong>at</strong>æ–¹æ³•<br>ary.at(n)ä¸Žary[n]ç­‰ä»·    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">ary.at(<span class="number">1</span>)<span class="comment">#=&gt; 2</span></span><br><span class="line">ary[<span class="number">1</span>]<span class="comment">#=&gt; 2</span></span><br></pre></td></tr></table></figure><p>3.ä½¿ç”¨<strong>slice</strong>æ–¹æ³•<br>ary.slice(n..m)ä¸Žary[n..m]ç­‰ä»·ï¼Œary.slice(nâ€¦m)ä¸Žary[nâ€¦m]ç­‰ä»·ï¼Œary.slice(n, len)ä¸Žary[n, len]ç­‰ä»·   </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">ary.slice(<span class="number">1</span>..<span class="number">3</span>)<span class="comment">#=&gt; [2, 3, 4]</span></span><br><span class="line">ary.slice(<span class="number">1</span>...<span class="number">3</span>)<span class="comment">#=&gt; [2, 3]</span></span><br><span class="line">ary.slice(<span class="number">1</span>, <span class="number">3</span>)<span class="comment">#=&gt; [2, 3, 4]</span></span><br></pre></td></tr></table></figure><p>4.ä½¿ç”¨<strong>values_at</strong>æ–¹æ³•<br>å¯ä»¥é€šè¿‡æ­¤æ–¹æ³•æ¥èŽ·å–å¤šä¸ªç´¢å¼•çš„å…ƒç´ , å…¶ç”¨æ³•å¦‚ä¸‹</p><pre><code>ary.values_at(n1, n2, ...)</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">ary.values_at(<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>)<span class="comment">#=&gt; [1, 3, 5]</span></span><br><span class="line">ary.values_at(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>)<span class="comment">#=&gt; [2, 4, nil]</span></span><br></pre></td></tr></table></figure><h4 id="å…ƒç´ èµ‹å€¼"><a href="#å…ƒç´ èµ‹å€¼" class="headerlink" title="å…ƒç´ èµ‹å€¼"></a>å…ƒç´ èµ‹å€¼</h4><p>ä½¿ç”¨[],at,sliceæ–¹æ³•è¿˜å¯ä»¥ç»™å…ƒç´ èµ‹å€¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">ary[<span class="number">0</span>] = <span class="string">&quot;a&quot;</span><span class="comment">#=&gt; [&quot;a&quot;, 2, 3, 4, 5]</span></span><br><span class="line">ary[<span class="number">1</span>...<span class="number">3</span>] = [<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>]<span class="comment">#=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, 4, 5]</span></span><br><span class="line">ary[<span class="number">3</span>..<span class="number">3</span>] = <span class="string">&quot;d&quot;</span><span class="comment">#=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, 5]</span></span><br><span class="line">ary[<span class="number">4</span>, <span class="number">1</span>] = <span class="string">&quot;e&quot;</span><span class="comment">#=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]</span></span><br></pre></td></tr></table></figure><h4 id="å…ƒç´ æ’å…¥"><a href="#å…ƒç´ æ’å…¥" class="headerlink" title="å…ƒç´ æ’å…¥"></a>å…ƒç´ æ’å…¥</h4><p>æ’å…¥å…ƒç´ å…¶å®žå°±æ˜¯å¯¹0ä¸ªå…ƒç´ è¿›è¡Œèµ‹å€¼ï¼Œå› æ­¤æŒ‡å®š[n, 0]åŽï¼Œå°±ä¼šåœ¨ç´¢å¼•å€¼ä¸ºnçš„å…ƒç´ å‰æ’å…¥æ–°å…ƒç´ ã€‚   </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">ary[<span class="number">2</span>, <span class="number">0</span>] = <span class="number">10</span><span class="comment">#=&gt; [1, 2, 10, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><h4 id="æ•°ç»„ä½œä¸ºé›†åˆä½¿ç”¨"><a href="#æ•°ç»„ä½œä¸ºé›†åˆä½¿ç”¨" class="headerlink" title="æ•°ç»„ä½œä¸ºé›†åˆä½¿ç”¨"></a>æ•°ç»„ä½œä¸ºé›†åˆä½¿ç”¨</h4><p>äº¤é›†ï¼šå–å‡ºåŒæ—¶å±žäºŽä¸¤ä¸ªé›†åˆçš„å…ƒç´ ï¼Œå¹¶åˆ›å»ºæ–°çš„é›†åˆ</p><pre><code>ary = ary1 &amp; ary2</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ary1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary2 = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">ary = ary1 &amp; ary2<span class="comment">#=&gt; [1, 3]</span></span><br></pre></td></tr></table></figure><p>å¹¶é›†ï¼šå–å‡ºä¸¤ä¸ªé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå¹¶åˆ›å»ºæ–°çš„é›†åˆ</p><pre><code>ary = ary1 | ary2</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ary1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary2 = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">ary = ary1 |<span class="params"> ary2#=&gt; [1, 2, 3, 5]</span></span><br></pre></td></tr></table></figure><p>é›†åˆçš„å·®ï¼šæŠŠæŸä¸ªé›†åˆä¸­å±žäºŽå¦å¤–ä¸€ä¸ªé›†åˆçš„å…ƒç´ åˆ é™¤ï¼Œå¹¶åˆ›å»ºæ–°çš„é›†åˆ</p><pre><code>ary = ary1 - ary2</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ary1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary2 = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">ary = ary1 - ary2<span class="comment">#=&gt; [2]</span></span><br></pre></td></tr></table></figure><p><em>æ³¨æ„ï¼šè¿žæŽ¥æ•°ç»„é™¤äº†å¯ä»¥ä½¿ç”¨</em>*|<strong>å¤–è¿˜å¯ä»¥ä½¿ç”¨</strong>+*<em>ã€‚ä½†æ˜¯è¿™ä¸¤ç§æ–¹æ³•è¿”å›žçš„ç»“æžœæ˜¯ä¸ä¸€æ ·çš„ã€‚å³ä½¿ç”¨|ç›¸åŒçš„å…ƒç´ åªæœ‰ä¸€ä¸ªï¼Œä½¿ç”¨+ç›¸åŒçš„å…ƒç´ ä¼šé‡å¤å­˜åœ¨</em></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ary1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary2 = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">ary = ary1 |<span class="params"> ary2#=&gt; [1, 2, 3, 5]</span></span><br><span class="line"><span class="params">ary = ary1 + ary2#=&gt; [1, 2, 3, 1, 3, 5]</span></span><br></pre></td></tr></table></figure><h4 id="æ•°ç»„ä½œä¸ºé˜Ÿåˆ—å’Œæ ˆ"><a href="#æ•°ç»„ä½œä¸ºé˜Ÿåˆ—å’Œæ ˆ" class="headerlink" title="æ•°ç»„ä½œä¸ºé˜Ÿåˆ—å’Œæ ˆ"></a>æ•°ç»„ä½œä¸ºé˜Ÿåˆ—å’Œæ ˆ</h4><table><thead><tr><th></th><th align="right">å¯¹æ•°ç»„å¼€å§‹å…ƒç´ çš„æ“ä½œ</th><th>å¯¹æ•°ç»„æœ«å°¾å…ƒç´ çš„æ“ä½œ</th></tr></thead><tbody><tr><td>è¿½åŠ å…ƒç´ </td><td align="right">unshift</td><td>push</td></tr><tr><td>åˆ é™¤å…ƒç´ </td><td align="right">shift</td><td>pop</td></tr><tr><td>å¼•ç”¨å…ƒç´ </td><td align="right">first</td><td>last</td></tr></tbody></table><p>ä½¿ç”¨<strong>push</strong>æ–¹æ³•å’Œ<strong>shift</strong>æ–¹æ³•å¯ä»¥å®žçŽ°é˜Ÿåˆ—ã€‚ä½¿ç”¨<strong>push</strong>æ–¹æ³•å’Œ<strong>pop</strong>æ–¹æ³•å¯ä»¥å®žçŽ°æ ˆã€‚</p><p><strong>shift</strong>æ–¹æ³•å’Œ<strong>pop</strong>æ–¹æ³•ä¸åªæ˜¯èŽ·å–æ•°ç»„å…ƒç´ ï¼Œè¿˜ä¼šæŠŠè¯¥å…ƒç´ ä»Žæ•°ç»„ä¸­åˆ é™¤ã€‚å¦‚æžœåªæ˜¯æƒ³å•çº¯åœ°å¼•ç”¨å…ƒç´ ï¼Œåº”è¯¥æ˜¯ç”¨<br><strong>first</strong>å’Œ<strong>last</strong>æ–¹æ³•ã€‚</p><p>1.ary.<strong>unshift</strong>(item)<br>å°†itemå…ƒç´ æ·»åŠ åˆ°æ•°ç»„çš„å¼€å¤´   </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary.unshift(<span class="number">0</span>)<span class="comment">#=&gt; [0, 1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>2.ary.<strong>push</strong>(item), ary <strong>&lt;&lt;</strong> item<br><strong>&lt;&lt;<strong>ä¸Ž</strong>push</strong>æ˜¯ç­‰ä»·çš„æ–¹æ³•ï¼Œåœ¨æ•°ç»„çš„æœ«å°¾æ·»åŠ æ–°å…ƒç´ item   </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary.push(<span class="number">4</span>)<span class="comment">#=&gt; [1, 2, 3, 4]</span></span><br><span class="line">ary &lt;&lt; <span class="number">5</span><span class="comment">#=&gt; [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><p>3.ary1.<strong>concat</strong>(ary2)<br>è¿žæŽ¥æ•°ç»„ary1å’Œæ•°ç»„ary2. concatæ˜¯å…·æœ‰ç ´åæ€§çš„æ–¹æ³•ã€‚ä¼šå°†ary2çš„å…ƒç´ ç›´æŽ¥æ’å…¥åˆ°ary1æ•°ç»„çš„åŽé¢ã€‚**+**ä¹Ÿæ˜¯è¿žæŽ¥ä¸¤ä¸ªæ•°ç»„çš„æ–¹æ³•ï¼Œä½†æ˜¯ä¸å…·ç ´åæ€§ï¼Œä¼šç”Ÿæˆæ–°çš„æ•°ç»„ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ary1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary2 = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">ary1.concat(ary2)</span><br><span class="line">p ary1<span class="comment">#=&gt; [1, 2, 3, 2, 3, 4]</span></span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼šèƒ½å¤Ÿæ”¹å˜å¯¹è±¡å€¼çš„æ–¹æ³•ç§°ä¸ºå…·æœ‰ç ´åæ€§çš„æ–¹æ³•ï¼Œæ¯”å¦‚popæ–¹æ³•ã€shiftæ–¹æ³•ç­‰ã€‚æœ‰äº›æ–¹æ³•åŽé¢åŠ ä¸Š</em>*!*<em>çš„ä¹Ÿæ˜¯ç ´åæ€§æ–¹æ³•</em></p><p>4.ary.<strong>compact</strong> ä¸Žary.<strong>compact!</strong><br>ä»Žæ•°ç»„aryä¸­åˆ é™¤æ‰€æœ‰nilå…ƒç´      </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="literal">nil</span>, <span class="number">1</span>, <span class="literal">nil</span>, <span class="number">2</span>]</span><br><span class="line">ary.compact<span class="comment">#=&gt; [1, 2]</span></span><br></pre></td></tr></table></figure><p>5.ary.<strong>delete</strong>(item)å’Œary.<strong>delete_at</strong>(n)<br>ä»Žæ•°ç»„aä¸­åˆ é™¤itemå…ƒç´ ã€‚ ç¬¬2ä¸ªæ–¹æ³•åˆ é™¤ary[n]å…ƒç´ ã€‚   </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary.delete(<span class="number">2</span>)</span><br><span class="line">p ary<span class="comment">#=&gt; [1, 3]</span></span><br><span class="line">ary.delete_at(<span class="number">0</span>)</span><br><span class="line">p ary<span class="comment">#=&gt; [3]</span></span><br></pre></td></tr></table></figure><p>6.ary.<strong>delete_if</strong>{ |item| â€¦}<br>ary.<strong>reject</strong>{ |item| â€¦}<br>ary.<strong>reject!</strong>{ |item| ..}    </p><p>åˆ¤æ–­æ•°ç»„aryä¸­çš„å„å…ƒç´ itemï¼Œå¦‚æžœå—çš„æ‰§è¡Œç»“æžœä¸ºçœŸï¼Œåˆ™ä»Žæ•°ç»„aryä¸­åˆ é™¤itemã€‚<strong>delete_if</strong>å’Œ**reject!**æ–¹æ³•éƒ½æ˜¯å…·æœ‰ç ´åæ€§çš„æ–¹æ³•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary.delete_if &#123; |<span class="params">item</span>| item &gt; <span class="number">2</span>&#125;</span><br><span class="line">p ary<span class="comment">#=&gt; [1, 2]</span></span><br><span class="line">ary.reject! &#123; |<span class="params">item</span>| item &lt; <span class="number">2</span>&#125;</span><br><span class="line">p ary<span class="comment">#=&gt; [2]</span></span><br></pre></td></tr></table></figure><p>7.ary.<strong>slice</strong>(n)<br>ary.<strong>slice</strong>(n..m)<br>ary.<strong>slice!</strong>(n, len)<br>åˆ é™¤æ•°ç»„aryä¸­æŒ‡å®šçš„éƒ¨åˆ†ï¼Œå¹¶è¿”å›žåˆ é™¤éƒ¨åˆ†çš„å€¼ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">p ary.slice!(<span class="number">4</span>)<span class="comment">#=&gt; 5</span></span><br><span class="line">p ary.slice!(<span class="number">2</span>..<span class="number">3</span>)<span class="comment">#=&gt; [3, 4]</span></span><br><span class="line">p ary.slice(<span class="number">1</span>, <span class="number">1</span>)<span class="comment">#=&gt; [2]</span></span><br></pre></td></tr></table></figure><p>8.ary.<strong>uniq</strong>, ary.**uniq!**åˆ é™¤æ•°ç»„aryä¸­é‡å¤çš„å…ƒç´ ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line">ary.uniq<span class="comment">#=&gt; [1, 2,3]</span></span><br></pre></td></tr></table></figure><p>9.ary.<strong>shift</strong>. åˆ é™¤æ•°ç»„aryå¼€å¤´çš„å…ƒç´ ï¼Œå¹¶è¿”å›žåˆ é™¤çš„å€¼ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]j</span><br><span class="line">ary.shift<span class="comment">#=&gt; 1</span></span><br><span class="line">p ary<span class="comment">#=&gt; [2, 3]</span></span><br></pre></td></tr></table></figure><p>10.ary.<strong>pop</strong>. åˆ é™¤æ•°ç»„aryæœ«å°¾çš„å…ƒç´ ï¼Œå¹¶è¿”å›žåˆ é™¤çš„å€¼ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">ary.pop<span class="comment">#=&gt; 3</span></span><br><span class="line">p ary<span class="comment">#=&gt; [1, 2]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(11)</title>
      <link href="/2015/09/28/ruby-practice-11/"/>
      <url>/2015/09/28/ruby-practice-11/</url>
      
        <content type="html"><![CDATA[<p>Rubyä¸­æ‰€æœ‰è¡¨çŽ°æ•°æ®çš„ç±»åž‹éƒ½ç§°ä¸ºæ•°å€¼ç±»ï¼Œä»–ä»¬éƒ½æ˜¯<strong>Numeric</strong>çš„å­ç±»ã€‚èµ·è¯¦å°½çš„ç±»ç»§æ‰¿ç»“æž„å¦‚ä¸‹ï¼š</p><p><img src="/assets/images/legacy/numeric-inheritance.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/numeric-inheritance.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="assets/images/legacy/numberic-inheritance.png"></p><span id="more"></span><p>Rubyä¸­ä¸€èˆ¬ç”¨åˆ°å¾—æ•´æ•°éƒ½æ˜¯åœ¨<strong>Fixnum</strong>ç±»èŒƒå›´å†…çš„ï¼Œå¦‚æžœè¶…è¿‡äº†Fixnumçš„èŒƒå›´ï¼ŒRubyä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢ä¸º<strong>Bignum</strong>ç±»ã€‚</p><p>æ­£å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒRubyå¯ä»¥å¤„ç†æœ‰ç†æ•°å’Œå¤æ•°ï¼Œæœ‰ç†æ•°ç”¨<strong>Rational</strong>ç±»è¡¨ç¤ºï¼Œå¤æ•°ç”¨<strong>Complex</strong>ç±»è¡¨ç¤ºã€‚å…¶å®šä¹‰å½¢å¼å¦‚ä¸‹ï¼š</p><p>1.Rationalå¯¹è±¡</p><pre><code>Rational(åˆ†å­ï¼Œåˆ†æ¯)</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="title class_">Rational</span>(<span class="number">1</span>, <span class="number">3</span>)<span class="comment">#=&gt; (1/3)</span></span><br><span class="line">a.to_f<span class="comment">#=&gt; 0.3333333</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡<em>Rational#to_f</em>æ–¹æ³•å¯å°†æœ‰ç†æ•°è½¬ä¸ºFloatå¯¹è±¡</p><p>2.Complexå¯¹è±¡</p><pre><code>Complex(å®žæ•°ï¼Œè™šæ•°)</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="title class_">Complex</span>(<span class="number">1</span>, <span class="number">2</span>)<span class="comment">#=&gt; (1+2i)</span></span><br></pre></td></tr></table></figure><p>å•çº¯çš„æ•°å­—ç½—åˆ—è¡¨ç¤º10è¿›åˆ¶æ•´æ•°ã€‚ä»¥0bå¼€å¤´çš„æ•°å€¼è¡¨ç¤º2è¿›åˆ¶æ•°ï¼Œä»¥0æˆ–è€…0oå¼€å¤´çš„æ•°å€¼è¡¨ç¤º8è¿›åˆ¶æ•°ï¼Œä»¥0då¼€å¤´çš„æ•°å€¼è¡¨ç¤º10è¿›åˆ¶æ•°ï¼Œä»¥0xå¼€å¤´çš„æ•°å€¼è¡¨ç¤º16è¿›åˆ¶æ•°ã€‚å­—é¢é‡ä¸­çš„_ä¼šè¢«è‡ªåŠ¨å¿½ç•¥ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">p <span class="number">123</span><span class="comment">#=&gt; 123</span></span><br><span class="line">p <span class="number">1_23</span><span class="comment">#=&gt; 123</span></span><br><span class="line">p <span class="number">0123</span> <span class="comment">#=&gt; 83</span></span><br><span class="line">p <span class="number">0o123</span><span class="comment">#=&gt; 83</span></span><br><span class="line">p <span class="number">0d123</span><span class="comment">#=&gt; 123</span></span><br><span class="line">p <span class="number">0x123</span><span class="comment">#=&gt; 291</span></span><br></pre></td></tr></table></figure><p>Integerå¯¹è±¡ä¸ŽFloatå¯¹è±¡çš„è®¡ç®—ç»“æžœä¸ºFloatå¯¹è±¡ã€‚</p><p>x.<strong>div</strong>(y)<br>è¿”å›žxé™¤ä»¥yåŽçš„å•†çš„æ•´æ•°</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p <span class="number">5</span>.div(<span class="number">2</span>)<span class="comment">#=&gt; 2</span></span><br><span class="line">p <span class="number">5</span>.div(<span class="number">2.2</span>)<span class="comment">#=&gt; 2</span></span><br></pre></td></tr></table></figure><p>x.<strong>quo</strong>(y)<br>è¿”å›žxé™¤ä»¥yåŽçš„å•†ï¼Œå¦‚æžœxã€yéƒ½æ˜¯æ•´æ•°åˆ™è¿”å›žRationalå¯¹è±¡</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p <span class="number">5</span>.quo(<span class="number">2</span>)<span class="comment">#=&gt; (5/2)</span></span><br><span class="line">p <span class="number">5</span>.quo(<span class="number">2.2</span>)<span class="comment">#=&gt; 2.27272727</span></span><br></pre></td></tr></table></figure><p>x.<strong>modulo</strong>(y)<br>è¿”å›žxé™¤ä»¥yåŽçš„ä½™æ•°ï¼Œä¸Ž<em>x % y</em>ç­‰ä»·</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p <span class="number">5</span>.modulo(<span class="number">2</span>)<span class="comment">#=&gt; 1</span></span><br><span class="line">p <span class="number">5</span> % <span class="number">2</span><span class="comment">#=&gt; 1</span></span><br></pre></td></tr></table></figure><p>x.<strong>divmod</strong>(y)<br>å°†xé™¤ä»¥yåŽçš„å•†å’Œä½™æ•°ä½œä¸ºæ•°ç»„è¿”å›ž,ä½™æ•°çš„ç¬¦å·ä¸Žyçš„ç¬¦å·ä¸€è‡´ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p <span class="number">5</span>.divmod(<span class="number">2</span>)<span class="comment">#=&gt; [2, 1]</span></span><br><span class="line">p -<span class="number">5</span>.divmod(<span class="number">2</span>)<span class="comment">#=&gt; [-3, 1]</span></span><br><span class="line">p <span class="number">5</span>.divmod(-<span class="number">2</span>)<span class="comment">#=&gt; [-3, -1]</span></span><br></pre></td></tr></table></figure><p>x.<strong>remainder</strong>(y)<br>è¿”å›žxé™¤ä»¥yçš„ä½™æ•°ï¼Œç»“æžœçš„ç¬¦å·ä¸Žxçš„ç¬¦å·ä¸€è‡´</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p <span class="number">5</span>.remainder(<span class="number">2</span>)<span class="comment">#=&gt; 1</span></span><br><span class="line">p <span class="number">5</span>.remainder(-<span class="number">2</span>)<span class="comment">#=&gt; 1</span></span><br><span class="line">p -<span class="number">5</span>.remainder(<span class="number">2</span>)<span class="comment">#=&gt; -1</span></span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼šå½“é™¤æ•°ä¸º0æ—¶ï¼ŒIntegerç±»ä¼šè¿”å›žé”™è¯¯ï¼Œè€ŒFloatç±»åˆ™ä¼šè¿”å›žInfinityï¼ˆæ— é™å¤§ï¼‰æˆ–è€…NaNï¼ˆNot a Numberï¼‰ã€‚</em></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p <span class="number">1</span> / <span class="number">0</span><span class="comment">#=&gt; ZeroDivisionError</span></span><br><span class="line">p <span class="number">1.0</span> / <span class="number">0</span> <span class="comment">#=&gt; Infinity</span></span><br><span class="line">p <span class="number">0</span> / <span class="number">0.0</span><span class="comment">#=&gt; NaN</span></span><br></pre></td></tr></table></figure><p>é’ˆå¯¹æ•°å€¼ç±»åž‹ï¼ŒRubyæä¾›<strong>Math</strong>æ¨¡å—å¢žå¼ºæ•°æ®çš„å¤„ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä¸‰è§’å‡½æ•°ï¼Œå¯¹æ•°å‡½æ•°ç­‰å¸¸ç”¨çš„å‡½æ•°è¿ç®—æ–¹æ³•ã€‚é€šè¿‡è°ƒç”¨å¦‚ä¸‹æ–¹æ³•å¯å¾—åˆ°<strong>Math</strong>æ¨¡å—æä¾›çš„æ–¹æ³•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Math</span>.methods</span><br></pre></td></tr></table></figure><p><strong>to_f</strong>æ–¹æ³•å¯å°†Integerå¯¹è±¡è½¬æ¢ä¸ºFloatå¯¹è±¡ï¼Œ<strong>to_i</strong>æ–¹æ³•å¯å°†Floatå¯¹è±¡è½¬æ¢ä¸ºIntegerå¯¹è±¡ï¼Œto_iæ–¹æ³•ä¼šå°†å°æ•°ç‚¹ä»¥åŽçš„å€¼åŽ»æŽ‰ã€‚é€šè¿‡ä½¿ç”¨<strong>round</strong>æ–¹æ³•å¯å¯¹å°æ•°è¿›è¡Œå››èˆäº”å…¥çš„å¤„ç†.<strong>ceil</strong>æ–¹æ³•è¿”å›žæ¯”æ¯”åŽŸæ•°å€¼å¤§å¾—æœ€å°æ•´æ•°ï¼Œ<strong>floor</strong>æ–¹æ³•è¿”å›žæ¯”åŽŸæ•°å€¼å°çš„æœ€å¤§æ•´æ•°ã€‚é€šè¿‡<strong>to_r</strong>å’Œ<strong>to_c</strong>æ–¹æ³•å¯å°†æ•°å€¼è½¬æ¢ä¸ºRationalå¯¹è±¡å’ŒComplexå¯¹è±¡ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">p <span class="number">1</span>.to_f<span class="comment">#=&gt; 1.0</span></span><br><span class="line">p <span class="number">1.23</span>.to_i<span class="comment">#=&gt; 1</span></span><br><span class="line">p <span class="number">1.23</span>.round<span class="comment">#=&gt; 1</span></span><br><span class="line">p <span class="number">1.50</span>.round<span class="comment">#=&gt; 2</span></span><br><span class="line">p <span class="number">1.23</span>.ceil<span class="comment">#=&gt; 2</span></span><br><span class="line">p <span class="number">1.23</span>.floor<span class="comment">#=&gt; 1</span></span><br><span class="line">p <span class="number">1.5</span>.to_r<span class="comment">#=&gt; (3/2)</span></span><br><span class="line">p <span class="number">1.5</span>.to_c<span class="comment">#=&gt; (1.5+0i)</span></span><br></pre></td></tr></table></figure><p>Integerç±»æŒ‰ç…§æŒ‡å®šæ¬¡æ•°å¾ªçŽ¯å¤„ç†é€»è¾‘</p><p>æ‰§è¡ŒæŒ‡å®šçš„næ¬¡é€»è¾‘</p><pre><code>n.times do |i|    é€»è¾‘end</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ary = []</span><br><span class="line"><span class="number">5</span>.times <span class="keyword">do</span> |<span class="params">i</span>|</span><br><span class="line">ary &lt;&lt; i</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">p ary<span class="comment">#=&gt; [0, 1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure><p>ä»Ž<em>from</em>å¼€å§‹å¾ªçŽ¯åŠ å¯¹<em>i</em>è¿›è¡ŒåŠ 1å¤„ç†ï¼Œç›´åˆ°<em>i</em>ç­‰äºŽ<em>to</em></p><pre><code>from.upto(to) do |i|    é€»è¾‘end</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ary = []</span><br><span class="line"><span class="number">1</span>.upto(<span class="number">5</span>) <span class="keyword">do</span> |<span class="params">i</span>|</span><br><span class="line">ary &lt;&lt; i</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">p ary<span class="comment">#=&gt; [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure><p>ä»Ž<em>from</em>å¼€å§‹å¾ªçŽ¯å¯¹<em>i</em>è¿›è¡Œå‡1å¤„ç†ï¼Œç›´åˆ°<em>i</em>ç­‰äºŽ<em>to</em></p><pre><code>from.downto(to) do |i|    é€»è¾‘end</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ary = []</span><br><span class="line"><span class="number">5</span>.downto(<span class="number">1</span>) <span class="keyword">do</span> |<span class="params">i</span>|</span><br><span class="line">ary &lt;&lt; i</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">p ary<span class="comment">#=&gt; [5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure><p>ä»Ž<em>from</em>å¼€å§‹å¾ªçŽ¯å¯¹<em>i</em>è¿›è¡ŒåŠ <em>step</em>å¤„ç†ï¼Œç›´åˆ°<em>i</em>ç­‰äºŽ<em>to</em></p><pre><code>from.step(to, step) do |i|    é€»è¾‘end</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ary = []</span><br><span class="line"><span class="number">1</span>.step(<span class="number">5</span>, <span class="number">2</span>) <span class="keyword">do</span> |<span class="params">i</span>|</span><br><span class="line">ary &lt;&lt; i</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">p ary<span class="comment">#=&gt; [1, 3, 5]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The initialization of the angular ngModel</title>
      <link href="/2015/09/23/the-initialization-of-the-angular-ngmodel/"/>
      <url>/2015/09/23/the-initialization-of-the-angular-ngmodel/</url>
      
        <content type="html"><![CDATA[<p>Recently, Iâ€™ve encoutered a weird problem in the project, itâ€™s about the value of the ngModel. Let me explain the problem. see the code</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../bower_components/bootstrap/dist/css/bootstrap.min.css&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../bower_components/angular/angular.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../js/ngModel.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">&quot;ModelApp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-header&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;text-center&quot;</span>&gt;</span>ng-model initialize example<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-danger&quot;</span> <span class="attr">ng-controller</span>=<span class="string">&quot;ModelController1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span>the angular model without initialize:<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myInput1&quot;</span> <span class="attr">ng-model</span>=<span class="string">&quot;myModel1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;A&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;&quot;</span>&gt;</span> -&gt; This input tag bundles the ngModel which name is &#x27;myModel1&#x27;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">disabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;displayModelValue1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;myModel1&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;&quot;</span>&gt;</span> -&gt; This input tag displays the value of the above ngModel<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>In the code, there is a input which id is â€˜myInput1â€™ has bundled a ngModel which name is â€˜myModel1â€™. The value of the input we give it â€˜Aâ€™. And we put this input tag into the ModelController1 angular controller. Also, there is another input tag which id is â€˜displayModelValue1â€™, the purpose of it is to display the value of the â€˜myModel1â€™.</p><p>Letâ€™s see the controller code.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">ModelApp</span> = angular.<span class="title function_">module</span>(<span class="string">&quot;ModelApp&quot;</span>, []);</span><br><span class="line"></span><br><span class="line"><span class="title class_">ModelApp</span>.<span class="title function_">controller</span>(<span class="string">&#x27;ModelController1&#x27;</span>, <span class="keyword">function</span>(<span class="params">$scope</span>) &#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>You will notice that there is nothing in the ModelController1. Now, running this page. letâ€™s see the result.</p><p><img src="/assets/images/legacy/angular-ngModel-1.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/angular-ngModel-1.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p>From the result, the value of the myInput1 is empty, but we have set the default value â€˜Aâ€™ to it. So we guess maybe the value has changed. But when we inspect the element, we found the value has been set to â€˜Aâ€™ in the html source. so far, Iâ€™m so confused. To find the reason, I open the console of the browser, put below javascript code to see the value. It still empty.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#myInput1&#x27;</span>).<span class="property">value</span></span><br></pre></td></tr></table></figure><p><img src="/assets/images/legacy/angular-ngModel-2.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/angular-ngModel-2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p>So I guess that maybe it is ngModel affect it, the value has been changed by ngModel, but the html source didnâ€™t changed. So letâ€™s remove the ngModel from that input tag.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myInput1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;A&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>And nowï¼Œthe value has displayed. it proves our suppose is correct.</p><p>Ok, Letâ€™s get started to find the reason use a new example.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../../bower_components/bootstrap/dist/css/bootstrap.min.css&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../bower_components/angular/angular.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../js/ngModel.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">&quot;ModelApp&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-header&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;text-center&quot;</span>&gt;</span>ng-model initialize example<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-success&quot;</span> <span class="attr">ng-controller</span>=<span class="string">&quot;ModelController2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span>the angular model with initialize:<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myInput2&quot;</span> <span class="attr">ng-model</span>=<span class="string">&quot;myModel2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;A&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;&quot;</span>&gt;</span> -&gt; This input tag bundles the ngModel which name is &#x27;myModel2&#x27;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">disabled</span>=<span class="string">&quot;true&quot;</span> <span class="attr">id</span>=<span class="string">&quot;displayModelValue2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;myModel2&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;&quot;</span>&gt;</span> -&gt; This input tag displays the value of the above ngModel<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>The above html source code is same with before, just the id and ngModel name are different. And there is another different is that we initialize the ngModel in the controller.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ModelApp</span>.<span class="title function_">controller</span>(<span class="string">&#x27;ModelController2&#x27;</span>, <span class="keyword">function</span>(<span class="params">$scope</span>) &#123;</span><br><span class="line">$scope.<span class="property">myModel2</span> = <span class="string">&quot;B&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>We have set the myModel2 value to â€˜Bâ€™ in the ModelController2. But in the html source code, we set the default value to â€˜Aâ€™ and bundle it to ngModel. So letâ€™s see the result:</p><p><img src="/assets/images/legacy/angular-ngModel-3.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/angular-ngModel-3.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p>The result is â€˜Bâ€™ not â€˜Aâ€™. That means the ngModel is initialized in the controller. And then render it to the browser. So this can explain the weird problem. </p><p>The finial reason is that the ngModel is initialized in the controller. If it is not initialize, the value will be empty, like the first example. So if we initialize it in the controller, the ngModel value will be changed with initialzed value.</p><p>And also, you can use the <code>ng-init</code> directive to initialize the ngModel value which you want.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myInput2&quot;</span> <span class="attr">ng-model</span>=<span class="string">&quot;myModel2&quot;</span> <span class="attr">ng-init</span>=<span class="string">&quot;myModel2 = &#x27;A&#x27;&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> AngularJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(10)</title>
      <link href="/2015/09/15/ruby-practice-10/"/>
      <url>/2015/09/15/ruby-practice-10/</url>
      
        <content type="html"><![CDATA[<h3 id="å—"><a href="#å—" class="headerlink" title="å—"></a>å—</h3><p>*<em>å—(block)*<em>ï¼Œæœ‰æ—¶ä¹Ÿç§°ä»£ç å—ï¼Œèƒ½ä¸Žå‚æ•°ä¸€èµ·ä¼ é€’çš„å¤šä¸ªå¤„ç†çš„é›†åˆã€‚åƒä¹‹å‰çš„</em>each*ï¼Œ</em>time*å°±æ˜¯å¸¦å—çš„æ–¹æ³•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>..<span class="number">5</span>).each <span class="keyword">do</span> |<span class="params">i</span>|</span><br><span class="line">puts i</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­doå’Œendä¹‹é—´çš„éƒ¨åˆ†å°±æ˜¯æ‰€è°“çš„å—ã€‚è¿™æ ·çš„æ–¹æ³•ç§°ä¸ºâ€œå¸¦å—çš„æ–¹æ³•â€æˆ–â€œè°ƒç”¨å—â€ï¼Œå…¶è°ƒç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p><pre><code>å¯¹è±¡.æ–¹æ³•å(å‚æ•°åˆ—è¡¨) do |å˜é‡|    å¸Œæœ›çš„å¤„ç†endæˆ–è€…å¯¹è±¡.æ–¹æ³•å(å‚æ•°åˆ—è¡¨) &#123; |å˜é‡|    å¸Œæœ›çš„å¤„ç†&#125;</code></pre><span id="more"></span><p>eachæ–¹æ³•å¯ä»¥å°†æ•°ç»„çš„å…ƒç´ ä¸€ä¸ªä¸€ä¸ªå–å‡ºæ¥ç„¶åŽå¤„ç†ï¼Œæ•£åˆ—ä¹Ÿå¯ä»¥ï¼Œä½†ä¸Žæ•°ç»„ä¸åŒçš„æ˜¯ï¼Œæ•£åˆ—ä¼šå°†*[key,value]çš„ç»„åˆä½œä¸ºæ•°ç»„æ¥æå–å…ƒç´ ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">outcome = &#123;<span class="string">&quot;breakfast&quot;</span>=&gt;<span class="number">10.00</span>, <span class="string">&quot;lunch&quot;</span>=&gt;<span class="number">20.00</span>, <span class="string">&quot;dinner&quot;</span>=&gt;<span class="number">15.00</span> &#125;</span><br><span class="line">sum_outcome = <span class="number">0</span></span><br><span class="line">outcome.each <span class="keyword">do</span> |<span class="params">pair</span>|<span class="comment">#pairæ˜¯keyï¼Œvalueç»„æˆçš„æ•°ç»„ï¼Œpair[0]ä¸ºkeyï¼Œpair[1]ä¸ºvalue</span></span><br><span class="line">sum_outcome += pair[<span class="number">1</span>]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">puts sum_outcome<span class="comment">#=&gt; 45.0</span></span><br></pre></td></tr></table></figure><p>åœ¨æŽ¥æ”¶å—å˜é‡æ—¶ï¼Œå¤šé‡èµ‹å€¼è§„åˆ™ä¹ŸåŒæ ·é€‚ç”¨ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">outcome.each &#123; |<span class="params">key, value</span>|</span><br><span class="line">puts <span class="string">&quot;<span class="subst">#&#123;key&#125;</span> : <span class="subst">#&#123;value&#125;</span>&quot;</span><span class="comment">#=&gt; æ‰“å°å¯¹åº”çš„outcomeä¿¡æ¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å—é™¤äº†åº”ç”¨äºŽè¿­ä»£å™¨ä»¥å¤–ï¼Œè¿˜è¢«å¹¿æ³›ç”¨äºŽå…¶ä»–åœ°æ–¹ï¼Œå…¶ä¸­ä¸€ä¸ªå°±æ˜¯ç¡®ä¿åŽå¤„ç†è¢«æ‰§è¡Œã€‚çœ‹ä»£ç </p><ul><li>(1)æœªä½¿ç”¨å—åšåŽå¤„ç†<figure class="highlight ruby"><figcaption><span>file_open.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">file = <span class="title class_">File</span>.open(<span class="string">&quot;each_hash_data.rb&quot;</span>)</span><br><span class="line">file.each_line <span class="keyword">do</span> |<span class="params">line</span>|</span><br><span class="line">puts line</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">file.close</span><br></pre></td></tr></table></figure></li><li>(2)ä½¿ç”¨å—åšåŽå¤„ç†<figure class="highlight ruby"><figcaption><span>block_file_open.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">File</span>.open(<span class="string">&quot;each_hash_data.rb&quot;</span>) <span class="keyword">do</span> |<span class="params">file</span>|</span><br><span class="line">file.each_line <span class="keyword">do</span> |<span class="params">line</span>|</span><br><span class="line">puts line</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>ä»”ç»†è§‚å¯Ÿä»£ç ï¼Œä½ ä¼šå‘çŽ°åœ¨ç¬¬ç§æ–¹å¼ä¸­ï¼ŒFile#openæ–¹æ³•æŽ¥æ”¶äº†å—ï¼Œç„¶åŽå°†fileå¯¹è±¡ä½œä¸ºå—å˜é‡ï¼Œå¹¶ä¸”æ‰§è¡Œå®Œæ¯•åŽï¼Œå¹¶æ²¡æœ‰è°ƒç”¨closeæ–¹æ³•åŽ»å…³é—­æ–‡ä»¶ã€‚ç”¨è¿™ç§æ–¹å¼ä¼šä½¿ç¨‹åºå‡ºé—®é¢˜å—ï¼Ÿç­”æ¡ˆæ˜¯ä¸ä¼šï¼Œå› ä¸ºå—å†…éƒ¨å…¶å®žæ‰§è¡Œäº†å¦‚ä¸‹ä»£ç çš„å¤„ç†ã€‚</li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">file = <span class="title class_">File</span>.open(<span class="string">&quot;each_hash_data.rb&quot;</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">file.each_line <span class="keyword">do</span> |<span class="params">line</span>|</span><br><span class="line">puts line</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">ensure</span></span><br><span class="line">file.close</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>å—è¿˜æœ‰ä¸€ç§å¸¸è§çš„ç”¨æ³•ï¼Œç”¨äºŽæ›¿æ¢éƒ¨åˆ†ç®—æ³•ï¼Œä»¥Arrayç±»çš„sortæ–¹æ³•ä¸ºä¾‹</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ary = [<span class="string">&quot;ruby&quot;</span>, <span class="string">&quot;pathon&quot;</span>, <span class="string">&quot;c#&quot;</span>, <span class="string">&quot;javascript&quot;</span>]</span><br><span class="line"></span><br><span class="line">sorted_ary = ary.sort</span><br><span class="line">print sorted_ary<span class="comment">#=&gt; [&quot;c#&quot;, &quot;javascript&quot;, &quot;pathon&quot;, &quot;ruby&quot;]</span></span><br><span class="line"></span><br><span class="line">sorted_ary = ary.sort &#123; |<span class="params">a, b</span>| a.length &lt;=&gt; b.length &#125;</span><br><span class="line">print sorted_ary<span class="comment">#=&gt; [&quot;c#&quot;, &quot;ruby&quot;, &quot;pathon&quot;, &quot;javascript&quot;]</span></span><br><span class="line"></span><br><span class="line">sorted_ary = ary.sort &#123; |<span class="params">a, b</span>| a.reverse &lt;=&gt; b.reverse&#125;</span><br><span class="line">print sorted_ary<span class="comment">#=&gt; [&quot;c#&quot;, &quot;pathon&quot;, &quot;javascript&quot;, &quot;ruby&quot;]</span></span><br></pre></td></tr></table></figure><p>å°†æŽ’åºç®—æ³•ä½œä¸ºå—ä¼ é€’ç»™sortæ–¹æ³•ï¼Œç„¶åŽè¿”å›žæŒ‰æŒ‡å®šæŽ’åºæ–¹å¼æŽ’åºåŽçš„æ•°ç»„ã€‚</p><p><em>æ³¨æ„ï¼šå—ä¸­æœ€åŽä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼å°±æ˜¯å—çš„æ‰§è¡Œç»“æžœ</em></p><h4 id="å®šä¹‰å¸¦å—çš„æ–¹æ³•"><a href="#å®šä¹‰å¸¦å—çš„æ–¹æ³•" class="headerlink" title="å®šä¹‰å¸¦å—çš„æ–¹æ³•"></a>å®šä¹‰å¸¦å—çš„æ–¹æ³•</h4><p>ä½¿ç”¨<strong>yield</strong>å…³é”®å­—ä»£æ›¿å—ï¼Œå¦‚ä¸‹</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_block</span></span><br><span class="line"><span class="keyword">yield</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">my_block <span class="keyword">do</span> </span><br><span class="line">puts <span class="string">&quot;this is execution in my block&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h5 id="ä¼ é€’å—å‚æ•°ï¼ŒèŽ·å–å—çš„å€¼"><a href="#ä¼ é€’å—å‚æ•°ï¼ŒèŽ·å–å—çš„å€¼" class="headerlink" title="ä¼ é€’å—å‚æ•°ï¼ŒèŽ·å–å—çš„å€¼"></a>ä¼ é€’å—å‚æ•°ï¼ŒèŽ·å–å—çš„å€¼</h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">total</span>(<span class="params">from, to</span>)</span><br><span class="line">result = <span class="number">0</span></span><br><span class="line">from.upto(to) <span class="keyword">do</span> |<span class="params">num</span>|</span><br><span class="line"><span class="keyword">if</span> block_given?<span class="comment"># å¦‚æžœæœ‰å¿«çš„è¯</span></span><br><span class="line">result += <span class="keyword">yield</span>(num)<span class="comment"># å°†ç»è¿‡å—å¤„ç†åŽçš„å€¼ç´¯åŠ </span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">result += num</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">result</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">print total(<span class="number">1</span>, <span class="number">10</span>)<span class="comment">#=&gt; 55</span></span><br><span class="line">print total(<span class="number">1</span>, <span class="number">10</span>) &#123; |<span class="params">num</span>| num * <span class="number">2</span>&#125;<span class="comment">#=&gt; 110</span></span><br></pre></td></tr></table></figure><p>**block_given?**æ–¹æ³•è¢«ç”¨äºŽåˆ¤æ–­å½“è°ƒç”¨æ–¹æ³•æ—¶æ˜¯å¦æœ‰å—è¢«ä¼ é€’ï¼Œæœ‰åˆ™è¿”å›žtrueï¼Œå¦åˆ™false</p><p><em>yield</em>å‚æ•°çš„ä¸ªæ•°å¯ä»¥ä¸Žå—å˜é‡çš„ä¸ªæ•°ä¸ä¸€æ ·ï¼Œå½“å—å˜é‡çš„ä¸ªæ•°å¤šæ—¶ï¼Œå¤šå‡ºçš„å‚æ•°ä¼šè¢«èµ‹å€¼ä¸ºnilï¼Œå½“å—å˜é‡ä¸è¶³æ—¶ï¼Œåˆ™ä¸èƒ½æŽ¥å—å¤šä½™çš„å‚æ•°å€¼ã€‚</p><p>*æ³¨ï¼š<strong>break</strong>å’Œ<strong>next</strong>æ–¹æ³•å¯æŒ‡å®šå‚æ•°ï¼Œå¦‚æžœæ²¡æœ‰æŒ‡å®šä»»ä½•å‚æ•°ï¼Œåˆ™è¿”å›žnilï¼Œå¦‚æžœæŒ‡å®šäº†å‚æ•°åˆ™è¿”å›žå‚æ•°ï¼Œå¦‚ï¼šbreak 0 å’Œnext 0 éƒ½ä¼šè¿”å›ž0ã€‚</p><h5 id="å°†å—å°è£…ä¸ºå¯¹è±¡"><a href="#å°†å—å°è£…ä¸ºå¯¹è±¡" class="headerlink" title="å°†å—å°è£…ä¸ºå¯¹è±¡"></a>å°†å—å°è£…ä¸ºå¯¹è±¡</h5><p>Rubyè¿˜å¯ä»¥å°†å—å½“ä½œå¯¹è±¡å¤„ç†ã€‚æŠŠå—å½“ä½œå¯¹è±¡å¤„ç†åŽï¼Œå°±å¯ä»¥åœ¨æŽ¥æ”¶å—çš„æ–¹æ³•ä¹‹å¤–çš„å…¶ä»–åœ°æ–¹æ‰§è¡Œå—ï¼Œæˆ–è€…æŠŠå—äº¤ç»™å…¶ä»–æ–¹æ³•æ‰§è¡Œã€‚å¦‚æžœè¦å®žçŽ°è¿™æ ·çš„åŠŸèƒ½ï¼Œå°±éœ€è¦<strong>Proc</strong>å¯¹è±¡ï¼Œ<strong>Proc</strong>å¯¹è±¡æ˜¯èƒ½è®©å—ä½œä¸ºå¯¹è±¡åœ¨ç¨‹åºä¸­ä½¿ç”¨çš„ç±»ã€‚</p><p>é€šè¿‡è°ƒç”¨<strong>Proc.new</strong>è¿™ä¸ªå¸¦å—çš„æ–¹æ³•ï¼Œå¯ä»¥å®šä¹‰Procå¯¹è±¡ï¼Œç„¶åŽå†è°ƒç”¨Procå¯¹è±¡çš„<strong>call</strong>æ–¹æ³•æ‰§è¡Œå—ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hello = <span class="title class_">Proc</span>.new <span class="keyword">do</span> |<span class="params">name</span>|<span class="comment"># ä½¿ç”¨Proc.newæ–¹æ³•å®šä¹‰å—å¯¹è±¡hello</span></span><br><span class="line">puts <span class="string">&quot;Hello <span class="subst">#&#123;name&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">hello.call(<span class="string">&quot;world&quot;</span>)<span class="comment"># ä½¿ç”¨Proc.callæ–¹æ³•è°ƒç”¨å—å¯¹è±¡</span></span><br><span class="line">hello.call(<span class="string">&quot;ruby&quot;</span>)</span><br></pre></td></tr></table></figure><p>åœ¨æ–¹æ³•å®šä¹‰æ—¶ï¼Œå¦‚æžœæœ«å°¾çš„å‚æ•°ä½¿ç”¨**&amp;å‚æ•°å**çš„å½¢å¼ï¼ŒRubyå°±ä¼šè‡ªåŠ¨æŠŠè°ƒç”¨æ–¹æ³•æ—¶ä¼ è¿›æ¥çš„å—å°è£…ä¸ºProcå¯¹è±¡ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">total</span>(<span class="params">from, to, &amp;block</span>)</span><br><span class="line">result = <span class="number">0</span></span><br><span class="line">from.upto(to) <span class="keyword">do</span> |<span class="params">num</span>|</span><br><span class="line"><span class="keyword">if</span> block<span class="comment">#å¦‚æžœæœ‰å—å¯¹è±¡</span></span><br><span class="line">result += block.call(num)<span class="comment">#æ‰§è¡Œå¿«å¯¹è±¡</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">result += num</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">result</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">puts total(<span class="number">1</span>, <span class="number">10</span>)<span class="comment">#=&gt; 55</span></span><br><span class="line">puts total(<span class="number">1</span>, <span class="number">10</span>) &#123; |<span class="params">num</span>| num * <span class="number">2</span>&#125;<span class="comment">#=&gt; 110</span></span><br></pre></td></tr></table></figure><p>åœ¨å˜é‡åå‰æ·»åŠ **&amp;<strong>çš„å‚æ•°è¢«æˆä¸º</strong>Procå‚æ•°**. è€Œä¸”Procå‚æ•°ä¸€å®šè¦åœ¨æ‰€æœ‰å‚æ•°ä¹‹åŽï¼Œä¹Ÿå°±æ˜¯æ–¹æ³•çš„æœ€åŽä¸€ä¸ªå‚æ•°ã€‚</p><p>å°†Procå¯¹è±¡ä½œä¸ºå—ä¼ é€’ç»™å…¶ä»–æ–¹æ³•å¤„ç†ï¼Œåœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œç”¨**&amp;Procå¯¹è±¡**çš„å½¢å¼å®šä¹‰å‚æ•°å°±å¯ä»¥äº†ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_each</span>(<span class="params">ary, &amp;block</span>)</span><br><span class="line">ary.each(&amp;block)<span class="comment">#å°†procå¯¹è±¡ä»¥å—çš„å½¢å¼ä¼ é€’ç»™æ•°ç»„çš„eachæ–¹æ³•</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">my_each([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]) <span class="keyword">do</span> |<span class="params">i</span>|</span><br><span class="line">print <span class="string">&quot;<span class="subst">#&#123;i&#125;</span> &quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(9)</title>
      <link href="/2015/09/09/ruby-practice-9/"/>
      <url>/2015/09/09/ruby-practice-9/</url>
      
        <content type="html"><![CDATA[<h3 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h3><p>åœ¨Rubyä¸­ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„ä¿¡æ¯æ ¼å¼å¦‚ä¸‹ï¼š</p><pre><code>æ–‡ä»¶åï¼šè¡Œå·ï¼šin æ–¹æ³•åï¼šé”™è¯¯ä¿¡æ¯ (å¼‚å¸¸ç±»å)        from æ–‡ä»¶åï¼šè¡Œå·ï¼šin æ–¹æ³•å</code></pre><p>ä»¥fromå¼€å¤´çš„è¡Œè¡¨ç¤ºå‘ç”Ÿé”™ä½çš„ä½ç½®ã€‚<br>åœ¨Rubyä¸­,ä½¿ç”¨<strong>begin ~ rescue ~ end</strong>è¯­å¥æ¥åšå¼‚å¸¸å¤„ç†ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š</p><pre><code>begin    å¯èƒ½ä¼šå‘ç”Ÿå¼‚å¸¸çš„å¤„ç†rescue    å‘ç”Ÿå¼‚å¸¸æ—¶çš„å¤„ç†end</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="number">1</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">rescue</span></span><br><span class="line">puts <span class="string">&quot;has a exception&quot;</span><span class="comment">#=&gt; has a exception</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>é€šè¿‡åœ¨<strong>rescue</strong>åŽæŒ‡å®šå˜é‡åï¼Œå¯ä»¥èŽ·å¾—å¼‚å¸¸å¯¹è±¡ã€‚å¼‚å¸¸å¯¹è±¡æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•åä¸º<strong>class</strong>ã€<strong>message</strong>ã€<strong>backtrace</strong>ã€‚</p><ul><li><p><strong>class</strong>æ–¹æ³•å¯ä»¥èŽ·å–åˆ°å¼‚å¸¸çš„ç§ç±»</p></li><li><p><strong>message</strong>æ–¹æ³•èŽ·å–å¼‚å¸¸ä¿¡æ¯ã€‚</p></li><li><p><strong>backtrace</strong>æ–¹æ³•èŽ·å–å¼‚å¸¸å‘ç”Ÿçš„ä½ç½®ä¿¡æ¯</p><p>  begin<br>  å¯èƒ½ä¼šå‘ç”Ÿçš„å¼‚å¸¸çš„å¤„ç†<br>  rescue &#x3D;&gt;å¼•ç”¨å¼‚å¸¸å¯¹è±¡çš„å˜é‡<br>  å‘ç”Ÿå¼‚å¸¸æ—¶çš„å¤„ç†<br>  end</p></li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="number">1</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">rescue</span> =&gt; ex<span class="comment">#=&gt; å°†å¼‚å¸¸å¯¹è±¡å¼•ç”¨åˆ°exå¯¹è±¡</span></span><br><span class="line">puts ex.<span class="keyword">class</span><span class="comment">#=&gt; ZeroDivisionError</span></span><br><span class="line">puts ex.message<span class="comment">#=&gt; divided by 0</span></span><br><span class="line">puts ex.backtrace<span class="comment">#=&gt; exception.rb:2:in `/&#x27;exception.rb:2:in `&lt;main&gt;&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p><em>Noteï¼šæ­¤å¤„æ˜¯å°†ä»£ç ç›´æŽ¥å†™åœ¨rubyæ–‡ä»¶é‡Œï¼Œç„¶åŽç›´æŽ¥è¿è¡Œçš„ï¼Œæ²¡æœ‰å†™åœ¨æ–¹æ³•é‡Œé¢ã€‚æ‰€ä»¥çœ‹åˆ°çš„ä¿¡æ¯æ˜¯æ–‡ä»¶åå’Œå‘ç”Ÿé”™è¯¯çš„è¡Œå·</em></p><p>å¦‚æžœä¸æŒ‡å®šå˜é‡åï¼ŒRubyå°†ä¼šæŠŠå¼‚å¸¸å¯¹è±¡èµ‹å€¼ç»™**$!<strong>ã€</strong>$2**å˜é‡</p><ul><li><strong>$!</strong> å¼•ç”¨åˆ°æœ€åŽå‘ç”Ÿçš„å¼‚å¸¸å¯¹è±¡</li><li><strong>$@</strong> å¼•ç”¨åˆ°å‘ç”Ÿçš„å¼‚å¸¸çš„ä½ç½®ä¿¡æ¯</li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="number">1</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">rescue</span></span><br><span class="line">puts <span class="variable">$!</span>.<span class="keyword">class</span><span class="comment">#=&gt; ZeroDivisionError</span></span><br><span class="line">puts <span class="variable">$!</span>.message<span class="comment">#=&gt; divided by 0</span></span><br><span class="line">puts <span class="variable">$!</span>.backtrace<span class="comment">#=&gt; exception.rb:2:in `/&#x27;exception.rb:2:in `&lt;main&gt;&#x27;</span></span><br><span class="line">puts <span class="variable">$@</span><span class="comment">#=&gt; exception.rb:2:in `/&#x27;exception.rb:2:in `&lt;main&gt;&#x27;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>ä»Žä¸Šé¢çš„è¿è¡Œç¤ºä¾‹å¯ä»¥çœ‹å‡ºï¼Œå…¶å®ž**$!.backtrace<strong>ä¸Ž</strong>$@**æ˜¯ç­‰ä»·çš„ï¼Œéƒ½è¡¨ç¤ºå¼‚å¸¸å‘ç”Ÿçš„ä½ç½®ã€‚</p><p>åœ¨Rubyä¸­å¯ä»¥é€šè¿‡<strong>ensure</strong>æ¥ç¡®ä¿æ— è®ºæ˜¯å¦å¼•å‘å¼‚å¸¸éƒ½å°†æ‰§è¡Œå¤„ç†ï¼Œç±»ä¼¼äºŽJavaå’ŒC#ä¸­å¾—finallyã€‚</p><pre><code>begin    å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸rescue =&gt; å˜é‡    å‘ç”Ÿå¼‚å¸¸æ—¶çš„å¤„ç†ensure    æ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œéƒ½ä¼šå¤„ç†end</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">copy</span>(<span class="params">from to</span>)</span><br><span class="line">src = <span class="title class_">File</span>.open(from)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">dst = <span class="title class_">File</span>.open(to, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">data = src.read</span><br><span class="line">dst.write(data)</span><br><span class="line">dst.close</span><br><span class="line"><span class="keyword">rescue</span> =&gt; ex</span><br><span class="line">print ex.message</span><br><span class="line"><span class="keyword">ensure</span></span><br><span class="line">src.close</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>åœ¨<strong>rescue</strong>ä¸­ä½¿ç”¨<strong>retry</strong>åŽï¼Œ<strong>begin</strong>ä»¥ä¸‹çš„å¤„ç†ä¼šå†é‡åšä¸€éã€‚æ‰€ä»¥éœ€è¦æ³¨æ„é™·å…¥æ­»å¾ªçŽ¯çš„æƒ…å†µã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line">num = <span class="number">0</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="number">1</span> / num<span class="comment">#=&gt; å¦‚æžœå‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œrescueä¸­çš„è¯­å¥</span></span><br><span class="line"><span class="keyword">rescue</span></span><br><span class="line"><span class="keyword">if</span> count &gt;= <span class="number">5</span></span><br><span class="line">num += <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">retry</span><span class="comment">#=&gt; é‡å¤æ‰§è¡ŒbeginåŽçš„è¯­å¥</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">puts count<span class="comment">#=&gt; 6</span></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨rescueåšä¸ºä¿®é¥°ç¬¦"><a href="#ä½¿ç”¨rescueåšä¸ºä¿®é¥°ç¬¦" class="headerlink" title="ä½¿ç”¨rescueåšä¸ºä¿®é¥°ç¬¦"></a>ä½¿ç”¨rescueåšä¸ºä¿®é¥°ç¬¦</h4><p>ä½¿ç”¨rescueä½œä¸ºä¿®é¥°ç¬¦å¯ä»¥ç®€åŒ–å¾ˆå¤šä»£ç </p><pre><code>è¡¨è¾¾å¼1 rescue è¡¨è¾¾å¼2</code></pre><p>ä¸Žä¸‹é¢çš„å†™æ³•ç­‰ä»·</p><pre><code>begin    è¡¨è¾¾å¼1rescue    è¡¨è¾¾å¼2end</code></pre><p>å…¶æ„ä¹‰ä¸ºå¦‚æžœè¡¨è¾¾å¼1ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œè¡¨è¾¾å¼2çš„å€¼å°±ä¼šæˆä¸ºæ•´ä½“è¡¨è¾¾å¼çš„å€¼ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">parseInt</span>(<span class="params">param</span>)</span><br><span class="line"><span class="title class_">Integer</span>(param) <span class="keyword">rescue</span> <span class="number">0</span><span class="comment">#=&gt; å¦‚æžœInteger(param)è¯­å¥æ— å¼‚å¸¸ï¼Œç›´æŽ¥è¿”å›žè¯¥å€¼ï¼Œå¦è€…è¿”å›ž0</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">puts parseInt(<span class="string">&quot;123&quot;</span>)<span class="comment">#=&gt; 123</span></span><br><span class="line">puts parseInt(<span class="string">&quot;abc&quot;</span>)<span class="comment">#=&gt; 0</span></span><br></pre></td></tr></table></figure><p>åœ¨åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºæ•°å€¼å½¢å¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p><h4 id="å¼‚å¸¸å¤„ç†çš„å…¶ä»–è¯­æ³•"><a href="#å¼‚å¸¸å¤„ç†çš„å…¶ä»–è¯­æ³•" class="headerlink" title="å¼‚å¸¸å¤„ç†çš„å…¶ä»–è¯­æ³•"></a>å¼‚å¸¸å¤„ç†çš„å…¶ä»–è¯­æ³•</h4><p><em>æ–¹æ³•å†…</em><br>å¦‚æžœå¼‚å¸¸å¤„ç†çš„èŒƒå›´æ˜¯æ•´ä¸ªæ–¹æ³•ä½“ï¼Œè¿™æ—¶å¯ä»¥çœç•¥beginä»¥åŠendå…³é”®å­—ï¼Œç›´æŽ¥ä½¿ç”¨rescueå’Œensureã€‚</p><pre><code>def æ–¹æ³•å    æ–¹æ³•ä½“rescue =&gt; å¼‚å¸¸å¯¹è±¡    å¼‚å¸¸å¤„ç†ensure    åŽå¤„ç†end</code></pre><p><em>ç±»å®šä¹‰ä¸­</em><br>åœ¨ç±»å®šä¹‰ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨rescueä»¥åŠensureã€‚ä½†æ˜¯ï¼Œå¦‚æžœç±»å®šä¹‰é€”ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œé‚£ä¹ˆå¼‚å¸¸å‘ç”Ÿéƒ¨åˆ†åŽçš„æ–¹æ³•å®šä¹‰å°±ä¸ä¼šå†æ‰§è¡Œäº†ã€‚æ‰€ä»¥ä¸€èˆ¬å¾ˆå°‘åœ¨ç±»å®šä¹‰ä¸­ä½¿ç”¨ã€‚</p><pre><code>class ç±»å    ç±»å®šä¹‰rescue =&gt; å¼‚å¸¸å¯¹è±¡    å¼‚å¸¸å¤„ç†ensure    åŽå¤„ç†end</code></pre><h4 id="æŒ‡å®šéœ€è¦æ•æ‰çš„å¼‚å¸¸"><a href="#æŒ‡å®šéœ€è¦æ•æ‰çš„å¼‚å¸¸" class="headerlink" title="æŒ‡å®šéœ€è¦æ•æ‰çš„å¼‚å¸¸"></a>æŒ‡å®šéœ€è¦æ•æ‰çš„å¼‚å¸¸</h4><p>å½“ç„¶ï¼ŒRubyä¹Ÿæä¾›äº†é’ˆå¯¹ç‰¹å®šå¼‚å¸¸çš„æ•æ‰å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªrescueæ¥åˆ†å¼€å¤„ç†</p><pre><code>begin    å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„åœ°æ–¹rescue Exception1, Exception2 =&gt;å˜é‡    å¯¹Exception1æˆ–Exception2çš„å¤„ç†rescue Exception3 =&gt; å˜é‡    å¯¹Exception3çš„å¤„ç†rescue    å¯¹ä¸Šè¿°å¼‚å¸¸ä»¥å¤–çš„å¼‚å¸¸çš„å¤„ç†end</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">multi_rescue</span> </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">yield</span><span class="comment">#å—å‚æ•°åœ¨æ­¤å¤„ï¼Œå¦‚æœ‰å¼‚å¸¸ï¼Œå°†æ‰§è¡ŒåŽç»­æŒ‡å®šçš„å¼‚å¸¸å¤„ç†</span></span><br><span class="line"><span class="keyword">rescue</span> <span class="title class_">NameError</span>, <span class="title class_">NoMethodError</span> =&gt; ex</span><br><span class="line">puts ex.<span class="keyword">class</span></span><br><span class="line"><span class="keyword">rescue</span> <span class="title class_">ZeroDivisionError</span></span><br><span class="line">puts <span class="variable">$!</span>.<span class="keyword">class</span></span><br><span class="line"><span class="keyword">rescue</span> </span><br><span class="line">puts <span class="variable">$!</span>.<span class="keyword">class</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">multi_rescue <span class="keyword">do</span> </span><br><span class="line"><span class="number">1</span> / <span class="number">0</span><span class="comment">#è§¦å‘ZeroDivisionErrorå¼‚å¸¸</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">multi_rescue <span class="keyword">do</span></span><br><span class="line">val.size<span class="comment">#è§¦å‘NameErrorå¼‚å¸¸</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">multi_rescue <span class="keyword">do</span> </span><br><span class="line">val = <span class="number">4</span></span><br><span class="line">sqrt(val)<span class="comment">#è§¦å‘NoMethodErrorå¼‚å¸¸</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç å®šä¹‰äº†ä¸€ä¸ªå¸¦å—çš„æ–¹æ³•ï¼Œé€šè¿‡æ­¤æ–¹æ³•å¯ä»¥æ’å…¥ä»»ä½•ä½ æƒ³è¦å¾—ä»£ç æ‰§è¡Œå—ã€‚</p><h4 id="å¼‚å¸¸ç±»"><a href="#å¼‚å¸¸ç±»" class="headerlink" title="å¼‚å¸¸ç±»"></a>å¼‚å¸¸ç±»</h4><p><em>æ³¨æ„ï¼šrubyä¸­æ‰€æœ‰å¼‚å¸¸éƒ½æ˜¯</em>Exception<em>ç±»çš„å­ç±»ã€‚</em><br>å½“rescueä¸­ä¸æŒ‡å®šå¼‚å¸¸ç±»æ—¶ï¼Œç¨‹åºä¼šé»˜è®¤æ•æ‰<em>StandardError</em>ç±»åŠå…¶å­ç±»çš„å¼‚å¸¸. æ‰€ä»¥åœ¨å®šä¹‰è‡ªå·±çš„å¼‚å¸¸æ—¶ï¼Œå¯ä»¥å…ˆå®šä¹‰ç»§æ‰¿StandardErrorç±»çš„æ–°ç±»ï¼Œç„¶åŽå†ç»§æ‰¿è¿™ä¸ªæ–°ç±»ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">MyError</span> = <span class="title class_">Class</span>.new(<span class="title class_">StandardError</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyError</span> &lt; <span class="title class_ inherited__">StandardError</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸¤ç§å†™æ³•æ˜¯ç­‰æ•ˆçš„ï¼Œéƒ½æ˜¯è¡¨ç¤ºå®šä¹‰ä¸€ä¸ªç»§æ‰¿StandardErrorç±»çš„æ–°ç±»ã€‚ç¬¬ä¸€ç§æ–¹å¼æ˜¯ä¸€ç§ç®€æ´çš„å†™æ³•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">MyError</span> = <span class="title class_">Class</span>.new(<span class="title class_">StandardError</span>)<span class="comment">#è‡ªå®šä¹‰MyErrorå¼‚å¸¸</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è‡ªå®šä¹‰MyError1å¼‚å¸¸ç»§æ‰¿è‡ªMyErrorï¼Œå¹¶é‡å†™messageæ–¹æ³•</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyError1</span> &lt; <span class="title class_ inherited__">MyError</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">message</span></span><br><span class="line"><span class="string">&quot;the exception message is from MyError1&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è‡ªå®šä¹‰MyError2å¼‚å¸¸ç»§æ‰¿è‡ªMyErrorï¼Œå¹¶é‡å†™messageæ–¹æ³•</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyError2</span> &lt; <span class="title class_ inherited__">MyError</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">message</span></span><br><span class="line"><span class="string">&quot;the exception message is from MyError2&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰å¸¦å—çš„å¤„ç†å¼‚å¸¸çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">raiseException</span></span><br><span class="line"><span class="keyword">yield</span></span><br><span class="line"><span class="keyword">rescue</span> <span class="title class_">MyError1</span> =&gt; ex</span><br><span class="line">puts ex.message</span><br><span class="line"><span class="keyword">rescue</span> <span class="title class_">MyError2</span> =&gt; ex</span><br><span class="line">puts ex.message</span><br><span class="line"><span class="keyword">rescue</span></span><br><span class="line">puts <span class="variable">$!</span>.message</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŠ›å‡ºå¼‚å¸¸MyError1</span></span><br><span class="line">raiseException <span class="keyword">do</span></span><br><span class="line"><span class="keyword">raise</span> <span class="title class_">MyError1</span><span class="comment">#=&gt; the exception message is from MyError1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŠ›å‡ºå¼‚å¸¸MyError2</span></span><br><span class="line">raiseException <span class="keyword">do</span></span><br><span class="line"><span class="keyword">raise</span> <span class="title class_">MyError2</span><span class="comment">#=&gt; the exception message is from MyError2</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h4 id="æŠ›å‡ºå¼‚å¸¸"><a href="#æŠ›å‡ºå¼‚å¸¸" class="headerlink" title="æŠ›å‡ºå¼‚å¸¸"></a>æŠ›å‡ºå¼‚å¸¸</h4><p>ä½¿ç”¨<strong>raise</strong>æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç¨‹åºä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>raiseæ–¹æ³•æœ‰ä¸€ä¸‹4ä¸­è°ƒç”¨æ–¹å¼ï¼š</p><ul><li><p>raise message<br>æŠ›å‡º<em>RuntimeError</em>å¼‚å¸¸ï¼Œå¹¶æŠŠå­—ç¬¦ä¸²ä½œä¸ºmessageè®¾ç½®ç»™æ–°ç”Ÿæˆçš„å¼‚å¸¸å¯¹è±¡</p></li><li><p>raise å¼‚å¸¸ç±»<br>æŠ›å‡ºæŒ‡å®šçš„å¼‚å¸¸</p></li><li><p>raise å¼‚å¸¸ç±»ï¼Œmessage<br>æŠ›å‡ºæŒ‡å®šçš„å¼‚å¸¸ï¼Œå¹¶æŠŠmessageä¿¡æ¯è®¾ç½®ç»™æ–°ç”Ÿæˆçš„å¼‚å¸¸å¯¹è±¡</p></li><li><p>raise<br>åœ¨rescueå¤–æŠ›å‡ºRuntimeErrorã€‚ åœ¨rescueä¸­è°ƒç”¨æ—¶ï¼Œä¼šå†æ¬¡æŠ›å‡ºæœ€åŽä¸€æ¬¡å‘ç”Ÿçš„å¼‚å¸¸ã€‚</p></li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è‡ªå®šä¹‰MyError3å¼‚å¸¸</span></span><br><span class="line"><span class="title class_">MyError3</span> = <span class="title class_">Class</span>.new(<span class="title class_">MyError</span></span><br><span class="line"></span><br><span class="line">raiseException <span class="keyword">do</span></span><br><span class="line"><span class="keyword">raise</span> <span class="title class_">MyError3</span>, <span class="string">&quot;customized message for MyError3&quot;</span><span class="comment">#=&gt;æŠ›å‡ºæŒ‡å®šmessage</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(8)</title>
      <link href="/2015/09/06/ruby-practice-8/"/>
      <url>/2015/09/06/ruby-practice-8/</url>
      
        <content type="html"><![CDATA[<h3 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h3><p>ä»¥ä¸‹ä¸¤ç§è¿ç®—ç¬¦æ˜¯ç­‰ä»·çš„, opå³ä»£è¡¨æ“ä½œè¿ç®—ç¬¦</p><pre><code>value1 op= value2value1 = value1 op value2</code></pre><p>åˆ©ç”¨è¿ç®—ç¬¦**||**çš„ç‰¹æ€§ï¼Œå¯ä»¥ç®€åŒ–ç›¸å…³çš„èµ‹å€¼ä»£ç ï¼Œå¦‚ä¸‹æ˜¯ç­‰ä»·çš„</p><figure class="highlight ruby"><figcaption><span>èµ‹å€¼æ–¹å¼1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&quot;Ruby&quot;</span></span><br><span class="line"><span class="keyword">if</span> var<span class="comment">#å½“varä¸æ˜¯nilæˆ–falseæ—¶</span></span><br><span class="line">name = var</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><figure class="highlight ruby"><figcaption><span>èµ‹å€¼æ–¹å¼2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name = var |<span class="params"></span>| <span class="string">&quot;Ruby&quot;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>è€Œåˆ©ç”¨**&amp;&amp;**è¿ç®—ç¬¦ï¼Œå¯ä»¥é¿å…ä¸å¿…è¦è¦å¾—ç¨‹åºé”™è¯¯</p><figure class="highlight ruby"><figcaption><span>éšè—çš„é”™è¯¯</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name = ary[<span class="number">0</span>]          <span class="comment">#å¦‚æžœaryä¸ºnilï¼Œåˆ™æ­¤æ—¶å°†å¼•å‘ç¨‹åºé”™è¯¯</span></span><br></pre></td></tr></table></figure><figure class="highlight ruby"><figcaption><span>ä½¿ç”¨&&é¿å…é”™è¯¯</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name = ary &amp;&amp; ary[<span class="number">0</span>]<span class="comment">#é¿å…å½“aryä¸ºnilæ—¶ï¼Œè¯»å–ary[0]æ—¶çš„é”™è¯¯</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨**&amp;&amp;**å¯ä»¥åœ¨ç¡®å®šå¯¹è±¡å­˜åœ¨åŽå†è°ƒç”¨æ–¹æ³•ã€‚è€Œä¸”ä»£ç æ›´åŠ ç®€æ´ã€‚</p><h4 id="èŒƒå›´è¿ç®—ç¬¦"><a href="#èŒƒå›´è¿ç®—ç¬¦" class="headerlink" title="èŒƒå›´è¿ç®—ç¬¦"></a>èŒƒå›´è¿ç®—ç¬¦</h4><p>ç›¸æ¯”å…¶ä»–çš„è¯­è¨€å¦‚Javaç­‰ï¼ŒèŒƒå›´è¿ç®—ç¬¦ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„è¿ç®—ç¬¦ï¼ŒèŒƒå›´è¿ç®—ç¬¦æœ‰**..<strong>å’Œ</strong>â€¦**ä¸¤ç§ï¼Œå…¶åŒºåˆ«åœ¨äºŽå¦‚ä¸‹</p><ul><li><strong>x..y</strong>çš„èŒƒå›´æ˜¯ä»Žxåˆ°y</li><li><strong>xâ€¦y</strong>çš„èŒƒå›´æ˜¯ä»Žxåˆ°yå¾—å‰ä¸€ä¸ªå…ƒç´ </li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>..<span class="number">5</span>).to_a<span class="comment">#=&gt; [1, 2, 3, 4, 5]</span></span><br><span class="line">(<span class="string">&quot;a&quot;</span>..<span class="string">&quot;d&quot;</span>).to_a<span class="comment">#=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]</span></span><br><span class="line"></span><br><span class="line">(<span class="number">1</span>...<span class="number">5</span>).to_a<span class="comment">#=&gt; [1, 2, 3, 4]</span></span><br><span class="line">(<span class="string">&quot;a&quot;</span>...<span class="string">&quot;d&quot;</span>).to_a<span class="comment">#=&gt; [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span></span><br></pre></td></tr></table></figure><p>Rubyä¸­æœ‰èŒƒå›´å¯¹è±¡(Range)æ¥è¡¨ç¤ºèŒƒå›´å¯¹è±¡ï¼Œä»¥ä¸‹ä¸¤ä¸ªå†™æ³•æ˜¯ç­‰ä»·çš„</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ary = <span class="title class_">Range</span>.new(<span class="number">1</span>, <span class="number">5</span>)<span class="comment">#=&gt; 1..5</span></span><br><span class="line">ary.<span class="keyword">class</span><span class="comment">#=&gt; Range</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ary = <span class="number">1</span>..<span class="number">5</span><span class="comment">#=&gt; 1..5</span></span><br><span class="line">ary.<span class="keyword">class</span><span class="comment">#=&gt; Range</span></span><br></pre></td></tr></table></figure><p>åœ¨Rangeå¯¹è±¡å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨<strong>succ</strong>æ–¹æ³•æ ¹æ®èµ·ç‚¹å€¼é€ä¸ªç”Ÿæˆä¸‹ä¸€å€¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">a = a.succ<span class="comment">#=&gt; 2</span></span><br><span class="line">a = a.succ<span class="comment">#=&gt; 3</span></span><br><span class="line">a.succ.succ<span class="comment">#=&gt; 5</span></span><br></pre></td></tr></table></figure><h4 id="è¿ç®—ç¬¦é‡å®šä¹‰"><a href="#è¿ç®—ç¬¦é‡å®šä¹‰" class="headerlink" title="è¿ç®—ç¬¦é‡å®šä¹‰"></a>è¿ç®—ç¬¦é‡å®šä¹‰</h4><p>åœ¨Rubyä¸­æœ‰ä»¥ä¸‹è¿ç®—ç¬¦ä¸èƒ½é‡å®šä¹‰<br>::, &amp;&amp;, ||, .., â€¦, ?:, not, &#x3D;, and</p><p><em>äºŒå…ƒè¿ç®—ç¬¦é‡å®šä¹‰</em>,å¦‚åŠ å·+ã€å‡å·-</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span></span><br><span class="line"><span class="built_in">attr_reader</span> <span class="symbol">:x</span>, <span class="symbol">:y</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">x, y</span>)</span><br><span class="line"><span class="variable">@x</span>, <span class="variable">@y</span> = x, y</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">+</span>(<span class="params">other</span>)</span><br><span class="line"><span class="variable language_">self</span>.<span class="keyword">class</span>.new(x + other.x, y + other.y)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">-</span>(<span class="params">other</span>)</span><br><span class="line"><span class="variable language_">self</span>.<span class="keyword">class</span>.new(x - other.x, y - other.y)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">display</span></span><br><span class="line"><span class="string">&quot;(<span class="subst">#&#123;x&#125;</span>, <span class="subst">#&#123;y&#125;</span>)&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p1 = <span class="title class_">Point</span>.new(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">p2 = <span class="title class_">Point</span>.new(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">p = p1 + p2</span><br><span class="line">puts p.display<span class="comment">#=&gt; (4, 6)</span></span><br><span class="line"></span><br><span class="line">p = p2 - p1</span><br><span class="line">puts p.display<span class="comment">#=&gt; (2, 2)</span></span><br></pre></td></tr></table></figure><p><em>ä¸€å…ƒè¿ç®—ç¬¦</em>ï¼Œå¦‚æ­£å·+ï¼Œè´Ÿå·-ç­‰ï¼Œå…¶é‡å®šä¹‰ä¸ŽäºŒå…ƒè¿ç®—ç¬¦ä¸åŒã€‚å¯å®šä¹‰çš„ä¸€å…ƒè¿ç®—ç¬¦æœ‰**+**, <strong>-</strong>, <strong>~</strong>, **!**4ä¸ªã€‚åˆ†åˆ«ä»¥+@ï¼Œ -@ï¼Œ ~@ï¼Œ !@ä¸ºæ–¹æ³•åè¿›è¡Œæ–¹æ³•å®šä¹‰ã€‚è€Œä¸”ä¸€å…ƒè¿ç®—ç¬¦éƒ½æ˜¯æ²¡æœ‰å‚æ•°çš„ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span></span><br><span class="line"><span class="built_in">attr_reader</span> <span class="symbol">:x</span>, <span class="symbol">:y</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">x, y</span>)</span><br><span class="line"><span class="variable">@x</span>, <span class="variable">@y</span> = x, y</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">+@</span></span><br><span class="line">dup</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">-@</span></span><br><span class="line"><span class="variable language_">self</span>.<span class="keyword">class</span>.new(-x ,-y)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">~@</span></span><br><span class="line"><span class="variable language_">self</span>.<span class="keyword">class</span>.new(-y, x)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">display</span></span><br><span class="line"><span class="string">&quot;(<span class="subst">#&#123;x&#125;</span>, <span class="subst">#&#123;y&#125;</span>)&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p1 = <span class="title class_">Point</span>.new(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">puts (-p1).display<span class="comment">#=&gt; (-1, -2)</span></span><br><span class="line">puts (+p1).display<span class="comment">#=&gt; (1, 2)</span></span><br></pre></td></tr></table></figure><h4 id="ä¸‹æ ‡æ–¹æ³•"><a href="#ä¸‹æ ‡æ–¹æ³•" class="headerlink" title="ä¸‹æ ‡æ–¹æ³•"></a>ä¸‹æ ‡æ–¹æ³•</h4><p>æ•°ç»„ã€æ•£åˆ—ä¸­çš„<em>obj[i]<em>ä»¥åŠ</em>obj[i]&#x3D;x</em>è¿™æ ·çš„æ–¹æ³•ï¼Œç§°ä¸ºä¸‹æ ‡æ–¹æ³•ã€‚å®šä¹‰ä¸‹æ ‡æ–¹æ³•æ—¶çš„æ–¹æ³•ååˆ†åˆ«ä¸º**[]<strong>å’Œ</strong>[]&#x3D;**.</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span></span><br><span class="line"><span class="built_in">attr_reader</span> <span class="symbol">:x</span>, <span class="symbol">:y</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">x, y</span>)</span><br><span class="line"><span class="variable">@x</span>, <span class="variable">@y</span> = x, y</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">[]</span>(<span class="params">index</span>)</span><br><span class="line"><span class="keyword">case</span> index</span><br><span class="line"><span class="keyword">when</span> <span class="number">0</span></span><br><span class="line">x</span><br><span class="line"><span class="keyword">when</span> <span class="number">1</span></span><br><span class="line">y</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">raise</span> <span class="title class_">ArgumentError</span>, <span class="string">&quot;out of range (<span class="subst">#&#123;index&#125;</span>)&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">[]=</span>(<span class="params">index, val</span>)</span><br><span class="line"><span class="keyword">case</span> index</span><br><span class="line"><span class="keyword">when</span> <span class="number">0</span></span><br><span class="line"><span class="variable language_">self</span>.x = val</span><br><span class="line"><span class="keyword">when</span> <span class="number">1</span></span><br><span class="line"><span class="variable language_">self</span>.y = val</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">raise</span> <span class="title class_">ArgumentError</span>, <span class="string">&quot;out of range (<span class="subst">#&#123;index&#125;</span>)&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">display</span></span><br><span class="line"><span class="string">&quot;(<span class="subst">#&#123;x&#125;</span>, <span class="subst">#&#123;y&#125;</span>)&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(7)</title>
      <link href="/2015/09/01/ruby-practice-7/"/>
      <url>/2015/09/01/ruby-practice-7/</url>
      
        <content type="html"><![CDATA[<h3 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h3><p>Rubyä¸­çš„ç±»æ˜¯è¡¨çŽ°äº‹ç‰©çš„å±žæ€§å’Œè¡Œä¸ºï¼Œé‚£ä¹ˆæ¨¡å—å‘¢ï¼Ÿï¼Œåœ¨Rubyä¸­<em>æ¨¡å—</em>è¡¨çŽ°çš„åªæ˜¯äº‹ç‰©çš„è¡Œä¸ºã€‚</p><p>æ¨¡å—ä¸Žç±»çš„åŒºåˆ«äºŽä¸‹ï¼š</p><ul><li>æ¨¡å—ä¸èƒ½æ‹¥æœ‰å®žä¾‹</li><li>æ¨¡å—ä¸èƒ½è¢«ç»§æ‰¿</li></ul><p>å¦‚ä½•è®¿é—®æ¨¡å—å†…çš„æ–¹æ³•ï¼Ÿæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è®¿é—®</p><p>1.ä½¿ç”¨<strong>æ¨¡å—å.æ–¹æ³•å</strong>çš„å½¢å¼æ¥ç›´æŽ¥è°ƒç”¨æ¨¡å—ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Math</span>.sqrt(<span class="number">4</span>)<span class="comment">#=&gt; 2.0</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>2.é€šè¿‡<strong>include æ¨¡å—å</strong>çš„å½¢å¼é¢„å…ˆå°†æ¨¡å—å¼•å…¥åˆ°å½“å‰çš„å‘½åç©ºé—´ï¼Œç„¶åŽå°±å¯ç›´æŽ¥è®¿é—®æ¨¡å—å†…çš„æ–¹æ³•å’Œå¸¸é‡ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include</span> <span class="title class_">Math</span></span><br><span class="line">sqrt(<span class="number">4</span>)<span class="comment">#=&gt; 2.0</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹å¼ä¹Ÿå°±æ˜¯<strong>Mix-in</strong>æ‰©å±•ç±»çš„åŠŸèƒ½ï¼Œå°†æ¨¡å—æ··åˆåˆ°ç±»ä¸­ã€‚åœ¨å®šä¹‰ç±»æ—¶ä½¿ç”¨<strong>include</strong>å¼•å…¥æŒ‡å®šçš„æ¨¡å—åŽï¼Œæ­¤æ—¶è¯¥ç±»å°±å¯ä»¥ä½¿ç”¨æ¨¡å—é‡Œçš„æ‰€æœ‰æ–¹æ³•å’Œå¸¸é‡ï¼Œä»Žè€Œå¢žåŠ äº†è¯¥ç±»çš„åŠŸèƒ½ã€‚</p><p><strong>Mix-in</strong>å¯ä»¥çµæ´»åœ°è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>è™½ç„¶ä¸¤ä¸ªç±»æ‹¥æœ‰ç›¸ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸å¸Œæœ›æŠŠä»–ä»¬ä½œä¸ºç›¸åŒçš„ç§ç±»ï¼ˆClassï¼‰æ¥è€ƒè™‘çš„æ—¶å€™ï¼Œæ­¤æ—¶å¯å°†ç›¸ä¼¼åŠŸèƒ½å°è£…ä¸ºæ¨¡å—ä¾›è¿™ä¸¤ä¸ªç±»ä½¿ç”¨</li><li>Rubyä¸æ”¯æŒçˆ¶ç±»çš„å¤šé‡ç»§æ‰¿ï¼Œå› æ­¤æ— æ³•å¯¹å·²ç»ç»§æ‰¿çš„ç±»æ·»åŠ å…±åŒçš„åŠŸèƒ½çš„æ—¶å€™</li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Calculator</span></span><br><span class="line"><span class="keyword">include</span> <span class="title class_">Math</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_sqrt</span>(<span class="params">a, b</span>)</span><br><span class="line">sqrt(a) + sqrt(b)<span class="comment">#=&gt; è°ƒç”¨Mathæ¨¡å—ä¸­å¾—sqrtæ–¹æ³•</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="variable">@@PI</span> = <span class="variable constant_">PI</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">cal = <span class="title class_">Calculator</span>.new</span><br><span class="line">cal.my_sqrt(<span class="number">1</span>, <span class="number">4</span>)<span class="comment">#=&gt; 3.0</span></span><br><span class="line"><span class="title class_">Calculator</span><span class="symbol">:</span><span class="symbol">:PI</span><span class="comment">#=&gt; 3.141592653589793</span></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºæ¨¡å—"><a href="#åˆ›å»ºæ¨¡å—" class="headerlink" title="åˆ›å»ºæ¨¡å—"></a>åˆ›å»ºæ¨¡å—</h4><p>ä½¿ç”¨<strong>module</strong>å…³é”®æ¥åˆ›å»ºæ¨¡å—ï¼Œæ¨¡å—åçš„é¦–å­—æ¯å¿…é¡»å¤§å†™</p><pre><code>module æ¨¡å—å    æ¨¡å—å®šä¹‰end</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> <span class="title class_">HelloModule</span></span><br><span class="line"><span class="title class_">Version</span> = <span class="string">&quot;1.0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span>(<span class="params">name</span>)</span><br><span class="line">puts <span class="string">&quot;Hello <span class="subst">#&#123;name&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module_function</span> <span class="symbol">:say_hello</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p <span class="title class_">HelloModule</span><span class="symbol">:</span><span class="symbol">:Version</span><span class="comment">#=&gt; &quot;1.0&quot;</span></span><br><span class="line"><span class="title class_">HelloModule</span>.say_hello(<span class="string">&quot;Ruby&quot;</span>)<span class="comment">#=&gt; Hello Ruby</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span> <span class="title class_">HelloModule</span><span class="comment">#=&gt; åŒ…å«æ¨¡å—</span></span><br><span class="line"><span class="title class_">Version</span><span class="comment">#=&gt; &quot;1.0&quot;</span></span><br><span class="line">say_hello(<span class="string">&quot;Ruby&quot;</span>)<span class="comment">#=&gt; Hello Ruby</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°<strong>module_function</strong>æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¸»è¦ç”¨äºŽå°†éœ€è¦æŠŠæ¨¡å—å‡½æ•°å…¬å¼€ç»™å¤–éƒ¨ä½¿ç”¨ï¼Œå…¶å‚æ•°æ˜¯è¡¨ç¤ºæ–¹æ³•æ–¹æ³•åçš„ç¬¦å·ï¼Œå¯ä»¥è·Ÿå¤šä¸ªå‚æ•°ã€‚</p><p><em>æ³¨ï¼šä¸å»ºè®®åœ¨å®šä¹‰ä¸ºæ¨¡å—å‡½æ•°çš„æ–¹æ³•ä¸­ä½¿ç”¨self</em></p><h4 id="Mix-in"><a href="#Mix-in" class="headerlink" title="Mix-in"></a>Mix-in</h4><p>å‰é¢æåˆ°çš„ï¼Œåœ¨ç±»ä¸­ä½¿ç”¨<em>include</em>å¼•å…¥æ¨¡å—ï¼Œæ­¤æ—¶ç±»çš„åŠŸèƒ½å°†å¾—åˆ°å¢žå¼ºã€‚</p><p>å¦‚æžœæƒ³çŸ¥é“ç±»æ˜¯å¦åŒ…å«æŸä¸ªæ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨<strong>includeï¼Ÿ</strong>æ–¹æ³•ï¼Œå¦‚ä¹‹å‰çš„Calculatorç±»ä¸­ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Calculator</span>.<span class="keyword">include</span>?(<span class="title class_">Math</span>)<span class="comment">#=&gt; true</span></span><br></pre></td></tr></table></figure><p>Rubyä¸­ç±»çš„å®žä¾‹åœ¨è°ƒç”¨æ–¹æ³•æ—¶çš„é¡ºåºä¸ºï¼Œè¯¥ç±»&gt;åŒ…å«çš„æ¨¡å—&gt;è¯¥ç±»çš„çˆ¶ç±»ç­‰è¿™ä¸ªé¡ºåºæŸ¥æ‰¾è¯¥æ–¹æ³•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> <span class="title class_">HelloModule</span></span><br><span class="line"><span class="title class_">Version</span> = <span class="string">&quot;1.0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span>(<span class="params">name</span>)</span><br><span class="line">puts <span class="string">&quot;Hello <span class="subst">#&#123;name&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HelloClass</span></span><br><span class="line"><span class="keyword">include</span> <span class="title class_">HelloModule</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">hello = <span class="title class_">HelloClass</span>.new</span><br><span class="line">hello.say_hello(<span class="string">&quot;Ruby&quot;</span>)<span class="comment">#=&gt; Hello Ruby</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ä¸­è°ƒç”¨çš„æ˜¯moduleä¸­çš„æ–¹æ³•ã€‚</p><p>ç”¨<em>ancestors</em>æ–¹æ³•å’Œ<em>superclass</em>æ–¹æ³•è°ƒæŸ¥ç±»çš„ç»§æ‰¿å…³ç³»ã€‚<em>superclass</em>æ–¹æ³•å¯ç›´æŽ¥è¿”å›žç±»çš„çˆ¶ç±»</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p <span class="title class_">HelloClass</span>.ancestors<span class="comment">#=&gt; [HelloClass, HelloModule, Object, Kernel, BasicObject]</span></span><br><span class="line">p <span class="title class_">HelloClass</span>.superclass<span class="comment">#=&gt; Object</span></span><br></pre></td></tr></table></figure><p><em>Kenerl</em>æ˜¯Rubyå†…éƒ¨çš„ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼ŒRubyç¨‹åºè¿è¡Œæ—¶æ‰€éœ€çš„å…±é€šå‡½æ•°éƒ½å°è£…åœ¨æ­¤æ¨¡å—ä¸­ã€‚</p><p>å•ä¸€ç»§æ‰¿çš„ä¼˜ç‚¹å°±æ˜¯ç®€å•ï¼Œä¸ä¼šå› ä¸ºè¿‡å¤šçš„ç»§æ‰¿è€Œå¯¼è‡´ç±»ä¹‹é—´çš„å…³ç³»å˜å¾—å¤æ‚ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦çµæ´»ä½¿ç”¨å•ä¸€ç»§æ‰¿å’ŒMix-inã€‚</p><h4 id="Mix-inæŸ¥æ‰¾æ–¹æ³•çš„è§„åˆ™"><a href="#Mix-inæŸ¥æ‰¾æ–¹æ³•çš„è§„åˆ™" class="headerlink" title="Mix-inæŸ¥æ‰¾æ–¹æ³•çš„è§„åˆ™"></a>Mix-inæŸ¥æ‰¾æ–¹æ³•çš„è§„åˆ™</h4><ul><li>ä¼˜å…ˆä½¿ç”¨åŽŸæ¥ä¸­å®šä¹‰çš„åŒåæ–¹æ³•ã€‚</li><li>åœ¨åŒä¸€ä¸ªç±»ä¸­åŒ…å«å¤šä¸ªæ¨¡å—æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨æœ€åŽä¸€ä¸ªåŒ…å«çš„æ¨¡å—ã€‚</li><li>åµŒå¥—includeæ—¶ï¼ŒæŸ¥æ‰¾é¡ºåºä¹Ÿæ˜¯çº¿æ€§çš„ã€‚</li><li>ç›¸åŒçš„æ¨¡å—è¢«åŒ…å«ä¸¤æ¬¡ä¹Ÿä¸Šçš„ï¼Œç¬¬2æ¬¡ä»¥åŽçš„ä¼šè¢«çœç•¥ã€‚</li></ul><h4 id="Object-extendæ–¹æ³•"><a href="#Object-extendæ–¹æ³•" class="headerlink" title="Object#extendæ–¹æ³•"></a>Object#extendæ–¹æ³•</h4><p>åˆ©ç”¨Object#extendæ–¹æ³•å¯ä»¥ä½¿å•ä¾‹ç±»åŒ…å«æ¨¡å—ï¼Œå¹¶æŠŠæ¨¡å—çš„åŠŸèƒ½æ‰©å±•åˆ°å¯¹è±¡ä¸­ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> <span class="title class_">Welcome</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">welcome</span>(<span class="params">name</span>)</span><br><span class="line"><span class="string">&quot;<span class="subst">#&#123;<span class="variable language_">self</span>&#125;</span> Welcome <span class="subst">#&#123;name&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">&quot;World&quot;</span></span><br><span class="line">str.<span class="keyword">extend</span>(<span class="title class_">Welcome</span>)<span class="comment">#=&gt; å°†Welcomeæ¨¡å—æ‰©å±•åˆ°strå¯¹è±¡ä¸Š</span></span><br><span class="line">puts str.welcome(<span class="string">&quot;Ruby&quot;</span>)<span class="comment">#=&gt; World Welcome Ruby</span></span><br></pre></td></tr></table></figure><p><strong>include</strong>å¯ä»¥å¸®åŠ©æˆ‘ä»¬çªç ´ç»§æ‰¿çš„é™åˆ¶ï¼Œé€šè¿‡æ¨¡å—æ‰©å±•ç±»çš„åŠŸèƒ½ï¼›è€Œ<strong>extend</strong>åˆ™å¯ä»¥å¸®åŠ©æˆ‘ä»¬è·¨è¿‡ç±»ï¼Œç›´æŽ¥é€šè¿‡æ¨¡å—æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½.</p><p>æ‰€æœ‰ç±»æœ¬èº«éƒ½æ˜¯Classç±»çš„å¯¹è±¡ï¼Œç±»æ–¹æ³•å°±æ˜¯ç±»å¯¹è±¡çš„å®žä¾‹æ–¹æ³•ã€‚å¯ä»¥æŠŠç±»æ–¹æ³•ç†è§£ä¸ºä¸‹:</p><ul><li><strong>Class</strong>ç±»çš„å®žä¾‹æ–¹æ³•</li><li>ç±»å¯¹è±¡çš„å•ä¾‹æ–¹æ³•</li></ul><p>ä½¿ç”¨<strong>extend</strong>æ–¹æ³•ä¸ºç±»å¯¹è±¡è¿½åŠ ç±»æ–¹æ³•ï¼Œä½¿ç”¨<strong>include</strong>æ–¹æ³•è¿½åŠ å®žä¾‹æ–¹æ³•ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> <span class="title class_">ClassMethod</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">class_method</span></span><br><span class="line"><span class="string">&quot;class method&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span> <span class="title class_">InstanceMethod</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">instance_method</span></span><br><span class="line"><span class="string">&quot;instance method&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span></span><br><span class="line"><span class="keyword">extend</span> <span class="title class_">ClassMethod</span> <span class="comment">#ä½¿ç”¨extendæ–¹æ³•å®šä¹‰ç±»æ–¹æ³•</span></span><br><span class="line"><span class="keyword">include</span> <span class="title class_">InstanceMethod</span> <span class="comment">#ä½¿ç”¨includeå®šä¹‰å®žä¾‹æ–¹æ³•</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p <span class="title class_">MyClass</span>.class_method<span class="comment">#=&gt; &quot;class method&quot;</span></span><br><span class="line">p <span class="title class_">MyClass</span>.new.instance_method<span class="comment">#=&gt; &quot;instance method&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(6)</title>
      <link href="/2015/08/25/ruby-practice-6/"/>
      <url>/2015/08/25/ruby-practice-6/</url>
      
        <content type="html"><![CDATA[<h3 id="Rubyçš„ç±»"><a href="#Rubyçš„ç±»" class="headerlink" title="Rubyçš„ç±»"></a>Rubyçš„ç±»</h3><p>å’Œå…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€ä¸€æ ·ï¼ŒRubyçš„ç±»ä¹Ÿè¡¨ç¤ºå¯¹è±¡çš„ç§ç±»ã€‚é€šè¿‡<strong>class</strong>æ–¹æ³•å¯ä»¥çŸ¥é“æŸä¸ªå¯¹è±¡å±žäºŽå“ªä¸ªç±»ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;hello&quot;</span>.<span class="keyword">class</span><span class="comment">#=&gt; String</span></span><br><span class="line"><span class="number">1</span>.<span class="keyword">class</span><span class="comment">#=&gt; Fixnum</span></span><br></pre></td></tr></table></figure><p>åˆ¤æ–­æŸä¸ªå¯¹è±¡æ—¶å€™å±žäºŽæŸä¸ªç±»æ—¶ï¼Œå¯ä»¥ä½¿ç”¨**instance_of?**æ–¹æ³•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;hello&quot;</span>.instance_of?(<span class="title class_">String</span>)<span class="comment">#=&gt; true</span></span><br><span class="line"><span class="number">1</span>.instance_of? <span class="title class_">Fixnum</span><span class="comment">#=&gt; true</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>é€šè¿‡æ‰©å±•å·²å®šä¹‰çš„ç±»æ¥åˆ›å»ºæ–°ç±»æˆä¸º<em>ç»§æ‰¿</em>ï¼Œé€šè¿‡ç»§æ‰¿ï¼Œæˆ‘ä»¬å¯ä»¥å®žçŽ°ä»¥ä¸‹äº‹æƒ…ï¼š</p><ul><li>åœ¨ä¸å½±å“åŽŸæœ‰åŠŸèƒ½çš„å‰æä¸‹è¿½åŠ æ–°åŠŸèƒ½</li><li>é‡å®šä¹‰åŽŸæœ‰åŠŸèƒ½ï¼Œä½¿åç§°ç›¸åŒçš„æ–¹æ³•äº§ç”Ÿä¸åŒçš„æ•ˆæžœ</li><li>åœ¨å·²æœ‰åŠŸèƒ½çš„åŸºç¡€ä¸Šè¿½åŠ å¤„ç†ï¼Œæ‰©å±•å·²æœ‰å…±æ›´èƒ½</li></ul><p><strong>BasicObject</strong>ç±»æ˜¯Rubyä¸­æ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼Œå®ƒå®šä¹‰äº†Rubyå¯¹è±¡çš„æœ€åŸºæœ¬åŠŸèƒ½ã€‚æ™®é€šå¯¹è±¡æ‰€éœ€è¦çš„ç±»ä¸€èˆ¬éƒ½è¢«å®šä¹‰ä¸º<strong>Object</strong>ç±»ã€‚å­—ç¬¦ä¸²ã€æ•°ç»„ç­‰éƒ½æ˜¯Objectç±»çš„å­ç±»ã€‚</p><p>å­ç±»ä¸Žçˆ¶ç±»çš„å…³ç³»ç§°ä¸ºâ€is-aâ€å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»çš„ç»§æ‰¿å…³ç³»ä½¿ç”¨**is_a?**æ–¹æ³•åå‘è¿½æŸ¥å¯¹è±¡æ˜¯å¦å±žäºŽæŸä¸ªç±»</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;hello&quot;</span>.is_a?(<span class="title class_">String</span>)<span class="comment">#=&gt; true</span></span><br><span class="line"><span class="string">&quot;hello&quot;</span>.is_a?(<span class="title class_">Object</span>)<span class="comment">#=&gt; true</span></span><br></pre></td></tr></table></figure><p>*æ³¨ï¼š**instance_of?<strong>æ–¹æ³•ä¸Ž</strong>is_a?**æ–¹æ³•å·²ç»åœ¨Objectç±»ä¸­å®šä¹‰è¿‡ï¼Œå› æ­¤æ™®é€šçš„å¯¹è±¡å¯ä»¥ç›´æŽ¥ä½¿ç”¨è€…ä¸¤ä¸ªæ–¹æ³•ã€‚</p><h4 id="ç±»çš„å®šä¹‰"><a href="#ç±»çš„å®šä¹‰" class="headerlink" title="ç±»çš„å®šä¹‰"></a>ç±»çš„å®šä¹‰</h4><p>ä½¿ç”¨<strong>class</strong>å…³é”®å­—å®šä¹‰ç±»ï¼Œç±»åçš„é¦–å­—æ¯å¿…é¡»å¤§å†™</p><pre><code>class ç±»å    ç±»çš„å®šä¹‰end</code></pre><p>ç±»å®šä¹‰ä¸­æœ‰ä¸ªç‰¹åˆ«çš„æ–¹æ³•åä¸º<strong>initialize</strong>æ–¹æ³•ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨<strong>new</strong>æ–¹æ³•ç”Ÿæˆæ–°çš„å¯¹è±¡æ—¶ï¼Œinitializeæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼ŒåŒæ—¶newæ–¹æ³•çš„å‚æ•°ä¹Ÿä¼šè¢«åŽŸå°ä¸åŠ¨çš„ä¼ é€’ç»™initializeæ–¹æ³•ã€‚</p><p>å®šä¹‰ä¸€ä¸ªGreeterç±»ï¼Œå½“å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œä¼šå°†newæ–¹æ³•ä¸­å¾—å‚æ•°ä¼ é€’ç»™initializeæ–¹æ³•ä¸­å¾—å®žä¾‹å˜é‡@nameï¼Œå¦‚æžœä¸ä¼ å‚æ•°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„å€¼Rubyä¼ ç»™å®žä¾‹å˜é‡ï¼Œåœ¨say_helloå®žä¾‹æ–¹æ³•ä¸­ï¼Œå°†å…¶æ‰“å°å‡ºæ¥ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">name = <span class="string">&quot;Ruby&quot;</span></span>)</span><br><span class="line"><span class="variable">@name</span> = name</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span></span><br><span class="line">puts <span class="string">&quot;Hello <span class="subst">#&#123;<span class="variable">@name</span>&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨Greeterç±»çš„å¯¹è±¡æ¥é—®å€™ï¼Œå…¶æ‰§è¡Œç»“æžœå¦‚ä¸‹</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">default_greeter = <span class="title class_">Greeter</span>.new</span><br><span class="line">default_greeter.say_hello<span class="comment">#=&gt; Hello Ruby</span></span><br><span class="line"></span><br><span class="line">world_greeter = <span class="title class_">Greeter</span>.new(<span class="string">&quot;World&quot;</span>)</span><br><span class="line">world_greeter.say_hello<span class="comment">#=&gt; Hello World</span></span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼šå¼•ç”¨æœªåˆå§‹åŒ–çš„å®žä¾‹å˜é‡æ—¶çš„è¿”å›žå€¼ä¸ºnil</em></p><p>åœ¨ä¸Šé¢çš„Greeterç±»ä¸­ï¼Œ@nameå®žä¾‹å˜é‡æ˜¯ä¸èƒ½è¢«å¤–éƒ¨ç›´æŽ¥è®¿é—®æˆ–èµ‹å€¼çš„ï¼Œéœ€è¦é€šè¿‡æ–¹æ³•æ¥è®¿é—®å¯¹è±¡çš„å†…éƒ¨ã€‚æˆ‘ä»¬å¯ä»¥åœ¨Greeterç±»å†…éƒ¨å®šä¹‰ä¸¤ä¸ªæ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Greeter</span><br><span class="line">#other codes in here</span><br><span class="line"></span><br><span class="line">def name#èŽ·å–@name</span><br><span class="line">@name</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">def name=(value)#ä¿®æ”¹@name</span><br><span class="line">@name = value</span><br><span class="line">end</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼ŒçŽ°åœ¨æˆ‘ä»¬å¯ä»¥è®¿é—®@nameå®žä¾‹å˜é‡äº†ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">default_greeter.name<span class="comment">#=&gt; Ruby</span></span><br><span class="line">default_greeter.name = <span class="string">&quot;Python&quot;</span></span><br><span class="line">default_greeter.say_hello<span class="comment">#=&gt; Hello Python</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¦‚æžœä¸€ä¸ªç±»é‡Œé¢æœ‰å¤šä¸ªå®žä¾‹å˜é‡éœ€è¦è¢«è®¿é—®æ—¶ï¼Œå®šä¹‰è¿™ä¹ˆå¤šå¾—æ–¹æ³•ä¼šä½¿å¾—ä»£ç é‡è¿‡å¤šï¼Œæœ‰æ²¡æœ‰åƒC#ä¸­çš„å±žæ€§è®¿é—®å™¨get&#x2F;setä¹‹ç±»çš„å‘¢ã€‚å…¶å®žRubyä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†è¿™ä¸ªï¼Œç§°ä¸ºå­˜å–å™¨ã€‚ä½¿ç”¨<strong>attr_reader</strong>, <strong>attr_writer</strong>, <strong>attr_accessor</strong>ï¼Œåªè¦æŒ‡å®šå®žä¾‹å˜é‡åçš„ç¬¦å·ï¼ˆsymbolï¼‰,æ³¨æ„ï¼Œæ­¤å¤„æ˜¯å®žä¾‹å˜é‡çš„ç¬¦å·ï¼ŒRubyå°±ä¼šè‡ªåŠ¨å®šä¹‰ç›¸åº”çš„å­˜å–å™¨ã€‚</p><pre><code>attr_reader :nameåªè¯» (å®šä¹‰nameæ–¹æ³•)attr_writer :nameåªå†™ (å®šä¹‰name=æ–¹æ³•)attr_accessor :nameè¯»å†™ (å®šä¹‰ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•)</code></pre><p>é€šè¿‡ä½¿ç”¨ä»–ä»¬ï¼Œæˆ‘ä»¬çš„Greeterç±»å¯ä»¥ç®€åŒ–ä¸ºå¦‚ä¸‹</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line"><span class="built_in">attr_accessor</span> <span class="symbol">:name</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">name = <span class="string">&quot;Ruby&quot;</span></span>)</span><br><span class="line"><span class="variable">@name</span> = name</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span></span><br><span class="line">puts <span class="string">&quot;Hello <span class="subst">#&#123;<span class="variable">@name</span>&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>Rubyä¸­è¿˜æä¾›äº†ç‰¹æ®Šå˜é‡<strong>self</strong>.ä½¿ç”¨<strong>self</strong>è¿™ä¸ªç‰¹æ®Šå˜é‡å¯ä»¥å¼•ç”¨æ–¹æ³•çš„æŽ¥å—è€…ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line"><span class="built_in">attr_accessor</span> <span class="symbol">:name</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">name = <span class="string">&quot;Ruby&quot;</span></span>)</span><br><span class="line"><span class="variable">@name</span> = name</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span></span><br><span class="line">puts <span class="string">&quot;Hello <span class="subst">#&#123;<span class="variable">@name</span>&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_bye</span></span><br><span class="line">puts <span class="string">&quot;Bye <span class="subst">#&#123;<span class="variable language_">self</span>.name&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åœ¨å®žä¾‹æ–¹æ³•å†…éƒ¨ä½¿ç”¨@nameå’Œä½¿ç”¨self.nameæ˜¯ä¸€æ ·çš„æ„æ€ï¼Œåªä¸è¿‡selfè°ƒç”¨çš„æ˜¯nameæ–¹æ³•ã€‚<strong>self</strong>å³ä½¿å¯¹åƒçš„æœ¬èº«ï¼Œç›¸å½“äºŽC#ã€Javaä¸­çš„<strong>this</strong>å¯¹è±¡ã€‚æ‰€ä»¥ä¸Šé¢çš„self.nameå¯ä»¥çœç•¥selfï¼Œç›´æŽ¥è°ƒç”¨nameæ–¹æ³•ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨è°ƒç”¨åƒ<em>name&#x3D;<em>æ–¹æ³•è¿™æ ·çš„ä»¥</em>&#x3D;<em>ç»“æŸçš„æ–¹æ³•æ—¶ï¼Œæœ‰ä¸€ç‚¹æˆ‘ä»¬éœ€è¦æ³¨æ„ã€‚å› ä¸ºåœ¨Rubyä¸­ï¼Œå®šä¹‰å±€éƒ¨å˜é‡ä¹Ÿæ˜¯ç”¨</em>&#x3D;</em></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_name</span></span><br><span class="line">name = <span class="string">&quot;Ruby&quot;</span><span class="comment">#å®šä¹‰å±€éƒ¨å˜é‡nameå¹¶èµ‹å€¼</span></span><br><span class="line"><span class="variable language_">self</span>.name = <span class="string">&quot;ruby&quot;</span><span class="comment">#è°ƒç”¨Greeterç±»çš„name=æ–¹æ³•</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æ­¤æ—¶çœç•¥selfåŽï¼Œå«ä¹‰æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><h4 id="ç±»æ–¹æ³•çš„å®šä¹‰"><a href="#ç±»æ–¹æ³•çš„å®šä¹‰" class="headerlink" title="ç±»æ–¹æ³•çš„å®šä¹‰"></a>ç±»æ–¹æ³•çš„å®šä¹‰</h4><p>å¦‚æžœæ–¹æ³•çš„æŽ¥å—è€…æ˜¯ç±»æœ¬èº«ï¼ˆç±»å¯¹è±¡ï¼‰çš„æ–¹æ³•æˆä¸ºç±»æ–¹æ³•ã€‚å…¶å®šä¹‰æ–¹å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§</p><ol><li><p>åœ¨<strong>class &lt;&lt; ç±»å ~ end</strong>è¿™ä¸ªç‰¹æ®Šçš„ç±»ä¸­å®šä¹‰å®žä¾‹æ–¹æ³•çš„å½¢å¼</p><pre><code> class &lt;&lt; ç±»å     æ–¹æ³•çš„å®šä¹‰ end</code></pre></li></ol><p>ä¸ºGreeterç±»å®šä¹‰ç±»æ–¹æ³•<em>good_morning</em></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> &lt;&lt; <span class="title class_">Greeter</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">good_morning</span>(<span class="params">name</span>)</span><br><span class="line">puts <span class="string">&quot;Good morning <span class="subst">#&#123;name&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><ol start="2"><li><p>ä½¿ç”¨<strong>def ç±»å.æ–¹æ³•å ~ end</strong>è¿™æ ·çš„å½¢å¼æ¥å®šä¹‰ç±»æ–¹æ³•ã€‚</p><pre><code> def ç±»å.æ–¹æ³•å     æ–¹æ³•çš„å®šä¹‰ end</code></pre></li></ol><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">Greeter</span>.good_morning(name)</span><br><span class="line">puts <span class="string">&quot;Good morning <span class="subst">#&#123;name&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ä»¥ä¸Šä¸¤ç§å®šä¹‰å½¢å¼éƒ½åœ¨ç±»çš„å¤–éƒ¨å®šä¹‰ï¼Œå¦‚æžœåœ¨ç±»çš„å†…éƒ¨å®šä¹‰ï¼Œå¯ä»¥å°†ç±»åç”¨<strong>self</strong>ï¼Œè¿™æ—¶selfå¼•ç”¨çš„å¯¹è±¡æ˜¯è¯¥ç±»æœ¬èº«ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line"><span class="keyword">class</span> &lt;&lt; <span class="variable language_">self</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">good_morning</span>(<span class="params">name</span>)</span><br><span class="line">puts <span class="string">&quot;Good morning <span class="subst">#&#123;name&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">self</span>.good_morning(name)</span><br><span class="line">puts <span class="string">&quot;Good morning <span class="subst">#&#123;name&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼š*<em>class &lt;&lt; ç±»å ~ end</em></em> è¿™ç§å†™æ³•çš„ç±»å®šä¹‰ç§°ä¸ºå•ä¾‹ç±»å®šä¹‰ï¼Œå•ä¾‹ç±»å®šä¹‰ä¸­å®šä¹‰çš„æ–¹æ³•ç§°ä¸ºå•ä¾‹æ–¹æ³•*</p><h4 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h4><p>åœ¨classä¸­å®šä¹‰å¸¸é‡ï¼Œé€šè¿‡ä½¿ç”¨<strong>ç±»å::å¸¸é‡å</strong>å½¢å¼æ¥å®žçŽ°å¤–éƒ¨è®¿é—®.å¸¸é‡æ˜¯ä¸å¯ä¿®æ”¹çš„ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line"><span class="title class_">Hello</span> = <span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p <span class="title class_">Greeter</span><span class="symbol">:</span><span class="symbol">:Hello</span><span class="comment">#=&gt; &quot;Hello&quot;</span></span><br></pre></td></tr></table></figure><h4 id="ç±»å˜é‡"><a href="#ç±»å˜é‡" class="headerlink" title="ç±»å˜é‡"></a>ç±»å˜é‡</h4><p>ä»¥**@@*<em>å¼€å¤´çš„å˜é‡æˆä¸ºç±»å˜é‡ï¼Œç±»å˜é‡æ˜¯è¯¥ç±»ä¸­æ‰€æœ‰å®žä¾‹çš„å…±äº«å˜é‡ï¼Œè¿™ç‚¹å’Œå¸¸é‡ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯è¿™ä¸ªç±»å˜é‡å¯ä»¥è¢«ä¿®æ”¹ã€‚å½“ç„¶ï¼Œä»Žç±»çš„å¤–éƒ¨è®¿é—®ç±»å˜é‡æ—¶ä¹Ÿéœ€è¦å­˜å–å™¨ï¼Œä½†æ˜¯ä¸èƒ½ä½¿ç”¨</em>attr_accessor*,å®ƒä½¿å±žäºŽå®žä¾‹å˜é‡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±å®šä¹‰ï¼Œä½¿ç”¨ç±»æ–¹æ³•æ¥èŽ·å–ç±»å˜é‡æ˜¯ä¸ªå¥½çš„å½¢å¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line"><span class="variable">@@greeter_count</span> = <span class="number">0</span></span><br><span class="line"><span class="built_in">attr_accessor</span> <span class="symbol">:name</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">name = <span class="string">&quot;Ruby&quot;</span></span>)</span><br><span class="line"><span class="variable">@name</span> = name</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span></span><br><span class="line">puts <span class="string">&quot;Hello <span class="subst">#&#123;<span class="variable">@name</span>&#125;</span>&quot;</span></span><br><span class="line"><span class="variable">@@greeter_count</span> += <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Greeter</span>.greeter_count</span><br><span class="line"><span class="variable">@@greeter_count</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Greeter</span>.greeter_count<span class="comment">#=&gt; 0</span></span><br><span class="line">greeter = <span class="title class_">Greeter</span>.new(<span class="string">&quot;world&quot;</span>)</span><br><span class="line">greeter.say_hello</span><br><span class="line">greeter = <span class="title class_">Greeter</span>.new</span><br><span class="line">greeter.say_hello</span><br><span class="line"><span class="title class_">Greeter</span>.greeter_count<span class="comment">#=&gt; 2</span></span><br></pre></td></tr></table></figure><h4 id="é™åˆ¶æ–¹æ³•çš„è°ƒç”¨"><a href="#é™åˆ¶æ–¹æ³•çš„è°ƒç”¨" class="headerlink" title="é™åˆ¶æ–¹æ³•çš„è°ƒç”¨"></a>é™åˆ¶æ–¹æ³•çš„è°ƒç”¨</h4><p>å’Œå…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€ä¸€æ ·ï¼ŒRubyä¹Ÿæœ‰æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ï¼Œåˆ†åˆ«ä¸º<strong>public</strong>ï¼Œ<strong>protected</strong>ï¼Œ<strong>private</strong>ã€‚å…¶è¡¨è¾¾çš„å«ä¹‰ä¹Ÿä¸€æ ·ã€‚</p><ul><li>public ä»¥å®žä¾‹çš„æ–¹æ³•çš„å½¢å¼å‘å¤–éƒ¨å…¬å¼€</li><li>protect ä»…å‘åŒä¸€ä¸ªç±»æˆ–å­ç±»å…¬å¼€</li><li>private ä»…å†…éƒ¨ç±»å¯è°ƒç”¨</li></ul><p>å®šä¹‰æ–¹å¼ï¼Œæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è®¿é—®ä¿®é¥°ç¬¦åŽé¢å¸¦æ–¹æ³•ç¬¦å·</p><pre><code>public :æ–¹æ³•1, :æ–¹æ³•2</code></pre><p>å¦å¤–ä¸€ç§æ˜¯åŽé¢ä¸å¸¦å‚æ•°ï¼Œé‚£ä¹ˆä¸‹é¢æ‰€æœ‰å®šä¹‰çš„æ–¹æ³•å‡åœ¨è¿™ä¸ªè®¿é—®ä¿®é¥°ç¬¦ä¸‹ï¼Œç›´åˆ°æœ‰æ–°çš„è®¿é—®ä¿®é¥°ç¬¦ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line"><span class="built_in">attr_accessor</span> <span class="symbol">:name</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">name = <span class="string">&quot;Ruby&quot;</span></span>)</span><br><span class="line"><span class="variable">@name</span> = name</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span></span><br><span class="line">puts <span class="string">&quot;Hello <span class="subst">#&#123;<span class="variable">@name</span>&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_bye</span></span><br><span class="line">puts <span class="string">&quot;Bye <span class="subst">#&#123;<span class="variable language_">self</span>.name&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_haha</span></span><br><span class="line">puts <span class="string">&quot;Haha <span class="subst">#&#123;<span class="variable">@name</span>&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="symbol">:say_haha</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>å¦‚ä»¥ä¸Šæ–¹æ³•çš„å®šä¹‰ï¼Œpublicä¿®é¥°ç¬¦ä¸‹å®šä¹‰äº†3ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ª3ä¸ªæ–¹æ³•éƒ½å¯ä»¥åœ¨å¤–éƒ¨è®¿é—®ï¼Œä½†æ˜¯æœ€åŽæˆ‘ä»¬åˆå°†æœ€åŽä¸€ä¸ªæ–¹æ³•æ ‡è®°ä¸ºprivateã€‚æ‰€ä»¥å¦‚æžœåœ¨å¤–éƒ¨ä¼å›¾è®¿é—®è¿™ä¸ªæ–¹æ³•ï¼Œå°†è·‘å‡ºå¦‚ä¸‹é”™è¯¯ä¿¡æ¯</p><pre><code>class_definition.rb:47:in `&lt;main&gt;&#39;: private method `say_haha&#39; called for #&lt;Greeter:0x007fb57c101510 @name=&quot;Ruby&quot;&gt; (NoMethodError)</code></pre><p>å¦‚æžœæ²¡æœ‰æŒ‡å®šè®¿é—®çº§åˆ«çš„æ–¹æ³•é»˜è®¤ä¸ºpublicï¼Œä½†æ˜¯<strong>initialize</strong>æ–¹æ³•æ˜¯ä¸ªä¾‹å¤–ï¼Œå®ƒé€šå¸¸è¢«å®šä¹‰ä¸ºprivate</p><h3 id="æ‰©å±•ç±»"><a href="#æ‰©å±•ç±»" class="headerlink" title="æ‰©å±•ç±»"></a>æ‰©å±•ç±»</h3><p>Rubyå…è®¸æˆ‘ä»¬åœ¨å·²ç»å®šä¹‰å¥½çš„ç±»ä¸­æ·»åŠ æ–¹æ³•ã€‚å³ä¸ºæ‰©å±•æ–¹æ³•ã€‚å¦‚åœ¨Stringç±»ä¸­å®šä¹‰ä¸€ä¸ªè®¡ç®—å­—ç¬¦ä¸²å•è¯æ•°çš„æ–¹æ³•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">String</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">count_word</span></span><br><span class="line">ary = <span class="variable language_">self</span>.split(<span class="regexp">/\s+/</span>)<span class="comment">#ç”¨ç©ºæ ¼åˆ†å‰²æŽ¥æ”¶è€…</span></span><br><span class="line">ary.size</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">&quot;Hello Ruby&quot;</span></span><br><span class="line">p str.count_word<span class="comment">#=&gt; 2</span></span><br></pre></td></tr></table></figure><h4 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h4><p>ä½¿ç”¨classå…³é”®å­—æŒ‡å®šç±»åçš„åŒæ—¶æŒ‡å®šçˆ¶ç±»å</p><pre><code>class ç±»å &lt; çˆ¶ç±»å    ç±»å®šä¹‰end</code></pre><p>å®šä¹‰ç±»æ—¶æ²¡æœ‰æŒ‡å®šçˆ¶ç±»çš„æƒ…å†µä¸‹ï¼ŒRubyä¼šé»˜è®¤è¯¥ç±»ä¸º<strong>Object</strong>ç±»çš„å­ç±»ã€‚é€šè¿‡ç±»å¯¹è±¡è°ƒç”¨**instance_methodsæ–¹æ³•ï¼Œå¯ä»¥å¾—åˆ°ä»¥ç¬¦å·å½¢å¼è¿”å›žçš„è¯¥ç±»çš„å®žä¾‹æ–¹æ³•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Greeter</span>.instance_methods</span><br></pre></td></tr></table></figure><p>å¦‚æžœæƒ³å®šä¹‰<strong>BasicObject</strong>çš„å­ç±»ï¼Œæˆ‘ä»¬éœ€è¦æ˜Žç¡®æŒ‡å®šBasicObjectç±»ä¸ºçˆ¶ç±»ï¼›è€ŒObjectç±»ä¸ºçˆ¶ç±»æ—¶ä¸éœ€è¦ã€‚</p><h4 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h4><p><strong>alias</strong>å³åˆ«åï¼Œåœ¨Rubyä¸­æˆ‘ä»¬å¯ä»¥ç»™æ–¹æ³•è®¾ç½®åˆ«åï¼Œè®¾ç½®åˆ«åä¹Ÿä¸¤ç§æ–¹å¼ï¼Œä¸€ç§aliasåŽé¢å¸¦æ–¹æ³•åå‚æ•°ï¼Œç¬¬äºŒç§åŽé¢å¸¦æ–¹æ³•ç¬¦å·åå‚æ•°</p><pre><code>alias åˆ«ååŽŸå#ä½¿ç”¨æ–¹æ³•åalias :åˆ«å :åŽŸå#ä½¿ç”¨ç¬¦å·å</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span></span><br><span class="line">puts <span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RubyGreeter</span> &lt; <span class="title class_ inherited__">Greeter</span></span><br><span class="line"><span class="keyword">alias</span> old_say_hello say_hello  <span class="comment">#å°†ç»§æ‰¿çš„say_helloæ–¹æ³•è®¾ç½®åˆ«åä¸ºold_say_hello</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span></span><br><span class="line">puts <span class="string">&quot;Hello Ruby&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">rubyGreeter = <span class="title class_">RubyGreeter</span>.new</span><br><span class="line">p rubyGreeter.old_say_hello<span class="comment">#=&gt; &quot;Hello&quot;</span></span><br><span class="line">p rubyGreeter.say_hello<span class="comment">#=&gt; &quot;Hello Ruby&quot;</span></span><br></pre></td></tr></table></figure><h4 id="undef"><a href="#undef" class="headerlink" title="undef"></a>undef</h4><p><strong>undef</strong>ç”¨äºŽåˆ é™¤å·²æœ‰æ–¹æ³•çš„å®šä¹‰ã€‚ä¸Žaliasä¸€æ ·ï¼Œå‚æ•°å¯ä»¥æŒ‡å®šæ–¹æ³•åæˆ–è€…ç¬¦å·åã€‚</p><pre><code>undef æ–¹æ³•å#ä½¿ç”¨æ–¹æ³•åundef :æ–¹æ³•å#ä½¿ç”¨ç¬¦å·å</code></pre><p>åœ¨å­ç±»ä¸­å¸Œæœ›åˆ é™¤çˆ¶ç±»çš„æ–¹æ³•æ—¶å¯ä»¥ç›´æŽ¥ä½¿ç”¨undefã€‚è¯•å›¾è®¿é—®å·²åˆ é™¤çš„æ–¹æ³•å°†ä¼šå¼•å‘<em>NoMethodError</em>é”™è¯¯ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span></span><br><span class="line">puts <span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RubyGreeter</span> &lt; <span class="title class_ inherited__">Greeter</span></span><br><span class="line">un<span class="keyword">def</span> <span class="title function_">say_hello</span>  <span class="comment">#åˆ é™¤ç»§æ‰¿çš„say_hello</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">rubyGreeter = <span class="title class_">RubyGreeter</span>.new</span><br><span class="line">p rubyGreeter.say_hello<span class="comment">#=&gt;æŠ›å‡ºå¼‚å¸¸ï¼Œundefined method `say_hello&#x27; for #&lt;RubyGreeter:0x007fbff4167220&gt; (NoMethodError)</span></span><br></pre></td></tr></table></figure><h4 id="å•ä¾‹ç±»"><a href="#å•ä¾‹ç±»" class="headerlink" title="å•ä¾‹ç±»"></a>å•ä¾‹ç±»</h4><p>åˆ©ç”¨å•ä¾‹ç±»å®šä¹‰ï¼Œå¯ä»¥ç»™å¯¹è±¡æ·»åŠ æ–¹æ³•ï¼ˆå•ä¾‹æ–¹æ³•ï¼‰ã€‚å•åˆ—ç±»å®šä¹‰è¢«ç”¨äºŽå®šä¹‰å¯¹è±¡çš„ä¸“å±žå®žä¾‹æ–¹æ³•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">str1 = &quot;Ruby&quot;</span><br><span class="line">str2 = &quot;Ruby&quot;</span><br><span class="line"></span><br><span class="line">class &lt;&lt; str1</span><br><span class="line">def hello</span><br><span class="line">puts &quot;Hello #&#123;self&#125;&quot;</span><br><span class="line">end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">p str1.hello #=&gt; &quot;Hello Ruby&quot;</span><br><span class="line">p str2.hello#=&gt;å¼•å‘NoMethodErroré”™è¯¯</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(5)</title>
      <link href="/2015/08/24/ruby-practice-5/"/>
      <url>/2015/08/24/ruby-practice-5/</url>
      
        <content type="html"><![CDATA[<h3 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h3><p>åœ¨Rubyä¸­ï¼Œè°ƒç”¨æ–¹æ³•æ—¶æ˜¯å¯ä»¥çœç•¥()çš„</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> print(<span class="string">&quot;Hello world&quot;</span>)<span class="comment">#=&gt;Hello world</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> print <span class="string">&quot;Hello world&quot;</span><span class="comment">#=&gt;Hello world</span></span><br></pre></td></tr></table></figure><p><em>å¸¦å—çš„æ–¹æ³•</em><br>å¸¦å—çš„æ–¹æ³•å¦‚time,eachæ–¹æ³•ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š</p><pre><code>å¯¹è±¡.æ–¹æ³•å(å‚æ•°ï¼Œ...) do |å˜é‡1ï¼Œ...|    å—å†…å®¹end</code></pre><p>Rubyä¸­æ–¹æ³•å¯å½’ä¸º3ç±»ï¼š</p><span id="more"></span><p><em>å®žä¾‹æ–¹æ³•</em><br>å³ç”±å¯¹è±¡æ¥è°ƒç”¨ï¼Œä»¥ä¸‹æ•°ç»„çš„sizeæ–¹æ³•ä¸ºå®žä¾‹æ–¹æ³•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> [<span class="number">1</span>, <span class="number">2</span>].size<span class="comment">#=&gt;sizeæ–¹æ³•å³ä¸ºå®žä¾‹æ–¹æ³•</span></span><br></pre></td></tr></table></figure><p><em>ç±»æ–¹æ³•</em><br>ç”±ç±»æœ¬èº«æ¥è°ƒç”¨ï¼Œå’ŒC#ã€Javaä¸­å¾—é™æ€æ–¹æ³•ç±»ä¼¼ï¼Œç±»æ–¹æ³•ä¸å±žäºŽä»»ä½•ä¸€ä¸ªå¯¹è±¡</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="title class_">Array</span>.new</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="title class_">File</span>.open(<span class="string">&quot;some_file&quot;</span>)</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="title class_">Time</span>.now</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ç±»æ–¹æ³•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨**::<strong>ä»£æ›¿</strong>.**</p><p><em>å‡½æ•°å¼æ–¹æ³•</em></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> print <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> sleep(<span class="number">10</span>)</span><br></pre></td></tr></table></figure><p>åœ¨Rubyçš„å¸®åŠ©æ–‡æ¡£ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨<strong>ç±»å#æ–¹æ³•å</strong>æ¥æ ‡è®°å®žä¾‹æ–¹æ³•ï¼Œç”¨<strong>ç±»å.æ–¹æ³•å</strong>æˆ–è€…<strong>ç±»å::æ–¹æ³•å</strong>æ¥æ ‡è®°ç±»æ–¹æ³•</p><h4 id="æ–¹æ³•çš„å®šä¹‰"><a href="#æ–¹æ³•çš„å®šä¹‰" class="headerlink" title="æ–¹æ³•çš„å®šä¹‰"></a>æ–¹æ³•çš„å®šä¹‰</h4><p>å®šä¹‰æ–¹æ³•çš„è¯­å¥å¦‚ä¸‹:</p><pre><code>def æ–¹æ³•å(å‚æ•°1ï¼Œå‚æ•°2,...)    å¸Œæœ›æ‰§è¡Œçš„å¤„ç†end</code></pre><p>å¯ä»¥æŒ‡å®šé»˜è®¤å‚æ•°ç»™æ–¹æ³•ï¼Œå½“æ–¹æ³•æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œä»Žå‚æ•°åˆ—è¡¨çš„å³è¾¹å¼€å§‹ä¾æ¬¡æŒ‡å®šé»˜è®¤å€¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a, b = <span class="number">1</span>, c = <span class="number">2</span></span>)</span><br><span class="line"><span class="comment">#some codes</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼Œåªçœç•¥å·¦è¾¹çš„å‚æ•°æˆ–ä¸­é—´çš„æŸä¸ªå‚æ•°æ˜¯ä¸è¡Œçš„</em></p><p>æ–¹æ³•çš„è¿”å›žå€¼ä½¿ç”¨<strong>return</strong>å…³é”®å­—ï¼Œå½“è¿™ä¸ªå…³é”®å­—çœç•¥æ—¶ï¼Œæ–¹æ³•çš„æœ€åŽä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æžœå°±ä¼šæˆä¸ºæ–¹æ³•çš„è¿”å›žå€¼ã€‚</p><p><em>å®šä¹‰å¸¦å—çš„æ–¹æ³•</em><br>åœ¨å®šä¹‰å¸¦å—çš„æ–¹æ³•æ—¶ï¼Œéœ€è¦ä½¿ç”¨<strong>yield</strong>å…³é”®å­—æ¥å®šä¹‰å—æ‰€åœ¨çš„ä½ç½®ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤º</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®šä¹‰</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">func</span></span><br><span class="line"><span class="keyword">yield</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è°ƒç”¨</span></span><br><span class="line">func <span class="keyword">do</span></span><br><span class="line">print <span class="string">&quot;hello world&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>å¦‚æžœ<strong>yield</strong>éƒ¨åˆ†æœ‰å‚æ•°ï¼Œç¨‹åºå°±ä¼šå°†å…¶å½“ä½œå—å˜é‡ä¼ åˆ°å—é‡Œã€‚å¿«é‡Œé¢æœ€åŽçš„è¡¨è¾¾å¼çš„å€¼å³ä¸ºå¿«å¾—æ‰§è¡Œç»“æžœï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä½œä¸º<strong>yield</strong>çš„è¿”å›žå€¼åœ¨å—çš„å¤–éƒ¨ä½¿ç”¨ã€‚</p><p><em>å‚æ•°ä¸ªæ•°ä¸ç¡®å®šçš„æ–¹æ³•</em><br>é€šè¿‡ä½¿ç”¨<strong>*å˜é‡å</strong>çš„å½¢å¼æ¥å®šä¹‰å‚æ•°ä¸ªæ•°ä¸ç¡®å®šçš„æ–¹æ³•ã€‚Rubyä¼šæŠŠæ‰€æœ‰çš„å‚æ•°å°è£…ä¸ºæ•°ç»„ï¼Œæä¾›æ–¹æ³•å†…éƒ¨ä½¿ç”¨ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*args</span>)</span><br><span class="line">args</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p func(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)<span class="comment">#=&gt; [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>å½“æ–¹æ³•éœ€è¦æŒ‡å®šç‰¹å®šçš„å‚æ•°ï¼Œè€Œå…¶ä»–å‚æ•°åˆä¸ç¡®å®šçš„æƒ…å†µä¸‹</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sum</span>(<span class="params">arg1, arg2, *args</span>)</span><br><span class="line">result = arg1 + arg2</span><br><span class="line">args.each <span class="keyword">do</span> |<span class="params"> arg </span>|</span><br><span class="line">result += arg</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">result</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)<span class="comment">#=&gt; 10</span></span><br></pre></td></tr></table></figure><p>æ‰€æœ‰ä¸ç¡®å®šçš„å‚æ•°éƒ½è¢«ä½œä¸ºæ•°ç»„èµ‹å€¼ç»™å˜é‡args, <strong>*å˜é‡å</strong>è¿™ç§å½¢å¼çš„å‚æ•°ï¼Œåªèƒ½åœ¨æ–¹æ³•å®šä¹‰çš„å‚æ•°åˆ—è¡¨ä¸­å‡ºçŽ°ä¸€æ¬¡ã€‚</p><p><em>å…³é”®å­—å‚æ•°</em><br>ä½¿ç”¨å…³é”®å­—å‚æ•°ï¼Œå¯ä»¥å°†å‚æ•°åä¸Žå‚æ•°å€¼æˆå¯¹åœ°ä¼ ç»™æ–¹æ³•å†…éƒ¨ä½¿ç”¨ï¼Œè¿™æ—¶ï¼Œè°ƒç”¨æ–¹æ³•çš„å‚æ•°ä¸ªæ•°ä»¥åŠè°ƒç”¨é¡ºåºå°±å¯ä»¥æ‰“ä¹±ã€‚</p><pre><code>def æ–¹æ³•å(å‚æ•°1ï¼šå€¼1, å‚æ•°2ï¼šå€¼2, ...)    é€»è¾‘å¤„ç†end</code></pre><p>è€Œä¸”è¿˜å¯ä»¥åœ¨æ–¹æ³•å®šä¹‰æ—¶æŒ‡å®šå‚æ•°é»˜è®¤å€¼</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sum</span>(<span class="params"><span class="symbol">a:</span> <span class="number">0</span>, <span class="symbol">b:</span> <span class="number">0</span></span>)</span><br><span class="line">a + b</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p sum(<span class="symbol">a:</span> <span class="number">10</span>, <span class="symbol">b:</span> <span class="number">20</span>)<span class="comment">#=&gt; 30</span></span><br><span class="line">p sum(<span class="symbol">b:</span> <span class="number">20</span>, <span class="symbol">a:</span> <span class="number">10</span>)<span class="comment">#=&gt; 30æ”¹å˜å‚æ•°çš„è°ƒç”¨é¡ºåº</span></span><br><span class="line">p sum(<span class="symbol">b:</span> <span class="number">20</span>)<span class="comment">#=&gt; 20 çœç•¥äº†å‚æ•°aï¼Œaé»˜è®¤å€¼ä¸º0</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å…³é”®å­—å‚æ•°å®šä¹‰æ–¹æ³•ï¼Œå¦‚æžœæˆ‘ä»¬ä¼ å…¥äº†æœªå®šä¹‰çš„å‚æ•°ï¼Œé‚£ä¹ˆç¨‹åºå°†ä¼šæŠ¥é”™ã€‚å¦‚ä½•é¿å…å‘¢ï¼Œåœ¨Rubyä¸­å¯ä»¥ä½¿ç”¨<strong>**å˜é‡å</strong>çš„å½¢å¼æ¥æŽ¥æ”¶æœªå®šä¹‰çš„å‚æ•°ã€‚æ­¤æ—¶ï¼ŒRubyä¼šæŠŠå‚æ•°åˆ—è¡¨ä»¥å¤–çš„å…¶ä»–å…³é”®å­—å‚æ•°ä»¥æ•£åˆ—å¯¹è±¡çš„å½¢å¼ä¿å­˜ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span><span class="title function_">sum</span>(<span class="params"><span class="symbol">a:</span> <span class="number">0</span>, <span class="symbol">b:</span> <span class="number">0</span>, **args</span>)</span><br><span class="line">result = a + b</span><br><span class="line">args.each <span class="keyword">do</span> |<span class="params">key, value</span>|<span class="comment">#=&gt; éåŽ†æ•£åˆ—</span></span><br><span class="line">result += value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">result</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">sum(<span class="symbol">a:</span> <span class="number">1</span>, <span class="symbol">b:</span> <span class="number">2</span>, <span class="symbol">c:</span> <span class="number">3</span>, <span class="symbol">d:</span> <span class="number">4</span>)<span class="comment">#=&gt; 10</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œå…³é”®å­—å‚æ•°ä¹Ÿå¯ä»¥ä¸Žæ™®é€šå‚æ•°ä¸€èµ·æ­é…ä½¿ç”¨ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sum</span>(<span class="params">a, <span class="symbol">b:</span> <span class="number">1</span>, <span class="symbol">c:</span> <span class="number">2</span></span>)</span><br><span class="line">sum = a + b + c</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">sum(<span class="number">10</span>, <span class="symbol">b:</span> <span class="number">20</span>, <span class="symbol">c:</span> <span class="number">30</span>)<span class="comment">#=&gt; 60</span></span><br></pre></td></tr></table></figure><p>ä»¥å…³é”®å­—å‚æ•°å®šä¹‰çš„æ–¹æ³•ï¼ŒRubyä¼šè‡ªåŠ¨å°†å…¶å°è£…ä¸ºæ•£åˆ—ç„¶åŽä¼ é€’ç»™æ–¹æ³•å†…éƒ¨ï¼Œæ‰€ä»¥åŸºäºŽæ­¤ï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥åˆ©ç”¨æ•£åˆ—çš„é”®å€¼æ¥å°†æ•£åˆ—ä¼ é€’ç»™æ–¹æ³•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sum</span>(<span class="params"><span class="symbol">a:</span> <span class="number">0</span>, <span class="symbol">b:</span> <span class="number">0</span>, <span class="symbol">c:</span> <span class="number">0</span></span>)</span><br><span class="line">sum = a + b + c</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">args = &#123;<span class="symbol">a:</span> <span class="number">1</span>, <span class="symbol">b:</span> <span class="number">2</span>, <span class="symbol">c:</span> <span class="number">3</span>&#125;<span class="comment">#=&gt; å®šä¹‰æ•£åˆ—args</span></span><br><span class="line">sum(args)<span class="comment">#=&gt; 6 å°†æ•£åˆ—argsä¼ é€’ç»™sumæ–¹æ³•</span></span><br><span class="line">sum(&#123;<span class="string">&quot;a&quot;</span>=&gt;<span class="number">1</span>, <span class="string">&quot;b&quot;</span>=&gt;<span class="number">2</span>, <span class="string">&quot;c&quot;</span>=&gt;<span class="number">3</span>&#125;ï¼‰<span class="comment">#=&gt; 6 å°†æ•£åˆ—ç›´æŽ¥ä¼ ç»™æ–¹æ³•</span></span><br><span class="line">sum(<span class="symbol">c:</span> <span class="number">3</span>, <span class="symbol">a:</span> <span class="number">1</span>, <span class="symbol">b:</span> <span class="number">2</span>)<span class="comment">#=&gt; 6 å¯çœç•¥&#123;&#125;</span></span><br></pre></td></tr></table></figure><p><em>ä½¿ç”¨å…³é”®å­—å‚æ•°å®šä¹‰æ–¹æ³•ï¼Œæ—¢å¯ä»¥å¯¹é”®è¿›è¡Œé™åˆ¶ï¼Œåˆå¯ä»¥å®šä¹‰å‚æ•°çš„é»˜è®¤å€¼ï¼Œå»ºè®®åœ¨å®žé™…ç¼–ç¨‹ä¸­å¤šå°è¯•ä½¿ç”¨å…³é”®å­—å‚æ•°</em></p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(4)</title>
      <link href="/2015/08/17/ruby-practice-4/"/>
      <url>/2015/08/17/ruby-practice-4/</url>
      
        <content type="html"><![CDATA[<h3 id="å¾ªçŽ¯"><a href="#å¾ªçŽ¯" class="headerlink" title="å¾ªçŽ¯"></a>å¾ªçŽ¯</h3><p>å¯¹äºŽä»»ä½•ä¸€ç§ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œéƒ½æœ‰å¾ªçŽ¯å¤„ç†çš„æ–¹æ³•ï¼ŒRubyä¹Ÿä¸€æ ·ï¼Œä½†æ˜¯åœ¨Rubyä¸­æœ‰ä¸¤ç§å®žçŽ°å¾ªçŽ¯çš„æ–¹æ³•ã€‚</p><ul><li>ä½¿ç”¨å¾ªçŽ¯è¯­å¥ï¼Œå³åˆ©ç”¨Rubyæä¾›çš„çŽ°æœ‰å¾ªçŽ¯è¯­å¥</li><li>ä½¿ç”¨æ–¹æ³•å®žçŽ°å¾ªçŽ¯ï¼Œå…¶å…·ä½“åšæ³•ä¸ºï¼Œå°†å—ä¼ ç»™æ–¹æ³•ï¼Œç„¶åŽåœ¨å—é‡Œé¢å†™ä¸Šéœ€è¦å¾ªçŽ¯çš„å¤„ç†ã€‚</li></ul><p>åœ¨Rubyä¸­ï¼Œæœ‰6ç§å¾ªçŽ¯è¯­å¥æˆ–æ–¹æ³•ï¼š</p><span id="more"></span><ul><li>timesæ–¹æ³•</li><li>whileè¯­å¥</li><li>eachæ–¹æ³•</li><li>forè¯­å¥</li><li>untilè¯­å¥</li><li>loopæ–¹æ³•</li></ul><p><em>timesæ–¹æ³•</em><br>ç”¨äºŽå·²çŸ¥é“æ‰§è¡Œçš„æ¬¡æ•°ï¼Œå…·ä½“ç”¨æ³•å¦‚ä¸‹:</p><pre><code>å¾ªçŽ¯æ¬¡æ•°.times do    é€»è¾‘å¤„ç†end#do ~ endéƒ¨åˆ†å¯ä»¥ç”¨ &#123; ~ &#125;ä»£æ›¿.å¾ªçŽ¯æ¬¡æ•°.times &#123;    é€»è¾‘å¤„ç†&#125;</code></pre><figure class="highlight ruby"><figcaption><span>timesæ–¹æ³•</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="number">3</span>.times <span class="keyword">do</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> print <span class="string">&quot;hello &quot;</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">end</span></span><br><span class="line">hello hello hello =&gt; <span class="number">3</span><span class="comment">#=&gt; æ‰“å°3ä¸ªhelloï¼Œå¹¶è¿”å›žå¾ªçŽ¯æ¬¡æ•°</span></span><br></pre></td></tr></table></figure><p>å¦‚æžœæƒ³çŸ¥é“å½“å‰çš„å¾ªçŽ¯æ¬¡æ•°ï¼Œåˆ™éœ€è¦æ·»åŠ ä¸€ä¸ªå½“å‰çš„å¾ªçŽ¯æ¬¡æ•°å˜é‡:</p><pre><code>å¾ªçŽ¯æ¬¡æ•°.times do |i|    é€»è¾‘å¤„ç†end</code></pre><figure class="highlight ruby"><figcaption><span>å¸¦å¾ªçŽ¯æ¬¡æ•°çš„timesæ–¹æ³•</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="number">3</span>.times <span class="keyword">do</span> |<span class="params">i</span>|</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> print <span class="string">&quot;hello<span class="subst">#&#123;i&#125;</span> &quot;</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">end</span></span><br><span class="line">hello0 hello1 hello2 =&gt; <span class="number">3</span><span class="comment">#=&gt; æ‰“å°3ä¸ªå¸¦æœ‰å½“å‰ç¬¬å‡ æ¬¡å¾ªçŽ¯çš„hello,å¹¶è¿”å›žå¾ªçŽ¯æ¬¡æ•°</span></span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼š<strong>times</strong>æ–¹æ³•ä¼šè¿”å›žå¾ªçŽ¯æ¬¡æ•°</em></p><p><em>forè¯­å¥</em><br>ä¸Ž<strong>times</strong>æ–¹æ³•ä¸åŒï¼Œ<strong>for</strong>å¹¶ä¸æ˜¯æ–¹æ³•ï¼Œè€Œæ˜¯å¾ªçŽ¯æŽ§åˆ¶è¯­å¥ã€‚</p><pre><code>for å˜é‡ in å¼€å§‹æ—¶çš„æ•°å€¼..ç»“æŸæ—¶çš„æ•°å€¼ do    å¾ªçŽ¯å¤„ç†end#éåŽ†å¯¹è±¡çš„forè¯­å¥for å˜é‡ in å¯¹è±¡ do    å¾ªçŽ¯å¤„ç†end</code></pre><p><strong>for</strong>è¯­å¥çš„å¾ªçŽ¯å¼€å§‹å€¼å’Œç»“æŸå€¼å¯ä»¥ä»»æ„æŒ‡å®šã€‚</p><figure class="highlight ruby"><figcaption><span>forè¯­å¥</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span>..<span class="number">3</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> print <span class="string">&quot;hello &quot;</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">end</span></span><br><span class="line">hello hello hello =&gt; <span class="number">1</span>..<span class="number">3</span><span class="comment">#=&gt; æ‰“å°3ä¸ªhelloï¼Œè¿”å›ž1..3çš„range</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> language = [<span class="string">&quot;Python&quot;</span>, <span class="string">&quot;JavaScript&quot;</span>, <span class="string">&quot;Ruby&quot;</span>]</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">for</span> lan <span class="keyword">in</span> language</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> print <span class="string">&quot;<span class="subst">#&#123;lan&#125;</span> &quot;</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">end</span></span><br><span class="line"><span class="title class_">Python</span> <span class="title class_">JavaScript</span> <span class="title class_">Ruby</span> =&gt; [<span class="string">&quot;Python&quot;</span>, <span class="string">&quot;JavaScript&quot;</span>, <span class="string">&quot;Ruby&quot;</span>]<span class="comment">#=&gt; ä¸€æ¬¡æ‰“å°æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå¹¶è¿”å›žæ•°ç»„</span></span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼š..æˆ–è€…â€¦éƒ½æ˜¯åˆ›å»ºèŒƒå›´å¯¹è±¡æ—¶æ‰€éœ€çš„ç¬¦å·</em></p><p><em>whileè¯­å¥</em><br>ä¹‹å‰äº†è§£åˆ°ï¼Œè¯­æ³•å¦‚ä¸‹ï¼Œååˆ†ç®€å•</p><pre><code>while æ¡ä»¶ do    å¾ªçŽ¯å¤„ç†end</code></pre><figure class="highlight ruby"><figcaption><span>whileè¯­å¥</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> i, sum = <span class="number">1</span>, <span class="number">0</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">while</span> sum &lt; <span class="number">50</span> <span class="keyword">do</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> sum += i</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> i += <span class="number">1</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">end</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> puts sum<span class="comment">#=&gt; 55</span></span><br></pre></td></tr></table></figure><p><em>untilè¯­å¥</em><br>å’Œ<strong>while</strong>è¯­å¥åˆšåˆšç›¸åï¼Œ<strong>until</strong>è¯­å¥ä¸æ»¡è¶³æ¡ä»¶æ—¶æ‰æ‰§è¡Œå¾ªçŽ¯å¤„ç†ï¼ŒçŸ¥é“æ¡ä»¶æ»¡è¶³ç»ˆæ­¢ã€‚</p><pre><code>until æ¡ä»¶ do    å¾ªçŽ¯å¤„ç†end</code></pre><figure class="highlight ruby"><figcaption><span>untilè¯­å¥</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> i, sum = <span class="number">1</span>, <span class="number">0</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">until</span> sum &gt;=<span class="number">50</span> <span class="keyword">do</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> sum += i</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> i += <span class="number">1</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">end</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span>  puts sum<span class="comment">#=&gt; 55</span></span><br></pre></td></tr></table></figure><p><em>eachæ–¹æ³•</em><br><strong>each</strong>æ–¹æ³•å°†å¯¹è±¡é›†åˆé‡Œçš„å¯¹è±¡é€ä¸ªå–å‡ºï¼Œè¿™ä¸Ž<strong>for</strong>è¯­å¥å¾ªçŽ¯å–å‡ºæ•°ç»„å…ƒç´ éžå¸¸ç›¸ä¼¼ã€‚</p><pre><code>å¯¹è±¡.each do |å˜é‡|    å¾ªçŽ¯å¤„ç†end#ä¸Žä¸‹é¢çš„forè¯­å¥å¤„ç†ä¸€æ ·for å˜é‡ in å¯¹è±¡    å¾ªçŽ¯å¤„ç†end    </code></pre><figure class="highlight ruby"><figcaption><span>eachæ–¹æ³•</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> language = [<span class="string">&quot;Python&quot;</span>, <span class="string">&quot;JavaScript&quot;</span>, <span class="string">&quot;Ruby&quot;</span>]</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> language.each <span class="keyword">do</span> |<span class="params">lan</span>|</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> print <span class="string">&quot;<span class="subst">#&#123;lan&#125;</span> &quot;</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">end</span></span><br><span class="line"><span class="title class_">Python</span> <span class="title class_">JavaScript</span> <span class="title class_">Ruby</span> =&gt; [<span class="string">&quot;Python&quot;</span>, <span class="string">&quot;JavaScript&quot;</span>, <span class="string">&quot;Ruby&quot;</span>]<span class="comment">#=&gt; è¿”å›žå¯¹è±¡</span></span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼šåœ¨Rubyå†…éƒ¨ï¼Œ<strong>for</strong>è¯­å¥æ˜¯ç”¨<strong>each</strong>æ–¹æ³•æ¥å®žçŽ°çš„ã€‚å¯ä»¥ä½¿ç”¨<strong>each</strong>æ–¹æ³•çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ç”¨<strong>for</strong>è¯­å¥</em></p><p><em>loopæ–¹æ³•</em><br>æ­¤å¾ªçŽ¯æ–¹æ³•æ²¡ç”¨ç»ˆæ­¢å¾ªçŽ¯æ¡ä»¶ï¼Œéœ€è¦ç”¨å¾—å¾ªçŽ¯æŽ§åˆ¶è¯­å¥æ¥æŽ§åˆ¶æ­¤å¾ªçŽ¯</p><pre><code>loop do    å¾ªçŽ¯å¤„ç†end</code></pre><h3 id="å¾ªçŽ¯æŽ§åˆ¶å‘½ä»¤"><a href="#å¾ªçŽ¯æŽ§åˆ¶å‘½ä»¤" class="headerlink" title="å¾ªçŽ¯æŽ§åˆ¶å‘½ä»¤"></a>å¾ªçŽ¯æŽ§åˆ¶å‘½ä»¤</h3><ul><li>break ç»ˆæ­¢ç¨‹åºï¼Œè·³å‡ºå¾ªçŽ¯</li><li>next è·³åˆ°ä¸‹ä¸€æ¬¡å¾ªçŽ¯ï¼Œå’Œå…¶ä»–ç±»ä¼¼Javaï¼ŒC#çš„continueä¸€æ ·</li><li>redo åœ¨ç›¸åŒçš„æ¡ä»¶ä¸‹é‡å¤åˆšæ‰çš„å¤„ç†</li></ul><p><strong>redo</strong>ä¸Ž<strong>next</strong>éžå¸¸åƒï¼Œä¸Ž<strong>next</strong>çš„ä¸åŒä¹‹å¤„æ˜¯ï¼Œ<strong>redo</strong>ä¼šå†æ‰§è¡Œä¸€æ¬¡ç›¸åŒçš„å¾ªçŽ¯ã€‚æ‰€ä»¥è¦æ³¨æ„<strong>redo</strong>çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¾ˆå®¹æ˜“é™·å…¥æ­»å¾ªçŽ¯ä¸­ã€‚</p><p><em>æ³¨ï¼š <strong>do ~ end</strong> å’Œ <strong>{ ~ }</strong> æ˜¯ç­‰ä»·çš„è¯­å¥å—ã€‚ åªä¸è¿‡ä»Žç¼–ç è§„èŒƒä¸Šæ¥è¯´ï¼Œå¦‚æžœç¨‹åºæ˜¯è·¨è¡Œå†™çš„æ—¶å€™ä½¿ç”¨<strong>do ~ end</strong>ï¼Œç¨‹åºå†™åœ¨1è¡Œçš„æ—¶å€™ç”¨*</em>{ ~ }**.</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="number">3</span>.times <span class="keyword">do</span> |<span class="params">i</span>|</span><br><span class="line">&gt;&gt;puts i</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="number">3</span>.times &#123; |<span class="params">i</span>| puts i &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(3)</title>
      <link href="/2015/08/14/ruby-practice-3/"/>
      <url>/2015/08/14/ruby-practice-3/</url>
      
        <content type="html"><![CDATA[<p>åœ¨Rubyä¸­ä»»ä½•è¡¨çŽ°æ•°æ®çš„åŸºæœ¬å•ä½éƒ½ç§°ä¸ºå¯¹è±¡(object), è€ŒRubyçš„ç±»(class)è¡¨ç¤ºçš„å°±æ˜¯è¿™äº›å¯¹è±¡çš„ç§ç±»ã€‚</p><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p>å’Œå…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€ä¸€æ ·ï¼ŒRubyä¹Ÿæœ‰å¤šç§ç±»åž‹çš„å˜é‡ï¼Œä½†æ˜¯åœ¨Rubyä¸­ï¼Œå˜é‡çš„ç±»åž‹æ˜¯ç”±å˜é‡çš„å‘½åæ–¹å¼å†³å®šçš„ã€‚</p><p><em>å±€éƒ¨å˜é‡(local variable)</em><br>ä»¥è‹±æ–‡å­—æ¯æˆ–è€…_å¼€å¤´</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">words = <span class="string">&quot;Hello Ruby&quot;</span></span><br><span class="line">_words = <span class="string">&quot;Hello Ruby&quot;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p><em>å…¨å±€å˜é‡(global variable)</em><br>ä»¥$å¼€å¤´</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$words</span>=<span class="string">&quot;Hello Ruby&quot;</span></span><br></pre></td></tr></table></figure><p><em>å®žä¾‹å˜é‡(instance variable)</em><br>ä»¥@å¼€å¤´</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@words</span>=<span class="string">&quot;Hello Ruby&quot;</span></span><br></pre></td></tr></table></figure><p><em>ç±»å˜é‡(class variable)</em></p><p>ä»¥@@å¼€å¤´</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@@words</span> = <span class="string">&quot;Hello Ruby&quot;</span></span><br></pre></td></tr></table></figure><p><em>ä¼ªå˜é‡(pseudo variable)</em><br>ä¼ªå˜é‡æ˜¯Rubyé¢„å…ˆå®šä¹‰å¥½çš„ä»£è¡¨æŸä¸ªç‰¹å®šå€¼çš„ç‰¹æ®Šå˜é‡ï¼Œå› æ­¤è¿™ä¸ªå€¼æ˜¯æ— æ³•æ”¹å˜çš„ã€‚å¦‚ï¼Œnilã€trueã€falseã€selfç­‰ã€‚</p><p><em>æ³¨ï¼šRubyä¸éœ€è¦åœ¨æ„å˜é‡åçš„é•¿åº¦ï¼Œå¯¹äºŽå¤šä¸ªå•è¯ç»„åˆçš„å˜é‡åï¼Œä½¿ç”¨_éš”å¼€å„ä¸ªå•è¯ï¼Œæˆ–è€…å•è¯ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œå¦‚ï¼šmy_words,æˆ–è€…myWordsã€‚ä½†æ˜¯åœ¨Rubyä¸­çš„å˜é‡åå’Œæ–¹æ³•åä¸€èˆ¬ä½¿ç”¨å‰è€…ï¼Œè€ŒåŽè€…ä¸»è¦ç”¨äºŽç±»åå’Œæ¨¡å—åã€‚</em></p><h3 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h3><p>é¡¾åæ€ä¹‰ï¼Œå³ä¸å¯ä¿®æ”¹ï¼Œå¯¹å·²ç»èµ‹å€¼çš„å¸¸é‡å†è¿›è¡Œèµ‹å€¼æ—¶ï¼ŒRubyä¼šåšå‡ºè­¦å‘Šã€‚å¸¸é‡å‡ä»¥å¤§å†™å­—æ¯æ¥å‘½åã€‚å¦‚Rubyä¸­é¢„å…ˆå®šä¹‰å¥½çš„RUBY_VERSION(è¿è¡Œç‰ˆæœ¬)ã€RUBTY_PLATFORM(è¿è¡Œå¹³å°)ã€ARGV(å‘½ä»¤è¡Œå‚æ•°æ•°ç»„).</p><h3 id="å¤šé‡èµ‹å€¼"><a href="#å¤šé‡èµ‹å€¼" class="headerlink" title="å¤šé‡èµ‹å€¼"></a>å¤šé‡èµ‹å€¼</h3><p>å¤šé‡èµ‹å€¼æ˜¯Rubyä¸­çš„ç®€åŒ–ä»£ç çš„ä¸€ç§æ–¹å¼ï¼Œé€šè¿‡å¤šé‡èµ‹å€¼å¯ä»¥å°†å¤šä¸ªå˜é‡åŒæ—¶èµ‹å€¼ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> a, b, c = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span><span class="comment">##åŒæ—¶èµ‹å€¼a, b, c</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p [a, b, c]<span class="comment">##=&gt; [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·a, b, cå‡è¢«èµ‹å€¼äº†1, 2, 3ã€‚<br><em>æ³¨ï¼šåœ¨ä½¿ç”¨å¤šé‡èµ‹å€¼æ—¶ï¼Œå»ºè®®å¯¹å½¼æ­¤ç›¸å…³å˜é‡è¿›è¡Œå¤šé‡èµ‹å€¼ï¼Œé¿å…ç¨‹åºéš¾è¯»æ‡‚ã€‚</em></p><p>å³ä½¿ç­‰å·(&#x3D;)å·¦å³ä¸¤è¾¹åˆ—è¡¨çš„æ•°é‡ä¸ç›¸ç­‰ï¼ŒRubyä¹Ÿä¸ä¼šæŠ¥é”™ã€‚<br><em>å·¦è¾¹å˜é‡éƒ¨åˆ†æ•°é‡å¤šæ—¶</em></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> a, b, c, d = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p [a, b, c, d]<span class="comment">##=&gt; [1, 2, nil, nil]</span></span><br></pre></td></tr></table></figure><p>å½“å·¦è¾¹å˜é‡éƒ¨åˆ†æ•°é‡å¤šæ—¶ï¼ŒRubyä¼šè‡ªåŠ¨å°†<strong>nil</strong>èµ‹å€¼ç»™æœªè¢«åˆ†é…å€¼çš„å˜é‡ã€‚å¦‚ä¸Šçš„c, då˜é‡ã€‚</p><p><em>å·¦è¾¹å˜é‡éƒ¨åˆ†æ•°é‡å°‘æ—¶</em></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> a, b, c = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p [a, b, c]<span class="comment">##=&gt; [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>å½“å˜é‡éƒ¨åˆ†æ¯”è¾ƒå°‘æ—¶ï¼ŒRubyä¼šå¿½ç•¥æŽ‰è¯¥å€¼ï¼Œä¸ä¼šåˆ†é…å¤šä½™çš„å€¼ï¼Œå¦‚ä¸Šçš„å€¼4ã€‚</p><p><em>å°†æœªè¢«åˆ†é…çš„å€¼èµ‹ç»™æŒ‡å®šçš„å˜é‡</em><br>å½“ç»™ä¸€ä¸ªå˜é‡å‰åŠ ä¸Š*ï¼Œè¡¨ç¤ºRubyä¼šå°†æœªåˆ†é…çš„å€¼å°è£…ä¸ºæ•°ç»„èµ‹å€¼ç»™è¯¥å˜é‡ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒRubyä¼šå°†å˜é‡ä¸Žå³è¾¹çš„å€¼ä¸€ä¸€åŒ¹é…ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> a, b, *c = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p [a, b, c]<span class="comment">##=&gt; [1, 2, [3, 4]]</span></span><br><span class="line"></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> a, *b, c = <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p [a, b, c]<span class="comment">##=&gt; [1, [2, 3, 4], 5]</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å¤šé‡èµ‹å€¼ç®€åŒ–å˜é‡å€¼äº¤æ¢ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> a, b = b, a<span class="comment">##ç½®æ¢å˜é‡aã€bçš„å€¼</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p [a, b]<span class="comment">##=&gt; [1, 0]</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å¤šé‡èµ‹å€¼èŽ·å–æ•°ç»„çš„å…ƒç´ :</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> arr = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> a, b = arr</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p a<span class="comment">##=&gt; 1</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p b<span class="comment">##=&gt; 2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> arr = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>]</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> a, b, c = arr</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p a<span class="comment">##=&gt; 1</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p b<span class="comment">##=&gt; [2, 3]</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p c<span class="comment">##=&gt; 4</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> arr = [<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>]</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> a, (b, c), d = arr</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p a<span class="comment">##=&gt; 1</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p b<span class="comment">##=&gt; 2</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p c<span class="comment">##=&gt; 3</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p d<span class="comment">##=&gt; 4</span></span><br></pre></td></tr></table></figure><p>åªè¦ç­‰å·å·¦è¾¹çš„å˜é‡ç»“æž„ä¸Žæ•°ç»„çš„ç»“æž„ä¸€è‡´ï¼Œå³ä½¿å†å¤æ‚çš„ç»“æž„ï¼Œå¤šé‡èµ‹å€¼ä»¥å¯ä»¥è½»æ¾å¯¹åº”ã€‚</p><h3 id="æ¡ä»¶åˆ¤æ–­"><a href="#æ¡ä»¶åˆ¤æ–­" class="headerlink" title="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­</h3><p>Rubyä¸­æ¡ä»¶åˆ¤æ–­æœ‰ä¸‰ç§ï¼Œifè¯­å¥ï¼Œunlessè¯­å¥ï¼Œcaseè¯­å¥ã€‚Ifè¯­å¥æˆ‘ä»¬ä¹‹å‰è®²è¿‡ï¼Œè¿™é‡Œä¸»è¦æ¶‰åŠå‰©ä½™ä¸¤ç§ã€‚</p><p><em>unlessè¯­å¥</em><br>è¿™ä¸ªåˆ¤æ–­è¯­å¥åˆšå¥½ä¸Žifè¯­å¥ç›¸åï¼Œå½“æ¡ä»¶ä¸ºå‡æ—¶æ‰æ‰§è¡Œ</p><pre><code>unless æ¡ä»¶ä¸ºå‡ then    é€»è¾‘å¤„ç†endunless æ¡ä»¶ä¸ºå‡    é€»è¾‘å¤„ç†1else    é€»è¾‘å¤„ç†2end</code></pre><p><em>then</em>å…³é”®å­—å¯ä»¥çœç•¥ã€‚</p><p><em>caseè¯­å¥</em><br>å¦‚æžœéœ€è¦æ¯”è¾ƒçš„å¯¹è±¡åªæœ‰ä¸€ä¸ªï¼Œæ ¹æ®è¿™ä¸ªå¯¹è±¡å€¼çš„ä¸åŒï¼Œæ‰§è¡Œä¸åŒçš„é€»è¾‘å¤„ç†ã€‚</p><pre><code>case æ¯”è¾ƒå¯¹è±¡when å€¼1 then    é€»è¾‘å¤„ç†1when å€¼2 then    é€»è¾‘å¤„ç†2when å€¼3 then    é€»è¾‘å¤„ç†3else    é€»è¾‘å¤„ç†4end</code></pre><p>å½“ç„¶ï¼Œ<em>then</em>å…³é”®å­—ä¹Ÿå¯ä»¥çœç•¥ã€‚<br><em>when</em>å…³é”®å­—ä¹Ÿå¯ä»¥ä¸€æ¬¡æŒ‡å®šå¤šä¸ªå€¼ã€‚</p><pre><code>case æ¯”è¾ƒå¯¹è±¡when å€¼1ï¼Œå€¼2ï¼Œå€¼3 then    é€»è¾‘å¤„ç†1else    é€»è¾‘å¤„ç†2end</code></pre><p>åœ¨<em>case</em>è¯­å¥ä¸­ï¼Œ<em>when</em>åˆ¤æ–­å€¼æ˜¯å¦ç›¸ç­‰æ—¶ï¼Œå®žé™…æ˜¯ä½¿ç”¨**&#x3D;&#x3D;&#x3D;<strong>è¿ç®—ç¬¦æ¥åˆ¤æ–­çš„ã€‚å½“å·¦è¾¹æ˜¯æ•°å€¼æˆ–è€…å­—ç¬¦ä¸²æ—¶ï¼Œ</strong>&#x3D;&#x3D;&#x3D;<strong>ä¸Ž</strong>&#x3D;&#x3D;**çš„æ„ä¹‰æ˜¯ä¸€æ ·çš„ã€‚</p><p><em>æ³¨:Rubyä¸­åªæœ‰<strong>nil</strong>å’Œ<strong>false</strong>ä¸ºå‡ï¼Œé™¤æ­¤ä¹‹å¤–çš„å€¼å…¨ä¸ºçœŸ.</em></p><p>åœ¨Rubyä¸­ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¯ä»¥é€šè¿‡<strong>object_id</strong>ï¼ˆæˆ–è€…**<strong>id</strong>**)æ–¹æ³•èŽ·å–å¯¹è±¡çš„æ ‡è¯†ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> arr1 = []</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> arr2 = []</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p arr1.object_id<span class="comment">##=&gt; 70115564029000</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> p arr2.__id__<span class="comment">##=&gt; 70115559585120</span></span><br></pre></td></tr></table></figure><p>å¦‚æžœåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå³æ˜¯å¦å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªIDçš„å¯¹è±¡ã€‚Rubyæä¾›äº†**equal?**æ–¹æ³•æ¥åˆ¤æ–­ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> arr1 = []</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> arr2 = []</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> arr1.equal? arr2<span class="comment">##=&gt; false</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> arr3 = arr1</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> arr1.equal? arr3<span class="comment">##=&gt; true</span></span><br></pre></td></tr></table></figure><p>é™¤äº†**&#x3D;&#x3D;<strong>ä»¥å¤–ï¼ŒRubyè¿˜æä¾›äº†</strong>eql?**æ–¹æ³•ç”¨æ¥åˆ¤æ–­å¯¹è±¡çš„å€¼æ˜¯å¦ç›¸ç­‰ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ **&#x3D;&#x3D;<strong>ä¸Ž</strong>eql?<strong>æ‰§è¡Œç»“æžœéƒ½æ˜¯ä¸€æ ·çš„ã€‚ä½†é’ˆå¯¹æ•°å€¼ç±»ï¼Œ</strong>eql?**æ–¹æ³•ä¼šè¢«é‡å®šä¹‰ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p <span class="number">1.0</span> == <span class="number">1</span><span class="comment">##=&gt; true</span></span><br><span class="line">p <span class="number">1.0</span>.eql? <span class="number">1</span><span class="comment">##=&gt; false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(2)</title>
      <link href="/2015/08/13/ruby-practice-2/"/>
      <url>/2015/08/13/ruby-practice-2/</url>
      
        <content type="html"><![CDATA[<h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><p>Rubyä¸­æ•°ç»„çš„å¤§å°æ˜¯æŒ‰å®žé™…æƒ…å†µè‡ªåŠ¨è°ƒæ•´çš„ï¼Œå³æ‰€è°“çš„<strong>åŠ¨æ€æ•°ç»„</strong></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> rubyArray = [<span class="string">&quot;data1&quot;</span>, <span class="string">&quot;data2&quot;</span>]   <span class="comment">##å®šä¹‰ä¸¤ä¸ªæ•°æ®çš„æ•°ç»„</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> rubyArray[<span class="number">2</span>] = <span class="string">&quot;data3&quot;</span>           <span class="comment">##æ–°å¢žç¬¬ä¸‰ä¸ªæ•°æ®</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> print rubyArray                  <span class="comment">##æ‰“å°[&quot;data1&quot;, &quot;data2&quot;, &quot;data3&quot;]</span></span><br></pre></td></tr></table></figure><p>Rubyæ•°ç»„è¿˜æ”¯æŒå¤šç§ä¸åŒå¯¹è±¡çš„æ··åˆä¿å­˜, é€šè¿‡<strong>æ•°ç»„.size</strong>å¯èŽ·å–æ•°ç»„çš„å¤§å°</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> mixedArray = [<span class="number">1</span>, <span class="string">&quot;data&quot;</span>, <span class="number">2</span>, <span class="string">&quot;time&quot;</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> mixedArray.size     <span class="comment">#=&gt; 5</span></span><br></pre></td></tr></table></figure><span id="more"></span><p>éåŽ†æ•°ç»„ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œåˆ©ç”¨eachæ–¹æ³•ï¼Œrubyæä¾›äº†ä¸¤ç§ä¹¦å†™æ–¹å¼ã€‚<em>eachæ–¹æ³•ä¼šè¿”å›žåŽŸæ•°ç»„çš„å€¼</em></p><figure class="highlight ruby"><figcaption><span>do/endä»£ç å—æ–¹å¼</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> mixedArray = [<span class="number">1</span>, <span class="string">&quot;data&quot;</span>, <span class="number">2</span>, <span class="string">&quot;time&quot;</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> mixedArray.each <span class="keyword">do</span> |<span class="params">value</span>|</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> print <span class="string">&quot;<span class="subst">#&#123;value&#125;</span> &quot;</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##å°†ä¼šæ‰“å°å‡º:1 data 2 time 3,å¹¶ä¸”è¿”å›žmixedArrayã€‚</span></span><br></pre></td></tr></table></figure><figure class="highlight ruby"><figcaption><span>&#123;&#125;ä»£ç å—æ–¹å¼</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> mixedArray.each &#123;</span><br><span class="line">&gt;&gt; |<span class="params">value</span>|</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> print <span class="string">&quot;<span class="subst">#&#123;value&#125;</span> &quot;</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> &#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸¤ç§æ–¹å¼çš„è¾“å‡ºç»“æžœå’Œè¿”å›žå€¼éƒ½ä¸€æ ·ã€‚å»ºè®®é‡‡ç”¨ç¬¬ä¸€ç§ï¼Œæ›´åŠ ç¬¦åˆRubyçš„é£Žæ ¼ã€‚</p><p><em>æ³¨:é€šè¿‡åœ¨ç»ˆç«¯è¾“å…¥<strong>irb â€“simple-promot</strong>ï¼Œå¯ä»¥ç®€åŒ–rubyäº¤äº’å¼çš„æç¤ºè¾“å…¥ï¼Œå¦‚ä¸Šé¢çš„Rubyçš„æç¤ºè¾“å…¥ç¬¦â€™&gt;&gt;â€™</em></p><h3 id="æ•£åˆ—"><a href="#æ•£åˆ—" class="headerlink" title="æ•£åˆ—"></a>æ•£åˆ—</h3><p>Rubyä¸­çš„é”®å€¼(key-value pair)æ•°æ®ç»“æž„æ˜¯ç”¨æ•£åˆ—(hash)æ¥è¡¨ç¤ºï¼Œä¸€èˆ¬ä»¥å­—ç¬¦ä¸²æˆ–è€…ç¬¦å·(Symbol)æ¥ä½œä¸ºé”®ï¼Œå€¼æ¥ä¿å­˜å¯¹åº”çš„å¯¹è±¡ã€‚</p><p>*ç¬¦å·(symbol)*ä¸Žå­—ç¬¦ä¸²å¯¹è±¡å¾ˆç›¸ä¼¼ï¼Œç¬¦å·ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä¸€èˆ¬éƒ½ä½œä¸ºåç§°æ ‡ç­¾æ¥ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥å°†ç¬¦å·ç®€å•ç†è§£ä¸ºè½»é‡çº§çš„å­—ç¬¦ä¸²ã€‚</p><p>ç¬¦å·çš„å®šä¹‰åªéœ€åœ¨æ ‡è¯†ç¬¦çš„å¼€å¤´åŠ ä¸Šâ€™:â€™å³å¯</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> sym1 = <span class="symbol">:text</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> sym2 = <span class="symbol">:<span class="string">&quot;text&quot;</span></span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä¸¤è¡Œä»£ç éƒ½æ˜¯è¡¨ç¤ºç¬¦å·â€:fooâ€.</p><p>ä½¿ç”¨ç¬¦å·æ¯”ä½¿ç”¨å­—ç¬¦ä¸²æ›´æœ‰æ•ˆçŽ‡ï¼Œè€Œä¸”ç¬¦å·ä¸Žå­—ç¬¦ä¸²å¯ä»¥äº’ç›¸ä»»æ„è½¬æ¢, ç”¨<strong>to_s</strong>å’Œ<strong>to_sym</strong>æ–¹æ³•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> sym = <span class="symbol">:text</span></span><br><span class="line">=&gt; <span class="symbol">:text</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> sym.to_s<span class="comment">##å°†ç¬¦å·è½¬ä¸ºè¯å­—ç¬¦ä¸²</span></span><br><span class="line">=&gt; <span class="string">&quot;text&quot;</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="string">&quot;text&quot;</span>.to_sym    <span class="comment">##å°†å­—ç¬¦ä¸²è½¬ä¸ºç¬¦å·</span></span><br><span class="line">=&gt; <span class="symbol">:text</span></span><br><span class="line">&gt;&gt;</span><br></pre></td></tr></table></figure><p>å¦‚ä½•å®šä¹‰ä¸€ä¸ªæ•£åˆ—ï¼Œå®šä¹‰ä¸€ä¸ªæ•£åˆ—æœ‰ä¸‹åˆ—ä¸¤ç§å†™æ³•:</p><figure class="highlight ruby"><figcaption><span>æ•£åˆ—å®šä¹‰æ–¹å¼ä¸€</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> details = &#123;<span class="symbol">:name</span> =&gt; <span class="string">&quot;yu&quot;</span>, <span class="symbol">:gender</span> =&gt; <span class="string">&quot;male&quot;</span>, <span class="symbol">:alias</span> =&gt; <span class="string">&quot;stonefishy&quot;</span>&#125;</span><br><span class="line">=&gt; &#123;<span class="symbol">:name=&gt;<span class="string">&quot;yu&quot;</span></span>, <span class="symbol">:gender=&gt;<span class="string">&quot;male&quot;</span></span>, <span class="symbol">:alias=&gt;<span class="string">&quot;stonefishy&quot;</span></span>&#125;</span><br></pre></td></tr></table></figure><figure class="highlight ruby"><figcaption><span>æ•£åˆ—å®šä¹‰æ–¹å¼äºŒ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> details = &#123;<span class="symbol">name:</span> <span class="string">&quot;yu&quot;</span>, <span class="symbol">gender:</span> <span class="string">&quot;male&quot;</span>, <span class="symbol">alias:</span> <span class="string">&quot;stonefishy&quot;</span>&#125;</span><br><span class="line">=&gt; &#123;<span class="symbol">:name=&gt;<span class="string">&quot;yu&quot;</span></span>, <span class="symbol">:gender=&gt;<span class="string">&quot;male&quot;</span></span>, <span class="symbol">:alias=&gt;<span class="string">&quot;stonefishy&quot;</span></span>&#125;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹å¼å’Œ<em>json</em>æ•°æ®çš„æ ¼å¼ç›¸ä¼¼ã€‚</p><p>æ“ä½œæ•£åˆ—ä¹Ÿå¾ˆç®€å•ï¼Œç›´æŽ¥çœ‹ä¸‹é¢æ‰§è¡Œç¤ºä¾‹</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> details[<span class="symbol">:age</span>] = <span class="number">18</span><span class="comment">##æ–°å¢žä¸€ä¸ªageå€¼</span></span><br><span class="line">=&gt; <span class="number">18</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> details</span><br><span class="line">=&gt; &#123;<span class="symbol">:name=&gt;<span class="string">&quot;yu&quot;</span></span>, <span class="symbol">:gender=&gt;<span class="string">&quot;male&quot;</span></span>, <span class="symbol">:alias=&gt;<span class="string">&quot;stonefishy&quot;</span></span>, <span class="symbol">:age=&gt;</span><span class="number">18</span>&#125;</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> details[<span class="symbol">:name</span>] <span class="comment">##èŽ·å–æŒ‡å®šé”®çš„å€¼</span></span><br><span class="line">=&gt; <span class="string">&quot;yu&quot;</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> details[<span class="symbol">:age</span>] = <span class="number">20</span><span class="comment">##ä¿®æ”¹æŒ‡å®šé”®çš„å€¼</span></span><br><span class="line">=&gt; <span class="number">20</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> details</span><br><span class="line">=&gt; &#123;<span class="symbol">:name=&gt;<span class="string">&quot;yu&quot;</span></span>, <span class="symbol">:gender=&gt;<span class="string">&quot;male&quot;</span></span>, <span class="symbol">:alias=&gt;<span class="string">&quot;stonefishy&quot;</span></span>, <span class="symbol">:age=&gt;</span><span class="number">20</span>&#125;</span><br></pre></td></tr></table></figure><p><em>æ³¨: &#x3D;&gt;ç¬¦å·è¡¨ç¤ºrubyäº¤äº’å¼æ¨¡å¼çš„è¾“å‡ºå‘½ä»¤</em></p><p>ä½¿ç”¨eachæ–¹æ³•éåŽ†æ•£åˆ—ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> details.each <span class="keyword">do</span> |<span class="params">key, value</span>|</span><br><span class="line"><span class="meta prompt_">?&gt;</span> puts <span class="string">&quot;<span class="subst">#&#123;key&#125;</span> - <span class="subst">#&#123;value&#125;</span>&quot;</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> <span class="keyword">end</span></span><br><span class="line">name - yu</span><br><span class="line">gender - male</span><br><span class="line"><span class="keyword">alias</span> - stonefishy</span><br><span class="line">age - <span class="number">20</span></span><br><span class="line">=&gt; &#123;<span class="symbol">:name=&gt;<span class="string">&quot;yu&quot;</span></span>, <span class="symbol">:gender=&gt;<span class="string">&quot;male&quot;</span></span>, <span class="symbol">:alias=&gt;<span class="string">&quot;stonefishy&quot;</span></span>, <span class="symbol">:age=&gt;</span><span class="number">20</span>&#125;   <span class="comment">##eachæ–¹æ³•åŒæ ·ä¼šè¿”å›žæ•£åˆ—</span></span><br></pre></td></tr></table></figure><h3 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h3><p>æ­£åˆ™è¡¨è¾¾å¼(Regular Expression)çš„è¯­æ³•å¦‚ä¸‹ï¼Œ</p><pre><code>/æ¨¡å¼/</code></pre><p>ä½¿ç”¨è¿ç®—ç¬¦&#x3D;~æ¥åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼å’Œå­—ç¬¦ä¸², è‹¥åŒ¹é…æˆåŠŸè¿”å›žåŒ¹é…éƒ¨åˆ†çš„ä½ç½®ï¼ŒåŒ¹é…å¤±è´¥è¿”å›žnilå€¼ã€‚</p><pre><code>/æ¨¡å¼/ =~ å¸Œæœ›åŒ¹é…çš„å­—ç¬¦ä¸²</code></pre><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> /ruby/ =~ <span class="string">&quot;hello, ruby&quot;</span><span class="comment">##åŒ…å«â€˜rubyâ€™å­—ç¬¦ä¸²</span></span><br><span class="line">=&gt; <span class="number">7</span></span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> /^ruby<span class="variable">$/</span> =~ <span class="string">&quot;hello, ruby&quot;</span><span class="comment">##å®Œå…¨åŒ¹é…â€˜rubyâ€™å­—ç¬¦ä¸²</span></span><br><span class="line">=&gt; nil</span><br><span class="line"><span class="meta prompt_">&gt;&gt;</span> /ruby<span class="variable">$/</span> =~ <span class="string">&quot;hello, ruby&quot;</span><span class="comment">##ä»¥â€˜rubyâ€™å­—ç¬¦ä¸²ç»“å°¾</span></span><br><span class="line">=&gt; <span class="number">7</span></span><br></pre></td></tr></table></figure><p>æ­£åˆ™è¡¨è¾¾å¼å³è¾¹çš„&#x2F;åŽé¢æ·»åŠ iè¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™åŒ¹é…:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;&gt;</span> /<span class="title class_">RUby</span>/i =~ <span class="string">&quot;hello, ruby&quot;</span></span><br><span class="line">=&gt; <span class="number">7</span></span><br></pre></td></tr></table></figure><p>å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼ï¼Œç›´æŽ¥ç”¨<strong>Regexp</strong>ç±»æ¥åˆ›å»º:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pattern = <span class="title class_">Regexp</span>.new(<span class="string">&quot;ruby&quot;</span>)<span class="comment">##å®šä¹‰ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">=&gt; /ruby/</span><br><span class="line">&gt;&gt; pattern =~ <span class="string">&quot;hello, ruby&quot;</span></span><br><span class="line">=&gt; <span class="number">7</span></span><br></pre></td></tr></table></figure><p><em>æ³¨: å¦‚æžœæƒ³æ›´åŠ è¯¦ç»†çš„äº†è§£æ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•ï¼Œå¯ä»¥æŸ¥çœ‹ä½¿ç”¨<a href="http://rubular.com/">Rubular</a></em></p><h3 id="å‘½ä»¤è¡Œå‚æ•°"><a href="#å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="å‘½ä»¤è¡Œå‚æ•°"></a>å‘½ä»¤è¡Œå‚æ•°</h3><p>Rubyä¸­ä½¿ç”¨<strong>ARGV</strong>è¿™ä¸ªRubyé¢„å®šä¹‰å¥½çš„æ•°ç»„æ¥èŽ·å–ä»Žå‘½ä»¤è¡Œä¼ é€’è¿‡æ¥çš„æ•°æ®ã€‚åœ¨å‘½ä»¤è¡ŒæŒ‡å®šå¤šä¸ªè„šæœ¬å‚æ•°æ—¶ï¼Œå„ä¸ªå‚æ•°ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚</p><p>ä½¿ç”¨<strong>each_with_index</strong>æ–¹æ³•å¯ä»¥èŽ·å–éåŽ†çš„indexï¼Œ</p><figure class="highlight ruby"><figcaption><span>argv.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">ARGV</span>.each_with_index <span class="keyword">do</span> |<span class="params">arg, index</span>|</span><br><span class="line">puts <span class="string">&quot;ç¬¬<span class="subst">#&#123;index + <span class="number">1</span>&#125;</span>ä¸ªå‚æ•°: <span class="subst">#&#123;arg&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå’Œè¾“å‡ºç»“æžœå¦‚ä¸‹:</p><pre><code>&gt; ruby argv.rb hello world and ruby##å‘½ä»¤è¡Œè¾“å…¥å‚æ•°=&gt; ç¬¬1ä¸ªå‚æ•°: hello=&gt; ç¬¬2ä¸ªå‚æ•°: world=&gt; ç¬¬3ä¸ªå‚æ•°: and=&gt; ç¬¬4ä¸ªå‚æ•°: ruby</code></pre><h3 id="æ–‡ä»¶è¯»å–"><a href="#æ–‡ä»¶è¯»å–" class="headerlink" title="æ–‡ä»¶è¯»å–"></a>æ–‡ä»¶è¯»å–</h3><p>Rubyä¸­é€šè¿‡Fileç±»æ¥è¯»å–æ–‡ä»¶ï¼Œä¸¤ç§è¯»å–æ–¹å¼ï¼Œä¸€æ¬¡æ€§è¯»å–å’Œé€è¡Œè¯»å–ï¼Œç¤ºä¾‹å¦‚ä¸‹,</p><figure class="highlight ruby"><figcaption><span>read_all_text.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file = <span class="title class_">File</span>.open(<span class="variable constant_">ARGV</span>[<span class="number">0</span>])<span class="comment">##æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line">text = file.read<span class="comment">##è¯»å–æ–‡ä»¶ä¸­å¾—æ‰€æœ‰æ–‡æœ¬æ•°æ®</span></span><br><span class="line">print text</span><br><span class="line">file.close<span class="comment">##å…³é—­æ–‡ä»¶å¥æŸ„</span></span><br></pre></td></tr></table></figure><figure class="highlight ruby"><figcaption><span>read_each_line_text.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">file = <span class="title class_">File</span>.open(<span class="variable constant_">ARGV</span>[<span class="number">0</span>])</span><br><span class="line">file.each_line <span class="keyword">do</span> |<span class="params">line</span>| <span class="comment">##é€è¡Œè¯»å–æ–‡ä»¶</span></span><br><span class="line">print line</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">file.close</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•çš„å®šä¹‰"><a href="#æ–¹æ³•çš„å®šä¹‰" class="headerlink" title="æ–¹æ³•çš„å®šä¹‰"></a>æ–¹æ³•çš„å®šä¹‰</h3><p>Rubyæ–¹æ³•çš„å®šä¹‰å’ŒPythonä¸€æ ·ç®€ç­”ï¼Œ</p><pre><code>def æ–¹æ³•å    å¸Œæœ›å¤„ç†çš„é€»è¾‘end</code></pre><p>æˆ‘ä»¬çŽ°åœ¨å°†ä¸Šé¢è¯»å–æ–‡ä»¶çš„ä»£ç å®šä¹‰åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œ</p><figure class="highlight ruby"><figcaption><span>read_file.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">read_file</span>(<span class="params">file_name</span>)</span><br><span class="line">file = <span class="title class_">File</span>.open(file_name)</span><br><span class="line">file.each_line <span class="keyword">do</span> |<span class="params">line</span>|</span><br><span class="line">print line</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>çŽ°åœ¨æˆ‘ä»¬æƒ³åœ¨å…¶ä»–æ–‡ä»¶é‡Œé¢ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„æ–‡ä»¶è¯»å–æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å¼•ç”¨äº†ï¼Œä¸”çœ‹ä¸‹ï¼Œ</p><h3 id="å¼•ç”¨æ–‡ä»¶"><a href="#å¼•ç”¨æ–‡ä»¶" class="headerlink" title="å¼•ç”¨æ–‡ä»¶"></a>å¼•ç”¨æ–‡ä»¶</h3><p>Rubyä½¿ç”¨<strong>require</strong>æ–¹æ³•æ¥å¼•ç”¨åº“æˆ–æ–‡ä»¶</p><pre><code>require å¸Œæœ›ä½¿ç”¨çš„åº“å</code></pre><p><em>åº“åå¯ä»¥çœç•¥åŽç¼€.rb</em></p><figure class="highlight ruby"><figcaption><span>invoke_read_file.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&quot;./read_file&quot;</span><span class="comment">##å¼•å…¥è¯»å–æ–‡ä»¶çš„åº“</span></span><br><span class="line">read_file(<span class="string">&quot;argv.rb&quot;</span>);<span class="comment">##ç›´æŽ¥è°ƒç”¨åº“ä¸­çš„æ–¹æ³•</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç¤ºä¾‹ï¼š</p><pre><code>&gt; ruby invoke_read_file.rb=&gt; ARGV.each_with_index do |arg, index|=&gt; puts &quot;ç¬¬#&#123;index + 1&#125;ä¸ªå‚æ•°: #&#123;arg&#125;&quot;=&gt; end</code></pre><h3 id="pä¸Žppæ–¹æ³•"><a href="#pä¸Žppæ–¹æ³•" class="headerlink" title="pä¸Žppæ–¹æ³•"></a>pä¸Žppæ–¹æ³•</h3><p>å¦‚å‰æˆ‘ä»¬æ‰€ä»‹ç»çš„æ‰“å°æ•°æ®åˆ°ç»ˆç«¯çš„æœ‰<strong>p</strong>, <strong>puts</strong>, <strong>print</strong>ç­‰æ–¹æ³•ï¼ŒçŽ°åœ¨å†ä»‹ç»ä¸€ç§æŒ‰æ•°æ®æŽ’ç‰ˆæ‰“å°çš„æ–¹æ³•<strong>pp</strong>, å…¶å…¨åä¸º pretty printã€‚ä½†æ˜¯å¦‚æžœæƒ³ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨requireæ–¹æ³•å¼•å…¥<strong>pp</strong>åº“ã€‚ç›´æŽ¥çœ‹ç¤ºä¾‹</p><figure class="highlight ruby"><figcaption><span>p_and_pp.rb</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&quot;pp&quot;</span></span><br><span class="line"></span><br><span class="line">details = [&#123;<span class="symbol">content1:</span> <span class="string">&quot;This is content1&quot;</span>, </span><br><span class="line"><span class="symbol">content2:</span> <span class="string">&quot;This is content2&quot;</span>, </span><br><span class="line"><span class="symbol">content3:</span> <span class="string">&quot;This is content3&quot;</span>&#125;]</span><br><span class="line"></span><br><span class="line">puts <span class="string">&quot;pçš„è¾“å‡ºæ ¼å¼å¦‚ä¸‹:&quot;</span></span><br><span class="line">p details</span><br><span class="line"></span><br><span class="line">puts <span class="string">&quot;ppçš„è¾“å‡ºæ ¼å¼å¦‚ä¸‹:&quot;</span></span><br><span class="line">pp details</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç¤ºä¾‹:</p><pre><code>pçš„è¾“å‡ºæ ¼å¼å¦‚ä¸‹:[&#123;:content1=&gt;&quot;This is content1&quot;, :content2=&gt;&quot;This is content2&quot;, :content3=&gt;&quot;This is content3&quot;&#125;]ppçš„è¾“å‡ºæ ¼å¼å¦‚ä¸‹:[&#123;:content1=&gt;&quot;This is content1&quot;,    :content2=&gt;&quot;This is content2&quot;,    :content3=&gt;&quot;This is content3&quot;&#125;]    </code></pre><p>ä¸Ž<strong>p</strong>æ–¹æ³•çš„ä¸åŒä¹‹å¤„åœ¨äºŽï¼Œ<strong>pp</strong>æ–¹æ³•åœ¨è¾“å‡ºå¯¹è±¡çš„ç»“æžœæ—¶ï¼Œä¸ºäº†æ›´å®¹æ˜“çœ‹æ‡‚ï¼Œä¼šé€‚å½“çš„æ¢è¡Œä»¥è°ƒæ•´è¾“å‡ºç»“æžœã€‚å¦‚ä¸Šæ‰€ç¤ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rubyä¿®ç‚¼ä¹‹é“(1)</title>
      <link href="/2015/08/12/ruby-practice-1/"/>
      <url>/2015/08/12/ruby-practice-1/</url>
      
        <content type="html"><![CDATA[<img src="/assets/images/legacy/ruby-logo.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/ruby-logo.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="50" height="50">**Ruby**æ˜¯ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œç”±æ—¥æœ¬äººæ¾æœ¬è¡Œå¼˜å‘æ˜Žï¼Œæ—¨åœ¨è®©å¼€å‘äººå‘˜ç”¨æ›´ç®€æ´çš„æ–¹å¼å¿«ä¹çš„ç¼–ç¨‹ã€‚ä»–çš„è¯­æ³•ç±»ä¼¼Pythonè„šæœ¬è¯­è¨€ï¼Œæ¯”è¾ƒä¼˜é›…ï¼Œè€Œä¸”è¿˜æä¾›äº†ä¸€äº›ä¸°å¯Œå¼ºå¤§çš„ç±»åº“ã€‚Rubyçš„æ„æ€æ˜¯**çº¢å®çŸ³**.<h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><p><em>è„šæœ¬è¯­è¨€</em><br>å³åŠ¨æ€è¯­è¨€ï¼Œå’Œå…¶ä»–è„šæœ¬è¯­è¨€ä¸€æ ·ï¼Œæ— éœ€ç¼–è¯‘å³å¯ç›´æŽ¥è¿è¡Œï¼Œè€ŒC#ã€C++å’ŒJavaç­‰éœ€è¦é€šè¿‡ç¼–è¯‘ç„¶åŽæ‰èƒ½è¿è¡Œã€‚Rubyå‡å°‘äº†å¼€å‘è€…çš„å¼€å‘æµç¨‹ã€‚</p><span id="more"></span><p><em>å®Œå…¨çš„é¢å‘å¯¹è±¡</em><br>å¯¹Rubyæ¥è¯´ï¼Œçº¯æ•°å­—éƒ½å±žäºŽå¯¹è±¡ï¼Œå¯ä»¥ç›´æŽ¥è°ƒç”¨å…¶æ–¹æ³•ã€‚æ¯”å¦‚ä¸‹é¢ä»£ç ï¼š   </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-1.abs   #return 1</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å…¶ä»–é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€å¦‚C#ã€Javaä¸å…·å¤‡çš„ã€‚åŒæ—¶Rubyä¹Ÿå…·å¤‡æœ‰å…¶ä»–é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ€§ï¼Œå¦‚ï¼šç»§æ‰¿ã€Mixinç­‰ã€‚</p><p><em>è·¨å¹³å°</em><br>èƒ½åœ¨ç±»Unixæ“ä½œç³»ç»Ÿå¦‚ï¼šMac OS Xã€Linuxå’Œwindowsæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>Rubyçš„å®‰è£…å¾ˆç®€å•ï¼Œä»¥åœ¨Mac OS Xç”µè„‘çš„å®‰è£…ä¸ºä¾‹ã€‚ä½¿ç”¨HomebrewåŒ…ç®¡ç†å™¨å¯ä»¥å¾—åˆ°rubyçš„æœ€æ–°ç‰ˆæœ¬:   </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install ruby</span><br></pre></td></tr></table></figure><p>å®‰è£…å®ŒåŽï¼Œåœ¨è¾“å…¥å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹rubyç‰ˆæœ¬:   </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -v</span><br></pre></td></tr></table></figure><p>è¿›å…¥<a href="https://www.ruby-lang.org/en/documentation/installation/">Ruby Installation</a>é“¾æŽ¥å¯ä»¥æŸ¥çœ‹Rubyåœ¨å…¶ä»–æ“ä½œç³»ç»Ÿä¸Šçš„å®‰è£…</p><h3 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h3><p>ç”¨rubyç¼–å†™ç¬¬ä¸€ä¸ªHello worldç¨‹åºï¼Œåªéœ€ä¸€è¡Œä»£ç ï¼Œæ¯”å…¶ä»–çš„é¢å‘å¯¹è±¡è¯­è¨€ç®€å•å¤šäº†ã€‚   </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">&quot;Hello world\n&quot;</span>);</span><br></pre></td></tr></table></figure><p>ç›´æŽ¥å°†è¿™è¡Œä»£ç å†™å…¥helloworld.rbæ–‡ä»¶ï¼Œç„¶åŽè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤è¿è¡Œå³å¯çœ‹åˆ°å†…å®¹è¾“å‡ºåœ¨ç»ˆç«¯æŽ§åˆ¶å™¨ä¸Šã€‚   </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby helloworld.rb</span><br></pre></td></tr></table></figure><p>å½“ç„¶å¦‚æžœä½ æƒ³ç›´æŽ¥å’Œrubyäº¤äº’çš„è¯ï¼Œä¹Ÿæœ‰åŠžæ³•ï¼ŒRubyæä¾›äº†å’ŒPythonç±»ä¼¼çš„äº¤äº’å¼æ“ä½œã€‚åœ¨å‘½ä»¤è¡Œè¾“å…¥<strong>irb</strong>è¿›å…¥äº¤äº’æ¨¡å¼ã€‚</p><p>rubyä¹Ÿæä¾›äº†å­—ç¬¦çš„è½¬ä¹‰åŠŸèƒ½ï¼Œæ¯”å¦‚æ¢è¡Œ(\n), åˆ¶è¡¨ç¬¦(\t)ç­‰ç­‰ã€‚å¦‚ä¸Šé¢çš„æ‰“å°Hello worldã€‚</p><p><em>æ³¨:ä¸Šé¢ä»£ç ä¸­è°ƒç”¨printæ–¹æ³•çš„æ‹¬å·å¯ä»¥çœç•¥ã€‚rubyå°½é‡çš„ç®€åŒ–äº†å¼€å‘äººå‘˜çš„å·¥ä½œé‡</em></p><h3 id="putsã€printå’Œpçš„åŒºåˆ«"><a href="#putsã€printå’Œpçš„åŒºåˆ«" class="headerlink" title="putsã€printå’Œpçš„åŒºåˆ«"></a>putsã€printå’Œpçš„åŒºåˆ«</h3><p><strong>puts</strong>æ–¹æ³•ä¼šåœ¨æ¯æ¬¡è¾“å‡ºåŽè¾“å‡ºæ¢è¡Œç¬¦ï¼Œè€Œ<strong>print</strong>åˆ™ä¸ä¼šã€‚ä¾‹å¦‚ä»¥ä¸‹çš„è¾“å‡ºå†…å®¹æ˜¯ä¸€è‡´çš„:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">puts <span class="string">&quot;Helle world&quot;</span></span><br><span class="line"></span><br><span class="line">print <span class="string">&quot;Hello world\n&quot;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<strong>p</strong>æ–¹æ³•å¯ä»¥å°†æ•°æ®æŒ‰ç…§åŽŸå§‹ç±»åž‹è¾“å‡ºæ¥ï¼Œè¿™æ˜¯<strong>puts</strong>å’Œ<strong>print</strong>æ‰€ä¸å…·å¤‡çš„ï¼Œç›´æŽ¥ç”¨ä»£ç æ¥è§£é‡Š:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">puts <span class="string">&quot;1&quot;</span>   <span class="comment">#=&gt; 1</span></span><br><span class="line">puts <span class="number">1</span>     <span class="comment">#=&gt; 1</span></span><br><span class="line">print <span class="number">1</span>    <span class="comment">#=&gt; 1</span></span><br><span class="line">print <span class="string">&quot;1&quot;</span>  <span class="comment">#=&gt; 1</span></span><br><span class="line">p <span class="string">&quot;1&quot;</span>      <span class="comment">#=&gt; &quot;1&quot;</span></span><br><span class="line">p <span class="number">1</span>        <span class="comment">#=&gt; 1</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥åŸºäºŽ<strong>p</strong>æ–¹æ³•çš„ç‰¹æ€§ï¼Œè½¬ä¹‰å­—ç¬¦åœ¨å…¶å†…æ˜¯ä¸å·¥ä½œçš„ï¼Œå°†ä¼šè¢«ç›´æŽ¥æ‰“å°å‡ºæ¥,å¦‚ä»¥ä¸‹ä»£ç å°†ä¼šè¾“å‡ºâ€Hello world\nâ€ã€‚è¿˜æœ‰<strong>p</strong>æ–¹æ³•ä¹Ÿä¼šè¾“å‡ºæ¢è¡Œç¬¦ï¼Œå¹¶ä¸”è¿˜ä¼šå°†æ‰“å°çš„å†…å®¹æŒ‰æ•°æ®ç±»åž‹è¿”å›žï¼Œè€Œå…¶ä»–ä¸¤ç§æ–¹æ³•åªè¿”å›ž<strong>nil</strong>ç©ºå€¼ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p <span class="string">&quot;Hello world\n&quot;</span>  </span><br></pre></td></tr></table></figure><p><em>æ³¨:åœ¨Rubyä¸­ï¼Œä»»ä½•å‡½æ•°å‡æœ‰è¿”å›žå€¼ã€‚<strong>nil</strong>ç©ºå€¼å°±æ˜¯å…¶ä¸­ä¸€ç§å¸¸è§çš„è¿”å›žã€‚</em></p><p><strong>print</strong>, <strong>puts</strong>å’Œ<strong>p</strong>æ–¹æ³•å‡å¯ä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œè°ƒç”¨æ–¹å¼å’Œè¿”å›žç»“æžœå¦‚ä¸‹ï¼Œå¯ä»¥ä½“ä¼šä¸‹ç”¨æ³•:<br><em>printæ–¹æ³•</em>    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print <span class="string">&quot;Hello&quot;</span>, <span class="string">&quot; Rubyâ€œ</span></span><br></pre></td></tr></table></figure><pre><code>Hello Ruby</code></pre><p><em>putsæ–¹æ³•</em>   </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">puts <span class="string">&quot;Hello&quot;</span>, <span class="string">&quot; Ruby&quot;</span></span><br></pre></td></tr></table></figure><pre><code>HelloRuby</code></pre><p><em>pæ–¹æ³•</em>   </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p <span class="string">&quot;Hello&quot;</span>, <span class="string">&quot; Ruby&quot;</span></span><br></pre></td></tr></table></figure><pre><code>â€Hello&quot;&quot;Ruby&quot;</code></pre><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p>åœ¨rubyä¸­å£°æ˜Žå˜é‡ä¹Ÿå¾ˆç®€å•ï¼Œä¸éœ€è¦ä»»ä½•å¦‚javascriptçš„<em>var</em>ç­‰å…³é”®å­—ï¼Œç›´æŽ¥å®šä¹‰èµ‹å€¼ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">greet = <span class="string">&quot;Hello world&quot;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®å˜é‡ä¹Ÿç®€å•:   </p><pre><code class="ruby">puts greetputs &quot;#&#123;greet&#125;&quot;</code></pre><p>ä»¥ä¸Šä¸¤ç§å†™æ³•å‡ä¼šç›´æŽ¥è¾“å‡ºHello world.</p><h3 id="æŽ§åˆ¶è¯­å¥"><a href="#æŽ§åˆ¶è¯­å¥" class="headerlink" title="æŽ§åˆ¶è¯­å¥"></a>æŽ§åˆ¶è¯­å¥</h3><p><em>if è¯­å¥</em>   </p><pre><code>if æ¡ä»¶ then      é€»è¾‘å¤„ç†end</code></pre><p><em>if else è¯­å¥</em></p><pre><code>if æ¡ä»¶ then    é€»è¾‘å¤„ç†else    é€»è¾‘å¤„ç†end</code></pre><p><em>if elsif è¯­å¥</em></p><pre><code>if æ¡ä»¶ then    é€»è¾‘å¤„ç†elsif æ¡ä»¶ then    é€»è¾‘å¤„ç†else    é€»è¾‘å¤„ç†end</code></pre><p><em>æ³¨:åœ¨ä¸Šé¢çš„ifå„ç§æŽ§åˆ¶è¯­å¥ä¸­ï¼Œ<strong>then</strong>å…³é”®å­—æ˜¯å¯ä»¥çœç•¥çš„.</em></p><h3 id="å¾ªçŽ¯è¯­å¥"><a href="#å¾ªçŽ¯è¯­å¥" class="headerlink" title="å¾ªçŽ¯è¯­å¥"></a>å¾ªçŽ¯è¯­å¥</h3><p><em>while è¯­å¥</em></p><pre><code>while æ¡ä»¶ do    é€»è¾‘å¤„ç†end</code></pre><p><em>timesè¿­ä»£å™¨</em></p><p>å½“å¾ªçŽ¯çš„æ¬¡æ•°å·²ç»ç¡®å®šæ—¶ï¼Œå¯ç›´æŽ¥ä½¿ç”¨timesæ–¹æ³•æ¥å¾ªçŽ¯å¤„ç†æˆ‘ä»¬éœ€è¦çš„é€»è¾‘<br>    I<br>    å¾ªçŽ¯æ¬¡æ•°.times do<br>        é€»è¾‘å¤„ç†<br>    end</p><p>*æ³¨:<strong>times</strong>æ–¹æ³•è¢«æˆä¸ºè¿­ä»£å™¨ï¼Œé™¤äº†timesæ–¹æ³•è¿­ä»£å™¨ï¼Œrubyè¿˜æä¾›äº†å…¶ä»–çš„è¿­ä»£å™¨ï¼Œæ¯”å¦‚<strong>each</strong>æ–¹æ³•.*</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ruby </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to get or post data via HttpClient with proxy</title>
      <link href="/2015/08/06/how-to-get-or-post-data-via-httpclient-with-proxy/"/>
      <url>/2015/08/06/how-to-get-or-post-data-via-httpclient-with-proxy/</url>
      
        <content type="html"><![CDATA[<p>The <strong>HttpClient</strong> is library which is support by apache. It can post or get data from specific  webservice and represents only the most basic contract for HTTP request execution.</p><p>We explain how to use this library with a example. In this example, we are going to use it to access the google tranlated API. Translating some text from specific language to other language. And this example using the Spring framework and Maven tool to build.</p><span id="more"></span><p>First, let us create our properties file which configures the google api url and some httpclient related stuff. Put it in our resource directory.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">google.translation.api=https:<span class="comment">//www.googleapis.com/language/translate/v2</span></span><br><span class="line">proxy.host=</span><br><span class="line">proxy.port=</span><br><span class="line">proxy.user=</span><br><span class="line">proxy.password=</span><br></pre></td></tr></table></figure><p>And then we create the util class which access the properties file.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.httpclient.tutorial.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by yushi on 8/7/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">ConstantUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PROXY_HOST</span> <span class="operator">=</span> <span class="string">&quot;proxy.host&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PROXY_PORT</span> <span class="operator">=</span> <span class="string">&quot;proxy.port&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PROXY_USER</span> <span class="operator">=</span> <span class="string">&quot;proxy.user&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PROXY_PASSWORD</span> <span class="operator">=</span> <span class="string">&quot;proxy.password&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">GOOGLE_TRANSLATION_API</span> <span class="operator">=</span><span class="string">&quot;google.translation.api&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Properties configurationProperties;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ConstantUtil</span><span class="params">(Properties configurationProperties)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.configurationProperties = configurationProperties;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getProxyHost</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.configurationProperties.getProperty(PROXY_HOST);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getProxyPort</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.parseInt(<span class="built_in">this</span>.configurationProperties.getProperty(PROXY_PORT));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getProxyUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.configurationProperties.getProperty(PROXY_USER);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getProxyPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.configurationProperties.getProperty(PROXY_PASSWORD);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGoogleTranslationApi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="built_in">this</span>.configurationProperties.getProperty(GOOGLE_TRANSLATION_API);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>So our configuration is completed. We also will create the HttpClient which can be used to access the webservice.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.httpclient.tutorial;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpHost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.auth.AuthScope;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.auth.Credentials;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.auth.UsernamePasswordCredentials;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.CredentialsProvider;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.BasicCredentialsProvider;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClientBuilder;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class="line"><span class="keyword">import</span> org.httpclient.tutorial.utils.ConstantUtil;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by yushi on 8/7/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">HttpClientFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ConstantUtil constantUtil;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HttpClientFactory</span><span class="params">(ConstantUtil constantUtil)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.constantUtil = constantUtil;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> CloseableHttpClient <span class="title function_">createHttpClient</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> HttpClients.createDefault();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> HttpClientBuilder <span class="title function_">createHttpClientWithProxy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">HttpHost</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpHost</span>(constantUtil.getProxyHost(), constantUtil.getProxyPort());</span><br><span class="line">        <span class="type">Credentials</span> <span class="variable">credentials</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordCredentials</span>(constantUtil.getProxyUser(), constantUtil.getProxyPassword());</span><br><span class="line">        <span class="type">AuthScope</span> <span class="variable">authScope</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AuthScope</span>(constantUtil.getProxyHost(), constantUtil.getProxyPort());</span><br><span class="line">        <span class="type">CredentialsProvider</span> <span class="variable">credentialsProvider</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BasicCredentialsProvider</span>();</span><br><span class="line">        credentialsProvider.setCredentials(authScope, credentials);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> HttpClients.custom().setDefaultCredentialsProvider(credentialsProvider).setProxy(proxy);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In above codes, there are two methods, one is for default httpclient which is not need the proxy, another is httpclient with proxy.</p><p>So far, we have our own httpclient. letâ€™s create our own translation component with httpclient.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.httpclient.tutorial;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"><span class="keyword">import</span> org.httpclient.tutorial.utils.ConstantUtil;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by yushi on 8/7/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">TranslateCore</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">KEY</span> <span class="operator">=</span> <span class="string">&quot;AIzaSyAFaWbO3r-9FNeHU6Obj5tm6wWSnIAlBkg&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> HttpClientFactory httpClientFactory;</span><br><span class="line">    <span class="keyword">private</span> ConstantUtil constantUtil;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TranslateCore</span><span class="params">(HttpClientFactory httpClientFactory, ConstantUtil constantUtil)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.httpClientFactory = httpClientFactory;</span><br><span class="line">        <span class="built_in">this</span>.constantUtil = constantUtil;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">translateContext</span><span class="params">(String sourceLanguage, String targetLanguage, String context)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s?key=%s&amp;source=%s&amp;target=%s&amp;q=%s&amp;&quot;</span>, constantUtil.getGoogleTranslationApi(),</span><br><span class="line">                KEY, sourceLanguage, targetLanguage, context);</span><br><span class="line"></span><br><span class="line">        <span class="type">HttpGet</span> <span class="variable">httpGet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpGet</span>(url);</span><br><span class="line">        <span class="type">CloseableHttpClient</span> <span class="variable">httpClient</span> <span class="operator">=</span> httpClientFactory.createHttpClient();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">CloseableHttpResponse</span> <span class="variable">httpResponse</span> <span class="operator">=</span> httpClient.execute(httpGet);</span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> EntityUtils.toString(httpResponse.getEntity());</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>You will notice that KEY constant variable, which is support by google developer, you need to register google developer and then get you developer key.</p><p>Take your feet to <a href="https://cloud.google.com/translate/v2/using_rest?hl=en">here</a>to see the google translate API usage.</p><p>Okay, then creating translation interface:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.httpclient.tutorial;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by yushi on 8/7/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ITranslation</span> &#123;</span><br><span class="line">    String <span class="title function_">translateToJapanese</span><span class="params">(String context)</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">translateToChinese</span><span class="params">(String context)</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">translate</span><span class="params">(String language, String context)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Letâ€™s implement our translation interfer, in this class, we just translat english to other language.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.httpclient.tutorial;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by yushi on 8/7/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Translation</span> <span class="keyword">implements</span> <span class="title class_">ITranslation</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">ZH</span> <span class="operator">=</span> <span class="string">&quot;zh-CN&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">EN</span> <span class="operator">=</span> <span class="string">&quot;en&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">JA</span> <span class="operator">=</span> <span class="string">&quot;ja&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TranslateCore translateCore;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Translation</span><span class="params">(TranslateCore translateCore)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.translateCore = translateCore;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">translateToJapanese</span><span class="params">(String context)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> translateCore.translateContext(EN, JA, context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">translateToChinese</span><span class="params">(String context)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> translateCore.translateContext(EN, ZH, context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">translate</span><span class="params">(String language, String context)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> translateCore.translateContext(EN, language, context);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>To run our application.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.httpclient.tutorial;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by yushi on 8/7/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;application-context.xml&quot;</span>);</span><br><span class="line">        <span class="type">ITranslation</span> <span class="variable">translation</span> <span class="operator">=</span> (ITranslation)context.getBean(<span class="string">&quot;translation&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(translation.translateToChinese(<span class="string">&quot;Hello&quot;</span>));</span><br><span class="line">        System.out.println(translation.translateToJapanese(<span class="string">&quot;Hello&quot;</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>We using the spring framework to create bean and run it. The spring configuration xml file is below.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xmlns:util=<span class="string">&quot;http://www.springframework.org/schema/util&quot;</span></span><br><span class="line">       xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="string">       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;util:properties id=<span class="string">&quot;configurationProperties&quot;</span> location=<span class="string">&quot;classpath:configuration.properties&quot;</span>/&gt;</span><br><span class="line">    &lt;context:component-scan base-<span class="keyword">package</span>=<span class="string">&quot;org.httpclient.tutorial&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=<span class="string">&quot;translation&quot;</span> class=<span class="string">&quot;org.httpclient.tutorial.Translation&quot;</span>&gt;</span><br><span class="line">        &lt;constructor-arg ref=<span class="string">&quot;translateCore&quot;</span>/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><p>The output is below:</p><pre><code>&#123;     &quot;error&quot;: &#123;      &quot;errors&quot;: [       &#123;        &quot;domain&quot;: &quot;usageLimits&quot;,        &quot;reason&quot;: &quot;dailyLimitExceeded&quot;,        &quot;message&quot;: &quot;Daily Limit Exceeded&quot;       &#125;      ],      &quot;code&quot;: 403,      &quot;message&quot;: &quot;Daily Limit Exceeded&quot;     &#125;    &#125;</code></pre><p>This indicate our access the google translate API with httpclient is successful. But why response these text. Because you need to price to google and then are able to use this api.<br>To see the pricing of google translate API, visit <a href="https://cloud.google.com/translate/v2/pricing">here</a>.</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Using TSD to improve javascript intellisense of IDE</title>
      <link href="/2015/07/30/using-tsd-to-improve-javascript-intellisense-of-ide/"/>
      <url>/2015/07/30/using-tsd-to-improve-javascript-intellisense-of-ide/</url>
      
        <content type="html"><![CDATA[<p>As we know, itâ€™s very difficult to make the IDE to recognise the function of JavaScript, we called code intellisense, because JavaScript is weak language. So how to solve this problem. There is a way.</p><p><code>TSD</code> is TypeScript Definition manager for DefinitelyTyped. It can search and install <code>TypeScript</code> definition files directly from repository. The <code>TypeScript</code> definition file actually is TypeScript file, and TypeScript is strong type language. So IDE can intellisense the code, like Java and C#.</p><p><code>TypeScipt</code> is also like <code>CoffeeScript</code>, it can be compiled to <code>JavaScript</code>. It is developed by Microsoft company. To See the TypeScript, go to this official <a href="http://www.typescriptlang.org/">website</a>.</p><span id="more"></span><p>If you used the <code>NPM</code> before, I believe you also can use <code>TSD</code> quickly. The <code>TSD</code> usage is very similar with <code>NPM</code>. And also it has <code>tsd.json</code> file to contains javascript libraries type definitions which you want to make them intellisense, just like <code>package.json</code> file of <code>NPM</code>.</p><p>To install it, we can using <code>NPM</code> command.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install tsd -g</span><br></pre></td></tr></table></figure><p>Use below command to search the DefinitelyTyped file of JavaScript library.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsd query &lt;javascript library name&gt; -i -r</span><br></pre></td></tr></table></figure><p>for example, we search the definitelyTyped file of angular:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsd query angular -i -r</span><br></pre></td></tr></table></figure><p>this will print below information:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- angularjs / angular</span><br><span class="line">   -&gt; jquery &gt; jquery</span><br><span class="line">    v latest</span><br><span class="line">    v 1.0.0</span><br><span class="line">    v 1.2.0</span><br><span class="line">   &gt;&gt; Angular JS 1.4            : angularjs.org</span><br><span class="line">    @ Diego Vilar               : github.com/diegovilar</span><br><span class="line">    &lt; angular (external module)</span><br></pre></td></tr></table></figure><p>To install the definitelyTyped file into your project. Just follow below commands:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsd install angular --save</span><br></pre></td></tr></table></figure><p>also like using NPM to install the package. For tsd, this will create <code>tsd.json</code> file firstly, and then create <code>typing</code> directory, put the related definitelytyped file which is the <code>.d.ts</code> extension TypeScript file. </p><p>The example of <code>tsd.json</code> file:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;v4&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;repo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;borisyankov/DefinitelyTyped&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;master&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typings&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bundle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;typings/tsd.d.ts&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;installed&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;angularjs/angular.d.ts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;383a3bc8e654a77eb8bd07d9feb7208735dcb6fa&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jquery/jquery.d.ts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;commit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;383a3bc8e654a77eb8bd07d9feb7208735dcb6fa&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>The example of <code>tsd.d.ts</code> file, this file is reference the definitelytyped file. and it under the <code>typings</code> directory.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// &lt;reference path=&quot;angularjs/angular.d.ts&quot; /&gt;</span></span><br><span class="line"><span class="comment">/// &lt;reference path=&quot;jquery/jquery.d.ts&quot; /&gt;</span></span><br></pre></td></tr></table></figure><p>See below screenshots of files or directories:</p><img src="/assets/images/legacy/tsd-file-tree.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/tsd-file-tree.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="300"><p>Go to <a href="https://github.com/DefinitelyTyped/tsd">https://github.com/DefinitelyTyped/tsd</a> to see the tsd command details.</p><p>And TSD has supports many javascript libraries, you can search them which you want in <a href="http://definitelytyped.org/tsd/">definitelytyped repositorty</a>.</p><p>Currently, I found this is only work on <a href="https://code.visualstudio.com/">Visual Studio Code</a>, The <code>VSCode</code> is cross platform web develop tools, include Linux, Windows and Mac OS.</p><p>To make the VSCode intellisense for javascript. you need to add tsd.d.ts file reference codes to your javascript file, like below.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// &lt;reference path=&quot;../../typings/tsd.d.ts&quot;/&gt;</span></span><br></pre></td></tr></table></figure><p>Okay, lets test the <code>underscore</code> javascript library, first install definitely typed file with TSD, and then put the reference code to the js file which is you are working.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by yushi on 30/07/15.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/// &lt;reference path=&quot;../../typings/tsd.d.ts&quot;/&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params">name</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello &quot;</span> + name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>So when you invoke the undercore functions, the IDE will intellisense the method.</p><p><img src="/assets/images/legacy/tsd-intellisense.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/tsd-intellisense.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="intellisense"></p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> Tool </tag>
            
            <tag> TypeScript </tag>
            
            <tag> VSCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Implicit submission of form when pressing enter key</title>
      <link href="/2015/06/30/implicit-submission-of-form-when-pressing-enter-key/"/>
      <url>/2015/06/30/implicit-submission-of-form-when-pressing-enter-key/</url>
      
        <content type="html"><![CDATA[<p>As we know, if we want to submit data in the form, we just need to create a <em>input</em> or <em>button</em> element in the form and give them the <em>submit</em> value to the type attribute. Or using javascript to call <code>form.submit()</code>.</p><p>But there is third way to submit form. Thatâ€™s the implicit submission of form when pressing the enter key under some situations. The form implicit subbmission supported by all browsers, and html spec strongly recommand do this.</p><span id="more"></span><h4 id="Implicit-submission-situation-1"><a href="#Implicit-submission-situation-1" class="headerlink" title="Implicit submission situation 1"></a>Implicit submission situation 1</h4><p>The form will be submitted automatically when there is only one input element in the form and pressing the enter key in the input element.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/abc.txt&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;name&quot;</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>The form will be submitted and get the data from <em>abc.txt</em> file when we press the enter key in the input element.</p><p>But if the form has multiple input elements, the form can not be submitted automatically. like below codes.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/abc.txt&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;name&quot;</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;age&quot;</span>&gt;</span>Age:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;age&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Implicit-submission-situation-2"><a href="#Implicit-submission-situation-2" class="headerlink" title="Implicit submission situation 2"></a>Implicit submission situation 2</h4><p>For multiple input elements in the form situation, the form can not be submitted automatically. So how to make it implicit submission. This is second situation we are introducing.</p><p>If the form has <em>submit</em> type element(input, button), the form will be submitted when pressing the enter key in the input element regardless of how many input elements in this form.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/abc.txt&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;name&quot;</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;age&quot;</span>&gt;</span>Age:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;age&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>If you need to run some JavaScript before the form is submitted (validation, data manipulation, etc), do it in a <code>submit</code> event handler on the form, not a <code>click</code> handler on a button.</p><h4 id="How-to-suppress-it"><a href="#How-to-suppress-it" class="headerlink" title="How to suppress it"></a>How to suppress it</h4><p>The solution is very simple, just prevent the event trigger when pressing the enter key. So we can deal with it in the <code>keypress</code> event handler.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/abc.txt&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;name&quot;</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;age&quot;</span>&gt;</span>Age:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;age&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> age = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;age&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">age.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keypress&#x27;</span>,<span class="keyword">function</span>(<span class="params">event</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span>(event.<span class="property">keyCode</span> == <span class="number">13</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">event.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript">&#125;());</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Note, the code of enter key is 13. Using <code>event.preventDefault()</code> to stop the form submission when the keycode is 13. And for above codes, we only suppress the age input element, so when pressing enter key in the name input element, the form still is submitted.</p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML5 </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - @AspectJ Annotation</title>
      <link href="/2015/06/16/spring-aop-at-aspectj-annotation/"/>
      <url>/2015/06/16/spring-aop-at-aspectj-annotation/</url>
      
        <content type="html"><![CDATA[<p>In this article, we introduce how to use <code>AOP</code> with the <code>@AspectJ</code> Annotation. If we want to use this Annotation. we should include below code in the XML schema-based configuration file.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span> </span><br></pre></td></tr></table></figure><p>And also you need to add these libraries to your project, <em>aspectjrt.jar</em>, <em>aspectjweaver.jar</em>, <em>aspectj.jar</em> and <em>aopalliance.jar</em>.</p><span id="more"></span><h4 id="Declare-Aspect"><a href="#Declare-Aspect" class="headerlink" title="Declare Aspect"></a>Declare Aspect</h4><p>Using <code>@Aspect</code> annotation to the class which you want to appoint it as an <code>Aspect</code>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogging</span> &#123;</span><br><span class="line"><span class="comment">// some codes in here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Declare-Pointcut"><a href="#Declare-Pointcut" class="headerlink" title="Declare Pointcut"></a>Declare Pointcut</h4><p>Declaring pointcut in your aspect module with <code>@Pointcut</code> annotation.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogging</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Pointcut(&quot;execution(* spring.test.aop.MyData.saveData(..))&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">saveDataPointcut</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In above codes, the pointcut is only work for <em>saveData</em> method of <em>MyData</em> class in the <em>spring.test.aop</em> package. To see the regular expression, go to <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-pointcuts-examples">here</a></p><h4 id="Delcare-Advice"><a href="#Delcare-Advice" class="headerlink" title="Delcare Advice"></a>Delcare Advice</h4><p>We can declare more types of advice using specific annotation in the aspect module, like <code>@Before</code>, <code>@After</code>, <code>@AfterReturning</code>, <code>@AfterThrowing</code>, <code>@Around</code>. Letâ€™s see the codes directly.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogging</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Pointcut(&quot;execution(* spring.test.aop.MyData.saveData(..))&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">saveDataPointcut</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Before(&quot;saveDataPointcut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeSaveData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;The Data is going to be saved&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@After(&quot;saveDataPointcut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterSaveData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;The Data has been saved&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Before(&quot;execution(* spring.test.aop.MyData.getData())&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeGetData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Ready to get the data&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@After(&quot;execution(* spring.test.aop.*.getData())&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterGetData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;The data has been got&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@AfterReturning(pointcut = &quot;execution(* spring.test.aop.MyData.getData())&quot;, returning = &quot;returnValue&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturningAdvice</span><span class="params">(Object returnValue)</span> &#123;</span><br><span class="line">System.out.println(String.format(<span class="string">&quot;The return value is: %s &quot;</span>,</span><br><span class="line">returnValue.toString()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@AfterThrowing(pointcut = &quot;execution(* spring.test.aop.*.concatData(..))&quot;, throwing = &quot;ex&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">throwingAdvice</span><span class="params">(NullPointerException ex)</span> &#123;</span><br><span class="line">System.out.println(String.format(<span class="string">&quot;Throw exception is: %s&quot;</span>,</span><br><span class="line">ex.getMessage()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Around(&quot;saveDataPointcut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">aroundAdvice</span><span class="params">(ProceedingJoinPoint point)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Saving Data....&quot;</span>);</span><br><span class="line"></span><br><span class="line">point.proceed();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;Saved Data!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>You can specify the pointcut name or pointcut expression to advice. whatever you want. One important thing is you must let the advice know which pointcut works for.</p><h4 id="Simple-Instance"><a href="#Simple-Instance" class="headerlink" title="Simple Instance"></a>Simple Instance</h4><figure class="highlight java"><figcaption><span>MyData.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyData</span> &#123;</span><br><span class="line"><span class="keyword">public</span> String data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveData</span><span class="params">(String data)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Saving the data: &quot;</span> + data);</span><br><span class="line"><span class="built_in">this</span>.data = data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Get the data: &quot;</span> + <span class="built_in">this</span>.data);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>.data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">concatData</span><span class="params">(String data)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.data.concat(data);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>MyLogging.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterReturning;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterThrowing;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Pointcut;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogging</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Pointcut(&quot;execution(* spring.test.aop.MyData.saveData(..))&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">saveDataPointcut</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Before(&quot;saveDataPointcut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeSaveData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;The Data is going to be saved&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@After(&quot;saveDataPointcut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterSaveData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;The Data has been saved&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Before(&quot;execution(* spring.test.aop.MyData.getData())&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeGetData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Ready to get the data&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@After(&quot;execution(* spring.test.aop.*.getData())&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterGetData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;The data has been got&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@AfterReturning(pointcut = &quot;execution(* spring.test.aop.MyData.getData())&quot;, returning = &quot;returnValue&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturningAdvice</span><span class="params">(Object returnValue)</span> &#123;</span><br><span class="line">System.out.println(String.format(<span class="string">&quot;The return value is: %s &quot;</span>,</span><br><span class="line">returnValue.toString()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@AfterThrowing(pointcut = &quot;execution(* spring.test.aop.*.concatData(..))&quot;, throwing = &quot;ex&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">throwingAdvice</span><span class="params">(NullPointerException ex)</span> &#123;</span><br><span class="line">System.out.println(String.format(<span class="string">&quot;Throw exception is: %s&quot;</span>,</span><br><span class="line">ex.getMessage()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Around(&quot;saveDataPointcut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">aroundAdvice</span><span class="params">(ProceedingJoinPoint point)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Saving Data....&quot;</span>);</span><br><span class="line"></span><br><span class="line">point.proceed();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;Saved Data!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><figcaption><span>springConfig.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd </span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/aop </span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd &quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myLogging&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyLogging&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myData&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyData&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>App.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">context = <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;springConfig.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">MyData</span> <span class="variable">myData</span> <span class="operator">=</span> (MyData) context.getBean(<span class="string">&quot;myData&quot;</span>);</span><br><span class="line"></span><br><span class="line">myData.saveData(<span class="string">&quot;35&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">myData.getData();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">myData.concatData(<span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Okay, run above simple instance. the output is below:</p><pre><code>Saving Data....The Data is going to be savedSaving the data: 35Saved Data!The Data has been saved-----------------Ready to get the dataGet the data: 35The data has been gotThe return value is: 35 -----------------Throw exception is: nullException in thread &quot;main&quot; java.lang.NullPointerException...</code></pre>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - XML Schema</title>
      <link href="/2015/06/14/spring-aop-xml-schema/"/>
      <url>/2015/06/14/spring-aop-xml-schema/</url>
      
        <content type="html"><![CDATA[<p>Previously, we created AOP with Spring framework via implementing interface of spring AOP. And now we can use XML Schema to achieve it. We need to add below <strong>AspectJ</strong> libraries to our project. So downloading and adding them to the <em>CLASSPATH</em> of application,  and also we can use the maven to build our application.    </p><ul><li><em>aspectjrt.jar</em>   </li><li><em>aspectjweaver.jar</em>   </li><li><em>aopalliance.jar</em>   <span id="more"></span>Letâ€™s see our pom.xml<figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>Spring-AOP-XML-Schema<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>Spring-AOP-XML-Schema<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sourceDirectory</span>&gt;</span>src<span class="tag">&lt;/<span class="name">sourceDirectory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjrt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>aopalliance<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aopalliance<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>Okay, so we start to config the AOP with xml schema. </p><ol><li>Declaring Aspect:</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">&quot;logging&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogging&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myLogging&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyLogging&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>Create our service bean called <em>myLogging</em>. this service should be injected before or after in the logic method. And use <code>&lt;aop:aspect&gt;</code> to reference it.</p><ol start="2"><li>Declaring Pointcut:</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">&quot;logging&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogging&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;saveDataPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* spring.test.aop.*.saveData(..))&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;getDataPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* spring.test.aop.*.getData())&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myLogging&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyLogging&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myData&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyData&quot;</span> /&gt;</span></span><br><span class="line">```   </span><br><span class="line"></span><br><span class="line">Create logic class bean and pointcut with `<span class="tag">&lt;<span class="name">aop:pointcut</span>&gt;</span>` , define the expression matcher to match the methods which will be executed with AOP. To see the expression of pointcut, go to [http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html).</span><br><span class="line"></span><br><span class="line">3. Declaring Advice:</span><br><span class="line"></span><br><span class="line">``` xml</span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">&quot;logging&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogging&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;saveDataPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* spring.test.aop.*.saveData(..))&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;getDataPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* spring.test.aop.*.getData())&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;beforeSaveData&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;saveDataPointcut&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;afterSaveData&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;saveDataPointcut&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;beforeGetData&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(* spring.test.aop.MyData.getData())&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;afterGetData&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(* spring.test.aop.*.get*())&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;afterReturningAdvice&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">pointcut-ref</span>=<span class="string">&quot;getDataPointcut&quot;</span> <span class="attr">returning</span>=<span class="string">&quot;returnValue&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;throwingAdvice&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">pointcut</span>=<span class="string">&quot;execution(* spring.test.aop.MyData.concatData(String))&quot;</span> <span class="attr">throwing</span>=<span class="string">&quot;ex&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myLogging&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyLogging&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myData&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyData&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>Use <code>&lt;aop:before&gt;</code>, <code>&lt;aop:after&gt;</code>, <code>&lt;aop:after-returning&gt;</code> and <code>&lt;aop:after-throwing&gt;</code> to create each advices. Reference to pointcut bean and appoint which method of service can be injected. Note, for <em>after-returning</em> and <em>after-throwing</em>, we should add attributes <em>returning</em> and <em>throwing</em> to access their variables.   </p><p>The full configration file is: </p><figure class="highlight xml"><figcaption><span>springConfig.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd </span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/aop </span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd &quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">id</span>=<span class="string">&quot;logging&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogging&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;saveDataPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* spring.test.aop.*.saveData(..))&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;getDataPointcut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* spring.test.aop.*.getData())&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;beforeSaveData&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;saveDataPointcut&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;afterSaveData&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;saveDataPointcut&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;beforeGetData&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(* spring.test.aop.MyData.getData())&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;afterGetData&quot;</span> <span class="attr">pointcut</span>=<span class="string">&quot;execution(* spring.test.aop.*.get*())&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">&quot;afterReturningAdvice&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">pointcut-ref</span>=<span class="string">&quot;getDataPointcut&quot;</span> <span class="attr">returning</span>=<span class="string">&quot;returnValue&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">&quot;throwingAdvice&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">pointcut</span>=<span class="string">&quot;execution(* spring.test.aop.MyData.concatData(String))&quot;</span> <span class="attr">throwing</span>=<span class="string">&quot;ex&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myLogging&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyLogging&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myData&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyData&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>From now, the AOP configration completed. Letâ€™s see our Logging service and Logic class.</p><figure class="highlight java"><figcaption><span>MyLogging.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogging</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeSaveData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;The Data is going to be saved&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterSaveData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;The Data has been saved&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">beforeGetData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Ready to get the data&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterGetData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;The data has been got&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturningAdvice</span><span class="params">(Object returnValue)</span> &#123;</span><br><span class="line">System.out.println(String.format(</span><br><span class="line"><span class="string">&quot;The return value is: %s &quot;</span>, returnValue.toString()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">throwingAdvice</span><span class="params">(NullPointerException ex)</span> &#123;</span><br><span class="line">System.out.println(String.format(</span><br><span class="line"><span class="string">&quot;Throw exception is: %s&quot;</span>, ex.getMessage()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In our Logging service, the <em>afterReturningAdvice</em> and <em>throwingAdvice</em> methods should take <em>returnValue</em> which is Object type and Exception type <em>ex</em> paramters.  </p><figure class="highlight java"><figcaption><span>MyData.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyData</span> &#123;</span><br><span class="line"><span class="keyword">public</span> String data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveData</span><span class="params">(String data)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Saving the data: &quot;</span> + data);</span><br><span class="line"><span class="built_in">this</span>.data = data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Get the data: &quot;</span> + <span class="built_in">this</span>.data);</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>.data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">concatData</span><span class="params">(String data)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.data.concat(data);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>We use the different pointcut to decide which service method can be injected which logic method.   </p><p>Finally, letâ€™s get our main class:</p><figure class="highlight java"><figcaption><span>App.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">context = <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;springConfig.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">MyData</span> <span class="variable">myData</span> <span class="operator">=</span> (MyData) context.getBean(<span class="string">&quot;myData&quot;</span>);</span><br><span class="line"></span><br><span class="line">myData.saveData(<span class="string">&quot;This is my data&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">myData.getData();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>See the output of application:</p><pre><code>he Data is going to be savedSaving the data: This is my dataThe Data has been saved-----------------Ready to get the dataGet the data: This is my dataThe return value is: This is my data The data has been got-----------------Throw exception is: nullException in thread &quot;main&quot; java.lang.NullPointerExceptionat java.lang.String.concat(String.java:1970)at spring.test.aop.MyData.concatData(MyData.java:17)at spring.test.aop.MyData$$FastClassBySpringCGLIB$$731fbdfd.invoke(&lt;generated&gt;)at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:717)at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:58)at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:653)at spring.test.aop.MyData$$EnhancerBySpringCGLIB$$5a76fbda.concatData(&lt;generated&gt;)at spring.test.aop.App.main(App.java:21)</code></pre>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - Dynamic Pointcut</title>
      <link href="/2015/06/12/spring-aop-dynamic-pointcut/"/>
      <url>/2015/06/12/spring-aop-dynamic-pointcut/</url>
      
        <content type="html"><![CDATA[<p>If we want to intercept methods with dynamic pointcut, we need to override <em>matches</em> and <em>getClassFilter</em> methods of <strong>DynamicMethodMatcher</strong> abstract class. The dynamic pointcut can verify the arguments of the method at runtime. This is a difference with static pointcut.</p><span id="more"></span><figure class="highlight java"><figcaption><span>MyDynamicPointcut.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.ClassFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.support.DynamicMethodMatcherPointcut;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyDynamicPointcut</span> <span class="keyword">extends</span> <span class="title class_">DynamicMethodMatcherPointcut</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(Method method, Class&lt;?&gt; targetClass, Object[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Dynamic check for &quot;</span> + method.getName());</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (args.length &gt; <span class="number">0</span> &amp;&amp; (<span class="type">int</span>) args[<span class="number">0</span>] &gt; <span class="number">10</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ClassFilter <span class="title function_">getClassFilter</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ClassFilter</span>() &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(Class&lt;?&gt; clazz)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> clazz.equals(MyLogicClass.class);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>In above dynamic pointcut class, we verify the class name must be <em>MyLogicClass</em> and the value of the first argument in method must larger than 10, otherwise the method will not be intercepted.</p><figure class="highlight java"><figcaption><span>MyAroundAdvice.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInvocation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAroundAdvice</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(MethodInvocation invocation)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt; Invoking method &quot;</span></span><br><span class="line">+ invocation.getMethod().getName());</span><br><span class="line"></span><br><span class="line"><span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> invocation.proceed();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt; Invoked Done&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>We print some message before and after the invocation of method.</p><figure class="highlight java"><figcaption><span>MyLogicClass</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogicClass</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodOne</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;MethodOne is Running&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodTwo</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">System.out.println(String.format(</span><br><span class="line"><span class="string">&quot;MethodTwo is running with argument %s&quot;</span>, x));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Here, in our logic class, there are two methods, one without argument, another with int type argument. Both method print message in console.</p><figure class="highlight xml"><figcaption><span>springConfig.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">beans</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//SPRING//DTD BEAN 2.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.springframework.org/dtd/spring-beans-2.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myAroundAdvice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyAroundAdvice&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myLogicClass&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyLogicClass&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myDynamicPointcut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyDynamicPointcut&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;advisor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.support.DefaultPointcutAdvisor&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myDynamicPointcut&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;advice&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myAroundAdvice&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;proxyFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;interceptorNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>advisor<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;target&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogicClass&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Create our <em>MyDynamicPointcut</em> bean and <em>MyAroundAdvice</em> bean and put them into <strong>DefaultPointcutAdvisor</strong> bean. Finally put the advisor and target class to the <strong>ProxyFactoryBean</strong>.</p><figure class="highlight java"><figcaption><span>App.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">context = <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;springConfig.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">MyLogicClass</span> <span class="variable">proxy</span> <span class="operator">=</span> (MyLogicClass) context.getBean(<span class="string">&quot;proxyFactoryBean&quot;</span>);</span><br><span class="line"></span><br><span class="line">proxy.methodOne();</span><br><span class="line">System.out.println(<span class="string">&quot;\n--------------------\n&quot;</span>);</span><br><span class="line">proxy.methodTwo(<span class="number">1</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;\n--------------------\n&quot;</span>);</span><br><span class="line">proxy.methodTwo(<span class="number">11</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>We call the <em>methodTwo</em> twice with different arguments. Letâ€™s see the output.</p><pre><code>Dynamic check for methodOneMethodOne is Running--------------------Dynamic check for methodTwoMethodTwo is running with argument 1--------------------Dynamic check for methodTwo&gt;&gt;&gt;&gt;&gt;&gt; Invoking method methodTwoMethodTwo is running with argument 11&gt;&gt;&gt;&gt;&gt;&gt; Invoked Done</code></pre><p>You see, only <em>methodTwo</em> with argument 11 (larger than 10) is intercepted.</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - Static Pointcut</title>
      <link href="/2015/06/11/spring-aop-static-pointcut/"/>
      <url>/2015/06/11/spring-aop-static-pointcut/</url>
      
        <content type="html"><![CDATA[<p>Letâ€™s first to see the three very technical terms as below.</p><ul><li>Adivce - Indicate the action to take either before or after the method execution.</li><li>Pointcut - Indicate which method should be intercept, by method name or regular expression pattern.</li><li>Advisor - Group â€˜Adviceâ€™ and â€˜Pointcutâ€™ into a single unit, and pass it to a proxy factory object<span id="more"></span></li></ul><h3 id="No-pointcut-example"><a href="#No-pointcut-example" class="headerlink" title="No pointcut example"></a>No pointcut example</h3><figure class="highlight java"><figcaption><span>MyLogicClass</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogicClass</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logicMethodOne</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;This is from logicMethodOne&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logicMethodTwo</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;This is from logicMethodTwo&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testLogic</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;This is from testLogic&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>MyAroundAdvice.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInvocation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAroundAdvice</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(MethodInvocation invocation)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Before method execuation&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> invocation.proceed();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;After method execuation&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>App.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">applicationContext = <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;springConfig.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">MyLogicClass</span> <span class="variable">logicClass</span> <span class="operator">=</span> (MyLogicClass)applicationContext.getBean(<span class="string">&quot;proxyFactoryBean&quot;</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;\n--------------------\n&quot;</span>);</span><br><span class="line">logicClass.logicMethodOne();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;\n--------------------\n&quot;</span>);</span><br><span class="line">logicClass.logicMethodTwo();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;\n--------------------\n&quot;</span>);</span><br><span class="line">logicClass.testLogic();</span><br><span class="line">System.out.println(<span class="string">&quot;\n--------------------\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">beans</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//SPRING//DTD BEAN 2.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.springframework.org/dtd/spring-beans-2.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myAroundAdvice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyAroundAdvice&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myLogicClass&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyLogicClass&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;proxyFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;interceptorNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>myAroundAdvice<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;target&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogicClass&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight text"><figcaption><span>output</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">Before method execuation</span><br><span class="line">This is from logicMethodOne</span><br><span class="line">After method execuation</span><br><span class="line"></span><br><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">Before method execuation</span><br><span class="line">This is from logicMethodTwo</span><br><span class="line">After method execuation</span><br><span class="line"></span><br><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">Before method execuation</span><br><span class="line">This is from testLogic</span><br><span class="line">After method execuation</span><br><span class="line"></span><br><span class="line">--------------------</span><br></pre></td></tr></table></figure><p>In above example, all logic methods of the class has been intercepted due to the application doesnâ€™t use the pointcut to specific.</p><h3 id="Name-match-example"><a href="#Name-match-example" class="headerlink" title="Name match example"></a>Name match example</h3><p>And now, we just want to intercept the method <em>testLogic</em>, so we need to create <strong>NameMatchMethodPointcut</strong> bean in spring config xml. and put the method name you want to intercept to the <strong>mappedName</strong> property value.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;nameMatchPointcut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.support.NameMatchMethodPointcut&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mappedName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;testLogic&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>And also you can mapped multiple methods with <strong>mappedNames</strong>, like below.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;nameMatchPointcut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.support.NameMatchMethodPointcut&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mappedNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>logicMethodOne<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>logicMethodTwo<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Then create <strong>DefaultPointcutAdvisor</strong> bean to group and associate the pointcut and advice.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myPointcutAdvisor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.support.DefaultPointcutAdvisor&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;nameMatchPointcut&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;advice&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myAroundAdvice&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Replace the <strong>interceptorNames</strong> of <strong>ProxyFactoryBean</strong> with the new Advisor.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;proxyFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;interceptorNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>myPointcutAdvisor<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;target&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogicClass&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Itâ€™s done, letâ€™s see the full spring config file and output.</p><figure class="highlight xml"><figcaption><span>springConfig.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">beans</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//SPRING//DTD BEAN 2.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.springframework.org/dtd/spring-beans-2.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myAroundAdvice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyAroundAdvice&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myLogicClass&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyLogicClass&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;nameMatchPointcut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.support.NameMatchMethodPointcut&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mappedName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;testLogic&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;property name=&quot;mappedNames&quot;&gt;</span></span><br><span class="line"><span class="comment">&lt;list&gt;</span></span><br><span class="line"><span class="comment">&lt;value&gt;logicMethodOne&lt;/value&gt;</span></span><br><span class="line"><span class="comment">&lt;value&gt;logicMethodTwo&lt;/value&gt;</span></span><br><span class="line"><span class="comment">&lt;/list&gt;</span></span><br><span class="line"><span class="comment">&lt;/property&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myPointcutAdvisor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.support.DefaultPointcutAdvisor&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;pointcut&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;nameMatchPointcut&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;advice&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myAroundAdvice&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;proxyFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;interceptorNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>myPointcutAdvisor<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;target&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogicClass&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight text"><figcaption><span>output</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">This is from logicMethodOne</span><br><span class="line"></span><br><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">This is from logicMethodTwo</span><br><span class="line"></span><br><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">Before method execuation</span><br><span class="line">This is from testLogic</span><br><span class="line">After method execuation</span><br><span class="line"></span><br><span class="line">--------------------</span><br></pre></td></tr></table></figure><h3 id="Regular-expression-example"><a href="#Regular-expression-example" class="headerlink" title="Regular expression example"></a>Regular expression example</h3><p>Also we can use regular expression to match methods which should be intercepted. Create <strong>RegexpMethodPointcutAdvisor</strong> bean and set the <em>pattern</em> property value with regular expression and combine with advice.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;regexPointcutAdvisor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.support.RegexpMethodPointcutAdvisor&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;pattern&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.*Method.*&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;advice&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myAroundAdvice&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>And you can specific multiple patterns with <em>patterns</em> property.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;regexPointcutAdvisor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.support.RegexpMethodPointcutAdvisor&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;patterns&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>.*Method.*<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;advice&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myAroundAdvice&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Finally pass the advisor to the <strong>ProxyFactoryBean</strong>.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;proxyFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;interceptorNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>regexPointcutAdvisor<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;target&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogicClass&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight text"><figcaption><span>output</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">Before method execuation</span><br><span class="line">This is from logicMethodOne</span><br><span class="line">After method execuation</span><br><span class="line"></span><br><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">Before method execuation</span><br><span class="line">This is from logicMethodTwo</span><br><span class="line">After method execuation</span><br><span class="line"></span><br><span class="line">--------------------</span><br><span class="line"></span><br><span class="line">This is from testLogic</span><br><span class="line"></span><br><span class="line">--------------------</span><br></pre></td></tr></table></figure><p>In practice, you can use it to manage DAO layer, where you can declare â€œ.*DAO.*â€ to intercept all your DAO classes to support transaction.</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - Pointcut</title>
      <link href="/2015/06/10/spring-aop-pointcut/"/>
      <url>/2015/06/10/spring-aop-pointcut/</url>
      
        <content type="html"><![CDATA[<p>What is <code>Pointcut</code> of Spring AOP? letâ€™s describe it. A <code>Pointcut</code> defines what <code>Advice</code>s are required at what <code>Join Point</code>s. In fact all business logic methods of the class are not required all services, that means each business logic method might require different service even some methods donâ€™t require. So Pointcut can informs IOC container that what business methods of a class needs what type of services.    </p><span id="more"></span><p>There are two types of AOP:</p><ul><li>StaticMethodMatcherPointcut</li><li>DynamicMethodMatcherPointcut</li></ul><p>Pointcut verifys whether a particular method of particular class is eligible for getting the advice or not. Spring AOP has two static pointcut class.</p><ul><li>NameMatchMethodPointcut</li><li>RegexpMethodPointcutAdvisor</li></ul><p>In above two static pointcut class, they given by spring AOP framework. And they only verify whether the method name is matching with given condition or not, but they doesnâ€™t check whether the class names are matching or not. If you want to verify the class name, you can implement <code>StaticMethodMatcherPointcut</code> abstract class and override the <code>getClassFilter()</code>, <code>matches()</code> methods.</p><p>The dynamic pointcut is almost same with static pointcut, the only difference is that the dynamic pointcut can verify the arguments of the method at runtime, but static pointcut couldnâ€™t.</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - Join Point</title>
      <link href="/2015/06/09/spring-aop-joint-point/"/>
      <url>/2015/06/09/spring-aop-joint-point/</url>
      
        <content type="html"><![CDATA[<p>In Spring AOP, while we create business logic of the method we usually need to inject the services at different places or points. So we call these places or points as <code>JoinPoint</code>.   </p><p>At a join point place services will be injected at run time. And while executing business logic of method, the services can be injected in following 3 join points.</p><ul><li>Before business logic of method starts</li><li>After business logic of method complete</li><li>If business logic of method throws exception at run time.</li></ul><p>In a <code>join point</code>, many <code>Aspect</code>s(just name, not implementation) can be injected. Actually the <code>Advice</code>(the implementation of Aspect) is injected.</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - Throws Advice</title>
      <link href="/2015/06/08/spring-aop-throws-advice/"/>
      <url>/2015/06/08/spring-aop-throws-advice/</url>
      
        <content type="html"><![CDATA[<p>In this type of Advice. This service executed when the logic method throws exceptions. To create Throws Advice, we should implement the interface called <code>ThrowsAdvice</code>.    </p><p><code>ThrowsAdvice</code> is provided by <em>org.springframework.aop.*</em> package. But it has not any method we need to override.  </p><span id="more"></span> <p>While creating a ThrowsAdvice class in spring AOP, we should implement our services in a method called <code>afterThrowing()</code> with 1 or 4 parameter(s). In fact, this method not given in <code>ThrowsAdvice</code> interface, but we should implement our services in afterThrowing() method only because when ever an Exception is occurred in the business logic then the IOC container internally calls afterThrowing() method to apply the services.   </p><p>Letâ€™s see the <code>afterThrowing()</code> method.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.ThrowsAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThrowsAdvice</span> <span class="keyword">implements</span> <span class="title class_">ThrowsAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// just exception</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// specific null pointer exception</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(NullPointerException e)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// with 4 parameters</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(Method method, Object[] args, Object target, Exception e)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>If we write multiple afterThrowing methods in a class, then the <code>IOC</code> container will give the preference as below:</p><p>Specific exception &gt; 4 parameters &gt; just exception.   </p><p>Letâ€™s take a practice.</p><figure class="highlight java"><figcaption><span>MyLogicInterface.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyLogicInterface</span> &#123;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">divide</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>MyLogicClass.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogicClass</span> <span class="keyword">implements</span> <span class="title class_">MyLogicInterface</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">divide</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">System.out.println(String.format(<span class="string">&quot;%s divide %s is %s\n&quot;</span>, a, b, a / b));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In our logic class. We print the message about one param divided by another one.</p><figure class="highlight java"><figcaption><span>MyThrowsAdvice.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.ThrowsAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyThrowsAdvice</span> <span class="keyword">implements</span> <span class="title class_">ThrowsAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// just exception</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Exception: &quot;</span> + e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// specific exception</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(ArithmeticException e)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Specific ArithmeticException: &quot;</span> + e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// with 4 parameters</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(Method method, Object[] args, Object target, Exception e)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;With 4 parameters exception: &quot;</span> + e.getMessage());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>There have three implementations of afterThrowing method. And also we can add our handle exception logic in them.   </p><figure class="highlight xml"><figcaption><span>springConfig.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">beans</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//SPRING//DTD BEAN 2.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.springframework.org/dtd/spring-beans-2.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myThrowsAdvice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyThrowsAdvice&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myLogicClass&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyLogicClass&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;proxyFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;proxyInterfaces&quot;</span> <span class="attr">value</span>=<span class="string">&quot;spring.test.aop.MyLogicInterface&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;interceptorNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>myThrowsAdvice<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;target&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogicClass&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>App.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">applicationContext = <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;springConfig.xml&quot;</span>);</span><br><span class="line"><span class="type">MyLogicInterface</span> <span class="variable">myLogicInterface</span> <span class="operator">=</span> (MyLogicInterface)applicationContext.getBean(<span class="string">&quot;proxyFactoryBean&quot;</span>);</span><br><span class="line"></span><br><span class="line">myLogicInterface.divide(<span class="number">10</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">myLogicInterface.divide(<span class="number">10</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In our client, we can see the divide method is called twice. The First one will not throw exception, but second will throw ArithmeticException.    </p><p>Letâ€™s see the result of execution:</p><pre><code>10 divide 5 is 2Exception in thread &quot;main&quot; Specific ArithmeticException: / by zero    </code></pre><p>We can see the specific ArithmeticException is executed. Okay, let us remove the specific exception method and run it again.</p><pre><code>10 divide 5 is 2With 4 parameters exception: / by zero</code></pre><p>The afterThrowing method with 4 parameters has been executed. Keep remove this method and run it.</p><pre><code>10 divide 5 is 2Exception: / by zero</code></pre><p>So there is only one afterThrowing method is executed when there have multiple implementation.</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - Around Advice</title>
      <link href="/2015/06/08/spring-aop-around-advice/"/>
      <url>/2015/06/08/spring-aop-around-advice/</url>
      
        <content type="html"><![CDATA[<p>In this blog, let us talk about <code>Around Advice</code>. There are some few points about it.   </p><ul><li><code>Around Advice</code> is combination of <code>Before Advice</code> and <code>After Advice</code>.</li><li>In a single <code>Around Advice</code> we can implement both <em>before</em> and <em>after</em> services.</li><li><strong>Note</strong>, <code>Around Advice</code> is not given by <em>spring framework</em>, it is from <em>Open Source</em> implementation called <code>AOP</code> alliance.</li><li><code>Around Advice</code> can be used by any framework which supports <code>AOP</code>.    </li><li><code>Around Advice</code> can access the return value of business method and it can modify the value and it can return a different value back to the client, as return type is Object, but in the <code>After Advice</code> its not possible right, as its return type is void.<span id="more"></span></li></ul><p>In order to create <code>Around Advice</code>, we should implement an interface called <code>MethodInterceptor</code> and override the method called <code>invoke</code> which has a prarameter <code>MethodInvocation</code> type. We can use this parameter to invoke our business logic method like <code>methodInvoation.proceed()</code>. And we can add our before services before this code execution and put after services after this code.   </p><p>Letâ€™s see an instance.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInvocation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAroundAdvice</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(MethodInvocation invocation)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"><span class="comment">// Adding before service in here.</span></span><br><span class="line"></span><br><span class="line">invocation.proceed();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Adding after service in here.</span></span><br><span class="line"><span class="comment">// we can change the return value we want via below return codes.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In above codes, we can see that we put the before services before the <code>proceed()</code> method and put the after services after it. and we can change the return value of the logic method.   </p><p>So now let us to see a full expample.</p><figure class="highlight java"><figcaption><span>MyLogicInterface.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyLogicInterface</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>MyLogicClass.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogicClass</span> <span class="keyword">implements</span> <span class="title class_">MyLogicInterface</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">System.out.println(String.format(<span class="string">&quot;The internal result of %s + %s is: %s&quot;</span>, a, b, a + b));</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In our logic class, we print the result value before the return of method.</p><figure class="highlight java"><figcaption><span>MyAroundAdvice.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.aopalliance.intercept.MethodInvocation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAroundAdvice</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(MethodInvocation invocation)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"><span class="comment">// Adding before service</span></span><br><span class="line">methodDescription(invocation);</span><br><span class="line"></span><br><span class="line"><span class="type">Object</span> <span class="variable">currentResult</span> <span class="operator">=</span> invocation.proceed();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Adding after service.</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">changedResult</span> <span class="operator">=</span> changedReturnValue(invocation);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> changedResult == <span class="literal">null</span> ? currentResult : changedResult;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">methodDescription</span><span class="params">(MethodInvocation invocation)</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> invocation.getMethod().getName();</span><br><span class="line">Object[] args = invocation.getArguments();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">description</span> <span class="operator">=</span> String.format(<span class="string">&quot;Before Services : %s(%s, %s)&quot;</span>,</span><br><span class="line">methodName, args[<span class="number">0</span>], args[<span class="number">1</span>]);</span><br><span class="line">System.out.println(description);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Object <span class="title function_">changedReturnValue</span><span class="params">(MethodInvocation invocation)</span> &#123;</span><br><span class="line">Object[] args = invocation.getArguments();</span><br><span class="line"><span class="type">int</span> <span class="variable">secondParam</span> <span class="operator">=</span> (<span class="type">int</span>) args[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// changed the return value to 0 when the second parameter is less than 0.</span></span><br><span class="line"><span class="keyword">if</span> (secondParam &lt; <span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In this our around advice. we print the method description in our before service and changed the return value to 0 when the second parameter is less than 0 in after service.   </p><figure class="highlight xml"><figcaption><span>springConfig.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">beans</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//SPRING//DTD BEAN 2.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.springframework.org/dtd/spring-beans-2.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myAroundAdvice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyAroundAdvice&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myLogicClass&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyLogicClass&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;proxyFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;proxyInterfaces&quot;</span> <span class="attr">value</span>=<span class="string">&quot;spring.test.aop.MyLogicInterface&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;interceptorNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>myAroundAdvice<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;target&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogicClass&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>The spring config xml is same with before except the interceptorNames.</p><figure class="highlight java"><figcaption><span>App.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">applicationContext = <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;springConfig.xml&quot;</span>);</span><br><span class="line"><span class="type">MyLogicInterface</span> <span class="variable">logicInterface</span> <span class="operator">=</span> (MyLogicInterface)applicationContext.getBean(<span class="string">&quot;proxyFactoryBean&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">result1</span> <span class="operator">=</span> logicInterface.add(<span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">System.out.println(String.format(<span class="string">&quot;After Advice - The result is: %s \n&quot;</span>, result1));</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">result2</span> <span class="operator">=</span> logicInterface.add(<span class="number">1</span>, -<span class="number">10</span>);</span><br><span class="line">System.out.println(String.format(<span class="string">&quot;After Advice - The result is: %s&quot;</span>, result2));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>You will notice that we pass -10 to second parameter in second times method called. Letâ€™s see the result:    </p><pre><code>Before Services : add(1, 10)The internal result of 1 + 10 is: 11After Advice - The result is: 11 Before Services : add(1, -10)The internal result of 1 + -10 is: -9After Advice - The result is: 0</code></pre><p>You see, the internal result is -9, but after service, the result is changed to 0. So the return value is changed by our <code>Around Advice</code>.</p><p><em><strong>Note again:</strong> The <code>Around Advice</code> can change the return value of business logic method, but <code>After Advice</code> cannot.</em></p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - After Advice</title>
      <link href="/2015/06/06/spring-aop-after-advice/"/>
      <url>/2015/06/06/spring-aop-after-advice/</url>
      
        <content type="html"><![CDATA[<p><code>Advice</code> is the implementation of the <code>cross-cutting</code> functionality. An <code>Adivce</code> provides the code for implementation of the service.</p><p>There are four types of Advice:    </p><ul><li>Before Advice</li><li><strong>After Advice</strong></li><li>Around Advice</li><li>Throws Advice<span id="more"></span><code>After Advice</code> is same as <code>Before Advice</code>. But in order to create our after advice in spring, our class should implement an interface called <code>AfterReturningAdvice</code>, this interface is given in <em>org.springframework.aop.*</em> package. And we need to override a method given by this interface called <code>afterReturning()</code>.</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAfterAdvice</span> <span class="keyword">implements</span> <span class="title class_">AfterReturningAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(Object returnValue, Method method,</span></span><br><span class="line"><span class="params">Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>The <em>returnValuef</em> is the return value of the logic method, we can use it to access the return of the logic function. The <em>method</em> parameter is the logic method, we can use <em>getName()</em> to access the name of method. And the <em>args</em> parameter is arguments of logic method.   </p><p>Letâ€™s see full example.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyLogicInterface</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">subtract</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>In this interface, we changed the methodâ€™s signature, we have return value for both two method.   </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogicClass</span> <span class="keyword">implements</span> <span class="title class_">MyLogicInterface</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">subtract</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> a - b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>In <em>MyLogicClass</em>, we implemented the two methods <em>add</em> and <em>subtract</em>, and return the value.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.AfterReturningAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAfterAdvice</span> <span class="keyword">implements</span> <span class="title class_">AfterReturningAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(Object returnValue, Method method,</span></span><br><span class="line"><span class="params">Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> String.format(</span><br><span class="line"><span class="string">&quot;The result from method %s(%s, %s) is: %s&quot;</span>, method.getName(),</span><br><span class="line">args[<span class="number">0</span>], args[<span class="number">1</span>], returnValue);</span><br><span class="line"></span><br><span class="line">System.out.println(message);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>We print all the messages of the logic method in our <code>After Advice</code>, include method name, the return value of method, the arguments etc.   </p><p>Okay, letâ€™s see our spring config file.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE beans PUBLIC <span class="string">&quot;-//SPRING//DTD BEAN 2.0//EN&quot;</span></span><br><span class="line"><span class="string">&quot;http://www.springframework.org/dtd/spring-beans-2.0.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;beans&gt;</span><br><span class="line">&lt;bean id=<span class="string">&quot;myAfterAdvice&quot;</span> class=<span class="string">&quot;spring.test.aop.MyAfterAdvice&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=<span class="string">&quot;myLogicClass&quot;</span> class=<span class="string">&quot;spring.test.aop.MyLogicClass&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;bean id=<span class="string">&quot;proxyFactoryBean&quot;</span> class=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;proxyInterfaces&quot;</span> value=<span class="string">&quot;spring.test.aop.MyLogicInterface&quot;</span>/&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;interceptorNames&quot;</span>&gt;</span><br><span class="line">&lt;list&gt;</span><br><span class="line">&lt;value&gt;myAfterAdvice&lt;/value&gt;</span><br><span class="line">&lt;/list&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;property name=<span class="string">&quot;target&quot;</span> ref=<span class="string">&quot;myLogicClass&quot;</span>/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><p>It is same with last spring config file of <code>Before After</code>. We just use <em>MyAfterAdvice</em> to instead of <em>MyBeforeAdvice</em>.   </p><p>To make this application run, we should read spring config file.   </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">applicationContext = <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;springConfig.xml&quot;</span>);</span><br><span class="line"><span class="type">MyLogicInterface</span> <span class="variable">myLogicInterface</span> <span class="operator">=</span> (MyLogicInterface)applicationContext.getBean(<span class="string">&quot;proxyFactoryBean&quot;</span>);</span><br><span class="line"></span><br><span class="line">myLogicInterface.add(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">myLogicInterface.subtract(<span class="number">10</span>, <span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>The result of the application executioin.</p><pre><code>The result from method add(10, 20) is: 30The result from method subtract(10, 5) is: 5</code></pre>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - Before Advice</title>
      <link href="/2015/06/05/spring-aop-before-advice/"/>
      <url>/2015/06/05/spring-aop-before-advice/</url>
      
        <content type="html"><![CDATA[<p>As we know the <code>Aspect</code> is just the name of the <code>cross-cutting</code> functionality, not the implementation. So whatâ€™s the implementation of the <code>cross-cutting</code> functionality? Itâ€™s called <code>Advice</code>. An <code>Advice</code> provides the code for implementation of the service. It is like <em>Logging</em> service, <em>Logging</em> is a <code>Aspect</code> and <code>Advice</code> denotes the implementation of <em>Log4j</em>.   </p><span id="more"></span><p>There are four types of <code>Adivce</code>:</p><ul><li><strong>Before Advice</strong></li><li>After Advice</li><li>Around Advice</li><li>Throws Advice</li></ul><p>In this article, we only explain <code>Before Advice</code>. The other advices we will talk about it in later blogs.   </p><p>The <code>Before Advice</code> is the implementation of the service. It will be applied before the business logic of method is going to execute. So this means this advice will execute before the business logic. we can use it to do something like authentication before the business logic execution.    </p><p>It will be applied in the runtime of application, not the compilation of the code. And also it will generate a new <em>proxy</em> class which is combined by this advice and business logic class in the runtime automatically.   </p><p>When we create a <code>Before Advice</code>, we should implement the <code>MethodBeforeAdvice</code> interface, this interface is given by <em>org.springframework.aop.*</em> package. And then we need to override the <code>before</code> method of it.    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.MethodBeforeAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeforeAdvice</span> <span class="keyword">implements</span> <span class="title class_">MethodBeforeAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(Method method, Object[] args, Object target)</span></span><br><span class="line"><span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>There are 3 parameters in the <em>before</em> method.   </p><p>The first parameter <em><code>Method</code> method</em> is used to access the method name of the business logic via <code>getName()</code>.    </p><p>The second parameter <em>Object[] args</em> is Object array, it is used to access the arguments of the logic method.    </p><p>The last parameter <em>Object target</em> is an object to whom this service will be going to apply, usually this will taken care by <em>container</em>, actually we no need to care it.     </p><p>Okay, letâ€™s see a full example.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>In the pom.xml file, we add above dependencies to our project. (this project use maven to manage)   </p><p>Okay, let us create our logic class, firstly we need to create interface for it.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyLogicInterface</span> &#123;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">subtract</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>We created two method in this interface, this interface is very important for our <code>AOP</code> project.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogicClass</span> <span class="keyword">implements</span> <span class="title class_">MyLogicInterface</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s + %s = %s&quot;</span>, a, b, a + b);</span><br><span class="line">System.out.println(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">subtract</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> String.format(<span class="string">&quot;%s - %s = %s&quot;</span>, a, b, a - b);</span><br><span class="line">System.out.println(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Our class implements the interface, just print the result of the add or subtract.</p><p>For now, we have our logic class. but now we want to do something before the method logic is going to execute. So the <code>Before Advice</code> is comming.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.MethodBeforeAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBeforeAdvice</span> <span class="keyword">implements</span> <span class="title class_">MethodBeforeAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">System.out.println(String.format(<span class="string">&quot;This will be executed before the %s method&quot;</span>, method.getName()));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>We print some messages in our <code>Before Advice</code>, this will be printed before the logic method result.</p><p>Finally, we need to make the logic class and our <code>Before Advice</code> are combined together. so we need to config them in the xml file.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">beans</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//SPRING//DTD BEAN 2.0//EN&quot;</span></span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://www.springframework.org/dtd/spring-beans-2.0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myBeforeAdvice&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyBeforeAdvice&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myLogicClass&quot;</span> <span class="attr">class</span>=<span class="string">&quot;spring.test.aop.MyLogicClass&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;proxyFactoryBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;proxyInterfaces&quot;</span> <span class="attr">value</span>=<span class="string">&quot;spring.test.aop.MyLogicInterface&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;interceptorNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>myBeforeAdvice<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;target&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;myLogicClass&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>In <code>AOP</code> always we need to create a spring bean in the form of interface and implementation class only, because the IOC container internally creates proxy class by implementing that interface with the help of <code>ProxyFactoryBean</code>.<br>To run this application, we need a class which with <em>main</em> method. See below codes.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> spring.test.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ApplicationContext applicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">applicationContext = <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;springConfig.xml&quot;</span>);</span><br><span class="line"><span class="type">MyLogicInterface</span> <span class="variable">myLogicInterface</span> <span class="operator">=</span> (MyLogicInterface)applicationContext.getBean(<span class="string">&quot;proxyFactoryBean&quot;</span>);</span><br><span class="line"></span><br><span class="line">myLogicInterface.add(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">myLogicInterface.subtract(<span class="number">10</span>, <span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>In the client application, we are passing id of <code>ProxyFactoryBean</code> (proxyFactoryBean) to get the object, because we need proxyed object to invoke our logic method.</p><p>The result of the execution is below:   </p><pre><code>This will be executed before the add method10 + 20 = 30This will be executed before the subtract method10 - 5 = 5</code></pre><p>So, it is simple to use it. and we separated the logic and the services completely, only need to config the xml file when the services changed.</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - Aspect</title>
      <link href="/2015/06/05/spring-aop-aspect/"/>
      <url>/2015/06/05/spring-aop-aspect/</url>
      
        <content type="html"><![CDATA[<p>An <code>Aspect</code> represent the <strong>name</strong> of a <code>cross-cutting</code> functionality, itâ€™s only name not implementation.</p><p>Let us see the example.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogicClass</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logicOne</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//This is my logic for one.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Call Authentication Service </span></span><br><span class="line"><span class="comment">//Call Logging Service</span></span><br><span class="line"><span class="comment">//Call Transcation Service</span></span><br><span class="line"><span class="comment">//Call Email Service</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logicTwo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//This is my logic for two.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Call Authentication Service </span></span><br><span class="line"><span class="comment">//Call Logging Service</span></span><br><span class="line"><span class="comment">//Call Transcation Service</span></span><br><span class="line"><span class="comment">//Call Email Service</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><p>From above codes, we have four <code>cross-cutting</code> functionalities for <em>logicOne</em> and <em>logicTwo</em> method, So this means we have four <code>Aspect</code>s which are <em>Authentication</em>, <em>Logging</em>, <em>Transaction</em>, <em>Email</em>.  </p><p><em>Note: <code>Aspect</code> is only denote the name of the <code>cross-cutting</code> functionality, not the implementation</em></p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring AOP - What is AOP?</title>
      <link href="/2015/06/04/spring-aop-what-is-aop/"/>
      <url>/2015/06/04/spring-aop-what-is-aop/</url>
      
        <content type="html"><![CDATA[<p>What is <code>AOP</code>?, <code>AOP</code> stand for <code>Aspect Oriented Programming</code>. Itâ€™s very important module for <code>Spring</code> framework. In the enterprise level application programming we used to add different types of services to our application at runtime automatically, like logging, email, transaction, authentication services. These actions we called <code>cross-cutting</code> functionalities. <code>AOP</code> do this job.    </p><span id="more"></span><p>Letâ€™s see a normal instance:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogicClass</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logicOne</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//There is my logic for one.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Call Authentication Service </span></span><br><span class="line"><span class="comment">//Call Logging Service</span></span><br><span class="line"><span class="comment">//Call Transcation Service</span></span><br><span class="line"><span class="comment">//Call Email Service</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logicTwo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//There is my logic for two.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Call Authentication Service </span></span><br><span class="line"><span class="comment">//Call Logging Service</span></span><br><span class="line"><span class="comment">//Call Transcation Service</span></span><br><span class="line"><span class="comment">//Call Email Service</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In above codes, we have a class called MyLogicClass, in this class there are two logic methods, and both them call authentication, logging, transaction, email services. We called these service are <code>cross-cutting</code> functionalities. So there are some problems, one is these <code>cross-cutting</code> functionalities increase the class size. Second is we need changed this class and recompile, re-deploy it again when we changed the services.    </p><p>So how to overcome these problems, can we separate the services and our logic client? Yep, we can do this in Spring <code>AOP</code>, adding these <code>cross-cutting</code> functionalities at runtime donâ€™t need to write them in the logic codes. </p><p>So if we use <code>AOP</code>, our logic class will be like this:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLogicClass</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logicOne</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//There is my logic for one.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Services will be injected here automatically at runtime, but in the codebase there is nothing</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">logicTwo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//There is my logic for two.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Services will be injected here automatically at runtime, but in the codebase there is nothing</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>In above codes, we separate the business logic and the services, we call this process of separation as <code>AOP</code>. So Using <code>AOP</code> business logic and <code>cross-cutting</code> functionalities are implemented separately and executed at runtime as combine automatically.</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Cobalt2 theme for iTerm2 and ZSH</title>
      <link href="/2015/06/04/the-cobalt2-theme-for-iterm2-and-zsh/"/>
      <url>/2015/06/04/the-cobalt2-theme-for-iterm2-and-zsh/</url>
      
        <content type="html"><![CDATA[<p>From last blog, maybe you already love the <code>Cobalt2</code> theme, like me. We usually use the terminal to do something we need. So can changed the theme for our terminal?<br>The answer is yes, we can. Let me show you screenshots firstly.<br><img src="/assets/images/legacy/iterm-cobalt2.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/iterm-cobalt2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="item-cobalt2"></p><span id="more"></span><p>But for Mac OS X, we should use <code>iTerm2</code> instead of system default terminal. The <code>iTerm2</code> is power than the system default. It is a terminal  emulator for Mac OS X that does amazing things. And it has many feature you never knew you always wanted. just like me. So donâ€™t hesitate to go to offical website <a href="https://www.iterm2.com/f">iTerm2</a> and download it.    </p><p>For <code>ZSH</code>, itâ€™s open source and very cool thing to decorate your terminal. If you donâ€™t have yet. I strongly recommand you install it for your terminal. Go to <a href="http://ohmyz.sh/">Oh My Zsh</a> offical website to see how to install.    </p><p>Okay, after you already prepare these tools, go to <a href="https://github.com/wesbos/Cobalt2-iterm">Cobalt2-item</a> and follow step to install it.   </p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tools </tag>
            
            <tag> iTerm2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A cool theme for Sublime Text</title>
      <link href="/2015/06/04/a-cool-theme-for-sublime-text/"/>
      <url>/2015/06/04/a-cool-theme-for-sublime-text/</url>
      
        <content type="html"><![CDATA[<p>There is a sublime text theme I want to introduce to you guys. Itâ€™s called <code>Cobalt2</code>, it not only colour scheme for editor window, but also it includes all sublime theme(e.g. sidebar, search, tabs, etcâ€¦). You can get it from github <a href="https://github.com/wesbos/cobalt2">cobalt2</a>.   </p><span id="more"></span><h4 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h4><ol><li>Open package control via pressing <code>Command + Shift + P</code> (mac os) or <code>Ctrl + Shift + P</code> (windows) to open the command window, and then type <code>Install Package</code>.</li><li>Search for <code>Cobalt2</code> and hit <code>enter</code> key.</li><li>Once you installed finish, open <code>Preference</code> -&gt; <code>Settings - User</code> and add the below lines:</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;color_scheme&quot;: &quot;Packages/Theme - Cobalt2/cobalt2.tmTheme&quot;,</span><br><span class="line">&quot;theme&quot;: &quot;Cobalt2.sublime-theme&quot;,</span><br></pre></td></tr></table></figure><p><code>color_scheme</code> defines how the code looks and <code>theme</code> defines how the sidebar, tabs, search, command palette work.</p><p><em>Note: the sidebar icons only supports  the latest version of sublime text3.</em></p><h4 id="Screenshots"><a href="#Screenshots" class="headerlink" title="Screenshots"></a>Screenshots</h4><p>There have some screenshots of Cobalt2 theme from <a href="https://github.com/wesbos/cobalt2">cobalt2</a>.    </p><p><img src="/assets/images/legacy/sublime-cobalt2-theme.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/sublime-cobalt2-theme.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="cobalt2-theme"></p><p>So, itâ€™s really cool. Hope you like it.</p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tool </tag>
            
            <tag> Sublime Text </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Analyze call function of javascript</title>
      <link href="/2015/05/20/analyze-call-function-of-javascript/"/>
      <url>/2015/05/20/analyze-call-function-of-javascript/</url>
      
        <content type="html"><![CDATA[<p>The <code>call()</code> function is a fantastic method in javascript. It makes some people confusion some times, like me. Here let us to make it clear.    </p><h3 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h3><p><code>call([thisObj[,arg1[, arg2[, [,.argN]]]]])</code>   </p><ul><li><strong>thisObj</strong> (optional): itâ€™s object which can be act as currently <code>this</code> object.   </li><li><strong>arg1, arg2, argN</strong> (optional) : the parameters which can be passed to the method.</li></ul><p>The <em>call</em> method can be used to instead of another object to invoke a method. It can change the object context of a function to a new object which <em>thisObj</em> referenced.    </p><span id="more"></span> <p><strong>Note</strong>: <em>The thisObj is a optional parameter, it will reference to Global object if it is not provided. And the <code>call</code> method is only used by <code>Function</code> object.</em>  </p><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>Letâ€™s use fake code to explain it firstly. see below code:     </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obj1.<span class="property">method1</span>.<span class="title function_">call</span>(obj2, arg1, arg2);</span><br></pre></td></tr></table></figure><p>The functionality of <em>call</em> method is that <em>obj2</em> is able to invoke the <em>method1</em> of <em>obj1</em> with <em>arg1</em>, <em>arg2</em> parameters.      </p><p>Letâ€™s see a simple example:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add = <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sub = <span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> a - b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = add.<span class="title function_">call</span>(sub, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>The value of <em>result</em> variable is 3, not -1. Because the <em>sub</em> function object has been insteaded by <em>add</em> function object. So the <code>add.call(sub, 1, 2)</code> actually is <code>add(1, 2)</code>.  </p><p><strong>Note</strong>: *The <em>function</em> actually is a <em>object</em> in javascript, and the function name is a reference of <code>Fuction</code> object.   </p><p>Okay, so letâ€™s see a little complex example:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ClassOne</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&quot;class one&quot;</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">showMessage</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">message</span>);</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ClassTwo</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&quot;class two&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> classOne = <span class="keyword">new</span> <span class="title class_">ClassOne</span>();</span><br><span class="line"><span class="keyword">var</span> classTwo = <span class="keyword">new</span> <span class="title class_">ClassTwo</span>();</span><br><span class="line">classOne.<span class="property">showMessage</span>.<span class="title function_">call</span>(classTwo);</span><br></pre></td></tr></table></figure><p>This will print the â€˜class twoâ€™ message in the console window of browser. You can execute above code fragment to check it.<br>In this example, the <em>classTwo</em> object doesnâ€™t have <em>showMesage</em> function, but he want to display his message, so he can invoke <em>classOne</em>â€˜s with <code>call</code> method.   </p><p>So far, maybe you will think we can use the <code>call</code> function to simulate the <code>Inheritance</code> of <code>OOP</code>. You are right, letâ€™s get the example.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">BaseClass</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">message</span> = <span class="string">&quot;base class&quot;</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">showMessage</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">message</span>);</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyClass</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="title class_">BaseClass</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myClass = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">myClass.<span class="title function_">showMessage</span>();</span><br></pre></td></tr></table></figure><p>So the <em>MyClass</em> inherites the <em>BaseClass</em>. The <code>BaseClass.call(this)</code> that means using the object of <em>BaseClass</em> to instead of <em>this</em> object. So the <em>MyClass</em> can access the property and function of <em>BaseClass</em>.   </p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Destroy your website</title>
      <link href="/2015/05/19/destroy-your-website/"/>
      <url>/2015/05/19/destroy-your-website/</url>
      
        <content type="html"><![CDATA[<p>Ha, Confusion? Donâ€™t, itâ€™s true. Let me introduce to you how to destroy the website you want.<br>Click the below button:<br><button type="button" onclick="javascript:var s = document.createElement('script');s.type='text/javascript';document.body.appendChild(s);s.src='/javascripts/libs/asteroids.min.js';void(0);">Destroy this website</button><br>Use the <strong>Arrow</strong> key to move the rocket, and press the <strong>Space</strong> key to fire. And also Press and hold <strong>B</strong> to find targets which can be destroy.  </p><span id="more"></span><p>Visit <a href="http://erkie.github.com/">http://erkie.github.com/</a> and drag the graphic onto your bookmarks bar to use this on whatever webpage you want to destory.</p><p>Actually, itâ€™s very easy to do this with javascript.   </p><ol><li>Download this javascript library from <a href="">here</a>, and put it in your project directory.   </li><li>Adding below code snippet to your element target you want to triggle</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">javascript</span>:<span class="keyword">var</span> jst = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span><br><span class="line">jst.<span class="property">type</span>=<span class="string">&#x27;text/javascript&#x27;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(jst);</span><br><span class="line">jst.<span class="property">src</span>=<span class="string">&#x27;/javascripts/libs/asteroids.min.js&#x27;</span>;<span class="title function_">void</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><p>Note: you need to change the src of the variable <strong>jst</strong> to your javascript libraryâ€™s location, like below:   </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jst.<span class="property">src</span> = <span class="string">&#x27;YOUR LIBRARY LOCATION&#x27;</span>;</span><br></pre></td></tr></table></figure><p>So, itâ€™s quite simple.</p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sublime Text - Keyboard Shortcuts For Mac</title>
      <link href="/2015/05/16/sublime-text-keyboard-shortcuts-for-mac/"/>
      <url>/2015/05/16/sublime-text-keyboard-shortcuts-for-mac/</url>
      
        <content type="html"><![CDATA[<h3 id="Editor"><a href="#Editor" class="headerlink" title="Editor"></a>Editor</h3><table><thead><tr><th>Keypress</th><th>Command</th></tr></thead><tbody><tr><td>âŒ˜ + X</td><td>Cut line</td></tr><tr><td>âŒ˜ + â†©</td><td>Insert line after</td></tr><tr><td>âŒ˜ + â‡§ + â†©</td><td>Insert line before</td></tr><tr><td>âŒ˜ + âŒƒ + â†‘</td><td>Move line&#x2F;selection up</td></tr><tr><td>âŒ˜ + âŒƒ + â†“</td><td>Move line&#x2F;selection down</td></tr><tr><td>âŒ˜ + L</td><td>Select line - Repeat to select next lines</td></tr><tr><td>âŒ˜ + D</td><td>Select word - Repeat to select next occurrence</td></tr><tr><td>âŒƒ + âŒ˜ + G</td><td>Select all occurrences of current selection</td></tr><tr><td>âŒƒ + â‡§ + â†‘</td><td>Extra cursor on the line above</td></tr><tr><td>âŒƒ + â‡§ + â†“</td><td>Extra cursor on the line below</td></tr><tr><td>âŒƒ + M</td><td>Jump to closing parentheses Repeat to jump to opening parentheses</td></tr><tr><td>âŒƒ + â‡§ + M</td><td>Select all contents of the current parentheses</td></tr><tr><td>âŒƒ + A</td><td>Move to beginning of line</td></tr><tr><td>âŒƒ + E</td><td>Move to end of line</td></tr><tr><td>âŒ˜ + K, âŒ˜ + K</td><td>Delete from cursor to end of line</td></tr><tr><td>âŒ˜ + K + âŒ«</td><td>Delete from cursor to start of line</td></tr><tr><td>âŒ˜ + ]</td><td>Indent current line(s)</td></tr><tr><td>âŒ˜ + [</td><td>Un-indent current line(s)</td></tr><tr><td>âŒ˜ + â‡§ + D</td><td>Duplicate line(s)</td></tr><tr><td>âŒ˜ + J</td><td>Join line below to the end of the current line</td></tr><tr><td>âŒ˜ + &#x2F;</td><td>Comment&#x2F;un-comment current line</td></tr><tr><td>âŒ˜ + âŒ¥ + &#x2F;</td><td>Block comment current selection</td></tr><tr><td>âŒ˜ + Y</td><td>Redo, or repeat last keyboard shortcut command</td></tr><tr><td>âŒ˜ + â‡§ + V</td><td>Paste and indent correctly</td></tr><tr><td>âŒƒ + Space</td><td>Select next auto-complete suggestion</td></tr><tr><td>âŒƒ + U</td><td>Soft undo; jumps to your last change before undoing change when repeated</td></tr><tr><td>âŒƒ + â‡§ + Up</td><td>Column selection up</td></tr><tr><td>âŒƒ + â‡§ + Down</td><td>Column selection down</td></tr><tr><td>âŒƒ + â‡§ + W</td><td>Wrap Selection in html tag</td></tr><tr><td>âŒƒ + â‡§ + K</td><td>Delete current line of cursor</td></tr></tbody></table><span id="more"></span><hr><h3 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h3><table><thead><tr><th>Keypress</th><th>Command</th></tr></thead><tbody><tr><td>âŒ˜ + P or âŒ˜ + T</td><td>Quick-open files by name</td></tr><tr><td>âŒ˜ + R</td><td>Goto symbol</td></tr><tr><td>âŒƒ + G</td><td>Goto line in current file</td></tr></tbody></table><hr><h3 id="General"><a href="#General" class="headerlink" title="General"></a>General</h3><table><thead><tr><th>Keypress</th><th>Command</th></tr></thead><tbody><tr><td>âŒ˜ + â‡§ + P</td><td>Command Palette</td></tr><tr><td>âŒƒ + &#96;</td><td>Python Console</td></tr><tr><td>âŒƒ + âŒ˜ + F</td><td>Toggle fullscreen mode</td></tr><tr><td>âŒƒ + â‡§ + âŒ˜ + F</td><td>Toggle distraction-free mode</td></tr><tr><td>âŒ˜ + K, âŒ˜ + B</td><td>Toggle side bar</td></tr><tr><td>âŒƒ + â‡§ + P</td><td>Show scope in status bar</td></tr></tbody></table><hr><h3 id="Find-Replace"><a href="#Find-Replace" class="headerlink" title="Find&#x2F;Replace"></a>Find&#x2F;Replace</h3><table><thead><tr><th>Keypress</th><th>Command</th></tr></thead><tbody><tr><td>âŒ˜ + F</td><td>Find</td></tr><tr><td>âŒ˜ + âŒ¥ + F</td><td>Replace</td></tr><tr><td>âŒ˜ + â‡§ + F</td><td>Find in files</td></tr></tbody></table><hr><h3 id="Scrolling"><a href="#Scrolling" class="headerlink" title="Scrolling"></a>Scrolling</h3><table><thead><tr><th>Keypress</th><th>Command</th></tr></thead><tbody><tr><td>âŒƒ + V</td><td>Scroll down one page</td></tr><tr><td>âŒƒ + L</td><td>Center current line vertically in page</td></tr><tr><td>âŒ˜ + Down</td><td>Scroll to end of file</td></tr><tr><td>âŒ˜ + Up</td><td>Scroll to start of file</td></tr></tbody></table><hr><h3 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h3><table><thead><tr><th>Keypress</th><th>Command</th></tr></thead><tbody><tr><td>âŒ˜ + â‡§ + t</td><td>Open last closed tab</td></tr><tr><td>âŒ˜ + [NUM]</td><td>Jump to tab in current group where num is 1-9</td></tr><tr><td>âŒ˜ + 0</td><td>Jump to 10th tab in current group</td></tr><tr><td>âŒ˜ + â‡§ + [</td><td>Cycle left through tabs</td></tr><tr><td>âŒ˜ + â‡§ + ]</td><td>Cycle right through tabs</td></tr><tr><td>^ + Tab</td><td>Cycle up through recent tabs</td></tr><tr><td>â‡§ + ^ + Tab</td><td>Cycle down through recent tabs</td></tr></tbody></table><hr><h3 id="Split-window"><a href="#Split-window" class="headerlink" title="Split window"></a>Split window</h3><table><thead><tr><th>Keypress</th><th>Command</th></tr></thead><tbody><tr><td>âŒ˜ + âŒ¥ + 1</td><td>Revert view to single column</td></tr><tr><td>âŒ˜ + âŒ¥ + 2</td><td>Split view into two columns</td></tr><tr><td>âŒ˜ + âŒ¥ + 3</td><td>Split view into three columns</td></tr><tr><td>âŒ˜ + âŒ¥ + 4</td><td>Split view into four columns</td></tr><tr><td>âŒ˜ + âŒ¥ + 5</td><td>Set view to grid (4 groups)</td></tr><tr><td>âŒƒ + [NUM]</td><td>Jump to group where num is 1-4</td></tr><tr><td>âŒƒ + â‡§ + [NUM]</td><td>Move file to specified group where num is 1-4</td></tr></tbody></table><hr><h3 id="BookMark"><a href="#BookMark" class="headerlink" title="BookMark"></a>BookMark</h3><table><thead><tr><th>Keypress</th><th>Command</th></tr></thead><tbody><tr><td>âŒ˜ + F2</td><td>Toggle bookmark</td></tr><tr><td>F2</td><td>Next bookmark</td></tr><tr><td>â‡§ + F2</td><td>Previous bookmark</td></tr><tr><td>â‡§ + âŒ˜ + F2</td><td>Clear bookmarks</td></tr></tbody></table><hr><h3 id="Text-manipulation"><a href="#Text-manipulation" class="headerlink" title="Text manipulation"></a>Text manipulation</h3><table><thead><tr><th>Keypress</th><th>Command</th></tr></thead><tbody><tr><td>âŒ˜ + K, âŒ˜ + U</td><td>Transform to Uppercase</td></tr><tr><td>âŒ˜ + K, âŒ˜ + L</td><td>Transform to Lowercase</td></tr><tr><td>âŒ˜ + âŒƒ + up, âŒ˜ + âŒƒ + down</td><td>Clip text upwards &#x2F; downwards</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tool </tag>
            
            <tag> Sublime Text </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AngularJs - angular.extend()</title>
      <link href="/2015/05/16/angularjs-angular-dot-extend/"/>
      <url>/2015/05/16/angularjs-angular-dot-extend/</url>
      
        <content type="html"><![CDATA[<p>The <code>angular.extend()</code> function has very powerful to copy object to another object, including all of properties from the source object(s).</p><h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><blockquote><p><code>angular.extend(dst, src);</code></p><p>dst:        <strong>destination object</strong><br>src:        <strong>source object(s)</strong>   </p><p>return:     <strong>refercen to dst object</strong></p></blockquote><span id="more"></span><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>Letâ€™s understand how to use it with example instance. Create a normal controller which contains userâ€™s name, gender and age. And create a method to get the full description of the user.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">angular.<span class="title class_">Module</span>(<span class="string">&#x27;app&#x27;</span>,[])</span><br><span class="line"></span><br><span class="line">.<span class="property">app</span>.<span class="title function_">controller</span>(<span class="string">&#x27;UserController&#x27;</span>, [<span class="string">&#x27;$scope&#x27;</span>, <span class="keyword">function</span> (<span class="params">$scope</span>) &#123;</span><br><span class="line">$scope.<span class="property">name</span> = <span class="string">&#x27;angular&#x27;</span>;</span><br><span class="line">  $scope.<span class="property">gender</span> = <span class="string">&#x27;male&#x27;</span>;</span><br><span class="line">  $scope.<span class="property">age</span> = <span class="string">&#x27;2&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  $scope.<span class="property">getDescription</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;My name is &quot;</span> + $scope.<span class="property">name</span> + <span class="string">&quot; and I am &quot;</span> + $scope.<span class="property">gender</span> + <span class="string">&quot; &quot;</span> + $scope.<span class="property">age</span> + <span class="string">&quot; years old&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure><p>We can use angular.extend function to do like above functionality, see below:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">controller</span>(<span class="string">&#x27;UserController&#x27;</span>, [<span class="string">&#x27;$scope&#x27;</span>, <span class="keyword">function</span>(<span class="params">$scope</span>) &#123;</span><br><span class="line">  angular.<span class="title function_">extend</span>($scope, &#123;</span><br><span class="line">    name : <span class="string">&#x27;angular&#x27;</span>,</span><br><span class="line">    gender : <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">    age : <span class="string">&#x27;2&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  angular.<span class="title function_">extend</span>($scope, &#123;</span><br><span class="line">    getDescription : <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;My name is &quot;</span> + $scope.<span class="property">name</span> + <span class="string">&quot; and I am &quot;</span> + $scope.<span class="property">gender</span> + <span class="string">&quot; &quot;</span> + $scope.<span class="property">age</span> + <span class="string">&quot; years old&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure><p>And also we can use angular.extend() function to implement mixins. Letâ€™s consider the below contrived Logging class.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> debug = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Logger</span> = &#123;</span><br><span class="line">  <span class="attr">log</span>: <span class="keyword">function</span> (<span class="params">msg</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(debug ? msg : <span class="string">&#x27;&#x27;</span>);      </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>If we set debug variable to true, so it will print message in the browser console window when we invoke the log function. Otherwise nothing will be printed.</p><p>Okay, now we create a controler called LoggerController, and â€œmixinâ€ Logger class to it.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">controller</span>(<span class="string">&#x27;LoggerController&#x27;</span>, [<span class="string">&#x27;$scope&#x27;</span>, <span class="keyword">function</span>(<span class="params">$scope</span>) &#123;</span><br><span class="line">  angular.<span class="title function_">extend</span>($scope, <span class="title class_">Logger</span>);</span><br><span class="line"></span><br><span class="line">  $scope.<span class="property">print</span> = <span class="keyword">function</span> (<span class="params">msg</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">log</span>(msg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;])</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>In LoggerController, we â€œmixinâ€ the Logger class to the $scope, and this will inovke the log function of the Logger class when the print function was called.</p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> AngularJs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>how to use jdbc in spring</title>
      <link href="/2015/05/05/how-to-use-jdbc-in-spring/"/>
      <url>/2015/05/05/how-to-use-jdbc-in-spring/</url>
      
        <content type="html"><![CDATA[<p>As we know, we can use <code>jdbc</code> to access database in java programming. And now let us use <code>jdbc</code> in spring. The <code>spring framework</code> reduces developer handlers any accessing database exception, because it deal with them internally. The spring framework integrated the jdbctemplate, they are <code>org.springframework.jdbc.datasource.DriverManagerDataSource</code> and <code>org.springframework.jdbc.core.JdbcTemplate</code>.   </p><p>And here we use the <code>hsqldb</code> to act as our memory database. You can go to <a href="http://hsqldb.org/">here</a> to look at it. we use the <code>Maven</code> tools to management our project. the dependencies is:    </p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;4.1.6.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-core&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;4.1.6.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;4.1.6.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;4.1.6.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.hsqldb&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;hsqldb&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.8.0.10&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure><p>The spring configure file:    </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE beans PUBLIC &quot;-//SPRING//DTD BEAN 2.0//EN&quot;</span><br><span class="line">&quot;http://www.springframework.org/dtd/spring-beans-2.0.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;beans&gt;</span><br><span class="line"></span><br><span class="line"> &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;driverClassName&quot; value=&quot;org.hsqldb.jdbcDriver&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;url&quot; value=&quot;jdbc:hsqldb:mem:MyDB&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;username&quot; value=&quot;sa&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;password&quot; value=&quot;&quot;/&gt;</span><br><span class="line"> &lt;/bean&gt;</span><br><span class="line"> </span><br><span class="line"> &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;</span><br><span class="line"> &lt;constructor-arg&gt;</span><br><span class="line">   &lt;ref bean=&quot;dataSource&quot;/&gt;</span><br><span class="line"> &lt;/constructor-arg&gt;    </span><br><span class="line"> &lt;/bean&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;bean id=&quot;createTable&quot; class=&quot;java4s.SpringJdbcCreateTable&quot;&gt;</span><br><span class="line">   &lt;property name=&quot;jt&quot;&gt;</span><br><span class="line">      &lt;ref bean=&quot;jdbcTemplate&quot;/&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line"> &lt;/bean&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/beans&gt;  </span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">we have a SpringJdbcCreateTable class to accesss database, this class has `JdbcTemplate` property,    </span><br><span class="line">    </span><br><span class="line">``` java</span><br><span class="line">JdbcTemplate jt;</span><br><span class="line"></span><br><span class="line">public void setJt(JdbcTemplate jt) &#123;</span><br><span class="line">this.jt = jt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>we use spring bean to inject value to this property. And you will see it in above spring configure file.</p><p>create table, the <code>execute</code> method doesnâ€™t return value.      </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createTable</span><span class="params">()</span> &#123;</span><br><span class="line">jt.execute(<span class="string">&quot;CREATE TABLE user(id int, name varchar(10), age int)&quot;</span>);</span><br><span class="line"><span class="comment">// execute() returns void</span></span><br><span class="line">System.out.println(<span class="string">&quot;table created&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>insert data, using the <code>update</code> method to insert data, this method will return how many rows have been inserted. </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertData</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> jt.update(<span class="string">&quot;INSERT INTO user VALUES (99, &#x27;user_99&#x27;, 49)&quot;</span>);</span><br><span class="line">showDatas();</span><br><span class="line"></span><br><span class="line">System.out.println(String.format(<span class="string">&quot;%s row inserted&quot;</span>, k));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>update data, using the <code>update</code> method to update data, it will return how many rows are affected.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateData</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> jt.update(<span class="string">&quot;UPDATE user set name=&#x27;user_new&#x27; where name=&#x27;user_99&#x27;&quot;</span>);</span><br><span class="line">showDatas();</span><br><span class="line"></span><br><span class="line">System.out.println(String.format(<span class="string">&quot;%s row updated&quot;</span>, k));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>delete data, also using the <code>update</code> method.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteData</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> jt.update(<span class="string">&quot;DELETE from user where name=&#x27;user_new&#x27;&quot;</span>);</span><br><span class="line"></span><br><span class="line">showDatas();</span><br><span class="line">System.out.println(String.format(<span class="string">&quot;%s row deleted&quot;</span>, k));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>query data, the jdbctemplate has many query interfaces. Here we use <code>queryForRowSet</code> method to get the data by condition.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">showDatas</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;|  ID |  NAME    |  AGE  |&quot;</span>);</span><br><span class="line"><span class="type">SqlRowSet</span> <span class="variable">rowSet</span> <span class="operator">=</span> jt.queryForRowSet(<span class="string">&quot;SELECT * FROM user&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (rowSet.next()) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rowSet.getInt(<span class="number">1</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rowSet.getString(<span class="number">2</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> rowSet.getInt(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> String</span><br><span class="line">.format(<span class="string">&quot;|  %s  |  %s  |  %s   |&quot;</span>, id, name, age);</span><br><span class="line"></span><br><span class="line">System.out.println(msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>okay, to so far, let us call them in main entrance.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spconfig.xml&quot;</span>);</span><br><span class="line"><span class="type">SpringJdbcCreateTable</span> <span class="variable">st</span> <span class="operator">=</span>(SpringJdbcCreateTable)applicationContext.getBean(<span class="string">&quot;createTable&quot;</span>);</span><br><span class="line"></span><br><span class="line">st.createTable();</span><br><span class="line">st.initSomeDatas();</span><br><span class="line">st.insertData();</span><br><span class="line">st.updateData();</span><br><span class="line">st.deleteData();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Look, itâ€™s very easy to access database with spring framework.</p>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Give me a cup of coffeescript</title>
      <link href="/2015/03/19/give-me-a-cup-of-coffeescript/"/>
      <url>/2015/03/19/give-me-a-cup-of-coffeescript/</url>
      
        <content type="html"><![CDATA[<img src="/assets/images/legacy/coffee-script-logo.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/coffee-script-logo.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="200" height="100"> is programming language, which is built on top of `JavaScript`. CoffeeScript compiles into JavaScript that is efficient and consistent with many best practices. And it offers a clean syntax that should appeal to anyone who likes `Python` or `Ruby`.    <p>Actually, The <code>CoffeeScript</code> is just a JavaScript. So you can use any exsiting JavaScript library seamlessly from CoffeeScript. And both <code>client-side</code> and <code>server-side</code> can be written by <code>CoffeeScript</code>. So CoffeeScript can write entire web application completely, not like JavaScript only write client-side.  </p><span id="more"></span>  <p>The CoffeeScript is a <code>Node.js</code> package, so you need to install it with <code>Node Package Manager</code>. There assume you have installed node.js. You can watch <a href="https://nodejs.org/">here</a> to see how to install node.js if you dontâ€™ know it. Putting below commands to install CoffeeScript:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g coffee-script</span><br></pre></td></tr></table></figure><p>CoffeeScript supports many commands to let you build your application. You just need to input below command line: </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">coffee -help</span><br></pre></td></tr></table></figure><p>It will print awesome useful content: </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Usage</span>: coffee [options] path/to/script.<span class="property">coffee</span> -- [args]</span><br><span class="line"></span><br><span class="line"><span class="title class_">If</span> called without options, <span class="string">`coffee`</span> will run your script.</span><br><span class="line"></span><br><span class="line">  -b, --bare         compile without a top-level <span class="keyword">function</span> wrapper</span><br><span class="line">  -c, --compile      compile to <span class="title class_">JavaScript</span> and save <span class="keyword">as</span> .<span class="property">js</span> files</span><br><span class="line">  -e, --<span class="built_in">eval</span>         pass a string <span class="keyword">from</span> the command line <span class="keyword">as</span> input</span><br><span class="line">  -h, --help         display <span class="variable language_">this</span> help message</span><br><span class="line">  -i, --interactive  run an interactive <span class="title class_">CoffeeScript</span> <span class="variable constant_">REPL</span></span><br><span class="line">  -j, --join         concatenate the source <span class="title class_">CoffeeScript</span> before compiling</span><br><span class="line">  -m, --map          generate source map and save <span class="keyword">as</span> .<span class="property">js</span>.<span class="property">map</span> files</span><br><span class="line">  -n, --nodes        print out the parse tree that the parser produces</span><br><span class="line">      --nodejs       pass options directly to the <span class="string">&quot;node&quot;</span> binary</span><br><span class="line">      --no-header    suppress the <span class="string">&quot;Generated by&quot;</span> header</span><br><span class="line">  -o, --output       set the output directory <span class="keyword">for</span> compiled <span class="title class_">JavaScript</span></span><br><span class="line">  -p, --print        print out the compiled <span class="title class_">JavaScript</span></span><br><span class="line">  -s, --stdio        listen <span class="keyword">for</span> and compile scripts over stdio</span><br><span class="line">  -l, --literate     treat stdio <span class="keyword">as</span> literate style coffee-script</span><br><span class="line">  -t, --tokens       print out the tokens that the lexer/rewriter produce</span><br><span class="line">  -v, --version      display the version number</span><br><span class="line">  -w, --watch        watch scripts <span class="keyword">for</span> changes and rerun commands</span><br><span class="line"><span class="string">``</span><span class="string">`    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Let&#x27;s give a example, how to use CoffeeScript to solve a mathematics problem. Here we will solve the first mathematical problem of `</span><span class="title class_">Project</span> <span class="title class_">Eluar</span><span class="string">`. The problem is below:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&gt; If we list all the natural numbers below 10 that are multiples of 3 or 5, we get 3, 5, 6 and 9. The sum of these multiples is 23.</span></span><br><span class="line"><span class="string">&gt; Find the sum of all the multiples of 3 or 5 below 1000.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">And now we solve this problem with CoffeeScript elegantly:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span> coffeescript</span><br><span class="line">([<span class="number">1.</span><span class="number">.999</span>].<span class="property">filter</span> (x) -&gt; x % <span class="number">3</span> is <span class="number">0</span> or x % <span class="number">5</span> is <span class="number">0</span>).<span class="property">reduce</span> (x, y) -&gt; x + y</span><br></pre></td></tr></table></figure><p>You see, just one code line. Itâ€™s very concise and elegant. Not like JavaScript need to defined many variables and functions to solve it.    </p><p>Cheers,  I think you will love it.</p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CoffeeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML5 - New Common Elements</title>
      <link href="/2015/03/03/html5-new-common-elements/"/>
      <url>/2015/03/03/html5-new-common-elements/</url>
      
        <content type="html"><![CDATA[<p>In <code>HTML5</code>, It adds a mount of elements, these elements are more easier to present the document in browser.</p><p>###Structure element<br>Before <code>HTML5</code>, we just use <code>div</code> tag to act as the <code>Document Structure Element</code>, but now the <code>HTML5</code> supports more elements like <code>section</code>, <code>article</code>, <code>nav</code>, <code>aside</code>, <code>header</code>, <code>footer</code> and so on.  </p><span id="more"></span> <h5 id="article"><a href="#article" class="headerlink" title="article"></a>article</h5><p><code>article</code> use to present an entire, independent article. We should use it when we need to present a entire, independent document content.<br>It can contain <code>header</code> tag to define the header of the article.<br>It can contain <code>footer</code> tag to define the footer of the article.<br>It can contain <code>section</code> tag to split content to multiple paragraphs.<br>Also, it can be nested by itself.   </p><h5 id="section"><a href="#section" class="headerlink" title="section"></a>section</h5><p><code>section</code> splits the page content to multiple blocks, and it usually contains title and content. And here the title stand for <code>h1</code>â€¦.<code>h6</code> tag. <code>section</code> can contains <code>article</code> and <code>section</code> tag.</p><h5 id="nav"><a href="#nav" class="headerlink" title="nav"></a>nav</h5><p><code>nav</code> tag use to define the navigation bar, include the top of page, the left or right side, and the bottom and so on.</p><h5 id="aside"><a href="#aside" class="headerlink" title="aside"></a>aside</h5><p>Itâ€™s recommend to use it to present the side of page with <code>CSS</code>.</p><h5 id="header"><a href="#header" class="headerlink" title="header"></a>header</h5><p>The <code>header</code> tag use to define the header of the <code>article</code>, and it can contain multiple title tags (<code>h1</code>â€¦.<code>h6</code>) with <code>hgroup</code> tag. And also the common tags like <code>p</code>, <code>span</code> can be nested in it.   </p><h5 id="hgroup"><a href="#hgroup" class="headerlink" title="hgroup"></a>hgroup</h5><p>Itâ€™s mainaly use for including multiple title tag.</p><h5 id="footer"><a href="#footer" class="headerlink" title="footer"></a>footer</h5><p>The footer of page, use to contains foot information, copy right and author related stuff.</p><h5 id="figure"><a href="#figure" class="headerlink" title="figure"></a>figure</h5><p><code>figure</code> tag express an independant image area, it may contain one or more imagesï¼Œ in addition to this tag can contain a new tag <code>figcaption</code> to express the title of images.</p><h3 id="Semantic-related-elemnent"><a href="#Semantic-related-elemnent" class="headerlink" title="Semantic related elemnent"></a>Semantic related elemnent</h3><h5 id="mark"><a href="#mark" class="headerlink" title="mark"></a>mark</h5><p>It is mark some information need to be noticed.</p><h4 id="time"><a href="#time" class="headerlink" title="time"></a>time</h4><p>It presents some content want to be time, date. Setting the <code>datetime</code> attributeâ€™s value to present which date formatter you want.</p><h4 id="Special-function-element"><a href="#Special-function-element" class="headerlink" title="Special function element"></a>Special function element</h4><h4 id="meter"><a href="#meter" class="headerlink" title="meter"></a>meter</h4><p><code>meter</code> tag express an as known maxium and minimum counter. It has many attributes to set. <code>value</code>, <code>min</code>, <code>max</code>, <code>low</code>, <code>high</code>, <code>optimum</code>.   </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  current speed of car: <span class="tag">&lt;<span class="name">meter</span> <span class="attr">id</span>=<span class="string">&quot;meter&quot;</span> <span class="attr">max</span>=<span class="string">&quot;200&quot;</span> <span class="attr">min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">low</span>=<span class="string">&quot;0&quot;</span> <span class="attr">high</span>=<span class="string">&quot;180&quot;</span> <span class="attr">value</span>=<span class="string">&quot;150&quot;</span>&gt;</span>kilometre/hour</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/assets/images/legacy/meter-tag.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/meter-tag.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="300" height="80"><h4 id="progress"><a href="#progress" class="headerlink" title="progress"></a>progress</h4><p><code>progress</code> tag use to express an progress bar. It has two attributes, one is <code>max</code>, another is <code>value</code>.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   the progress of un-finished task: <span class="tag">&lt;<span class="name">progress</span> <span class="attr">id</span>=<span class="string">&quot;progress&quot;</span> <span class="attr">max</span>=<span class="string">&quot;1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0.4&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="/assets/images/legacy/progress-tag.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/progress-tag.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="350" height="100">]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML5 - New Common Attributes</title>
      <link href="/2015/03/02/html5-new-common-attributes/"/>
      <url>/2015/03/02/html5-new-common-attributes/</url>
      
        <content type="html"><![CDATA[<p><code>HTML5</code> adds new common attributes for original <code>HTML</code> Tag, and these attributes enhances the <code>HTML</code> elementsâ€™s function.   </p><h3 id="contentEditable"><a href="#contentEditable" class="headerlink" title="contentEditable"></a>contentEditable</h3><p>The <code>contentEditable</code> attribute supports most tags. The browser allows user edits the content of element if this attribute is set to true. These elements is not like input or textarea tags. They are not support editable content like table, div, span and so on these tags.   </p><span id="more"></span><p><code>contentEditable</code> attribute can be inherited by children tags. If the contentEditable is true, all children tagsâ€™s contentEditable will be true except we define it to false.   </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>contentEditable<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">240px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">table</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>:inherit;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">table</span> &gt; <span class="selector-tag">tr</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: blue;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.myDiv</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>:inherit;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>:<span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> turnOnContentEditable = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> target = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;target&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            target.<span class="property">contentEditable</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;target&quot;</span> <span class="attr">contentEditable</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">td</span>&gt;</span>Java<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">td</span>&gt;</span>CSharp<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">td</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">td</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;myDiv&quot;</span>&gt;</span></span><br><span class="line">           This is Div Tag</span><br><span class="line">       <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;turnOnContentEditable();&quot;</span><span class="attr">value</span>=<span class="string">&quot;Turn On Edit Mode&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>The root div is canâ€™t be edited by default. when we click button to turn on contentEditable attribute. all children tags of this tag can be edited.   </p><p><code>contentEditable</code> attribute is false:   </p><img src="/assets/images/legacy/contentEditable-before.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/contentEditable-before.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="300" height="350">  <p><code>contentEditable</code> attribute is true:   </p><img src="/assets/images/legacy/contentEditable-after.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/contentEditable-after.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="300" height="350">  <h3 id="designMode"><a href="#designMode" class="headerlink" title="designMode"></a>designMode</h3><p><code>designMode</code> attribute is actually entire documentâ€™s <code>contentEditable</code>. If we turn on the <code>designMode</code> attribute of the entire page, all the elements which supports <code>contentEditable</code> attributes can be edited. It is false by default.    </p><p>We can just use javascript to turn on the documentâ€™s <code>designMode</code>.   </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">designMode</span> = <span class="string">&quot;on&quot;</span>;</span><br></pre></td></tr></table></figure><h3 id="hidden"><a href="#hidden" class="headerlink" title="hidden"></a>hidden</h3><p><code>HTML5</code> supports <code>hidden</code> attribute for all elements. The <code>hidden</code> attribute can be set to â€˜falseâ€™ and â€˜trueâ€™ both values. The browser doesnâ€™t display the element when <code>hidden = &#39;true&#39;</code>.   </p><p>The <code>hidden = &#39;true&#39;</code> actually like we write <code>display:none</code> is <code>CSS</code> file. And also we can get its value by <code>hidden</code>.</p><h3 id="spellcheck"><a href="#spellcheck" class="headerlink" title="spellcheck"></a>spellcheck</h3><p><code>HTML5</code> add new attributes <code>spellcheck</code> for editable elements like <code>input</code>,<code>textarea</code>, â€¦ The <code>spellcheck</code> can be set to â€˜trueâ€™, â€˜falseâ€™ both values. The browser will check the content user input and prompt error message for spell error words when it is set to â€˜trueâ€™. </p><pre><code class="html">&lt;input type=&quot;text&quot; spellcheck=&quot;true&quot;/&gt;</code></pre><img src="/assets/images/legacy/spellcheck.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/spellcheck.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="300" height="80"><blockquote><p><em>Note: Supports <code>spellcheck</code> attributeâ€™s browsers include <code>Chrome</code>, <code>Opera</code>, <code>Safari</code>, the <code>IE</code>, <code>FireFox</code> doesnâ€™t support it for now.</em></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A nice web design tool - Bracket</title>
      <link href="/2015/03/02/a-nice-web-design-tool-bracket/"/>
      <url>/2015/03/02/a-nice-web-design-tool-bracket/</url>
      
        <content type="html"><![CDATA[<p><code>Bracket</code> is open source web design text editor, it focus with visual tools and preprocesssor support. It is easy to design web page in the browser, we can get the page layout in time when we change the html, css, javascript. We donâ€™t need to save the file and refresh the browser. Thatâ€™s so convenience.   </p><span id="more"></span><p><code>Bracket</code> supports the element highlight on the page in time when you put your mouse cursor on the specific html tag.</p><p>Absolutly, I recommend you to design you website with it. You can download it from <a href="https://github.com/adobe/brackets/releases/download/release-1.1%2Beb4/Brackets.1.1.Extract.dmg">here</a> for Mac OS. Also you can download it for other platform from <a href="https://github.com/adobe/brackets/releases">this</a>.    </p><p>The Extract for <code>Brackets</code> (Preview) extension lets you pull out design information from a PSD including colors, fonts, gradients, and measurement information as clean, minimal CSS via contextual code hints. You can also extract layers as images, use information from the PSD to define preprocessor variables, and easily get dimensions between objects. This is very benefit for web designer which want to design web page with PSD source file.   </p><p>The <code>Bracket</code> has three big features, they are below:</p><ul><li><p><strong>Inline Editor</strong><br>We donâ€™t need to jump between file tabs when we want to change the style of the specific ID.<br>Just put the mouse cursor on that ID and press <code>Command</code>&#x2F;<code>Ctrl + E</code>, <code>Bracket</code> will show you all the CSS selectors with that ID in an inline window so you can work on your code side-by-side without any popups.</p></li><li><p><strong>Live Preview</strong><br>Get a real-time connection to your browser. Make changes to CSS and HTML and youâ€™ll instantly see those changes on the page.</p></li><li><p><strong>Preprocessor Support</strong><br>  With Brackets you can use <code>Quick Edit</code> and <code>Live Highlight</code> with your <code>LESS</code> and <code>SCSS</code> files which will make working with them easier than ever.</p></li></ul><p>With <code>Bracket</code>, you can improve your working efficiency and save your time. This web design tool is so power, and the offical website is <a href="http://brackets.io/">here</a>.</p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bracket </tag>
            
            <tag> Web Design </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Guave - Immutable Collection</title>
      <link href="/2015/02/13/guave-immutable-collection/"/>
      <url>/2015/02/13/guave-immutable-collection/</url>
      
        <content type="html"><![CDATA[<p><code>Immutable</code> that means it can not be changed. Letâ€™s get example to see whatâ€™s different with <code>mutable</code> objects.</p><p>Normal mutable collections:   </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//define a mutable list</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> List&lt;String&gt; mutableList = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line">   </span><br><span class="line"><span class="comment">//modify the first item in the mutable list</span></span><br><span class="line"><span class="comment">//will print [aa, b, c]</span></span><br><span class="line">mutableList.set(<span class="number">0</span>, <span class="string">&quot;aa&quot;</span>);</span><br><span class="line">System.out.println(mutableList);</span><br><span class="line">```    </span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line">Immutable collections:</span><br><span class="line">``` Java</span><br><span class="line"><span class="comment">//define a immutable list</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> ImmutableList&lt;String&gt; immutableList = ImmutableList.of(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//can not modify the first item in the immutable list, any change item operation is unsuppproted.</span></span><br><span class="line"><span class="comment">//it will throw UnsupportedOperationException</span></span><br><span class="line">immutableList.set(<span class="number">0</span>, <span class="string">&quot;aa&quot;</span>);</span><br><span class="line">System.out.println(immutableList);</span><br><span class="line">```    </span><br><span class="line">From above example, we can get the conclusion is that immutable collections doesn<span class="string">&#x27;t support any changing content API. So it will throw `UnsupportedOperationException` when you try to modify it.    </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### What&#x27;</span>s advantage of Immutable Objects</span><br><span class="line">According to Guava Offical explain about `Immutable Objects`, there have four and more advantages of Immutable Objects:</span><br><span class="line"></span><br><span class="line"> - Safe <span class="keyword">for</span> use by untrusted libraries.</span><br><span class="line"> - `Thread-Safe`: can be used by many threads with no risk of race conditions.</span><br><span class="line"> - Doesn<span class="string">&#x27;t need to support mutation, and can make time and space savings with that assumption. All immutable collection implementations are more memory-efficient than their mutable siblings.</span></span><br><span class="line"><span class="string"> - Can be used as a constant, with the expectation that it will remain fixed.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Making immutable copies of objects is a good defensive programming technique, and `Guava`provides it.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&gt; *Note:* Each of the `Guava` immutable collection implementations reject *null* values.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### How create it</span></span><br><span class="line"><span class="string">An ImmutableXXX collection can be created in several ways:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- Using the `copyOf` method, like `ImmutableList.copyOf(collection)`:  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">``` Java</span></span><br><span class="line"><span class="string">ImmutableList&lt;String&gt; result = ImmutableList.copyOf(mutableList);</span></span><br></pre></td></tr></table></figure><ul><li>Using the <code>of</code> method, like <code>ImmutableList.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)</code> or <code>ImmutableMap.of(&quot;a&quot;, 1, &quot;b&quot;, 2)</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImmutableList&lt;String&gt; result = ImmutableList.of(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>Using a <code>Builder</code>, for example:</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ImmutableList&lt;String&gt; result = ImmutableList.&lt;String&gt;builder()</span><br><span class="line">                .addAll(mutableList)</span><br><span class="line">                .build();</span><br></pre></td></tr></table></figure><p>All immutable collections provide an ImmutableList view via <code>asList()</code>, so â€“ for example â€“ even if you have data stored as an ImmutableSortedSet, you can get the kth smallest element with <code>sortedSet.asList().get(k)</code>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//get second item. print b</span></span><br><span class="line">System.out.println(immutableList.asList().get(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Guava </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Understading MVC, MVP and MVVM Design Patterns</title>
      <link href="/2015/02/06/understading-mvc-mvp-and-mvvm-design-patterns/"/>
      <url>/2015/02/06/understading-mvc-mvp-and-mvvm-design-patterns/</url>
      
        <content type="html"><![CDATA[<p><code>MVC</code>, <code>MVP</code> and <code>MVVM</code> design patterns are most popular technologies in our web application. Many people donâ€™t understand whatâ€™s difference among them, so do I. But I found a blog which explains the difference of three design patterns, and itsâ€™ really good.    </p><p>To read original article, see <a href="http://www.dotnet-tricks.com/Tutorial/designpatterns/2FMM060314-Understanding-MVC,-MVP-and-MVVM-Design-Patterns.html">here</a>    </p><p>There are three most popular MV-* design patterns: <code>MVC</code>, <code>MVP</code> and <code>MVVM</code>. These are widely used by the various technologies.   </p><span id="more"></span><h3 id="MVC-Pattern"><a href="#MVC-Pattern" class="headerlink" title="MVC Pattern"></a>MVC Pattern</h3><p><code>MVC</code> stands for <code>Model-View-Controller</code>. It is a software design pattern which was introduced in 1970s. Also, <code>MVC</code> pattern forces a separation of concerns, it means domain model and controller logic are decoupled from user interface (view). As a result maintenance and testing of the application become simpler and easier.   </p><p><code>MVC</code> design pattern splits an application into three main aspects: <code>Model</code>, <code>View</code> and <code>Controller</code></p><p><img src="/assets/images/legacy/mvc-pattern.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/mvc-pattern.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="mvc-pattern"></p><h4 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h4><p>The Model represents a set of classes that describe the business logic i.e. business model as well as data access operations i.e. data model. It also defines business rules for data means how the data can be changed and manipulated.</p><h4 id="View"><a href="#View" class="headerlink" title="View"></a>View</h4><p>The View represents the UI components like CSS, jQuery, html etc. It is only responsible for displaying the data that is received from the controller as the result. This also transforms the model(s) into UI.</p><h4 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h4><p>The Controller is responsible to process incoming requests. It receives input from users via the View, then process the userâ€™s data with the help of Model and passing the results back to the View. Typically, it acts as the coordinator between the View and the Model.    </p><p>Today, this pattern is used by many popular framework like as <code>Ruby on Rails</code>, <code>Spring Framework</code>, <code>Apple iOS</code> Development and <code>ASP.NET MVC</code>.</p><h3 id="MVP-Pattern"><a href="#MVP-Pattern" class="headerlink" title="MVP Pattern"></a>MVP Pattern</h3><p>This pattern is similar to MVC pattern in which controller has been replaced by the presenter. This design pattern splits an application into three main aspects: <code>Model</code>, <code>View</code> and <code>Presenter</code>.   </p><p><img src="/assets/images/legacy/mvp-pattern.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/mvp-pattern.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="mvp-pattern"></p><h4 id="Model-1"><a href="#Model-1" class="headerlink" title="Model"></a>Model</h4><p>The Model represents a set of classes that describes the business logic and data. It also defines business rules for data means how the data can be changed and manipulated.</p><h4 id="View-1"><a href="#View-1" class="headerlink" title="View"></a>View</h4><p>The View represents the UI components like CSS, jQuery, html etc. It is only responsible for displaying the data that is received from the presenter as the result. This also transforms the model(s) into UI.</p><h3 id="Presenter"><a href="#Presenter" class="headerlink" title="Presenter"></a>Presenter</h3><p>The Presenter is responsible for handling all UI events on behalf of the view. This receive input from users via the View, then process the userâ€™s data with the help of Model and passing the results back to the View. Unlike view and controller, view and presenter are completely decoupled from each otherâ€™s and communicate to each otherâ€™s by an interface.   </p><p>Also, presenter does not manage the incoming request traffic as controller.   </p><p>This pattern is commonly used with <code>ASP.NET Web Forms</code> applications which require to create automated unit tests for their code-behind pages. This is also used with <code>windows forms</code>.   </p><h5 id="Key-Points-about-MVP-Pattern"><a href="#Key-Points-about-MVP-Pattern" class="headerlink" title="Key Points about MVP Pattern:"></a>Key Points about MVP Pattern:</h5><ul><li>User interacts with the View.</li><li>There is one-to-one relationship between View and Presenter means one View is mapped to only one Presenter.</li><li>View has a reference to Presenter but View has not reference to Model.</li><li>Provides two way communication between View and Presenter.</li></ul><h3 id="MVVM-Pattern"><a href="#MVVM-Pattern" class="headerlink" title="MVVM Pattern"></a>MVVM Pattern</h3><p><code>MVVM</code> stands for <code>Model-View-View Model</code>. This pattern supports two-way data binding between view and View model. This enables automatic propagation of changes, within the state of view model to the View. Typically, the view model uses the observer pattern to notify changes in the view model to model.</p><p><img src="/assets/images/legacy/mvvm-pattern.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/mvvm-pattern.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="mvvm-pattern"></p><h4 id="Model-2"><a href="#Model-2" class="headerlink" title="Model"></a>Model</h4><p>The Model represents a set of classes that describes the business logic and data. It also defines business rules for data means how the data can be changed and manipulated.</p><h4 id="View-2"><a href="#View-2" class="headerlink" title="View"></a>View</h4><p>The View represents the UI components like CSS, jQuery, html etc. It is only responsible for displaying the data that is received from the controller as the result. This also transforms the model(s) into UI.</p><h4 id="View-Model"><a href="#View-Model" class="headerlink" title="View Model"></a>View Model</h4><p>The View Model is responsible for exposing methods, commands, and other properties that helps to maintain the state of the view, manipulate the model as the result of actions on the view, and trigger events in the view itself.    </p><p>This pattern is commonly used by the <code>WPF</code>, <code>Silverlight</code>, <code>Caliburn</code>, <code>nRoute</code> etc.</p><h5 id="Key-Points-about-MVVM-Pattern"><a href="#Key-Points-about-MVVM-Pattern" class="headerlink" title="Key Points about MVVM Pattern:"></a>Key Points about MVVM Pattern:</h5><ul><li>User interacts with the View.</li><li>There is many-to-one relationship between View and ViewModel means many View can be mapped to one ViewModel.</li><li>View has a reference to ViewModel but View Model has no information about the View.</li><li>Supports two-way data binding between View and ViewModel.</li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¾è®¡æ¨¡å¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MVC </tag>
            
            <tag> MVP </tag>
            
            <tag> MVVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Conditional Stylesheets for IE version</title>
      <link href="/2015/01/28/conditinal-stylesheets-for-ie-version/"/>
      <url>/2015/01/28/conditinal-stylesheets-for-ie-version/</url>
      
        <content type="html"><![CDATA[<p>The tool of choice for fighting IE problems is the <code>conditional stylesheet</code>. IE provides comment tags, supported all the way up to the current IE 8 to target specific versions, as well as greater-than&#x2F;less-than stuff for targeting multiple versions at once.</p><h3 id="Why-use-conditional-stylesheets"><a href="#Why-use-conditional-stylesheets" class="headerlink" title="Why use conditional stylesheets?"></a>Why use conditional stylesheets?</h3><ul><li>You got problems, they need fixinâ€™</li><li>Keeps your code hack-free and valid</li><li>Keeps your main stylesheet clean</li><li>Perfectly acceptable technique, sanctioned by Microsoft</li></ul><span id="more"></span><p>And remember, these conditional tags donâ€™t have to be used only for CSS. You could load JavaScript, or even use them down in the content of your site to display special IE-specific messages.</p><h3 id="The-Code"><a href="#The-Code" class="headerlink" title="The Code"></a>The Code</h3><p>This would go in your <head> with all the other regular CSS &lt;link&gt;ed CSS files. The opening and closing tags should be familiar, thatâ€™s just regular olâ€™ HTML comments. Then between the brackets, â€œIFâ€ and â€œIEâ€ should be fairly obvious. The syntax to note is â€œ!â€ stand for â€œnotâ€, so !IE means â€œnot IEâ€. gt means â€œgreater thanâ€, gte means â€œgreater than or equalâ€, lt means â€œless thanâ€, lte means â€œless than or equal.â€</p><blockquote><p><strong>Note that IE 10 and up DO NOT support conditional comments at all.</strong></p></blockquote><p>Target ALL VERSIONS of IE</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if IE]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;all-ie-only.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>Target everything EXCEPT IE</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if !IE]&gt;&lt;!--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;not-ie.css&quot;</span> /&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>Target IE 7 ONLY</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if IE 7]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie7.css&quot;&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>Target IE 6 ONLY</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if IE 6]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie6.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>Target IE 5 ONLY</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if IE 5]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie5.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>Target IE 5.5 ONLY</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if IE 5.5000]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie55.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>Target IE 6 and LOWER</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if lt IE 7]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie6-and-down.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if lte IE 6]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie6-and-down.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>Target IE 7 and LOWER</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if lt IE 8]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie7-and-down.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if lte IE 7]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie7-and-down.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>Target IE 8 and LOWER</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie8-and-down.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if lte IE 8]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie8-and-down.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>Target IE 6 and HIGHER</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if gt IE 5.5]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie6-and-up.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if gte IE 6]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie6-and-up.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>Target IE 7 and HIGHER</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if gt IE 6]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie7-and-up.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if gte IE 7]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie7-and-up.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p>Target IE 8 and HIGHER</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if gt IE 7]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie8-and-up.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--[if gte IE 8]&gt;</span></span><br><span class="line"><span class="comment">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;ie8-and-up.css&quot; /&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure><p><em>Note: The original artical you can see <a href="http://css-tricks.com/how-to-create-an-ie-only-stylesheet/">here</a></em></p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IE </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS tricks for IE6,IE7,IE8,IE9</title>
      <link href="/2015/01/28/css-tricks-for-ie6-ie7-ie8-ie9/"/>
      <url>/2015/01/28/css-tricks-for-ie6-ie7-ie8-ie9/</url>
      
        <content type="html"><![CDATA[<p>As web developer, we usually to fix the style for special version of IE. Here are the newest CSS tricks for <code>IE6</code>, <code>IE7</code>, <code>IE8</code>, <code>IE9</code>. This is very helpful for you.   </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#ie-tricks</span>&#123;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/* All browsers */</span></span><br><span class="line"><span class="attribute">color</span>:red;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* All browsers but IE6 */</span></span><br><span class="line"><span class="attribute">color</span>:red <span class="meta">!important</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Only works in IE6 */</span></span><br><span class="line">_color:red;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE6, IE7 */</span> </span><br><span class="line">*<span class="attribute">color</span>:red; </span><br><span class="line"></span><br><span class="line"><span class="comment">/* Only works in IE7*/</span></span><br><span class="line">+<span class="attribute">color</span>:red;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Only works in IE7 */</span></span><br><span class="line">*+<span class="attribute">color</span>:red;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE6, IE7, IE8, IE9 */</span> </span><br><span class="line"><span class="attribute">color</span>:red\<span class="number">9</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE8, IE9 */</span> </span><br><span class="line"><span class="attribute">color</span>:red\<span class="number">0</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">/*Only works in IE9*/</span></span><br><span class="line"><span class="attribute">color</span>:red\<span class="number">9</span>\<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IE </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A New Way For Developing Web Application Front-End</title>
      <link href="/2015/01/13/a-new-way-for-developing-web-application-front-end/"/>
      <url>/2015/01/13/a-new-way-for-developing-web-application-front-end/</url>
      
        <content type="html"><![CDATA[<p>When we develop web application, if we write or modify the HTML structure, CSS style and javascript, we need to compile the code and deploy it, and then refresh page, finally we can see our changes. There are so many steps. So could we skip these steps and just see our changes on page directly when we save the codes. Yes, I can answer you now.    </p><p>In order to achieve this goal, we need to install <code>Guard</code>, <code>LiveReload</code> and related stuff, configure it in our web application project.  </p><span id="more"></span>  <h3 id="Guard"><a href="#Guard" class="headerlink" title="Guard"></a>Guard</h3><p><code>Guard</code> is a command line tool to easily handle events on file system modifications. The offical website in <a href="http://guardgem.org/">here</a>.</p><ul><li>File system changes handled by awesome Listen gem.</li><li>Support for visual system notifications.</li><li>Huge eco-system with more than 220 guard plugins, go to this <a href="https://rubygems.org/search?query=guard-">website</a> to get plugins what you want.</li></ul><p>The simplest way to install guard is to use <code>Bundler</code>. Go to the guard offical website to see how to install it.    </p><h3 id="LiveReload"><a href="#LiveReload" class="headerlink" title="LiveReload"></a>LiveReload</h3><p><code>LiveReload</code> monitors changes in the file system. As soon as you save a file, it is preprocessed as needed, and the browser is refreshed.<br>Even cooler, when you change a CSS file or an image, the browser is updated instantly without reloading the page.</p><p>And here, we use <code>guard-livereload</code> plugin to notificate the browser to reload page. this plugin base on <code>Guard</code> and <code>LiveReload</code>, you have to install Guard firstly. Visit this <a href="https://github.com/guard/guard-livereload/">website</a> to see how to install it.</p><p>###LiveReload Safari&#x2F;Chrome extension###<br>Finally, you need to install <code>LiveReload Safari Or Chrome Extension</code>, and here, we just use chrome to load web application. So go to Chrome Web Store and find livereload extension to install it on your chrome browser. And also you can use Safari browser.</p><p>And now the tools we need have been installed. So letâ€™s getting started.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ guard init livereload</span><br></pre></td></tr></table></figure><p>By runing above command line, it will add guard definition to your <code>Guardfile</code>. You can adapt your â€˜viewâ€™ files like you want. And the default content of Guardfile by livereload initialize is below:    </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">guard <span class="string">&#x27;livereload&#x27;</span> <span class="keyword">do</span></span><br><span class="line">  watch(<span class="regexp">%r&#123;app/views/.+\.(erb|haml|slim)&#125;</span>)</span><br><span class="line">  watch(<span class="regexp">%r&#123;app/helpers/.+\.rb&#125;</span>)</span><br><span class="line">  watch(<span class="regexp">%r&#123;public/.+\.(css|js|html)&#125;</span>)</span><br><span class="line">  watch(<span class="regexp">%r&#123;config/locales/.+\.yml&#125;</span>)</span><br><span class="line">  <span class="comment"># Rails Assets Pipeline</span></span><br><span class="line">  watch(<span class="regexp">%r&#123;(app|vendor)(/assets/\w+/(.+\.(css|js|html))).*&#125;</span>) &#123; |<span class="params">m</span>| <span class="string">&quot;/assets/<span class="subst">#&#123;m[<span class="number">3</span>]&#125;</span>&quot;</span> &#125;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>And you can see that there has some watch command in the Guardfile. Changing it by your situation.</p><p>Now I will use a login page to test the guard and livereload how to work. This project contains script file, less file and html file. When we change the less file it will generate css file automatically, and here we use Sublime Text plugin to finished it, and also you can use <code>guard-less</code> plugin which is guard plugin.<br><img src="/assets/images/legacy/project-structure.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/project-structure.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p>In test project directory, we can find the Gemfile and Guardfile.</p><figure class="highlight ruby"><figcaption><span>Gemfile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># A sample Gemfile</span></span><br><span class="line">source <span class="string">&quot;https://rubygems.org&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># gem &quot;rails&quot;</span></span><br><span class="line">group <span class="symbol">:development</span> <span class="keyword">do</span> </span><br><span class="line">gem <span class="string">&#x27;guard&#x27;</span></span><br><span class="line">gem <span class="string">&#x27;guard-livereload&#x27;</span>, <span class="symbol">require:</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>And here we just only use <code>guard-livereload plugin</code>, we also can use <code>guard-less</code> to configure the less to auto generate css file. But here we use the <code>Sublime Text</code> development tools to develop this project, it supports plugin to generate less to css.    </p><p>Letâ€™s see the guard how to watch our project files. the content of Guardfile is below:</p><figure class="highlight ruby"><figcaption><span>Guardfile</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># A sample Guardfile</span></span><br><span class="line"><span class="comment"># More info at https://github.com/guard/guard#readme</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Uncomment and set this to only include directories you want to watch</span></span><br><span class="line"><span class="comment"># directories %w(app lib config test spec feature)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Uncomment to clear the screen before every task</span></span><br><span class="line"><span class="comment"># clearing :on</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Guard internally checks for changes in the Guardfile and exits.</span></span><br><span class="line"><span class="comment">## If you want Guard to automatically start up again, run guard in a</span></span><br><span class="line"><span class="comment">## shell loop, e.g.:</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">##  $ while bundle exec guard; do echo &quot;Restarting Guard...&quot;; done</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Note: if you are using the `directories` clause above and you are not</span></span><br><span class="line"><span class="comment">## watching the project directory (&#x27;.&#x27;), the you will want to move the Guardfile</span></span><br><span class="line"><span class="comment">## to a watched dir and symlink it back, e.g.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#  $ mkdir config</span></span><br><span class="line"><span class="comment">#  $ mv Guardfile config/</span></span><br><span class="line"><span class="comment">#  $ ln -s config/Guardfile .</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># and, you&#x27;ll have to watch &quot;config/Guardfile&quot; instead of &quot;Guardfile&quot;</span></span><br><span class="line"></span><br><span class="line">guard <span class="string">&#x27;livereload&#x27;</span> <span class="keyword">do</span></span><br><span class="line">watch /.*<span class="regexp">/</span></span><br><span class="line"><span class="regexp">end</span></span><br></pre></td></tr></table></figure><p>In there, you will see that the all file in this project directory has been watched by guard-livereload. </p><p>Type below commands in your terminal.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ guard</span><br></pre></td></tr></table></figure><p>It will prompt you that LiveReload is waiting for a browser to connect. And the Guard is now watching at your specific files.</p><p>Open the web application on your chrome browser, and click LiveReload extension. And now you will see the terminal has a message said Browser connected.    </p><p>So far, you have prepared all configurations. And now you can modify the source file and save it, then you will see the web application automatically refresh.<br><img src="/assets/images/legacy/auto-refresh-page.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/auto-refresh-page.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tool </tag>
            
            <tag> Guard </tag>
            
            <tag> LiveReload </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>How to run multiple IE version on same computer</title>
      <link href="/2015/01/07/how-to-run-multiple-ie-version-on-same-cotim/"/>
      <url>/2015/01/07/how-to-run-multiple-ie-version-on-same-cotim/</url>
      
        <content type="html"><![CDATA[<p>As web developer, we usually need to face the challenge of making cross-browser compatible. Especially IE browserâ€™s multiple version. Because its quirks of rendering websites differently across its versions of <code>IE6</code>, <code>IE7</code>, <code>IE8</code> and possibly <code>IE9</code> and <code>IE10</code>.   </p><p>Most of us have only one version of IE browser on our computer, and the compatible mode of IE is not really specific version which you want to simulate.   </p><span id="more"></span><p>So how to run multiple version of IE on same time. Many developers install virtual machine to use the different versions. But this is not the best way.   </p><p>In there, I will tell you there has a free tool called <code>IETester</code> can solve your problem. Use this tool can quick and easy way to run IE6, IE7, IE8 and IE9 on the same computer at the same time. And this tool just only support windows operation system. It also supports develope tool which can help developer to check web application on different version of IE.   </p><p>This is a screen shot of <code>IETester</code>:<br><img src="/assets/images/legacy/ie-tester.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/ie-tester.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp"></p><p>You can download it from this address <a href="http://www.my-debugbar.com/ietester/install-ietester-v0.5.4.exe">IETester</a>   </p><p>There has another online tools called <code>Browser Sandbox</code> can solve this problem, but it is not free, if you have money, this tool will be better for you. It support any versions of <code>Firefox</code>, <code>Opera</code>, <code>Safari</code>, <code>Chrome</code> and also <code>IE</code>. You can go to this <a href="http://spoon.net/browsers/">website</a> to visit.</p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IETester </tag>
            
            <tag> IE </tag>
            
            <tag> Tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>how to install packages in sublime text 3</title>
      <link href="/2014/12/26/how-to-install-sublime-text-plugin/"/>
      <url>/2014/12/26/how-to-install-sublime-text-plugin/</url>
      
        <content type="html"><![CDATA[<p><code>Sublime Text</code> is a sophisticated text editor for code, markup and prose. You can go to offical <strong><a href="http://www.sublimetext.com/">website</a></strong> to download and see how to use it. Itâ€™s a very powerful weapon for developer. And also it has so many packages to expand its functional.   </p><p>If you want to install packages in your sublime text. First of all, you need to install <code>Package Control</code> that is <code>Sublime Text</code> package manager that makes it exceedingly simple to find, install and keep packages up-to-date.  </p><p>Open Sublime Text 3 and choose <code>View &gt; Show Console</code> menu. Paste below codes into console.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request,os,hashlib; h = <span class="string">&#x27;2deb499853c4371624f5a07e27c334aa&#x27;</span> + <span class="string">&#x27;bf8c4e67d14fb0525ba4f89698a6d7e1&#x27;</span>; pf = <span class="string">&#x27;Package Control.sublime-package&#x27;</span>; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( <span class="string">&#x27;http://packagecontrol.io/&#x27;</span> + pf.replace(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;%20&#x27;</span>)).read(); dh = hashlib.sha256(by).hexdigest(); <span class="built_in">print</span>(<span class="string">&#x27;Error validating download (got %s instead of %s), please try manual install&#x27;</span> % (dh, h)) <span class="keyword">if</span> dh != h <span class="keyword">else</span> <span class="built_in">open</span>(os.path.join( ipp, pf), <span class="string">&#x27;wb&#x27;</span> ).write(by)</span><br></pre></td></tr></table></figure><span id="more"></span><p>This code creates the Installed Packages folder for you (if necessary), and then downloads the <code>Package Control.sublime-package</code> into it.   </p><p>Since the <code>Package Control</code> install successfull, you can intall any packages which you want, such as less,less2css package. Press <code>Command+Shift+P</code> open the <code>Command palette</code> and find the <code>Package Control: Install Package</code>, like this:<br><img src="/assets/images/legacy/command-palette.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/command-palette.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="command palette"></p><p>Choose <code>Package Control: Install Package</code> menu, and wait a seconds it will prompt package installer, and then you can search packages what you want and install it.<br><img src="/assets/images/legacy/package-installer.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/package-installer.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="package installer"> </p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tool </tag>
            
            <tag> Sublime Text </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>What is cucumber</title>
      <link href="/2014/12/22/what-is-cucumber/"/>
      <url>/2014/12/22/what-is-cucumber/</url>
      
        <content type="html"><![CDATA[<p><code>Cucumber</code> is a tool that can execute <code>plain-text</code> functional descriptions. And also itâ€™s  <code>BDD(Behaviour Driven Development)</code> <code>automated tests</code>. It is written by <code>Ruby</code>, and now it supports more than 40 languages, such as <code>Java</code>, <code>C#</code> and <code>Scala</code> etc.</p><h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><p>Firstly, we need to install <code>Ruby</code> and <code>RubyGems</code>, to check whether the installation of Ruby and RubyGems is successful. You can inputx the commands to terminal, just like as below:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~  ruby --version</span><br><span class="line">ruby 2.0.0p481 (2014-05-08 revision 45883) [universal.x86_64-darwin14]</span><br><span class="line">~  gem --version</span><br><span class="line">2.0.14  </span><br></pre></td></tr></table></figure><p>And then we can run the command below to install <code>Cucumber</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~  gem install cucumber</span><br></pre></td></tr></table></figure><p>After this, put below command to see how to use it.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~  cucumber --help</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="Gherkin"><a href="#Gherkin" class="headerlink" title="Gherkin"></a>Gherkin</h3><p><code>Gherkin</code> is a language that can be understand by <code>Cucumber</code>. Itâ€™s a <code>Business Readable</code>, <code>Domain Specific Language</code>. Very easy to understand what the functional want to do.    </p><p>The <code>Gherkin</code> has two purpose, documention and automated test. The structure is Treetop grammer than is part of Cucumber codebase and use indentation to format it.   </p><p> The <code>Gherkin</code> has two conventions:</p><ul><li>Single <code>Gherkin</code> source file contains a description of single feature.</li><li>The source file is feature extention file(<code>*.feature</code>).</li></ul><p>LikeÂ <code>YAML(Yet Another Markup Language)</code>, Gherkin is a line-oriented language that uses indentation to define structure. Most lines start with keyword. And you can start with a hash sign(#) to comment the text.</p><p>A Gherkin source file usually looks like this</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> 1: <span class="keyword">Feature</span>: Some terse yet descriptive text of what is desired</span><br><span class="line"> 2:   Textual description of the business value of this feature</span><br><span class="line"> 3:   <span class="keyword">Business</span> rules that govern the scope of the feature</span><br><span class="line"> 4:   Any additional information that will make the feature easier to understand</span><br><span class="line"> 5: </span><br><span class="line"> 6:   <span class="keyword">Scenario</span>: Some determinable business situation</span><br><span class="line"> 7:     <span class="keyword">Given</span> some precondition</span><br><span class="line"> 8:       <span class="keyword">And</span> some other precondition</span><br><span class="line"> 9:      <span class="keyword">When</span> some action by the actor</span><br><span class="line">10:       <span class="keyword">And</span> some other action</span><br><span class="line">11:       <span class="keyword">And</span> yet another action</span><br><span class="line">12:      <span class="keyword">Then</span> some testable outcome is achieved</span><br><span class="line">13:       <span class="keyword">And</span> something else we can check happens too</span><br><span class="line">14: </span><br><span class="line">15:   <span class="keyword">Scenario</span>: A different situation</span><br></pre></td></tr></table></figure><p>Above the codes, Itâ€™s very similar with <code>Given-When-Then</code> the <code>Feature</code>, <code>Scenario</code>, <code>Given</code>, <code>And</code>, <code>When</code>, <code>Then</code> all are keywords of <code>Gherkin</code>.</p>]]></content>
      
      
      <categories>
          
          <category> Testing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Cucumber </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>What is Ractive.js</title>
      <link href="/2014/12/19/what-is-ractive-dot-js/"/>
      <url>/2014/12/19/what-is-ractive-dot-js/</url>
      
        <content type="html"><![CDATA[<p><code>Ractive.js</code> is a <code>template-driven</code> UI library, it transforms your templates into blueprints for application that are interative by default. <code>Ractive.js</code> is very similar with <code>AngularJS</code>, and it supports <code>Two-way binding</code>, <code>animations</code> as well. Another powerfull feature is <code>SVG</code> support.   </p><h3 id="Template-Data-UI"><a href="#Template-Data-UI" class="headerlink" title="Template + Data &#x3D; UI"></a>Template + Data &#x3D; UI</h3><p>You just need to prepare your html template and datas, and the <code>Ractive.js</code> will automatically to combine them then give you what you want. Whe you change your datas, it intelligently updates the real DOM.   </p><h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><p>First, you need to include <code>Ractive.js</code> to your application. Just like include other javascript librarys easily. You can download it to local and then include it. And if you want include latest version, you just put below codes to your project.   </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&#x27;http://cdn.ractivejs.org/latest/ractive.js&#x27;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><span id="more"></span><p>Second, we define a container that we want to render. Letâ€™s give it id container.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>And third, just need to define a template. Load template in many ways, for example we can use ajax call to get the template string. and here, we use script tag to include the template.  </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">&quot;template&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/ractive&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span> <span class="attr">height</span>=<span class="string">&quot;200&quot;</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">   <span class="tag">&lt;<span class="name">rect</span> <span class="attr">fill</span>=<span class="string">&quot;lightblue&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100%&quot;</span>/&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">   <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">&quot;25%&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">r</span>=<span class="string">&quot;\&#123;\&#123;10+temperature&#125;&#125;&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;gold&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;yellow&quot;</span> </span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="language-handlebars">           <span class="attr">opacity</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;&#123;<span class="name">0.4</span>+temperature/100&#125;&#125;</span><span class="language-xml"><span class="tag"><span class="string">&quot;</span>/&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">   <span class="tag">&lt;<span class="name">text</span> <span class="attr">x</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">y</span>=<span class="string">&quot;65%&quot;</span> <span class="attr">font-size</span>=<span class="string">&quot;80&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;white&quot;</span>&gt;</span>\&#123;\&#123;temperature&#125;&#125;â„ƒ<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><em>Note:</em> donâ€™t mind reverse slash symbol. we just use it to transfer meaning. And when you data binding you donâ€™t need to add it. remember that!   </p><p>As above. We define a svg tag and it contains rectangle,circle shape and text. The circleâ€™s radius bind the data NaNï¼Œso the radius will update with ÃŸ10 plus temperature when the temperature changed. As we can see the temperature has binded the data as well.   </p><p>And last step, Letâ€™s combine the template and data with <code>Ractive.js</code>. the code as below:   </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> ractive = <span class="keyword">new</span> <span class="title class_">Ractive</span>(&#123;</span><br><span class="line"> <span class="comment">// The el option can be a node, an ID, or a CSS selector.</span></span><br><span class="line">    <span class="attr">el</span>:<span class="string">&#x27;container&#x27;</span>,</span><br><span class="line">    <span class="comment">// We could pass in a string, but for the sake of convenience</span></span><br><span class="line">    <span class="comment">// we&#x27;re passing the ID of the &lt;script&gt; tag above.</span></span><br><span class="line">    <span class="attr">template</span>:<span class="string">&#x27;#template&#x27;</span>,</span><br><span class="line">    <span class="comment">// Here, we&#x27;re passing in some initial data</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">temperature</span>:<span class="number">50</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">So the style as we can see below:   </span></span><br><span class="line"><span class="string">&#123;% img /assets/images/legacy/ractive-svg-test.png 400 200 %&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Now, we can change the temperature data and let `</span><span class="title class_">Ractive</span>.<span class="property">js</span><span class="string">` to update the DOM automatically. So there we increase the temperature by 1 per 100 millisecond, and when the temperature larger than 60 then reset it to 0.   </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span> javascript</span><br><span class="line"> <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> temp = ractive.<span class="title function_">get</span>(<span class="string">&#x27;temperature&#x27;</span>);</span><br><span class="line">    temp = temp &gt;= <span class="number">60</span> ? <span class="number">0</span> : ++temp; </span><br><span class="line">    ractive.<span class="title function_">set</span>(<span class="string">&#x27;temperature&#x27;</span>,temp);</span><br><span class="line"> &#125;,<span class="number">100</span>);</span><br></pre></td></tr></table></figure><p>So the radius of circle and the text will automatically changed. This is <code>Ractive.js</code> simple usage. Hopeful you like it. </p>]]></content>
      
      
      <categories>
          
          <category> Frontend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>how to learn any language in six months</title>
      <link href="/2014/12/18/how-to-learn-any-language-in-six-months/"/>
      <url>/2014/12/18/how-to-learn-any-language-in-six-months/</url>
      
        <content type="html"><![CDATA[<p>Just see a video that teachs you how to learn any language in six months on youtube. Itâ€™s created by Chris Lonsdale. I think itâ€™s very interesting and I believe those ways will be useful for us. So thatâ€™s why I note it.</p><h3 id="The-Big-Question"><a href="#The-Big-Question" class="headerlink" title="The Big Question"></a>The Big Question</h3><ul><li>How can normal adults learn a <code>NEW LANGUAGE</code> <strong>Quickly</strong>, <strong>Easily</strong>, <strong>Effectively</strong>?</li></ul><h3 id="How"><a href="#How" class="headerlink" title="How"></a>How</h3><ul><li>There have <strong><code>5 Principles</code></strong> and <strong><code>7 Actions</code></strong>.    </li><li>The two things that really donâ€™t matter:<ul><li><del>Talent</del></li><li><del>Immersion per se</del><span id="more"></span></li></ul></li></ul><h3 id="5-Principles-of-Rapid-Language-Acquisition"><a href="#5-Principles-of-Rapid-Language-Acquisition" class="headerlink" title="5 Principles of Rapid Language Acquisition"></a>5 Principles of Rapid Language Acquisition</h3><p>There have four words you need to keep in your mind: <strong>Meaning</strong>, <strong>Relevance</strong>, <strong>Attention</strong>, <strong>Memory</strong>   </p><img src="/assets/images/legacy/learning-language-4-words.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/learning-language-4-words.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="300" height="200"><h4 id="Principle-1"><a href="#Principle-1" class="headerlink" title="Principle #1:"></a>Principle #1:</h4><p><strong><code>Focus</code> on language content that is <code>relevant</code> to you.</strong></p><h4 id="Principle-2"><a href="#Principle-2" class="headerlink" title="Principle #2:"></a>Principle #2:</h4><p><strong>User your <code>New Language</code> as a <code>Tool</code> to <code>Communicate</code> â€¦ from Day 1</strong></p><h4 id="Principle-3"><a href="#Principle-3" class="headerlink" title="Principle #3:"></a>Principle #3:</h4><p><strong>When you first <code>UNDERSTAND</code> the <code>MESSAGE</code>, you will unconsciously <code>ACQUIRE</code> the Language</strong></p><img src="/assets/images/legacy/comprehension-is-key.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/comprehension-is-key.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="400" height="300"><p><em>Note:</em> <strong>Language learning is NOT ABOUT KNOWLEGEâ€¦, Itâ€™s about <code>Physiological Training</code></strong></p><h4 id="Principle-4"><a href="#Principle-4" class="headerlink" title="Principle #4:"></a>Principle #4:</h4><p><strong>Language learning is about <code>Physiological Training</code></strong>   </p><ul><li><em>Talking takes muscleâ€¦ when your <code>FACE HURTS</code>, you are doing it <code>RIGHT</code></em></li></ul><h4 id="Principle-5"><a href="#Principle-5" class="headerlink" title="Principle #5:"></a>Principle #5:</h4><p><strong>Psycho-Physiological <code>STATE Matters</code></strong>   </p><ul><li><em>Very important ideaâ€¦ You Must Learn to Tolerate Ambiguity</em></li></ul><h3 id="7-Actions-for-Rapid-Language-Acquisition"><a href="#7-Actions-for-Rapid-Language-Acquisition" class="headerlink" title="7 Actions for Rapid Language Acquisition"></a>7 Actions for Rapid Language Acquisition</h3><h4 id="Action-1"><a href="#Action-1" class="headerlink" title="Action #1:"></a>Action #1:</h4><p><strong><code>Listen A LOT!</code></strong>   </p><ul><li><em>Brain Soaking with New Language</em></li></ul><h4 id="Action-2"><a href="#Action-2" class="headerlink" title="Action #2:"></a>Action #2:</h4><p><strong>Focus on getting the meaning <code>FIRST</code> (before the words)</strong>   </p><ul><li><em>Use Body Language</em>   </li><li><em>Use Patterns You Already Know</em></li></ul><h4 id="Action-3"><a href="#Action-3" class="headerlink" title="Action #3:"></a>Action #3:</h4><p><strong>Start Mixing!</strong>   </p><ul><li><em>Soâ€¦ get creativeâ€¦ start mixing!</em></li></ul><img src="/assets/images/legacy/words-mixing.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/words-mixing.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="400" height="300"><h4 id="Action-4"><a href="#Action-4" class="headerlink" title="Action #4:"></a>Action #4:</h4><p>*<em>Focus on the <code>Core</code></em>    </p><img src="/assets/images/legacy/high-frequency-language.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/high-frequency-language.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="400" height="300"><h5 id="Week-1-The-Tool-Box"><a href="#Week-1-The-Tool-Box" class="headerlink" title="Week 1 (The Tool Box)"></a>Week 1 (The Tool Box)</h5><p>-What is this?<br>-How do you say?<br>-I donâ€™t understandâ€¦<br><em>All in the TARGET LANGUAGE</em></p><h5 id="Week-2-3-Pronouns-Common-Verbs-Adjectives"><a href="#Week-2-3-Pronouns-Common-Verbs-Adjectives" class="headerlink" title="Week 2-3 (Pronouns, Common Verbs, Adjectives)"></a>Week 2-3 (Pronouns, Common Verbs, Adjectives)</h5><p>-you<br>-that<br>-me<br>-give<br>-hot<br>-â€¦</p><h5 id="Week-4-Glue-Words"><a href="#Week-4-Glue-Words" class="headerlink" title="Week 4 (Glue Words)"></a>Week 4 (Glue Words)</h5><p>-But<br>-And<br>-Even though<br>-â€¦   </p><h4 id="Action-5"><a href="#Action-5" class="headerlink" title="Action #5"></a>Action #5</h4><p><strong>Get a Language Parent</strong><br>Language Parent â€œRulesâ€:        </p><ul><li>Works to understand what you are saying   </li><li>Does not correct mistake   </li><li>Confirms understanding by using correct language   </li><li>Uses words the learner knows</li></ul><h4 id="Action-6"><a href="#Action-6" class="headerlink" title="Action #6"></a>Action #6</h4><p><strong>Copy the <code>Face</code></strong></p><h4 id="Action-7"><a href="#Action-7" class="headerlink" title="Action #7"></a>Action #7</h4><p><strong><code>Direct Connect</code> to Mental Images</strong>      </p><img src="/assets/images/legacy/direct-connect-mental-image.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/direct-connect-mental-image.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" class=" lazyload placeholder" width="300" height="200"><p><em>Note: The original video address is <a href="https://www.youtube.com/watch?v=d0yGdNEWdn0">https://www.youtube.com/watch?v=d0yGdNEWdn0</a></em>   </p>]]></content>
      
      
      <categories>
          
          <category> Others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SoftSkill </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Guava - Ordering</title>
      <link href="/2014/12/12/guava-ordering/"/>
      <url>/2014/12/12/guava-ordering/</url>
      
        <content type="html"><![CDATA[<p><code>Ordering</code> is Guavaâ€™s fluent Comparator class and implements Comparator interface. It can be used to build complex comparators and apply them to collections of objects. </p><p>Okay, so letâ€™s getting started. Firstly, we declared a <code>String</code> type List:   </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> List&lt;String&gt; locations = Lists.newArrayList(</span><br><span class="line">        <span class="string">&quot;Guang zhou&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Cheng du&quot;</span>,</span><br><span class="line">        <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Shang hai&quot;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>We will use this locations variable later.</p><span id="more"></span><p><code>natural()</code><br>Use natural ordering for comparatable types. such as number from small to large. date from start to end. It is static method.   </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// use natural comparator, such as a -&gt; z</span></span><br><span class="line"><span class="comment">// so the result is: [, Cheng du, Guang zhou, Shang hai]</span></span><br><span class="line">System.out.println(Ordering.natural().sortedCopy(locations));</span><br></pre></td></tr></table></figure><p><code>sortedCopy(Iterable)</code><br>Return a sorted copy of the specified elements as a List.<br>We create a customized <code>Ordering</code> that sorted by the length of element from small to large. Letâ€™s get the code:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Ordering&lt;String&gt; <span class="title function_">getCustomzieStringOrder</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Ordering</span>&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String first, String second)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Ints.compare(first.length(), second.length());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Order the locations list with our new customize <code>Ordering</code>:   </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Ordering&lt;String&gt; byLengthOrdering = getCustomzieStringOrder();</span><br><span class="line"></span><br><span class="line">   <span class="comment">// use natural comparator, such as a -&gt; z</span></span><br><span class="line">   <span class="comment">// so the result is: [, Cheng du, Shang hai, Guang zhou]</span></span><br><span class="line">   System.out.println(byLengthOrdering.sortedCopy(locations));</span><br></pre></td></tr></table></figure><p><code>isOrdered(Iterable)</code><br>Return a Boolean variable that can describe the Iterable if sorted.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// will return false. because the locations array is not sorted.</span></span><br><span class="line">   System.out.println(byLengthOrdering.isOrdered(locations));</span><br></pre></td></tr></table></figure><p><code>reverse()</code><br>Return the reverse <code>Ordering</code>.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// reverse customize comparator.</span></span><br><span class="line"><span class="comment">// so the result is: [Guang zhou, Shang hai, Cheng du, ]</span></span><br><span class="line">System.out.println(byLengthOrdering.reverse().sortedCopy(locations));</span><br></pre></td></tr></table></figure><p><code>nullsFirst()</code><br>Return an <code>Ordering</code> that will put the null object at the first.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add null object to the locations array.</span></span><br><span class="line">locations.add(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// null obejct will at first.</span></span><br><span class="line"><span class="comment">// so the result is : [null, , Cheng du, Shang hai, Guang zhou]</span></span><br><span class="line">System.out.println(byLengthOrdering.nullsFirst().sortedCopy(locations));</span><br></pre></td></tr></table></figure><p><code>nullsLast()</code><br>Return an <code>Ordering</code> that will put the null object at the last.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// null object will at last.</span></span><br><span class="line">   <span class="comment">// the result is : [, Cheng du, Shang hai, Guang zhou, null]</span></span><br><span class="line">   System.out.println(byLengthOrdering.nullsLast().sortedCopy(locations));</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// will throw NullPointerException, because the location contains null object.</span></span><br><span class="line">   <span class="comment">// and here doesn&#x27;t have nullsFirst() or nullsLast() to deal with null object.</span></span><br><span class="line">   byLengthOrdering.sortedCopy(locations);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// remove the null object.</span></span><br><span class="line">   locations.remove(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure><p><code>compound()</code><br>Returns an <code>Ordering</code> which uses the specified Comparator to â€œbreak ties.â€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the &quot;AAAAAAAA&quot; length is equal to &quot;Cheng du&quot; length. (8 characters)</span></span><br><span class="line"><span class="comment">// and it will be appended at last.</span></span><br><span class="line">locations.add(<span class="string">&quot;AAAAAAAA&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// use natrual ordering with second comparator to deal with equal situation.</span></span><br><span class="line">Ordering&lt;String&gt; compoundOrdering = byLengthOrdering.compound(Ordering.natural());</span><br><span class="line"></span><br><span class="line"><span class="comment">// the result will be : [, AAAAAAAA, Cheng du, Shang hai, Guang zhou]</span></span><br><span class="line">System.out.println(compoundOrdering.sortedCopy(locations));</span><br></pre></td></tr></table></figure><p><code>onResultOf(Fuction)</code><br>Returns an Ordering which orders values by applying the function to them and then comparing the results using the original Ordering.<br>Declaring a Foo class:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">      <span class="meta">@Nullable</span></span><br><span class="line">      <span class="keyword">private</span> Integer sortedBy;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">private</span> String nonSortedBy;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="title function_">Foo</span><span class="params">(Integer sortedBy, String nonSortedBy)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.sortedBy = sortedBy;</span><br><span class="line">          <span class="built_in">this</span>.nonSortedBy = nonSortedBy;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">getNonSortedBy</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> nonSortedBy;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNonSortedBy</span><span class="params">(String nonSortedBy)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.nonSortedBy = nonSortedBy;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> Integer <span class="title function_">getSortedBy</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> sortedBy;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSortedBy</span><span class="params">(<span class="type">int</span> sortedBy)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.sortedBy = sortedBy;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> String.format(<span class="string">&quot;%s+%s&quot;</span>, <span class="built_in">this</span>.sortedBy, <span class="built_in">this</span>.nonSortedBy);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>Declaring a new List with Foo class type:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> List&lt;Foo&gt; fooList = Lists.newArrayList(</span><br><span class="line">       <span class="keyword">new</span> <span class="title class_">Foo</span>(<span class="literal">null</span>, <span class="string">&quot;abc&quot;</span>),</span><br><span class="line">       <span class="keyword">new</span> <span class="title class_">Foo</span>(<span class="number">23</span>, <span class="string">&quot;abc&quot;</span>),</span><br><span class="line">       <span class="keyword">new</span> <span class="title class_">Foo</span>(<span class="number">10</span>, <span class="string">&quot;abc&quot;</span>)</span><br><span class="line">   );</span><br></pre></td></tr></table></figure><p>Define a new function that will return an customized <code>Ordering</code>:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Ordering&lt;Foo&gt; <span class="title function_">getNaturalFooOrder</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Ordering.natural().nullsFirst().onResultOf(<span class="keyword">new</span> <span class="title class_">Function</span>&lt;Foo, Integer&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Integer <span class="title function_">apply</span><span class="params">(<span class="meta">@Nullable</span> Foo foo)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> foo.getSortedBy();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Ordering&lt;Foo&gt; fooOrdering = getNaturalFooOrder();</span><br><span class="line"><span class="comment">// the result will be [null+abc, 10+abc, 23+abc]</span></span><br><span class="line">System.out.println(fooOrdering.sortedCopy(fooList));</span><br></pre></td></tr></table></figure><p><code>greatestOf(Iterable iterable, int k)</code><br>Returns the k greatest elements of the specified iterable, according to this ordering, in order from greatest to least. Not necessarily stable.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the result will be [23+abc]</span></span><br><span class="line">System.out.println(fooOrdering.greatestOf(fooList, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// the result will be [23+abc, 10+abc]</span></span><br><span class="line">System.out.println(fooOrdering.greatestOf(fooList, <span class="number">2</span>));</span><br></pre></td></tr></table></figure><p><code>leastOf(Iterable iterable, int k)</code><br>Returns the k least elements of the specified iterable, according to this ordering, in order from least to greatest. Not necessarily stable.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the result will be [null+abc, 10+abc]</span></span><br><span class="line">System.out.println(fooOrdering.leastOf(fooList, <span class="number">2</span>));</span><br></pre></td></tr></table></figure><p><code>min(Iterable)</code><br>Returns the minimum element of the specified Iterable. Throws a NoSuchElementException if the Iterable is empty.   </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the result will be null+abc</span></span><br><span class="line">System.out.println(fooOrdering.min(fooList));</span><br></pre></td></tr></table></figure><p><code>max(Iterable)</code><br>Returns the maximum element of the specified Iterable. Throws a NoSuchElementException if the Iterable is empty.   </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the result will be 23+abc</span></span><br><span class="line">System.out.println(fooOrdering.max(fooList));</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Guava </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSP - Custom Tag</title>
      <link href="/2014/12/01/jsp-custom-tag/"/>
      <url>/2014/12/01/jsp-custom-tag/</url>
      
        <content type="html"><![CDATA[<p>Custom Tag is a user-defined JSP language element. When it is contained in JSP page and it will translate into a servlet, the custom tag is converted to opertions on an object called a tag handler. The web container then invokes those operations when the JSP pageâ€™s servlet is executed.   </p><p>If we want to create a custom tag, what we need to do is simply extend <code>SimpleTagSupport</code> class and override the <code>doTag()</code> method, where you can place your code to generate content for the tag.   </p><p>Letâ€™s getting started to create a custom tag now.<br>As you can see below, consider we want to create two tag, one is user tag with name and isMale attribute, another is system tag with size attribute.</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;custom:user name=<span class="string">&quot;user1&quot;</span> isMale=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">&lt;custom:system size=<span class="string">&quot;1024&quot;</span>/&gt;</span><br></pre></td></tr></table></figure><span id="more"></span><p>So firstly what we need to do is create two java classes that act as a tag handler for each other tag. and them must extends <code>SimpleTagSupport</code> class.   </p><figure class="highlight java"><figcaption><span>UserTag.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jsp.custom.tag;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.JspException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.JspWriter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.SimpleTagSupport;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.StringWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by yushi on 12/1/14.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserTag</span> <span class="keyword">extends</span> <span class="title class_">SimpleTagSupport</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Boolean isMale;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">StringWriter</span> <span class="variable">sw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringWriter</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">JspWriter</span> <span class="variable">out</span> <span class="operator">=</span> getJspContext().getOut();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// print name info with name attribute</span></span><br><span class="line">        out.println(name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// print gender info via isMale attribute</span></span><br><span class="line">        out.println(isMale ? <span class="string">&quot;I&#x27;m male!&quot;</span> : <span class="string">&quot;I&#x27;m female!&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (birthday != <span class="literal">null</span>) &#123;</span><br><span class="line">            out.println(String.format(<span class="string">&quot;My birthday is %s&quot;</span>, birthday.toString()));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// print body text with body content</span></span><br><span class="line">        getJspBody().invoke(sw);</span><br><span class="line">        getJspContext().getOut().println(sw.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setIsMale</span><span class="params">(Boolean isMale)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.isMale = isMale;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBirthday</span><span class="params">(Date birthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>SystemTag.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.jsp.custom.tag;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.SimpleTagSupport;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by yushi on 12/2/14.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SystemTag</span> <span class="keyword">extends</span> <span class="title class_">SimpleTagSupport</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doTag</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        getJspContext().getOut().println(String.valueOf(String.format(<span class="string">&quot;The system&#x27;s size is: %s&quot;</span>, String.valueOf(size))));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSize</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Above two class just override the <code>doTag()</code> method and take the current <code>JspContext</code> object using <code>getJspContext()</code> method, and then send message content to the current <code>JspWriter</code> object.   </p><p>Secondly we need to create tld extention file. Itâ€™s a tag library file. let us see the codes.    </p><figure class="highlight xml"><figcaption><span>customTag.tld</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">taglib</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jsp-version</span>&gt;</span>2.0<span class="tag">&lt;/<span class="name">jsp-version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>custom tld<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>user<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.jsp.custom.tag.UserTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>tagdependent<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">required</span>&gt;</span>true<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">description</span>&gt;</span>user name<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- the type default is String if it is not specified --&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;type&gt;java.lang.String&lt;/type&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>isMale<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">required</span>&gt;</span>false<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">description</span>&gt;</span>the use is male or not male<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>java.lang.Boolean<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>birthday<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>java.util.Date<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tag</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>system<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>com.jsp.custom.tag.SystemTag<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>empty<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attribute</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>size<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">required</span>&gt;</span>false<span class="tag">&lt;/<span class="name">required</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">description</span>&gt;</span>the size of system<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Finally, we can use these both tags in our JSP page.</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;custom&quot;</span> uri=<span class="string">&quot;WEB-INF/customTag.tld&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;custom tag training&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;custom:user name=<span class="string">&quot;user1&quot;</span> isMale=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">        &lt;custom:system size=<span class="string">&quot;1024&quot;</span>/&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JSP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Guava -- Common Object Methods</title>
      <link href="/2014/11/27/guava-common-object-method/"/>
      <url>/2014/11/27/guava-common-object-method/</url>
      
        <content type="html"><![CDATA[<h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><p><code>Objects.equal(Object, Object)</code><br>Invoking this method then it will avoid the risking of NullPointerException when we need to compare two object whether they equal.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Objects.equal(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;a&quot;</span>); <span class="comment">// return true;</span></span><br><span class="line">Objects.equal(<span class="literal">null</span>, <span class="string">&quot;a&quot;</span>); <span class="comment">// return false;</span></span><br><span class="line">Objects.equal(<span class="literal">null</span>, <span class="literal">null</span>); <span class="comment">// return true;</span></span><br></pre></td></tr></table></figure><span id="more"></span><p><code>Objects.hashCode(Object, ....)</code><br>Generating hash code with multiple object will be simple. And it also can hash all fields of an Object to get more sensible code value.   </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// generate hash code with multi object</span></span><br><span class="line">Objects.hashCode(<span class="built_in">this</span>.intField, <span class="built_in">this</span>.charField, <span class="built_in">this</span>.stringField, <span class="built_in">this</span>.dateField); </span><br></pre></td></tr></table></figure><p><code>ComparisonChain</code><br>ComparisonChain is a fluent idiom and much more readable. less prone to accidental typos, and smart enough not to do more work than it must.<br>It only performs comparisons until it finds a non-zero result, after which it ignores further input.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectsTraining</span> <span class="variable">objectsTraining</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectsTraining</span>();</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> ComparisonChain.start()</span><br><span class="line">   .compare(<span class="built_in">this</span>.intField, objectsTraining.intField)</span><br><span class="line">             .compare(<span class="built_in">this</span>.stringField, objectsTraining.stringField)</span><br><span class="line">             .compare(<span class="built_in">this</span>.charField, objectsTraining.charField)</span><br><span class="line">             .compare(<span class="built_in">this</span>.dateField, objectsTraining.dateField)</span><br><span class="line">             .result();</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Guava </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Guava -- Preconditions</title>
      <link href="/2014/11/26/guava-preconditions/"/>
      <url>/2014/11/26/guava-preconditions/</url>
      
        <content type="html"><![CDATA[<p>Guava provides a number of precondition checking utilities. Itâ€™s <code>Preconditions</code> class. You can use it into your project.</p><h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><p><code>checkArgument(boolean)</code><br>Checks that the boolean is true. Use for validating arguments to methods.   </p><p><code>checkNotNull(T)</code><br>Checks that the value is not null. Returns the value directly, so you can use checkNotNull(value) inline. </p><span id="more"></span>  <p><code>checkElementIndex(int index, int size)</code><br>Checks that index is a valid element index into a list, string, or array with the specified size. An element index may range from 0 inclusive to size exclusive. You donâ€™t pass the list, string, or array directly; you just pass its size.<br>Returns index.   </p><p><code>checkPositionIndex(int index, int size)</code><br>Checks that index is a valid position index into a list, string, or array with the specified size. A position index may range from 0 inclusive to size inclusive. You donâ€™t pass the list, string, or array directly; you just pass its size.<br>Returns index.   </p><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">Preconditions.checkArgument(i &gt; <span class="number">5</span>, <span class="string">&quot;Argument %s is not larger than 5&quot;</span>, i);</span><br><span class="line"><span class="comment">// will throw IllegalArgumentException with &quot;Argument 3 is not larger than 5&quot;</span></span><br><span class="line"></span><br><span class="line">Preconditions.checkNotNull(i); <span class="comment">// return 3;</span></span><br><span class="line">Preconditions.checkNotNull(<span class="literal">null</span>); <span class="comment">// throw NullPointerException;</span></span><br><span class="line"></span><br><span class="line">Preconditions.checkElementIndex(i,<span class="number">4</span>); <span class="comment">// return 3</span></span><br><span class="line">Preconditions.checkElementIndex(i,<span class="number">3</span>); <span class="comment">// throw IndexOutOfBoundsException</span></span><br><span class="line"></span><br><span class="line">Preconditions.checkPositionIndex(i,<span class="number">3</span>); <span class="comment">// return 3</span></span><br><span class="line">Preconditions.checkPositionIndex(i,<span class="number">2</span>); <span class="comment">// throw IndexOutOfBoundsException</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Guava </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Guava -- Optional</title>
      <link href="/2014/11/21/guava-optional/"/>
      <url>/2014/11/21/guava-optional/</url>
      
        <content type="html"><![CDATA[<p><code>Optional&lt;T&gt;</code> is a way of replacing a nullable T reference with a non-null value. An Optional may either contain a non-null T reference (in which case we say the reference is â€œpresentâ€), or it may contain nothing (in which case we say the reference is â€œabsentâ€). It is never said to â€œcontain null.â€</p><span id="more"></span><h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><p><code>Optional.of(T)</code><br>Make an Optional containing the given non-null value, or fail fast on null.    </p><p><code>Optional.absent()</code><br>Return an absent Optional of some type.</p><p><code>Optional.fromNullable(T)</code><br>Turn the given possibly-null reference into an Optional, treating non-null as present and null as absent.   </p><p><code>boolean isPresent()</code><br>Returns true if this Optional contains a non-null instance.</p><p><code>T get()</code><br>Returns the contained T instance, which must be present; otherwise, throws an IllegalStateException.</p><p><code>T or()</code><br>Returns the present value in this Optional, or if there is none, returns the specified default.</p><p><code>T orNull()</code><br>Returns the present value in this Optional, or if there is none, returns null. The inverse operation of fromNullable.</p><h3 id="Example"><a href="#Example" class="headerlink" title="Example:"></a>Example:</h3><pre><code class="java">Optional&lt;Integer&gt; numberOptional = Optional.of(100);numberOptional.isPresent(); //return truenumberOptional.get(); //return 100numberOptional = Optional.absent();numberOptional.isPresent(); // return falsenumberOptional.or(0); //return 0;numberOptional.orNull(); //return null;numberOptional = Optional.fromNullable(1);numberOptional.get(); //return 1;numberOptional = Optional.fromNullable(null);numberOptional.isPresent(); //return false;numberOptional.orNull(); //return null;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Backend </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Guava </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The lifecycle of Android Activity</title>
      <link href="/2014/11/17/the-lifecycle-of-android-activity/"/>
      <url>/2014/11/17/the-lifecycle-of-android-activity/</url>
      
        <content type="html"><![CDATA[<p><img src="/assets/images/legacy/android-lifecycle.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/android-lifecycle.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="lifecycle of activity"></p>]]></content>
      
      
      <categories>
          
          <category> Mobile </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Building blocks of Android Application</title>
      <link href="/2014/11/13/building-blocks-of-android-application/"/>
      <url>/2014/11/13/building-blocks-of-android-application/</url>
      
        <content type="html"><![CDATA[<p>There are four builidng blocks for Android Application:   </p><ul><li><strong><code>Activity</code></strong></li><li><strong><code>Intent Receiver</code></strong></li><li><strong><code>Service</code></strong></li><li><strong><code>Content Provider</code></strong></li></ul><p>But Not every application needs have all them.   </p><p><code>AndroidManifest.xml</code> is XML file, it contains some information that where you declare the components of your application and what their capabilities and requirements are. </p><span id="more"></span>  <h3 id="Activity"><a href="#Activity" class="headerlink" title="Activity"></a>Activity</h3><p>Activities are the most common of the four Android building blocks. An activity is usually a single screen in your application. Each activity is implemented as single class that extends the Activity base class.    </p><p>When a new screen is opened, the previous screen is paused and put onto a history stack. The user can navigate backward through previously opened screens in the history.</p><h3 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h3><p>Android uses a special class called <code>Intent</code> to move from screen to screen. Intent describe what an application wants done. The two most important parts of the intent data structure are the action and the data to act upon.    </p><p>Typical values for actioin are <code>MAIN</code> (the front door of the application), VIEW, PICK, EDIT, etc. The data is expressed as a Uniform Resource Indicator (URI).    </p><blockquote><p>new Intent(android.content.Intent.VIEW_ACTION, ContentURI.create(â€œ<a href="http://anddev.org/">http://anddev.org</a>â€œ);</p></blockquote><h3 id="Intent-Filter"><a href="#Intent-Filter" class="headerlink" title="Intent Filter"></a>Intent Filter</h3><p>Navigating from screen to screen is accomplished by resolving intents. An activity calls <code>startActivity(myIntent)</code> to navigation. The system then looks at the intent filters for all installed applications and picks activity whose intent filters best matches <code>myIntent</code>. And the new activity is informed by the intent which cause it to be launched.   </p><h3 id="Intent-Receiver"><a href="#Intent-Receiver" class="headerlink" title="Intent Receiver"></a>Intent Receiver</h3><p>You can use an IntentReceiver when you want code in your application to execute in reaction to an external event, for example, when the phone rings, or when the data network is available, or when itâ€™s midnight. Intent receivers do not display UI.   </p><p>Intent receivers can be registered in the <code>AndroidManifest.xml</code> file, and also you can register it in your code with <code>Context.registerReceiver()</code>.    </p><p>Applications can also send their own intent broadcasts to others with <code>Context.broadcastIntent()</code>.   </p><h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><p>A <code>Service</code> is long-lived and runs without a UI, such as media player.   </p><p>You can start a service with <code>Context.startService()</code> to run in the background. And you can connect to a service with the <code>Context.bindService()</code> method. When you connected to a service. you can communicate with it through an interface exposed by the service. For the music service you can pause and rewind it etc.   </p><h3 id="ContentProvider"><a href="#ContentProvider" class="headerlink" title="ContentProvider"></a>ContentProvider</h3><p>Applications can store their data in files, a SQLite database, preferences or any other mechanism that makes sense.   </p><p>A content provider is useful if you want your applicationâ€™s data to be shared with other applications.    </p><p>A content provider is a class that implements a standard set of methods to let other applications store and retrieve the type of data that is handled by that content provider.</p>]]></content>
      
      
      <categories>
          
          <category> Mobile </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual git guide (technical notes)</title>
      <link href="/2014/08/07/visual-git-guide-technical-notes/"/>
      <url>/2014/08/07/visual-git-guide-technical-notes/</url>
      
        <content type="html"><![CDATA[<p><strong>Note:</strong> the original website address in <a href="http://marklodato.github.io/visual-git-guide/index-en.html?no-svg">here</a></p><h3 id="Technical-notes"><a href="#Technical-notes" class="headerlink" title="Technical notes"></a>Technical notes</h3><p>The contents of files are not actually stored in the index (.git&#x2F;index) or in commit objects. Rather, each file is stored in the object database (.git&#x2F;objects) as a blob, identified by its SHA-1 hash. The index file lists the filenames along with the identifier of the associated blob, as well as some other data. For commits, there is an additional data type, a tree, also identified by its hash. Trees correspond to directories in the working directory, and contain a list of trees and blobs corresponding to each filename within that directory. Each commit stores the identifier of its top-level tree, which in turn contains all of the blobs and other trees associated with that commit.   </p><span id="more"></span><p>If you make a commit using a detached HEAD, the last commit really is referenced by something: the reflog for HEAD. However, this will expire after a while, so the commit will eventually be garbage collected, similar to commits discarded with <code>git commit --amend</code> or <code>git rebase</code>.</p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual git guide (reset command)</title>
      <link href="/2014/07/07/visual-git-guide-reset-command/"/>
      <url>/2014/07/07/visual-git-guide-reset-command/</url>
      
        <content type="html"><![CDATA[<p><strong>Note:</strong> the original website address in <a href="http://marklodato.github.io/visual-git-guide/index-en.html?no-svg">here</a></p><h3 id="Reset-command"><a href="#Reset-command" class="headerlink" title="Reset command"></a>Reset command</h3><p><strong>The reset command moves the current branch to another position</strong>, and optionally updates the stage and the working directory. It also is used to copy files from the history to the stage without touching the working directory.   </p><p>If a commit is given with no filenames, the current branch is moved to that commit, and then the stage is updated to match this commit. If â€“hard is given, the working directory is also updated. If â€“soft is given, neither is updated.</p><span id="more"></span>   <p><img src="/assets/images/legacy/reset-commit.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/reset-commit.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="reset-commit"></p><p>If a commit is not given, it defaults to HEAD. In this case, the branch is not moved, but the stage (and optionally the working directory, if â€“hard is given) are reset to the contents of the last commit.   </p><p><img src="/assets/images/legacy/reset.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/reset.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="reset"></p><p>If a filename (and&#x2F;or -p) is given, then the command works similarly to checkout with a filename, except only the stage (and not the working directory) is updated. (You may also specify the commit from which to take files, rather than HEAD.)</p><p><img src="/assets/images/legacy/reset-files.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/reset-files.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="reset-files"></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual git guide (rebase command)</title>
      <link href="/2014/06/13/visual-git-guide-rebase-command/"/>
      <url>/2014/06/13/visual-git-guide-rebase-command/</url>
      
        <content type="html"><![CDATA[<p><strong>Note:</strong> the original website address in <a href="http://marklodato.github.io/visual-git-guide/index-en.html?no-svg">here</a></p><h3 id="Rebase-command"><a href="#Rebase-command" class="headerlink" title="Rebase command"></a>Rebase command</h3><p>A rebase is an alternative to a merge for combining multiple branches. Whereas a merge creates a single commit with two parents, leaving a non-linear history, a rebase replays the commits from the current branch onto another, leaving a linear history. <em>In essence, this is an automated way of performing several cherry-picks in a row</em>.</p><span id="more"></span><p><img src="/assets/images/legacy/rebase.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/rebase.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="rebase"></p><p>The above command takes all the commits that exist in topic but not in master (namely 169a6 and 2c33a), replays them onto master, and then moves the branch head to the new tip. Note that the old commits will be garbage collected if they are no longer referenced.    </p><p>To limit how far back to go, use the â€“onto option. The following command replays onto master the most recent commits on the current branch since 169a6 (exclusive), namely 2c33a.   </p><p><img src="/assets/images/legacy/rebase-onto.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/rebase-onto.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="rebase-onto"></p><p>There is also <code>git rebase --interactive</code>, which allows one to do more complicated things than simply replaying commits, namely dropping, reordering, modifying, and squashing commits. There is no obvious picture to draw for this; see git-rebase(1) for more details.</p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual git guide (merge command)</title>
      <link href="/2014/06/11/visual-git-guide-merge-command/"/>
      <url>/2014/06/11/visual-git-guide-merge-command/</url>
      
        <content type="html"><![CDATA[<p><strong>Note:</strong> the original website address in <a href="http://marklodato.github.io/visual-git-guide/index-en.html?no-svg">here</a></p><h3 id="Merge-command"><a href="#Merge-command" class="headerlink" title="Merge command"></a>Merge command</h3><p>A merge creates a new commit that incorporates changes from other commits. Before merging, the stage must match the current commit. The trivial case is if the other commit is an ancestor of the current commit, in which case nothing is done. The next most simple is if the current commit is an ancestor of the other commit. This results in a fast-forward merge. The reference is simply moved, and then the new commit is checked out.  </p><span id="more"></span> <p><img src="/assets/images/legacy/merge-ff.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/merge-ff.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="merge-ff"></p><p>Otherwise, a â€œrealâ€ merge must occur. You can choose other strategies, but the default is to perform a â€œrecursiveâ€ merge, which basically takes the current commit (ed489 below), the other commit (33104), and their common ancestor (b325c), and performs a three-way merge. The result is saved to the working directory and the stage, and then a commit occurs, with an extra parent (33104) for the new commit.   </p><p><img src="/assets/images/legacy/merge.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/merge.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="merge"></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual git guide (diff command)</title>
      <link href="/2014/05/20/visual-git-guide-diff-command/"/>
      <url>/2014/05/20/visual-git-guide-diff-command/</url>
      
        <content type="html"><![CDATA[<p><strong>Note:</strong> the original website address is <a href="http://marklodato.github.io/visual-git-guide/index-en.html?no-svg">here</a></p><h3 id="Diff-Command"><a href="#Diff-Command" class="headerlink" title="Diff Command"></a>Diff Command</h3><p>There are various ways to look at differences between commits. Below are some common examples. Any of these commands can optionally take extra filename arguments that limit the differences to the named files.</p><span id="more"></span>   <p><img src="/assets/images/legacy/diff.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/diff.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="diff">   </p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual git guide (commit command)</title>
      <link href="/2014/05/03/visual-git-guide-commit-command/"/>
      <url>/2014/05/03/visual-git-guide-commit-command/</url>
      
        <content type="html"><![CDATA[<p><strong>Note:</strong> the original website address in <a href="http://marklodato.github.io/visual-git-guide/index-en.html?no-svg">here</a></p><h3 id="Commit-command"><a href="#Commit-command" class="headerlink" title="Commit command"></a>Commit command</h3><p>When you commit, git creates a new commit object using the files from the stage and sets the parent to the current commit. It then points the current branch to this new commit. In the image below, the current branch is <em>master</em>. Before the command was run, <em>master</em> pointed to ed489. Afterward, a new commit, f0cec, was created, with parent ed489, and then <em>master</em> was moved to the new commit.</p><span id="more"></span>   <p><img src="/assets/images/legacy/commit-master.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/commit-master.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="commit-master"></p><p>This same process happens even when the current branch is an ancestor of another. Below, a commit occurs on branch <em>maint</em>, which was an ancestor of <em>master</em>, resulting in 1800b. Afterward, <em>maint</em> is no longer an ancestor of <em>master</em>. To join the two histories, a <strong>merge</strong> (or <strong>rebase</strong>) will be necessary.   </p><p><img src="/assets/images/legacy/commit-maint.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/commit-maint.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="commit-maint"></p><p>Sometimes a mistake is made in a commit, but this is easy to correct with <code>git commit --amend</code>. When you use this command, git creates a new commit with the same parent as the current commit. (<em>The old commit will be discarded if nothing else references it.</em>)   </p><p><img src="/assets/images/legacy/commit-amend.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/commit-amend.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="commit-amend"></p><p>When <strong>HEAD</strong> is detached, commits work like normal, except no named branch gets updated. (<em>You can think of this as an anonymous branch.</em>)   </p><p><img src="/assets/images/legacy/commit-detached.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/commit-detached.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="commit-detached"></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual git guide (cherry pick command)</title>
      <link href="/2014/05/01/visual-git-guide-cherry-pick-command/"/>
      <url>/2014/05/01/visual-git-guide-cherry-pick-command/</url>
      
        <content type="html"><![CDATA[<p><strong>Note:</strong> the original website address in <a href="http://marklodato.github.io/visual-git-guide/index-en.html?no-svg">here</a></p><h3 id="Cherry-pick-command"><a href="#Cherry-pick-command" class="headerlink" title="Cherry-pick command"></a>Cherry-pick command</h3><p>The cherry-pick command â€œcopiesâ€ a commit, creating a new commit on the current branch with the same message and patch as another commit.   </p><p><img src="/assets/images/legacy/cherry-pick.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/cherry-pick.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="cherry-pick"></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>visual git guide (checkout command)</title>
      <link href="/2014/04/21/visual-git-guide-checkout-command/"/>
      <url>/2014/04/21/visual-git-guide-checkout-command/</url>
      
        <content type="html"><![CDATA[<p><strong>Note:</strong> the original website address in <a href="http://marklodato.github.io/visual-git-guide/index-en.html?no-svg">here</a></p><h3 id="Checkout"><a href="#Checkout" class="headerlink" title="Checkout"></a>Checkout</h3><p>The checkout command is used to copy files from the history (or stage) to the working directory, and to optionally switch branches.   </p><p>When a filename (and&#x2F;or -p) is given, git copies those files from the given commit to the stage and the working directory. For example, git checkout HEAD~ foo.c copies the file foo.c from the commit called HEAD~ (the parent of the current commit) to the working directory, and also stages it. (<em>If no commit name is given, files are copied from the stage.</em>) <strong>Note that the current branch is not changed.</strong>   </p><p><img src="/assets/images/legacy/checkout-files.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/checkout-files.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="checkout-files"></p><span id="more"></span><p>When a filename is not given but the reference is a (local) branch, HEAD is moved to that branch (that is, we â€œswitch toâ€ that branch), and then the stage and working directory are set to match the contents of that commit. Any file that exists in the new commit (a47c3 below) is copied; any file that exists in the old commit (ed489) but not in the new one is deleted; and any file that exists in neither is ignored.   </p><p><img src="/assets/images/legacy/checkout-branch.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/checkout-branch.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="checkout-branch"></p><p>When a filename is not given and the reference is not a (local) branch â€” say, it is a tag, a remote branch, a SHA-1 ID, or something like master~3 â€” we get an anonymous branch, called a detached HEAD. This is useful for jumping around the history. Say you want to compile version 1.6.6.1 of git. You can git checkout v1.6.6.1 (which is a tag, not a branch), compile, install, and then switch back to another branch, say git checkout master. However, committing works slightly differently with a detached HEAD; this is covered below.   </p><p><img src="/assets/images/legacy/checkout-detached.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/checkout-detached.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="checkout-detached"></p><p>Once you check out something else, say master, the commit is (presumably) no longer referenced by anything else, and gets lost. Note that after the command, there is nothing referencing 2eecb.       </p><p><img src="/assets/images/legacy/checkout-after-detached.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/checkout-after-detached.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="checkout-after-detached">   </p><p>If, on the other hand, you want to save this state, you can create a new named branch using <code>git checkout -b name</code>.   </p><p><img src="/assets/images/legacy/checkout-b-detached.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/checkout-b-detached.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="checkout-b-detached"></p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual git guide (conventions)</title>
      <link href="/2014/04/13/visual-git-guide-conventions/"/>
      <url>/2014/04/13/visual-git-guide-conventions/</url>
      
        <content type="html"><![CDATA[<p><strong>Note:</strong> the original website address is <a href="http://marklodato.github.io/visual-git-guide/index-en.html?no-svg">here</a></p><h3 id="Conventions"><a href="#Conventions" class="headerlink" title="Conventions"></a>Conventions</h3><p><img src="/assets/images/legacy/conventions.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/conventions.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="conventions">   </p><span id="more"></span><p>Commits are shown in green as 5-character IDs, and they point to their parents. Branches are shown in orange, and they point to particular commits.The current branch is identified by the special reference HEAD, which is â€œattachedâ€ to that branch. In this image, the five latest commits are shown, with ed489 being the most recent. master (the current branch) points to this commit, while maint (another branch) points to an ancestor of masterâ€™s commit.</p>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Visual git guide (basic usage)</title>
      <link href="/2014/03/03/visual-git-guide-basic-usage/"/>
      <url>/2014/03/03/visual-git-guide-basic-usage/</url>
      
        <content type="html"><![CDATA[<p><strong>Note:</strong> the original website address is <a href="http://marklodato.github.io/visual-git-guide/index-en.html?no-svg">here</a></p><h3 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h3><p><img src="/assets/images/legacy/basic-usage.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/basic-usage.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="basic-usage"></p><p>The four commands above copy files between the working directory, the stage (also called the index), and the history (in the form of commits).</p><span id="more"></span><ul><li><p><code>git add [files]</code> copies files (at their current state) to the stage.</p></li><li><p><code>git commit</code> saves a snapshot of the stage as a commit.</p></li><li><p><code>git reset -- [files]</code> unstages files; that is, it copies files from the latest commit to the stage. Use this command to â€œundoâ€ a <em>git add files</em>. You can also <em>git reset</em> to unstage everything.</p></li><li><p><code>git checkout -- [files]</code> copies files from the stage to the working directory. Use this to throw away local changes.</p></li></ul><p>You can use <code>git reset -p</code>, <code>git checkout -p</code>, or <code>git add -p</code> instead of (or in addition to) specifying particular files to interactively choose which hunks copy.   </p><p>It is also possible to jump over the stage and check out files directly from the history or commit files without staging first.   </p><p><img src="/assets/images/legacy/basic-usage-2.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/basic-usage-2.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="basic-usage-2"></p><ul><li><p><code>git commit -a</code> is equivalent to running git add on all filenames that existed in the latest commit, and then running git commit.   </p></li><li><p><code>git commit [files]</code> creates a new commit containing the contents of the latest commit, plus a snapshot of files taken from the working directory. Additionally, files are copied to the stage.   </p></li><li><p><code>git checkout HEAD -- [files]</code> copies files from the latest commit to both the stage and the working directory.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git Commands (3)</title>
      <link href="/2014/02/21/git-commands-3/"/>
      <url>/2014/02/21/git-commands-3/</url>
      
        <content type="html"><![CDATA[<h3 id="Redo-Commits"><a href="#Redo-Commits" class="headerlink" title="Redo Commits"></a>Redo Commits</h3><ul><li><p>Undo all commits after [commit], and preserve changes locally:<br><code>$ git reset [commit]</code>   </p></li><li><p>Discard all history and changes back to the specified commit:<br><code>$ git reset --hard [commit]</code></p></li></ul><span id="more"></span><h3 id="Save-Fragments"><a href="#Save-Fragments" class="headerlink" title="Save Fragments"></a>Save Fragments</h3><ul><li><p>Temporarily stores all modified <strong>tracked</strong> files:<br><code>$ git stash</code></p></li><li><p>Retore the most recently stashed files:<br><code>$ git stash pop</code></p></li><li><p>List all stashed changesets:<br><code>$ git stash list</code></p></li><li><p>Discard the most recently stashed changeset:<br><code>$ git stash drop</code></p></li></ul><h3 id="Synchronize-Changes"><a href="#Synchronize-Changes" class="headerlink" title="Synchronize Changes"></a>Synchronize Changes</h3><ul><li><p>Download all history from the repostory bookmark:<br><code>$ git fetch [bookmark]</code></p></li><li><p>Combine bookmarkâ€™s branch into current branch:<br><code>$ git merge [bookmark]/[branch]</code></p></li><li><p>Upload all local branch commits to Github:<br><code>$ git push [alias] [branch]</code></p></li><li><p>Downloads bookmark history and incorporates changes:<br><code>$ git pull</code></p></li><li><p>Copy a commit and create a new commit on the current branch with the same message and patch as another commit:<br><code>$ git cherry-pick [commit]</code></p></li><li><p>merge the version history of current branch onto another specified branch:<br><code>$ git rebase [branch]</code></p></li><li><p>merge the version history after specified commit of current branch onto another specified branch:<br><code>$ git rebase --onto [branch] [commit]</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git Commands (2)</title>
      <link href="/2014/02/09/git-commands-2/"/>
      <url>/2014/02/09/git-commands-2/</url>
      
        <content type="html"><![CDATA[<h3 id="Group-Changes"><a href="#Group-Changes" class="headerlink" title="Group Changes"></a>Group Changes</h3><ul><li><p>List all local branches in the current repository:<br><code>$ git branch</code>   </p></li><li><p>Create a new branch with specified name:<br><code>$ git branch [branch-new]</code>   </p></li><li><p>Switch to the specified branch and updates the working directory:<br><code>$ git checkout [branch-name]</code></p></li><li><p>Combine the specified branch to the current branch:<br><code>$ git merge [branch-name]</code></p></li><li><p>Delete the specified branch:<br><code>$ git branch -d [branch-name]</code></p></li></ul><span id="more"></span><h3 id="Suppress-Tracking"><a href="#Suppress-Tracking" class="headerlink" title="Suppress Tracking"></a>Suppress Tracking</h3><ul><li><p>A text file named <code>.gitigore</code> suppresses accidental versioning of files and paths matching the specified patterns, for example:<br><code>*.log temp-* dir/*</code><br>will ignore log file and started with temp- files and all files in dir directory.   </p></li><li><p>List all ignore files in this project:<br><code>$ git ls-files --other --ignored --exclude-standard</code></p></li></ul><h3 id="Review-History"><a href="#Review-History" class="headerlink" title="Review History"></a>Review History</h3><ul><li><p>List all version history for the current branch:<br><code>$ git log</code></p></li><li><p>List viewsion history for a single file, including rename:<br><code>$ git log --follow [file]</code></p></li><li><p>Show content differences between two branchs:<br><code>$ git diff [first-branch] [second-branch]</code></p></li><li><p>Output metadata and content changes of the specified name:<br><code>$ git show [commit]</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git Commands (1)</title>
      <link href="/2014/01/16/git-commands-1/"/>
      <url>/2014/01/16/git-commands-1/</url>
      
        <content type="html"><![CDATA[<h3 id="Configure"><a href="#Configure" class="headerlink" title="Configure"></a>Configure</h3><ul><li><p>Sets the name you want attached to your commit transactions:<br><code>$ git config --global user.name &quot;[name]&quot;</code>   </p></li><li><p>Sets the email you want attached to your commit transactions:<br><code>$ git config --global user.email &quot;[email]&quot;</code>   </p></li><li><p>Enable git color for command line output:<br><code>$ git config --global color.ui true</code></p></li></ul><span id="more"></span><h3 id="Create-Repositories"><a href="#Create-Repositories" class="headerlink" title="Create Repositories"></a>Create Repositories</h3><ul><li><p>Create a new repository with the specifical name, it will create a specified name directory with git:<br><code>$ git init [project-name]</code>   </p></li><li><p>Init current directory to git repository:<br><code>$ git init</code>   </p></li><li><p>Downloads a project by repository url:<br><code>$ git clone [url]</code>   </p></li><li><p>add local repository to remote repository:<br><code>$ git remote add [remote-name] [remote-repository-url]</code></p></li></ul><h3 id="Make-Changes"><a href="#Make-Changes" class="headerlink" title="Make Changes"></a>Make Changes</h3><ul><li><p>List all currently new or modified or deleted files:<br><code>$ git status</code>   </p></li><li><p>Show all differences of each modified file before staged:<br><code>$ git diff</code>   </p></li><li><p>Show differences of specified file before staged:<br><code>$ git diff [file]</code></p></li><li><p>Show differences of file between staging and the last file version:<br><code>$ git diff --staged</code>   </p></li><li><p>Add all new or modified files to snapshot for commit:<br><code>$ git add .</code> or <code>$ git add --all</code>   </p></li><li><p>Add specified file to stage for commit:<br><code>$ git add [file]</code>   </p></li><li><p>Discard the changes of specified file in working directory:<br><code>$ git checkout [file]</code>   </p></li><li><p>remove the file which has been deleted from local from stage:<br><code>$ git rm [file]</code>   </p></li><li><p>Removes the file from version control but preserves the file locally:<br><code>$ git rm --cached [file]</code></p></li><li><p>Change the file name and prepare it for commit:<br><code>$ git mv [file-original] [file-renamed]</code>   </p></li><li><p>Unstage the file, but preserve its content:<br><code>$ git reset [file]</code>   </p></li><li><p>Commit files which was newed or modified or deleted:<br><code>$ git commit -m&quot;[descriptive message]&quot;</code></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>What is Git</title>
      <link href="/2014/01/03/what-is-git/"/>
      <url>/2014/01/03/what-is-git/</url>
      
        <content type="html"><![CDATA[<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p><img src="/assets/images/legacy/git-logo.png" class="lazyload placeholder" data-srcset="/assets/images/legacy/git-logo.png" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Git"> is <code>open source distributed version control system</code> that allows a team of people to work together, all using the same files. And it helps the team cope with the confusion that tends to happen when multiple people are editing the same files.</p><span id="more"></span>   <p>And also <code>git</code> supplies the GUI client mode and command line mode. You can choose which you prefer to.   </p><h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><ul><li><p>GitHub for windows<br>You can go to offical website and download windows version as below address:<br><a href="https://windows.github.com/">https://windows.github.com</a></p></li><li><p>GitHub for Mac<br>Go to offical website and download mac version as below address:<br><a href="https://mac.github.com/">https://mac.github.com</a></p></li><li><p>Git for all platforms<br><code>Git</code> distributions for Linux and POSIX systems are available on the offical Git SCM web sit:<br><a href="http://git-scm.com/">http://git-scm.com</a></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>What is Andriod</title>
      <link href="/2013/10/03/what-is-andriod/"/>
      <url>/2013/10/03/what-is-andriod/</url>
      
        <content type="html"><![CDATA[<p><img src="/assets/images/legacy/android.jpg" class="lazyload placeholder" data-srcset="/assets/images/legacy/android.jpg" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="Andriod"><br><code>Andriod</code> is built on the open linux kernel. Furthermore, it utilizes a custom virtual machine that has been designed to optimize memory and hardware resource in a mobile environment.</p><span id="more"></span>   <p>And this virtual machine is called <code>Dalvik</code> virtual machine(<code>DalvikVM</code>), which is  a register based on virtual machine, designed and written by <em>Dan Bornstein</em> and some other Google engineers, itâ€™s an important part of the <code>Andriod</code> platform. And it differece to normal Java virtual machines(<code>JVM</code>) which are stack based.   </p><p>Developers can 100% customize their <code>Andriod-Device</code>. The <code>Andriod</code> System Communication is based on called <code>Intents</code>, which are more or less just a String(with some data attached) which defines an anction that needs to be handled.For example:   </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;android.provider.Telephony.SMS_RECEIVED&quot;</span><br></pre></td></tr></table></figure><p>If you want to develope <code>Andriod</code> applications, firstly you need to install the development tools just like <code>ADT</code>(Andriod Development Tools), you can download it  for mac from <a href="https://dl.google.com/android/adt/adt-bundle-mac-x86_64-20140702.zip">here</a>, or go to this <a href="http://developer.android.com/sdk/index.html">website</a> download it for other os.   </p><p>And you can visit the offical website of <code>Andriod</code> from <a href="http://developer.android.com/index.html">here</a>. There have some steps which can teach how to get started and how to develop an Andriod application, even supplies lots of application examples.   </p><p>So just enjoy it. Have your fun!</p>]]></content>
      
      
      <categories>
          
          <category> Mobile </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Backslash escapes in Markdown</title>
      <link href="/2013/07/03/backslash-escapes-in-markdown/"/>
      <url>/2013/07/03/backslash-escapes-in-markdown/</url>
      
        <content type="html"><![CDATA[<p><code>Markdown</code> allows you to use backslash to generate literal characters that possesses<br>special meaning in <code>Markdown</code> syntax.  </p><p><code>Markdown</code> provides backslash escapes for the following characters:  </p><blockquote><ul><li>\ blackslash</li><li>&#96; backtick</li><li>* asterisk</li><li>_ underscore</li><li>{} curly braces</li><li>[] square brackets</li><li>() parentheses</li><li># hash mark</li><li>+ push sign</li><li>- minus sign (hyphen)</li><li>. dot</li><li>! exclamation mark</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown syntax for span elements</title>
      <link href="/2013/06/24/markdown-syntax-for-span-elements/"/>
      <url>/2013/06/24/markdown-syntax-for-span-elements/</url>
      
        <content type="html"><![CDATA[<h3 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h3><p><code>Markdown</code> supports two styles for Links:  </p><ul><li><em>inline</em> <blockquote><p><em><strong>Syntax:</strong></em><br><code>[inline link text](www.inlinelink.com &quot;optional title&quot;)</code></p></blockquote><blockquote><p><em><strong>Effect:</strong></em><br><a href="www.inlinelink.com" title="optional title">inline link text</a></p></blockquote></li></ul><span id="more"></span><ul><li><em>reference</em><blockquote><p><em><strong>Syntax:</strong></em><br><code>[reference link text][id]</code><br><code>[id]: www.referencelink.com &quot;optional title&quot;</code></p></blockquote><blockquote><p><em><strong>Effect:</strong></em><br><a href="www.referencelink.com" title="optional title">reference link text</a></p></blockquote></li></ul><blockquote><p><em><strong>Note:</strong></em><br>The <code>optional title</code> is not necessary.  You can input it for your demand.<br>Link definitions can be placed anywhere in your <code>Markdown</code> document.</p></blockquote><h3 id="Emphasis"><a href="#Emphasis" class="headerlink" title="Emphasis"></a>Emphasis</h3><p><code>Markdown</code> uses asterisk(*) and underscore(_) symbol to wraps the text that you want to emphasis.  </p><ul><li><p>Use one symbol asterisk<code>*</code> or underscore<code>_</code> to wrap text, it will produce the <code>&lt; em&gt;</code> tag of HTML Tags.  </p><blockquote><p><em><strong>Syntax:</strong></em><br><code>*Sample Text*</code>  or <code>_Sample Text_</code></p></blockquote><blockquote><p><em><strong>Effect:</strong></em><br><em>Sample Text</em> or <em>Sample Text</em></p></blockquote></li><li><p>Use double symbols asterisk<code>*</code> or underscore<code>_</code>, it will produce the <code>&lt; strong&gt;</code> tag of HTML Tags.  </p><blockquote><p><em><strong>Syntax:</strong></em><br><code>**Sample Text**</code> or <code>__Sample Text__</code></p></blockquote><blockquote><p><em><strong>Effect:</strong></em><br><strong>Sample Text</strong> or <strong>Sample Text</strong></p></blockquote></li></ul><h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><p><code>Markdown</code> uses backtick quotes<code>`</code> to wrap the code text. It will produce the <code>&lt; code&gt;</code> tag of HTML tags.</p><blockquote><p><em><strong>Syntax:</strong></em><br><code>`Code statement`</code></p></blockquote><blockquote><p><em><strong>Effect:</strong></em><br><code>Code statement</code></p></blockquote><p>And if you want to wrap the backtick quote<code>`</code> symbol. you can use double backticks as the opening and closing delimiter.  </p><blockquote><p><em><strong>Syntax:</strong></em><br>` ` There is a literal backtick(`) here ` `</p></blockquote><blockquote><p><em><strong>Effect:</strong></em><br><code> There is a literal backtick(`) here</code></p></blockquote><h3 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h3><p><code>Markdown</code> uses an image syntax that is intended to resemble the syntax for links, allowing <em>inline</em> and <em>reference</em>  </p><ul><li><p><em>inline</em></p><blockquote><p><em><strong>Syntax:</strong></em><br><code>![alt text](http://daringfireball.net/graphics/logos/ &quot;optional title&quot;)</code>  </p></blockquote><blockquote><p><em><strong>Effect:</strong></em><br><img src="http://daringfireball.net/graphics/logos/" class="lazyload placeholder" data-srcset="http://daringfireball.net/graphics/logos/" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="alt text" title="optional title"></p></blockquote></li><li><p><em>reference</em></p><blockquote><p><em><strong>Syntax:</strong></em><br><code>![alt text][id]</code><br><code>[id]:http://daringfireball.net/graphics/logos/ &quot;optional title&quot;</code>  </p></blockquote><blockquote><p><em><strong>Effect:</strong></em><br><img src="http://daringfireball.net/graphics/logos/" class="lazyload placeholder" data-srcset="http://daringfireball.net/graphics/logos/" srcset="https://pic1.zhimg.com/v2-cd38920285d125be80b3eb504052c550_b.webp" alt="alt text" title="optional title"></p></blockquote></li></ul><blockquote><p><em><strong>Note:</strong></em><br><code>Markdown</code> has no syntax for specifying the dimensions of an image; if this is important to you, you can simply use regular HTML <code>&lt; img&gt;</code> tags.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>What editor tools used for Markdown</title>
      <link href="/2013/05/21/what-editor-tools-used-for-markdown/"/>
      <url>/2013/05/21/what-editor-tools-used-for-markdown/</url>
      
        <content type="html"><![CDATA[<p>There have many editor tools for Markdown now, but we just recommend a few of popular tools for you. You can choose it which you like. Hope it will be helpful for you.</p><h3 id="Online-tools"><a href="#Online-tools" class="headerlink" title="Online tools"></a>Online tools</h3><ul><li><p><a href="https://stackedit.io/">StackEdit</a></p><p>   In browser Markdown editor, it supplies many commands to create Markdown syntax instead of type it manually. And also it have supported many other functions, for example import, export and manage Markdown files.</p></li></ul><span id="more"></span><ul><li><p><a href="http://dillinger.io/">Dillinger</a></p><p>  Itâ€™s online Markdown editor too,  but it supports functions less than <code>StackEdit</code> supports. Oh, one interesting things, you can change the theme whatever you like.</p></li></ul><blockquote><p><em><strong>Tip:</strong></em></p></blockquote><blockquote><p>Strongly recommend use <code>StackEdit</code> online editor. It supports almost all very useful functions for you. Trust me, you will like it. Just try it out. And one more thing, this blog is written with <code>StackEdit</code>.</p></blockquote><h3 id="Local-tools"><a href="#Local-tools" class="headerlink" title="Local tools"></a>Local tools</h3><ul><li><p><a href="http://markdownpad.com/">MarkdownPad</a></p><p>  It supplies many keyboard shortcuts and menu tools. </p></li><li><p><a href="http://sourceforge.net/p/retext/home/ReText/">ReText</a></p><p>  It can export the edited content to <code>PDF</code>, <code>OCD</code>, <code>HTML</code> and plain text file.</p></li><li><p><a href="http://mouapp.com/">Mou</a></p><p>  Mou is a epic Markdown editor on Mac. It supports almost all useful functions.</p></li><li><p><a href="http://cloose.github.io/CuteMarkEd">CuteMarkEd</a></p><p>  It supplies real time view content and math expression</p></li><li><p><a href="http://code52.org/DownmarkerWPF/">MarkPad</a></p><p>  Itâ€™s a open source Markdown editor. And it use windows 8 metro style.</p></li><li><p><a href="http://pad.haroopress.com/user.html">Haroopad</a></p><p>  It cover three popular system, Windows, Mac OS X, Linux. Strongly recommend use it under Linux system.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdonw syntax for block elements</title>
      <link href="/2013/05/11/markdonw-syntax-for-block-elements/"/>
      <url>/2013/05/11/markdonw-syntax-for-block-elements/</url>
      
        <content type="html"><![CDATA[<h3 id="Line-breaks"><a href="#Line-breaks" class="headerlink" title="Line breaks"></a>Line breaks</h3><p>Markdown canâ€™t break line automatically in paragraph. The break line is a break tag <code>&lt; br /&gt;</code> in HTML. If you want to break line in paragraph, you need to <code>end a line with two or more spaces</code>, then type return.  </p><span id="more"></span><h3 id="Heads"><a href="#Heads" class="headerlink" title="Heads"></a>Heads</h3><p>Markdown supports two styles for heads, one style is Setext, another is atx.  </p><ul><li>Setext style headers are â€œunderlinedâ€ using equal signs <code>=</code> (for <code>first-level-headers</code>) and using dashed signs <code>-</code> (for <code>second-level-headers</code>).</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">This is an H1</span><br><span class="line">====</span><br><span class="line">This is an H2</span><br><span class="line">----</span><br></pre></td></tr></table></figure><ul><li>Atx style headers use 1 to 6 hash characters <code>#</code> at the start of the line, corresponding to header levels 1-6.</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># This is an H1</span><br><span class="line">## This is an H2</span><br><span class="line">###### This is an H6</span><br></pre></td></tr></table></figure><h3 id="Blockquotes"><a href="#Blockquotes" class="headerlink" title="Blockquotes"></a>Blockquotes</h3><p>Just put a <code>&gt;</code> symbol before each line, like this:  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; This is a blockquote line </span><br></pre></td></tr></table></figure><p>You can put the symbol <code>&gt;</code> before the first line of a hard-wrapped paragraph.<br>And also blockquotes can be nested (i.e. a blackquote-in-a-blackquote) by adding additional levels of the symbol <code>&gt;</code>  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; This is first level blockquote</span><br><span class="line">&gt; &gt; This is nested blockquote </span><br></pre></td></tr></table></figure><p>Blockquotes can contains other Markdown elements, including header, list, and codeblocks.  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; # This is an H1</span><br><span class="line">&gt; - This is first list item</span><br><span class="line">&gt; - This is second list item</span><br></pre></td></tr></table></figure><h3 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h3><p>Markdown supports ordered (numbered) and unordered (bulleted) lists.  </p><ul><li>Unordered lists use asterisks <code>*</code>, pluses <code>+</code>, hyphens <code>-</code> before each list line.</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* item1</span><br><span class="line">* item2</span><br><span class="line">+ item3</span><br><span class="line">- item4</span><br></pre></td></tr></table></figure><ul><li>Ordered list user numbers followed by each line:</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. item1</span><br><span class="line">2. item2</span><br><span class="line">3. item3</span><br></pre></td></tr></table></figure><blockquote><p><em><strong>Note:</strong></em><br>If you want a ordered list, you need use ordinal numbers in you ordered Markdown lists, and start 1 at first item.  </p></blockquote><h3 id="Code-blocks"><a href="#Code-blocks" class="headerlink" title="Code blocks"></a>Code blocks</h3><p>Pre-formatted code blocks are used fro programming or other markup source code, rather than forming normal paragraph.  </p><p>Itsâ€™ very simple to produce code blocks, just indent every line of block at least 4 spaces or 1 tab.  </p><pre><code>This codeblock use 1 tab to generate</code></pre><h3 id="Horizontal-rules"><a href="#Horizontal-rules" class="headerlink" title="Horizontal rules"></a>Horizontal rules</h3><p>The horizontal rule tag &lt; hr &#x2F;&gt; is used to divide up and down content.  and you can place at least three asterisks <code>*</code>, hyphens <code>-</code>, or underscores <code>_</code> on a line by themselves.  </p><pre><code>-----*****_____</code></pre>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>What is Markdown</title>
      <link href="/2013/04/14/what-is-markdown/"/>
      <url>/2013/04/14/what-is-markdown/</url>
      
        <content type="html"><![CDATA[<p>Markdown is a <strong>text-to-HTML</strong> conversion tool for web writer. It can convert plain text format to  valid <code>XHTML</code>(or <code>HTML</code>) structure that can be represented by browser.</p><span id="more"></span><p>Markdown is very easy to read, very easy to write plain text format. Even though for these people who donâ€™t know web technique. </p><p>Thus, Markdown is two things:</p><blockquote><ul><li>A  plain text formatting syntax.</li></ul></blockquote><blockquote><ul><li>A software tool, written by Perl, and converts plain text format to HTML.</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
